function G4(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function dM(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(e,r);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var KI={exports:{}},Cy={},QI={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em=Symbol.for("react.element"),H4=Symbol.for("react.portal"),V4=Symbol.for("react.fragment"),W4=Symbol.for("react.strict_mode"),j4=Symbol.for("react.profiler"),J4=Symbol.for("react.provider"),X4=Symbol.for("react.context"),Y4=Symbol.for("react.forward_ref"),K4=Symbol.for("react.suspense"),Q4=Symbol.for("react.memo"),Z4=Symbol.for("react.lazy"),B2=Symbol.iterator;function q4(n){return n===null||typeof n!="object"?null:(n=B2&&n[B2]||n["@@iterator"],typeof n=="function"?n:null)}var ZI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qI=Object.assign,$I={};function uh(n,e,t){this.props=n,this.context=e,this.refs=$I,this.updater=t||ZI}uh.prototype.isReactComponent={};uh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};uh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function eB(){}eB.prototype=uh.prototype;function pM(n,e,t){this.props=n,this.context=e,this.refs=$I,this.updater=t||ZI}var mM=pM.prototype=new eB;mM.constructor=pM;qI(mM,uh.prototype);mM.isPureReactComponent=!0;var D2=Array.isArray,tB=Object.prototype.hasOwnProperty,gM={current:null},nB={key:!0,ref:!0,__self:!0,__source:!0};function iB(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)tB.call(e,i)&&!nB.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:em,type:n,key:s,ref:o,props:r,_owner:gM.current}}function $4(n,e){return{$$typeof:em,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function vM(n){return typeof n=="object"&&n!==null&&n.$$typeof===em}function eN(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var L2=/\/+/g;function O_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?eN(""+n.key):e.toString(36)}function q0(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case em:case H4:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+O_(o,0):i,D2(r)?(t="",n!=null&&(t=n.replace(L2,"$&/")+"/"),q0(r,e,t,"",function(c){return c})):r!=null&&(vM(r)&&(r=$4(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(L2,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",D2(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+O_(s,a);o+=q0(s,e,t,l,r)}else if(l=q4(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+O_(s,a++),o+=q0(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bg(n,e,t){if(n==null)return n;var i=[],r=0;return q0(n,i,"","",function(s){return e.call(t,s,r++)}),i}function tN(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var fr={current:null},$0={transition:null},nN={ReactCurrentDispatcher:fr,ReactCurrentBatchConfig:$0,ReactCurrentOwner:gM};Wt.Children={map:bg,forEach:function(n,e,t){bg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return bg(n,function(){e++}),e},toArray:function(n){return bg(n,function(e){return e})||[]},only:function(n){if(!vM(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Wt.Component=uh;Wt.Fragment=V4;Wt.Profiler=j4;Wt.PureComponent=pM;Wt.StrictMode=W4;Wt.Suspense=K4;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nN;Wt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=qI({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gM.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)tB.call(e,l)&&!nB.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:em,type:n.type,key:r,ref:s,props:i,_owner:o}};Wt.createContext=function(n){return n={$$typeof:X4,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:J4,_context:n},n.Consumer=n};Wt.createElement=iB;Wt.createFactory=function(n){var e=iB.bind(null,n);return e.type=n,e};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(n){return{$$typeof:Y4,render:n}};Wt.isValidElement=vM;Wt.lazy=function(n){return{$$typeof:Z4,_payload:{_status:-1,_result:n},_init:tN}};Wt.memo=function(n,e){return{$$typeof:Q4,type:n,compare:e===void 0?null:e}};Wt.startTransition=function(n){var e=$0.transition;$0.transition={};try{n()}finally{$0.transition=e}};Wt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Wt.useCallback=function(n,e){return fr.current.useCallback(n,e)};Wt.useContext=function(n){return fr.current.useContext(n)};Wt.useDebugValue=function(){};Wt.useDeferredValue=function(n){return fr.current.useDeferredValue(n)};Wt.useEffect=function(n,e){return fr.current.useEffect(n,e)};Wt.useId=function(){return fr.current.useId()};Wt.useImperativeHandle=function(n,e,t){return fr.current.useImperativeHandle(n,e,t)};Wt.useInsertionEffect=function(n,e){return fr.current.useInsertionEffect(n,e)};Wt.useLayoutEffect=function(n,e){return fr.current.useLayoutEffect(n,e)};Wt.useMemo=function(n,e){return fr.current.useMemo(n,e)};Wt.useReducer=function(n,e,t){return fr.current.useReducer(n,e,t)};Wt.useRef=function(n){return fr.current.useRef(n)};Wt.useState=function(n){return fr.current.useState(n)};Wt.useSyncExternalStore=function(n,e,t){return fr.current.useSyncExternalStore(n,e,t)};Wt.useTransition=function(){return fr.current.useTransition()};Wt.version="18.2.0";QI.exports=Wt;var L=QI.exports;const Bn=Zc(L),iN=G4({__proto__:null,default:Bn},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rN=L,sN=Symbol.for("react.element"),oN=Symbol.for("react.fragment"),aN=Object.prototype.hasOwnProperty,lN=rN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cN={key:!0,ref:!0,__self:!0,__source:!0};function rB(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)aN.call(e,i)&&!cN.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:sN,type:n,key:s,ref:o,props:r,_owner:lN.current}}Cy.Fragment=oN;Cy.jsx=rB;Cy.jsxs=rB;KI.exports=Cy;var yM=KI.exports;const wn=yM.Fragment,W=yM.jsx,Ge=yM.jsxs,uN=Object.freeze(Object.defineProperty({__proto__:null,Fragment:wn,jsx:W,jsxs:Ge},Symbol.toStringTag,{value:"Module"}));var LS={},sB={exports:{}},jr={},oB={exports:{}},aB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(H,J){var Q=H.length;H.push(J);e:for(;0<Q;){var U=Q-1>>>1,V=H[U];if(0<r(V,J))H[U]=J,H[Q]=V,Q=U;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var J=H[0],Q=H.pop();if(Q!==J){H[0]=Q;e:for(var U=0,V=H.length,Z=V>>>1;U<Z;){var K=2*(U+1)-1,ne=H[K],z=K+1,ae=H[z];if(0>r(ne,Q))z<V&&0>r(ae,ne)?(H[U]=ae,H[z]=Q,U=z):(H[U]=ne,H[K]=Q,U=K);else if(z<V&&0>r(ae,Q))H[U]=ae,H[z]=Q,U=z;else break e}}return J}function r(H,J){var Q=H.sortIndex-J.sortIndex;return Q!==0?Q:H.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,m=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var J=t(c);J!==null;){if(J.callback===null)i(c);else if(J.startTime<=H)i(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(c)}}function A(H){if(v=!1,S(H),!g)if(t(l)!==null)g=!0,te(C);else{var J=t(c);J!==null&&oe(A,J.startTime-H)}}function C(H,J){g=!1,v&&(v=!1,x(E),E=-1),m=!0;var Q=d;try{for(S(J),f=t(l);f!==null&&(!(f.expirationTime>J)||H&&!O());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var V=U(f.expirationTime<=J);J=n.unstable_now(),typeof V=="function"?f.callback=V:f===t(l)&&i(l),S(J)}else i(l);f=t(l)}if(f!==null)var Z=!0;else{var K=t(c);K!==null&&oe(A,K.startTime-J),Z=!1}return Z}finally{f=null,d=Q,m=!1}}var b=!1,P=null,E=-1,R=5,B=-1;function O(){return!(n.unstable_now()-B<R)}function G(){if(P!==null){var H=n.unstable_now();B=H;var J=!0;try{J=P(!0,H)}finally{J?N():(b=!1,P=null)}}else b=!1}var N;if(typeof y=="function")N=function(){y(G)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,X=k.port2;k.port1.onmessage=G,N=function(){X.postMessage(null)}}else N=function(){_(G,0)};function te(H){P=H,b||(b=!0,N())}function oe(H,J){E=_(function(){H(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,te(C))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(H){switch(d){case 1:case 2:case 3:var J=3;break;default:J=d}var Q=d;d=J;try{return H()}finally{d=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=d;d=H;try{return J()}finally{d=Q}},n.unstable_scheduleCallback=function(H,J,Q){var U=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?U+Q:U):Q=U,H){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Q+V,H={id:u++,callback:J,priorityLevel:H,startTime:Q,expirationTime:V,sortIndex:-1},Q>U?(H.sortIndex=Q,e(c,H),t(l)===null&&H===t(c)&&(v?(x(E),E=-1):v=!0,oe(A,Q-U))):(H.sortIndex=V,e(l,H),g||m||(g=!0,te(C))),H},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(H){var J=d;return function(){var Q=d;d=J;try{return H.apply(this,arguments)}finally{d=Q}}}})(aB);oB.exports=aB;var fN=oB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lB=L,Wr=fN;function We(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cB=new Set,pp={};function qc(n,e){zf(n,e),zf(n+"Capture",e)}function zf(n,e){for(pp[n]=e,n=0;n<e.length;n++)cB.add(e[n])}var sa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),OS=Object.prototype.hasOwnProperty,hN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O2={},k2={};function dN(n){return OS.call(k2,n)?!0:OS.call(O2,n)?!1:hN.test(n)?k2[n]=!0:(O2[n]=!0,!1)}function pN(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function mN(n,e,t,i){if(e===null||typeof e>"u"||pN(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hr(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Oi[n]=new hr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Oi[e]=new hr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Oi[n]=new hr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Oi[n]=new hr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Oi[n]=new hr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Oi[n]=new hr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Oi[n]=new hr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Oi[n]=new hr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Oi[n]=new hr(n,5,!1,n.toLowerCase(),null,!1,!1)});var _M=/[\-:]([a-z])/g;function xM(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(_M,xM);Oi[e]=new hr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(_M,xM);Oi[e]=new hr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(_M,xM);Oi[e]=new hr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Oi[n]=new hr(n,1,!1,n.toLowerCase(),null,!1,!1)});Oi.xlinkHref=new hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Oi[n]=new hr(n,1,!1,n.toLowerCase(),null,!0,!0)});function SM(n,e,t,i){var r=Oi.hasOwnProperty(e)?Oi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mN(e,t,r,i)&&(t=null),i||r===null?dN(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var ga=lB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tg=Symbol.for("react.element"),rf=Symbol.for("react.portal"),sf=Symbol.for("react.fragment"),wM=Symbol.for("react.strict_mode"),kS=Symbol.for("react.profiler"),uB=Symbol.for("react.provider"),fB=Symbol.for("react.context"),AM=Symbol.for("react.forward_ref"),FS=Symbol.for("react.suspense"),US=Symbol.for("react.suspense_list"),MM=Symbol.for("react.memo"),Wa=Symbol.for("react.lazy"),hB=Symbol.for("react.offscreen"),F2=Symbol.iterator;function $h(n){return n===null||typeof n!="object"?null:(n=F2&&n[F2]||n["@@iterator"],typeof n=="function"?n:null)}var Fn=Object.assign,k_;function Od(n){if(k_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);k_=e&&e[1]||""}return`
`+k_+n}var F_=!1;function U_(n,e){if(!n||F_)return"";F_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{F_=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Od(n):""}function gN(n){switch(n.tag){case 5:return Od(n.type);case 16:return Od("Lazy");case 13:return Od("Suspense");case 19:return Od("SuspenseList");case 0:case 2:case 15:return n=U_(n.type,!1),n;case 11:return n=U_(n.type.render,!1),n;case 1:return n=U_(n.type,!0),n;default:return""}}function NS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case sf:return"Fragment";case rf:return"Portal";case kS:return"Profiler";case wM:return"StrictMode";case FS:return"Suspense";case US:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case fB:return(n.displayName||"Context")+".Consumer";case uB:return(n._context.displayName||"Context")+".Provider";case AM:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case MM:return e=n.displayName||null,e!==null?e:NS(n.type)||"Memo";case Wa:e=n._payload,n=n._init;try{return NS(n(e))}catch{}}return null}function vN(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return NS(e);case 8:return e===wM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function dB(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yN(n){var e=dB(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Pg(n){n._valueTracker||(n._valueTracker=yN(n))}function pB(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=dB(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Bv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function zS(n,e){var t=e.checked;return Fn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function U2(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=vl(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mB(n,e){e=e.checked,e!=null&&SM(n,"checked",e,!1)}function GS(n,e){mB(n,e);var t=vl(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?HS(n,e.type,t):e.hasOwnProperty("defaultValue")&&HS(n,e.type,vl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function N2(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function HS(n,e,t){(e!=="number"||Bv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var kd=Array.isArray;function Ef(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+vl(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function VS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(We(91));return Fn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function z2(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(We(92));if(kd(t)){if(1<t.length)throw Error(We(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:vl(t)}}function gB(n,e){var t=vl(e.value),i=vl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function G2(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function vB(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function WS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?vB(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Rg,yB=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Rg=Rg||document.createElement("div"),Rg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function mp(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Yd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_N=["Webkit","ms","Moz","O"];Object.keys(Yd).forEach(function(n){_N.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Yd[e]=Yd[n]})});function _B(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Yd.hasOwnProperty(n)&&Yd[n]?(""+e).trim():e+"px"}function xB(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=_B(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var xN=Fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jS(n,e){if(e){if(xN[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(We(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(We(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(We(61))}if(e.style!=null&&typeof e.style!="object")throw Error(We(62))}}function JS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XS=null;function CM(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var YS=null,bf=null,Tf=null;function H2(n){if(n=im(n)){if(typeof YS!="function")throw Error(We(280));var e=n.stateNode;e&&(e=Ry(e),YS(n.stateNode,n.type,e))}}function SB(n){bf?Tf?Tf.push(n):Tf=[n]:bf=n}function wB(){if(bf){var n=bf,e=Tf;if(Tf=bf=null,H2(n),e)for(n=0;n<e.length;n++)H2(e[n])}}function AB(n,e){return n(e)}function MB(){}var N_=!1;function CB(n,e,t){if(N_)return n(e,t);N_=!0;try{return AB(n,e,t)}finally{N_=!1,(bf!==null||Tf!==null)&&(MB(),wB())}}function gp(n,e){var t=n.stateNode;if(t===null)return null;var i=Ry(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(We(231,e,typeof t));return t}var KS=!1;if(sa)try{var ed={};Object.defineProperty(ed,"passive",{get:function(){KS=!0}}),window.addEventListener("test",ed,ed),window.removeEventListener("test",ed,ed)}catch{KS=!1}function SN(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Kd=!1,Dv=null,Lv=!1,QS=null,wN={onError:function(n){Kd=!0,Dv=n}};function AN(n,e,t,i,r,s,o,a,l){Kd=!1,Dv=null,SN.apply(wN,arguments)}function MN(n,e,t,i,r,s,o,a,l){if(AN.apply(this,arguments),Kd){if(Kd){var c=Dv;Kd=!1,Dv=null}else throw Error(We(198));Lv||(Lv=!0,QS=c)}}function $c(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function EB(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function V2(n){if($c(n)!==n)throw Error(We(188))}function CN(n){var e=n.alternate;if(!e){if(e=$c(n),e===null)throw Error(We(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return V2(r),n;if(s===i)return V2(r),e;s=s.sibling}throw Error(We(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(We(189))}}if(t.alternate!==i)throw Error(We(190))}if(t.tag!==3)throw Error(We(188));return t.stateNode.current===t?n:e}function bB(n){return n=CN(n),n!==null?TB(n):null}function TB(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=TB(n);if(e!==null)return e;n=n.sibling}return null}var PB=Wr.unstable_scheduleCallback,W2=Wr.unstable_cancelCallback,EN=Wr.unstable_shouldYield,bN=Wr.unstable_requestPaint,Kn=Wr.unstable_now,TN=Wr.unstable_getCurrentPriorityLevel,EM=Wr.unstable_ImmediatePriority,RB=Wr.unstable_UserBlockingPriority,Ov=Wr.unstable_NormalPriority,PN=Wr.unstable_LowPriority,IB=Wr.unstable_IdlePriority,Ey=null,yo=null;function RN(n){if(yo&&typeof yo.onCommitFiberRoot=="function")try{yo.onCommitFiberRoot(Ey,n,void 0,(n.current.flags&128)===128)}catch{}}var Gs=Math.clz32?Math.clz32:DN,IN=Math.log,BN=Math.LN2;function DN(n){return n>>>=0,n===0?32:31-(IN(n)/BN|0)|0}var Ig=64,Bg=4194304;function Fd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function kv(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Fd(a):(s&=o,s!==0&&(i=Fd(s)))}else o=t&~r,o!==0?i=Fd(o):s!==0&&(i=Fd(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Gs(e),r=1<<t,i|=n[t],e&=~r;return i}function LN(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ON(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Gs(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=LN(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function ZS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function BB(){var n=Ig;return Ig<<=1,!(Ig&4194240)&&(Ig=64),n}function z_(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function tm(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Gs(e),n[e]=t}function kN(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Gs(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function bM(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Gs(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var on=0;function DB(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var LB,TM,OB,kB,FB,qS=!1,Dg=[],nl=null,il=null,rl=null,vp=new Map,yp=new Map,Ya=[],FN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function j2(n,e){switch(n){case"focusin":case"focusout":nl=null;break;case"dragenter":case"dragleave":il=null;break;case"mouseover":case"mouseout":rl=null;break;case"pointerover":case"pointerout":vp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yp.delete(e.pointerId)}}function td(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=im(e),e!==null&&TM(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function UN(n,e,t,i,r){switch(e){case"focusin":return nl=td(nl,n,e,t,i,r),!0;case"dragenter":return il=td(il,n,e,t,i,r),!0;case"mouseover":return rl=td(rl,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return vp.set(s,td(vp.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,yp.set(s,td(yp.get(s)||null,n,e,t,i,r)),!0}return!1}function UB(n){var e=mc(n.target);if(e!==null){var t=$c(e);if(t!==null){if(e=t.tag,e===13){if(e=EB(t),e!==null){n.blockedOn=e,FB(n.priority,function(){OB(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ev(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=$S(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);XS=i,t.target.dispatchEvent(i),XS=null}else return e=im(t),e!==null&&TM(e),n.blockedOn=t,!1;e.shift()}return!0}function J2(n,e,t){ev(n)&&t.delete(e)}function NN(){qS=!1,nl!==null&&ev(nl)&&(nl=null),il!==null&&ev(il)&&(il=null),rl!==null&&ev(rl)&&(rl=null),vp.forEach(J2),yp.forEach(J2)}function nd(n,e){n.blockedOn===e&&(n.blockedOn=null,qS||(qS=!0,Wr.unstable_scheduleCallback(Wr.unstable_NormalPriority,NN)))}function _p(n){function e(r){return nd(r,n)}if(0<Dg.length){nd(Dg[0],n);for(var t=1;t<Dg.length;t++){var i=Dg[t];i.blockedOn===n&&(i.blockedOn=null)}}for(nl!==null&&nd(nl,n),il!==null&&nd(il,n),rl!==null&&nd(rl,n),vp.forEach(e),yp.forEach(e),t=0;t<Ya.length;t++)i=Ya[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Ya.length&&(t=Ya[0],t.blockedOn===null);)UB(t),t.blockedOn===null&&Ya.shift()}var Pf=ga.ReactCurrentBatchConfig,Fv=!0;function zN(n,e,t,i){var r=on,s=Pf.transition;Pf.transition=null;try{on=1,PM(n,e,t,i)}finally{on=r,Pf.transition=s}}function GN(n,e,t,i){var r=on,s=Pf.transition;Pf.transition=null;try{on=4,PM(n,e,t,i)}finally{on=r,Pf.transition=s}}function PM(n,e,t,i){if(Fv){var r=$S(n,e,t,i);if(r===null)Q_(n,e,i,Uv,t),j2(n,i);else if(UN(r,n,e,t,i))i.stopPropagation();else if(j2(n,i),e&4&&-1<FN.indexOf(n)){for(;r!==null;){var s=im(r);if(s!==null&&LB(s),s=$S(n,e,t,i),s===null&&Q_(n,e,i,Uv,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Q_(n,e,i,null,t)}}var Uv=null;function $S(n,e,t,i){if(Uv=null,n=CM(i),n=mc(n),n!==null)if(e=$c(n),e===null)n=null;else if(t=e.tag,t===13){if(n=EB(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Uv=n,null}function NB(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TN()){case EM:return 1;case RB:return 4;case Ov:case PN:return 16;case IB:return 536870912;default:return 16}default:return 16}}var Qa=null,RM=null,tv=null;function zB(){if(tv)return tv;var n,e=RM,t=e.length,i,r="value"in Qa?Qa.value:Qa.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return tv=r.slice(n,1<i?1-i:void 0)}function nv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Lg(){return!0}function X2(){return!1}function Jr(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Lg:X2,this.isPropagationStopped=X2,this}return Fn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Lg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Lg)},persist:function(){},isPersistent:Lg}),e}var fh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},IM=Jr(fh),nm=Fn({},fh,{view:0,detail:0}),HN=Jr(nm),G_,H_,id,by=Fn({},nm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:BM,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==id&&(id&&n.type==="mousemove"?(G_=n.screenX-id.screenX,H_=n.screenY-id.screenY):H_=G_=0,id=n),G_)},movementY:function(n){return"movementY"in n?n.movementY:H_}}),Y2=Jr(by),VN=Fn({},by,{dataTransfer:0}),WN=Jr(VN),jN=Fn({},nm,{relatedTarget:0}),V_=Jr(jN),JN=Fn({},fh,{animationName:0,elapsedTime:0,pseudoElement:0}),XN=Jr(JN),YN=Fn({},fh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),KN=Jr(YN),QN=Fn({},fh,{data:0}),K2=Jr(QN),ZN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$N={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e5(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=$N[n])?!!e[n]:!1}function BM(){return e5}var t5=Fn({},nm,{key:function(n){if(n.key){var e=ZN[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=nv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?qN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:BM,charCode:function(n){return n.type==="keypress"?nv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?nv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),n5=Jr(t5),i5=Fn({},by,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Q2=Jr(i5),r5=Fn({},nm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:BM}),s5=Jr(r5),o5=Fn({},fh,{propertyName:0,elapsedTime:0,pseudoElement:0}),a5=Jr(o5),l5=Fn({},by,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),c5=Jr(l5),u5=[9,13,27,32],DM=sa&&"CompositionEvent"in window,Qd=null;sa&&"documentMode"in document&&(Qd=document.documentMode);var f5=sa&&"TextEvent"in window&&!Qd,GB=sa&&(!DM||Qd&&8<Qd&&11>=Qd),Z2=String.fromCharCode(32),q2=!1;function HB(n,e){switch(n){case"keyup":return u5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VB(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var of=!1;function h5(n,e){switch(n){case"compositionend":return VB(e);case"keypress":return e.which!==32?null:(q2=!0,Z2);case"textInput":return n=e.data,n===Z2&&q2?null:n;default:return null}}function d5(n,e){if(of)return n==="compositionend"||!DM&&HB(n,e)?(n=zB(),tv=RM=Qa=null,of=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GB&&e.locale!=="ko"?null:e.data;default:return null}}var p5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!p5[n.type]:e==="textarea"}function WB(n,e,t,i){SB(i),e=Nv(e,"onChange"),0<e.length&&(t=new IM("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Zd=null,xp=null;function m5(n){tD(n,0)}function Ty(n){var e=cf(n);if(pB(e))return n}function g5(n,e){if(n==="change")return e}var jB=!1;if(sa){var W_;if(sa){var j_="oninput"in document;if(!j_){var eT=document.createElement("div");eT.setAttribute("oninput","return;"),j_=typeof eT.oninput=="function"}W_=j_}else W_=!1;jB=W_&&(!document.documentMode||9<document.documentMode)}function tT(){Zd&&(Zd.detachEvent("onpropertychange",JB),xp=Zd=null)}function JB(n){if(n.propertyName==="value"&&Ty(xp)){var e=[];WB(e,xp,n,CM(n)),CB(m5,e)}}function v5(n,e,t){n==="focusin"?(tT(),Zd=e,xp=t,Zd.attachEvent("onpropertychange",JB)):n==="focusout"&&tT()}function y5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ty(xp)}function _5(n,e){if(n==="click")return Ty(e)}function x5(n,e){if(n==="input"||n==="change")return Ty(e)}function S5(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ws=typeof Object.is=="function"?Object.is:S5;function Sp(n,e){if(Ws(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!OS.call(e,r)||!Ws(n[r],e[r]))return!1}return!0}function nT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function iT(n,e){var t=nT(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=nT(t)}}function XB(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?XB(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function YB(){for(var n=window,e=Bv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Bv(n.document)}return e}function LM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function w5(n){var e=YB(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&XB(t.ownerDocument.documentElement,t)){if(i!==null&&LM(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=iT(t,s);var o=iT(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var A5=sa&&"documentMode"in document&&11>=document.documentMode,af=null,ew=null,qd=null,tw=!1;function rT(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;tw||af==null||af!==Bv(i)||(i=af,"selectionStart"in i&&LM(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),qd&&Sp(qd,i)||(qd=i,i=Nv(ew,"onSelect"),0<i.length&&(e=new IM("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=af)))}function Og(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var lf={animationend:Og("Animation","AnimationEnd"),animationiteration:Og("Animation","AnimationIteration"),animationstart:Og("Animation","AnimationStart"),transitionend:Og("Transition","TransitionEnd")},J_={},KB={};sa&&(KB=document.createElement("div").style,"AnimationEvent"in window||(delete lf.animationend.animation,delete lf.animationiteration.animation,delete lf.animationstart.animation),"TransitionEvent"in window||delete lf.transitionend.transition);function Py(n){if(J_[n])return J_[n];if(!lf[n])return n;var e=lf[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in KB)return J_[n]=e[t];return n}var QB=Py("animationend"),ZB=Py("animationiteration"),qB=Py("animationstart"),$B=Py("transitionend"),eD=new Map,sT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cl(n,e){eD.set(n,e),qc(e,[n])}for(var X_=0;X_<sT.length;X_++){var Y_=sT[X_],M5=Y_.toLowerCase(),C5=Y_[0].toUpperCase()+Y_.slice(1);Cl(M5,"on"+C5)}Cl(QB,"onAnimationEnd");Cl(ZB,"onAnimationIteration");Cl(qB,"onAnimationStart");Cl("dblclick","onDoubleClick");Cl("focusin","onFocus");Cl("focusout","onBlur");Cl($B,"onTransitionEnd");zf("onMouseEnter",["mouseout","mouseover"]);zf("onMouseLeave",["mouseout","mouseover"]);zf("onPointerEnter",["pointerout","pointerover"]);zf("onPointerLeave",["pointerout","pointerover"]);qc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qc("onBeforeInput",["compositionend","keypress","textInput","paste"]);qc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ud="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ud));function oT(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,MN(i,e,void 0,n),n.currentTarget=null}function tD(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;oT(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;oT(r,a,c),s=l}}}if(Lv)throw n=QS,Lv=!1,QS=null,n}function xn(n,e){var t=e[ow];t===void 0&&(t=e[ow]=new Set);var i=n+"__bubble";t.has(i)||(nD(e,n,2,!1),t.add(i))}function K_(n,e,t){var i=0;e&&(i|=4),nD(t,n,i,e)}var kg="_reactListening"+Math.random().toString(36).slice(2);function wp(n){if(!n[kg]){n[kg]=!0,cB.forEach(function(t){t!=="selectionchange"&&(E5.has(t)||K_(t,!1,n),K_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[kg]||(e[kg]=!0,K_("selectionchange",!1,e))}}function nD(n,e,t,i){switch(NB(e)){case 1:var r=zN;break;case 4:r=GN;break;default:r=PM}t=r.bind(null,e,t,n),r=void 0,!KS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Q_(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=mc(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}CB(function(){var c=s,u=CM(t),f=[];e:{var d=eD.get(n);if(d!==void 0){var m=IM,g=n;switch(n){case"keypress":if(nv(t)===0)break e;case"keydown":case"keyup":m=n5;break;case"focusin":g="focus",m=V_;break;case"focusout":g="blur",m=V_;break;case"beforeblur":case"afterblur":m=V_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Y2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=WN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=s5;break;case QB:case ZB:case qB:m=XN;break;case $B:m=a5;break;case"scroll":m=HN;break;case"wheel":m=c5;break;case"copy":case"cut":case"paste":m=KN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Q2}var v=(e&4)!==0,_=!v&&n==="scroll",x=v?d!==null?d+"Capture":null:d;v=[];for(var y=c,S;y!==null;){S=y;var A=S.stateNode;if(S.tag===5&&A!==null&&(S=A,x!==null&&(A=gp(y,x),A!=null&&v.push(Ap(y,A,S)))),_)break;y=y.return}0<v.length&&(d=new m(d,g,null,t,u),f.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",d&&t!==XS&&(g=t.relatedTarget||t.fromElement)&&(mc(g)||g[oa]))break e;if((m||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=c,g=g?mc(g):null,g!==null&&(_=$c(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(v=Y2,A="onMouseLeave",x="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(v=Q2,A="onPointerLeave",x="onPointerEnter",y="pointer"),_=m==null?d:cf(m),S=g==null?d:cf(g),d=new v(A,y+"leave",m,t,u),d.target=_,d.relatedTarget=S,A=null,mc(u)===c&&(v=new v(x,y+"enter",g,t,u),v.target=S,v.relatedTarget=_,A=v),_=A,m&&g)t:{for(v=m,x=g,y=0,S=v;S;S=Eu(S))y++;for(S=0,A=x;A;A=Eu(A))S++;for(;0<y-S;)v=Eu(v),y--;for(;0<S-y;)x=Eu(x),S--;for(;y--;){if(v===x||x!==null&&v===x.alternate)break t;v=Eu(v),x=Eu(x)}v=null}else v=null;m!==null&&aT(f,d,m,v,!1),g!==null&&_!==null&&aT(f,_,g,v,!0)}}e:{if(d=c?cf(c):window,m=d.nodeName&&d.nodeName.toLowerCase(),m==="select"||m==="input"&&d.type==="file")var C=g5;else if($2(d))if(jB)C=x5;else{C=y5;var b=v5}else(m=d.nodeName)&&m.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(C=_5);if(C&&(C=C(n,c))){WB(f,C,t,u);break e}b&&b(n,d,c),n==="focusout"&&(b=d._wrapperState)&&b.controlled&&d.type==="number"&&HS(d,"number",d.value)}switch(b=c?cf(c):window,n){case"focusin":($2(b)||b.contentEditable==="true")&&(af=b,ew=c,qd=null);break;case"focusout":qd=ew=af=null;break;case"mousedown":tw=!0;break;case"contextmenu":case"mouseup":case"dragend":tw=!1,rT(f,t,u);break;case"selectionchange":if(A5)break;case"keydown":case"keyup":rT(f,t,u)}var P;if(DM)e:{switch(n){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else of?HB(n,t)&&(E="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(GB&&t.locale!=="ko"&&(of||E!=="onCompositionStart"?E==="onCompositionEnd"&&of&&(P=zB()):(Qa=u,RM="value"in Qa?Qa.value:Qa.textContent,of=!0)),b=Nv(c,E),0<b.length&&(E=new K2(E,n,null,t,u),f.push({event:E,listeners:b}),P?E.data=P:(P=VB(t),P!==null&&(E.data=P)))),(P=f5?h5(n,t):d5(n,t))&&(c=Nv(c,"onBeforeInput"),0<c.length&&(u=new K2("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=P))}tD(f,e)})}function Ap(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Nv(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=gp(n,t),s!=null&&i.unshift(Ap(n,s,r)),s=gp(n,e),s!=null&&i.push(Ap(n,s,r))),n=n.return}return i}function Eu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function aT(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=gp(t,s),l!=null&&o.unshift(Ap(t,l,a))):r||(l=gp(t,s),l!=null&&o.push(Ap(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var b5=/\r\n?/g,T5=/\u0000|\uFFFD/g;function lT(n){return(typeof n=="string"?n:""+n).replace(b5,`
`).replace(T5,"")}function Fg(n,e,t){if(e=lT(e),lT(n)!==e&&t)throw Error(We(425))}function zv(){}var nw=null,iw=null;function rw(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sw=typeof setTimeout=="function"?setTimeout:void 0,P5=typeof clearTimeout=="function"?clearTimeout:void 0,cT=typeof Promise=="function"?Promise:void 0,R5=typeof queueMicrotask=="function"?queueMicrotask:typeof cT<"u"?function(n){return cT.resolve(null).then(n).catch(I5)}:sw;function I5(n){setTimeout(function(){throw n})}function Z_(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),_p(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);_p(e)}function sl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function uT(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var hh=Math.random().toString(36).slice(2),po="__reactFiber$"+hh,Mp="__reactProps$"+hh,oa="__reactContainer$"+hh,ow="__reactEvents$"+hh,B5="__reactListeners$"+hh,D5="__reactHandles$"+hh;function mc(n){var e=n[po];if(e)return e;for(var t=n.parentNode;t;){if(e=t[oa]||t[po]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=uT(n);n!==null;){if(t=n[po])return t;n=uT(n)}return e}n=t,t=n.parentNode}return null}function im(n){return n=n[po]||n[oa],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function cf(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(We(33))}function Ry(n){return n[Mp]||null}var aw=[],uf=-1;function El(n){return{current:n}}function An(n){0>uf||(n.current=aw[uf],aw[uf]=null,uf--)}function vn(n,e){uf++,aw[uf]=n.current,n.current=e}var yl={},Yi=El(yl),wr=El(!1),Fc=yl;function Gf(n,e){var t=n.type.contextTypes;if(!t)return yl;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Ar(n){return n=n.childContextTypes,n!=null}function Gv(){An(wr),An(Yi)}function fT(n,e,t){if(Yi.current!==yl)throw Error(We(168));vn(Yi,e),vn(wr,t)}function iD(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(We(108,vN(n)||"Unknown",r));return Fn({},t,i)}function Hv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||yl,Fc=Yi.current,vn(Yi,n),vn(wr,wr.current),!0}function hT(n,e,t){var i=n.stateNode;if(!i)throw Error(We(169));t?(n=iD(n,e,Fc),i.__reactInternalMemoizedMergedChildContext=n,An(wr),An(Yi),vn(Yi,n)):An(wr),vn(wr,t)}var Jo=null,Iy=!1,q_=!1;function rD(n){Jo===null?Jo=[n]:Jo.push(n)}function L5(n){Iy=!0,rD(n)}function bl(){if(!q_&&Jo!==null){q_=!0;var n=0,e=on;try{var t=Jo;for(on=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Jo=null,Iy=!1}catch(r){throw Jo!==null&&(Jo=Jo.slice(n+1)),PB(EM,bl),r}finally{on=e,q_=!1}}return null}var ff=[],hf=0,Vv=null,Wv=0,us=[],fs=0,Uc=null,Qo=1,Zo="";function oc(n,e){ff[hf++]=Wv,ff[hf++]=Vv,Vv=n,Wv=e}function sD(n,e,t){us[fs++]=Qo,us[fs++]=Zo,us[fs++]=Uc,Uc=n;var i=Qo;n=Zo;var r=32-Gs(i)-1;i&=~(1<<r),t+=1;var s=32-Gs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Qo=1<<32-Gs(e)+r|t<<r|i,Zo=s+n}else Qo=1<<s|t<<r|i,Zo=n}function OM(n){n.return!==null&&(oc(n,1),sD(n,1,0))}function kM(n){for(;n===Vv;)Vv=ff[--hf],ff[hf]=null,Wv=ff[--hf],ff[hf]=null;for(;n===Uc;)Uc=us[--fs],us[fs]=null,Zo=us[--fs],us[fs]=null,Qo=us[--fs],us[fs]=null}var Hr=null,zr=null,Tn=!1,Ls=null;function oD(n,e){var t=ms(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function dT(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Hr=n,zr=sl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Hr=n,zr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Uc!==null?{id:Qo,overflow:Zo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ms(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Hr=n,zr=null,!0):!1;default:return!1}}function lw(n){return(n.mode&1)!==0&&(n.flags&128)===0}function cw(n){if(Tn){var e=zr;if(e){var t=e;if(!dT(n,e)){if(lw(n))throw Error(We(418));e=sl(t.nextSibling);var i=Hr;e&&dT(n,e)?oD(i,t):(n.flags=n.flags&-4097|2,Tn=!1,Hr=n)}}else{if(lw(n))throw Error(We(418));n.flags=n.flags&-4097|2,Tn=!1,Hr=n}}}function pT(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Hr=n}function Ug(n){if(n!==Hr)return!1;if(!Tn)return pT(n),Tn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!rw(n.type,n.memoizedProps)),e&&(e=zr)){if(lw(n))throw aD(),Error(We(418));for(;e;)oD(n,e),e=sl(e.nextSibling)}if(pT(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(We(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){zr=sl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}zr=null}}else zr=Hr?sl(n.stateNode.nextSibling):null;return!0}function aD(){for(var n=zr;n;)n=sl(n.nextSibling)}function Hf(){zr=Hr=null,Tn=!1}function FM(n){Ls===null?Ls=[n]:Ls.push(n)}var O5=ga.ReactCurrentBatchConfig;function Rs(n,e){if(n&&n.defaultProps){e=Fn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var jv=El(null),Jv=null,df=null,UM=null;function NM(){UM=df=Jv=null}function zM(n){var e=jv.current;An(jv),n._currentValue=e}function uw(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Rf(n,e){Jv=n,UM=df=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(xr=!0),n.firstContext=null)}function xs(n){var e=n._currentValue;if(UM!==n)if(n={context:n,memoizedValue:e,next:null},df===null){if(Jv===null)throw Error(We(308));df=n,Jv.dependencies={lanes:0,firstContext:n}}else df=df.next=n;return e}var gc=null;function GM(n){gc===null?gc=[n]:gc.push(n)}function lD(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,GM(e)):(t.next=r.next,r.next=t),e.interleaved=t,aa(n,i)}function aa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ja=!1;function HM(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cD(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ta(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ol(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Zt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,aa(n,t)}return r=i.interleaved,r===null?(e.next=e,GM(i)):(e.next=r.next,r.next=e),i.interleaved=e,aa(n,t)}function iv(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,bM(n,t)}}function mT(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Xv(n,e,t,i){var r=n.updateQueue;ja=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,m=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,v=a;switch(d=e,m=t,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(m,f,d);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,d=typeof g=="function"?g.call(m,f,d):g,d==null)break e;f=Fn({},f,d);break e;case 2:ja=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else m={eventTime:m,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(1);if(u===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);zc|=o,n.lanes=o,n.memoizedState=f}}function gT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(We(191,r));r.call(i)}}}var uD=new lB.Component().refs;function fw(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Fn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var By={isMounted:function(n){return(n=n._reactInternals)?$c(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=cr(),r=ll(n),s=ta(i,r);s.payload=e,t!=null&&(s.callback=t),e=ol(n,s,r),e!==null&&(Hs(e,n,r,i),iv(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=cr(),r=ll(n),s=ta(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=ol(n,s,r),e!==null&&(Hs(e,n,r,i),iv(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=cr(),i=ll(n),r=ta(t,i);r.tag=2,e!=null&&(r.callback=e),e=ol(n,r,i),e!==null&&(Hs(e,n,i,t),iv(e,n,i))}};function vT(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Sp(t,i)||!Sp(r,s):!0}function fD(n,e,t){var i=!1,r=yl,s=e.contextType;return typeof s=="object"&&s!==null?s=xs(s):(r=Ar(e)?Fc:Yi.current,i=e.contextTypes,s=(i=i!=null)?Gf(n,r):yl),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=By,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function yT(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&By.enqueueReplaceState(e,e.state,null)}function hw(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=uD,HM(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=xs(s):(s=Ar(e)?Fc:Yi.current,r.context=Gf(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(fw(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&By.enqueueReplaceState(r,r.state,null),Xv(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function rd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(We(309));var i=t.stateNode}if(!i)throw Error(We(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===uD&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(We(284));if(!t._owner)throw Error(We(290,n))}return n}function Ng(n,e){throw n=Object.prototype.toString.call(e),Error(We(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function _T(n){var e=n._init;return e(n._payload)}function hD(n){function e(x,y){if(n){var S=x.deletions;S===null?(x.deletions=[y],x.flags|=16):S.push(y)}}function t(x,y){if(!n)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function i(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function r(x,y){return x=cl(x,y),x.index=0,x.sibling=null,x}function s(x,y,S){return x.index=S,n?(S=x.alternate,S!==null?(S=S.index,S<y?(x.flags|=2,y):S):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return n&&x.alternate===null&&(x.flags|=2),x}function a(x,y,S,A){return y===null||y.tag!==6?(y=sx(S,x.mode,A),y.return=x,y):(y=r(y,S),y.return=x,y)}function l(x,y,S,A){var C=S.type;return C===sf?u(x,y,S.props.children,A,S.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Wa&&_T(C)===y.type)?(A=r(y,S.props),A.ref=rd(x,y,S),A.return=x,A):(A=cv(S.type,S.key,S.props,null,x.mode,A),A.ref=rd(x,y,S),A.return=x,A)}function c(x,y,S,A){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=ox(S,x.mode,A),y.return=x,y):(y=r(y,S.children||[]),y.return=x,y)}function u(x,y,S,A,C){return y===null||y.tag!==7?(y=Ec(S,x.mode,A,C),y.return=x,y):(y=r(y,S),y.return=x,y)}function f(x,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=sx(""+y,x.mode,S),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Tg:return S=cv(y.type,y.key,y.props,null,x.mode,S),S.ref=rd(x,null,y),S.return=x,S;case rf:return y=ox(y,x.mode,S),y.return=x,y;case Wa:var A=y._init;return f(x,A(y._payload),S)}if(kd(y)||$h(y))return y=Ec(y,x.mode,S,null),y.return=x,y;Ng(x,y)}return null}function d(x,y,S,A){var C=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:a(x,y,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Tg:return S.key===C?l(x,y,S,A):null;case rf:return S.key===C?c(x,y,S,A):null;case Wa:return C=S._init,d(x,y,C(S._payload),A)}if(kd(S)||$h(S))return C!==null?null:u(x,y,S,A,null);Ng(x,S)}return null}function m(x,y,S,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return x=x.get(S)||null,a(y,x,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Tg:return x=x.get(A.key===null?S:A.key)||null,l(y,x,A,C);case rf:return x=x.get(A.key===null?S:A.key)||null,c(y,x,A,C);case Wa:var b=A._init;return m(x,y,S,b(A._payload),C)}if(kd(A)||$h(A))return x=x.get(S)||null,u(y,x,A,C,null);Ng(y,A)}return null}function g(x,y,S,A){for(var C=null,b=null,P=y,E=y=0,R=null;P!==null&&E<S.length;E++){P.index>E?(R=P,P=null):R=P.sibling;var B=d(x,P,S[E],A);if(B===null){P===null&&(P=R);break}n&&P&&B.alternate===null&&e(x,P),y=s(B,y,E),b===null?C=B:b.sibling=B,b=B,P=R}if(E===S.length)return t(x,P),Tn&&oc(x,E),C;if(P===null){for(;E<S.length;E++)P=f(x,S[E],A),P!==null&&(y=s(P,y,E),b===null?C=P:b.sibling=P,b=P);return Tn&&oc(x,E),C}for(P=i(x,P);E<S.length;E++)R=m(P,x,E,S[E],A),R!==null&&(n&&R.alternate!==null&&P.delete(R.key===null?E:R.key),y=s(R,y,E),b===null?C=R:b.sibling=R,b=R);return n&&P.forEach(function(O){return e(x,O)}),Tn&&oc(x,E),C}function v(x,y,S,A){var C=$h(S);if(typeof C!="function")throw Error(We(150));if(S=C.call(S),S==null)throw Error(We(151));for(var b=C=null,P=y,E=y=0,R=null,B=S.next();P!==null&&!B.done;E++,B=S.next()){P.index>E?(R=P,P=null):R=P.sibling;var O=d(x,P,B.value,A);if(O===null){P===null&&(P=R);break}n&&P&&O.alternate===null&&e(x,P),y=s(O,y,E),b===null?C=O:b.sibling=O,b=O,P=R}if(B.done)return t(x,P),Tn&&oc(x,E),C;if(P===null){for(;!B.done;E++,B=S.next())B=f(x,B.value,A),B!==null&&(y=s(B,y,E),b===null?C=B:b.sibling=B,b=B);return Tn&&oc(x,E),C}for(P=i(x,P);!B.done;E++,B=S.next())B=m(P,x,E,B.value,A),B!==null&&(n&&B.alternate!==null&&P.delete(B.key===null?E:B.key),y=s(B,y,E),b===null?C=B:b.sibling=B,b=B);return n&&P.forEach(function(G){return e(x,G)}),Tn&&oc(x,E),C}function _(x,y,S,A){if(typeof S=="object"&&S!==null&&S.type===sf&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Tg:e:{for(var C=S.key,b=y;b!==null;){if(b.key===C){if(C=S.type,C===sf){if(b.tag===7){t(x,b.sibling),y=r(b,S.props.children),y.return=x,x=y;break e}}else if(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Wa&&_T(C)===b.type){t(x,b.sibling),y=r(b,S.props),y.ref=rd(x,b,S),y.return=x,x=y;break e}t(x,b);break}else e(x,b);b=b.sibling}S.type===sf?(y=Ec(S.props.children,x.mode,A,S.key),y.return=x,x=y):(A=cv(S.type,S.key,S.props,null,x.mode,A),A.ref=rd(x,y,S),A.return=x,x=A)}return o(x);case rf:e:{for(b=S.key;y!==null;){if(y.key===b)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){t(x,y.sibling),y=r(y,S.children||[]),y.return=x,x=y;break e}else{t(x,y);break}else e(x,y);y=y.sibling}y=ox(S,x.mode,A),y.return=x,x=y}return o(x);case Wa:return b=S._init,_(x,y,b(S._payload),A)}if(kd(S))return g(x,y,S,A);if($h(S))return v(x,y,S,A);Ng(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(t(x,y.sibling),y=r(y,S),y.return=x,x=y):(t(x,y),y=sx(S,x.mode,A),y.return=x,x=y),o(x)):t(x,y)}return _}var Vf=hD(!0),dD=hD(!1),rm={},_o=El(rm),Cp=El(rm),Ep=El(rm);function vc(n){if(n===rm)throw Error(We(174));return n}function VM(n,e){switch(vn(Ep,e),vn(Cp,n),vn(_o,rm),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:WS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=WS(e,n)}An(_o),vn(_o,e)}function Wf(){An(_o),An(Cp),An(Ep)}function pD(n){vc(Ep.current);var e=vc(_o.current),t=WS(e,n.type);e!==t&&(vn(Cp,n),vn(_o,t))}function WM(n){Cp.current===n&&(An(_o),An(Cp))}var In=El(0);function Yv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $_=[];function jM(){for(var n=0;n<$_.length;n++)$_[n]._workInProgressVersionPrimary=null;$_.length=0}var rv=ga.ReactCurrentDispatcher,ex=ga.ReactCurrentBatchConfig,Nc=0,kn=null,ui=null,Ai=null,Kv=!1,$d=!1,bp=0,k5=0;function Hi(){throw Error(We(321))}function JM(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ws(n[t],e[t]))return!1;return!0}function XM(n,e,t,i,r,s){if(Nc=s,kn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rv.current=n===null||n.memoizedState===null?z5:G5,n=t(i,r),$d){s=0;do{if($d=!1,bp=0,25<=s)throw Error(We(301));s+=1,Ai=ui=null,e.updateQueue=null,rv.current=H5,n=t(i,r)}while($d)}if(rv.current=Qv,e=ui!==null&&ui.next!==null,Nc=0,Ai=ui=kn=null,Kv=!1,e)throw Error(We(300));return n}function YM(){var n=bp!==0;return bp=0,n}function co(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ai===null?kn.memoizedState=Ai=n:Ai=Ai.next=n,Ai}function Ss(){if(ui===null){var n=kn.alternate;n=n!==null?n.memoizedState:null}else n=ui.next;var e=Ai===null?kn.memoizedState:Ai.next;if(e!==null)Ai=e,ui=n;else{if(n===null)throw Error(We(310));ui=n,n={memoizedState:ui.memoizedState,baseState:ui.baseState,baseQueue:ui.baseQueue,queue:ui.queue,next:null},Ai===null?kn.memoizedState=Ai=n:Ai=Ai.next=n}return Ai}function Tp(n,e){return typeof e=="function"?e(n):e}function tx(n){var e=Ss(),t=e.queue;if(t===null)throw Error(We(311));t.lastRenderedReducer=n;var i=ui,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Nc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,kn.lanes|=u,zc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Ws(i,e.memoizedState)||(xr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,kn.lanes|=s,zc|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function nx(n){var e=Ss(),t=e.queue;if(t===null)throw Error(We(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Ws(s,e.memoizedState)||(xr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function mD(){}function gD(n,e){var t=kn,i=Ss(),r=e(),s=!Ws(i.memoizedState,r);if(s&&(i.memoizedState=r,xr=!0),i=i.queue,KM(_D.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Ai!==null&&Ai.memoizedState.tag&1){if(t.flags|=2048,Pp(9,yD.bind(null,t,i,r,e),void 0,null),Ci===null)throw Error(We(349));Nc&30||vD(t,e,r)}return r}function vD(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=kn.updateQueue,e===null?(e={lastEffect:null,stores:null},kn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function yD(n,e,t,i){e.value=t,e.getSnapshot=i,xD(e)&&SD(n)}function _D(n,e,t){return t(function(){xD(e)&&SD(n)})}function xD(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ws(n,t)}catch{return!0}}function SD(n){var e=aa(n,1);e!==null&&Hs(e,n,1,-1)}function xT(n){var e=co();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:n},e.queue=n,n=n.dispatch=N5.bind(null,kn,n),[e.memoizedState,n]}function Pp(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=kn.updateQueue,e===null?(e={lastEffect:null,stores:null},kn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function wD(){return Ss().memoizedState}function sv(n,e,t,i){var r=co();kn.flags|=n,r.memoizedState=Pp(1|e,t,void 0,i===void 0?null:i)}function Dy(n,e,t,i){var r=Ss();i=i===void 0?null:i;var s=void 0;if(ui!==null){var o=ui.memoizedState;if(s=o.destroy,i!==null&&JM(i,o.deps)){r.memoizedState=Pp(e,t,s,i);return}}kn.flags|=n,r.memoizedState=Pp(1|e,t,s,i)}function ST(n,e){return sv(8390656,8,n,e)}function KM(n,e){return Dy(2048,8,n,e)}function AD(n,e){return Dy(4,2,n,e)}function MD(n,e){return Dy(4,4,n,e)}function CD(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function ED(n,e,t){return t=t!=null?t.concat([n]):null,Dy(4,4,CD.bind(null,e,n),t)}function QM(){}function bD(n,e){var t=Ss();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&JM(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function TD(n,e){var t=Ss();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&JM(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function PD(n,e,t){return Nc&21?(Ws(t,e)||(t=BB(),kn.lanes|=t,zc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,xr=!0),n.memoizedState=t)}function F5(n,e){var t=on;on=t!==0&&4>t?t:4,n(!0);var i=ex.transition;ex.transition={};try{n(!1),e()}finally{on=t,ex.transition=i}}function RD(){return Ss().memoizedState}function U5(n,e,t){var i=ll(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},ID(n))BD(e,t);else if(t=lD(n,e,t,i),t!==null){var r=cr();Hs(t,n,i,r),DD(t,e,i)}}function N5(n,e,t){var i=ll(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(ID(n))BD(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Ws(a,o)){var l=e.interleaved;l===null?(r.next=r,GM(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=lD(n,e,r,i),t!==null&&(r=cr(),Hs(t,n,i,r),DD(t,e,i))}}function ID(n){var e=n.alternate;return n===kn||e!==null&&e===kn}function BD(n,e){$d=Kv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function DD(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,bM(n,t)}}var Qv={readContext:xs,useCallback:Hi,useContext:Hi,useEffect:Hi,useImperativeHandle:Hi,useInsertionEffect:Hi,useLayoutEffect:Hi,useMemo:Hi,useReducer:Hi,useRef:Hi,useState:Hi,useDebugValue:Hi,useDeferredValue:Hi,useTransition:Hi,useMutableSource:Hi,useSyncExternalStore:Hi,useId:Hi,unstable_isNewReconciler:!1},z5={readContext:xs,useCallback:function(n,e){return co().memoizedState=[n,e===void 0?null:e],n},useContext:xs,useEffect:ST,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,sv(4194308,4,CD.bind(null,e,n),t)},useLayoutEffect:function(n,e){return sv(4194308,4,n,e)},useInsertionEffect:function(n,e){return sv(4,2,n,e)},useMemo:function(n,e){var t=co();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=co();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=U5.bind(null,kn,n),[i.memoizedState,n]},useRef:function(n){var e=co();return n={current:n},e.memoizedState=n},useState:xT,useDebugValue:QM,useDeferredValue:function(n){return co().memoizedState=n},useTransition:function(){var n=xT(!1),e=n[0];return n=F5.bind(null,n[1]),co().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=kn,r=co();if(Tn){if(t===void 0)throw Error(We(407));t=t()}else{if(t=e(),Ci===null)throw Error(We(349));Nc&30||vD(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,ST(_D.bind(null,i,s,n),[n]),i.flags|=2048,Pp(9,yD.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=co(),e=Ci.identifierPrefix;if(Tn){var t=Zo,i=Qo;t=(i&~(1<<32-Gs(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=bp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=k5++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},G5={readContext:xs,useCallback:bD,useContext:xs,useEffect:KM,useImperativeHandle:ED,useInsertionEffect:AD,useLayoutEffect:MD,useMemo:TD,useReducer:tx,useRef:wD,useState:function(){return tx(Tp)},useDebugValue:QM,useDeferredValue:function(n){var e=Ss();return PD(e,ui.memoizedState,n)},useTransition:function(){var n=tx(Tp)[0],e=Ss().memoizedState;return[n,e]},useMutableSource:mD,useSyncExternalStore:gD,useId:RD,unstable_isNewReconciler:!1},H5={readContext:xs,useCallback:bD,useContext:xs,useEffect:KM,useImperativeHandle:ED,useInsertionEffect:AD,useLayoutEffect:MD,useMemo:TD,useReducer:nx,useRef:wD,useState:function(){return nx(Tp)},useDebugValue:QM,useDeferredValue:function(n){var e=Ss();return ui===null?e.memoizedState=n:PD(e,ui.memoizedState,n)},useTransition:function(){var n=nx(Tp)[0],e=Ss().memoizedState;return[n,e]},useMutableSource:mD,useSyncExternalStore:gD,useId:RD,unstable_isNewReconciler:!1};function jf(n,e){try{var t="",i=e;do t+=gN(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function ix(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function dw(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var V5=typeof WeakMap=="function"?WeakMap:Map;function LD(n,e,t){t=ta(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){qv||(qv=!0,Aw=i),dw(n,e)},t}function OD(n,e,t){t=ta(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){dw(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){dw(n,e),typeof i!="function"&&(al===null?al=new Set([this]):al.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function wT(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new V5;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=iz.bind(null,n,e,t),e.then(n,n))}function AT(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function MT(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ta(-1,1),e.tag=2,ol(t,e,1))),t.lanes|=1),n)}var W5=ga.ReactCurrentOwner,xr=!1;function lr(n,e,t,i){e.child=n===null?dD(e,null,t,i):Vf(e,n.child,t,i)}function CT(n,e,t,i,r){t=t.render;var s=e.ref;return Rf(e,r),i=XM(n,e,t,i,s,r),t=YM(),n!==null&&!xr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,la(n,e,r)):(Tn&&t&&OM(e),e.flags|=1,lr(n,e,i,r),e.child)}function ET(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!rC(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,kD(n,e,s,i,r)):(n=cv(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Sp,t(o,i)&&n.ref===e.ref)return la(n,e,r)}return e.flags|=1,n=cl(s,i),n.ref=e.ref,n.return=e,e.child=n}function kD(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Sp(s,i)&&n.ref===e.ref)if(xr=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(xr=!0);else return e.lanes=n.lanes,la(n,e,r)}return pw(n,e,t,i,r)}function FD(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},vn(mf,Fr),Fr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,vn(mf,Fr),Fr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,vn(mf,Fr),Fr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,vn(mf,Fr),Fr|=i;return lr(n,e,r,t),e.child}function UD(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function pw(n,e,t,i,r){var s=Ar(t)?Fc:Yi.current;return s=Gf(e,s),Rf(e,r),t=XM(n,e,t,i,s,r),i=YM(),n!==null&&!xr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,la(n,e,r)):(Tn&&i&&OM(e),e.flags|=1,lr(n,e,t,r),e.child)}function bT(n,e,t,i,r){if(Ar(t)){var s=!0;Hv(e)}else s=!1;if(Rf(e,r),e.stateNode===null)ov(n,e),fD(e,t,i),hw(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=xs(c):(c=Ar(t)?Fc:Yi.current,c=Gf(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&yT(e,o,i,c),ja=!1;var d=e.memoizedState;o.state=d,Xv(e,i,o,r),l=e.memoizedState,a!==i||d!==l||wr.current||ja?(typeof u=="function"&&(fw(e,t,u,i),l=e.memoizedState),(a=ja||vT(e,t,a,i,d,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,cD(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Rs(e.type,a),o.props=c,f=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=xs(l):(l=Ar(t)?Fc:Yi.current,l=Gf(e,l));var m=t.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&yT(e,o,i,l),ja=!1,d=e.memoizedState,o.state=d,Xv(e,i,o,r);var g=e.memoizedState;a!==f||d!==g||wr.current||ja?(typeof m=="function"&&(fw(e,t,m,i),g=e.memoizedState),(c=ja||vT(e,t,c,i,d,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),i=!1)}return mw(n,e,t,i,s,r)}function mw(n,e,t,i,r,s){UD(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&hT(e,t,!1),la(n,e,s);i=e.stateNode,W5.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Vf(e,n.child,null,s),e.child=Vf(e,null,a,s)):lr(n,e,a,s),e.memoizedState=i.state,r&&hT(e,t,!0),e.child}function ND(n){var e=n.stateNode;e.pendingContext?fT(n,e.pendingContext,e.pendingContext!==e.context):e.context&&fT(n,e.context,!1),VM(n,e.containerInfo)}function TT(n,e,t,i,r){return Hf(),FM(r),e.flags|=256,lr(n,e,t,i),e.child}var gw={dehydrated:null,treeContext:null,retryLane:0};function vw(n){return{baseLanes:n,cachePool:null,transitions:null}}function zD(n,e,t){var i=e.pendingProps,r=In.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),vn(In,r&1),n===null)return cw(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ky(o,i,0,null),n=Ec(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=vw(t),e.memoizedState=gw,n):ZM(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return j5(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=cl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=cl(a,s):(s=Ec(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?vw(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=gw,i}return s=n.child,n=s.sibling,i=cl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function ZM(n,e){return e=ky({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function zg(n,e,t,i){return i!==null&&FM(i),Vf(e,n.child,null,t),n=ZM(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function j5(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=ix(Error(We(422))),zg(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=ky({mode:"visible",children:i.children},r,0,null),s=Ec(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Vf(e,n.child,null,o),e.child.memoizedState=vw(o),e.memoizedState=gw,s);if(!(e.mode&1))return zg(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(We(419)),i=ix(s,i,void 0),zg(n,e,o,i)}if(a=(o&n.childLanes)!==0,xr||a){if(i=Ci,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,aa(n,r),Hs(i,n,r,-1))}return iC(),i=ix(Error(We(421))),zg(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=rz.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,zr=sl(r.nextSibling),Hr=e,Tn=!0,Ls=null,n!==null&&(us[fs++]=Qo,us[fs++]=Zo,us[fs++]=Uc,Qo=n.id,Zo=n.overflow,Uc=e),e=ZM(e,i.children),e.flags|=4096,e)}function PT(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),uw(n.return,e,t)}function rx(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function GD(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(lr(n,e,i.children,t),i=In.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&PT(n,t,e);else if(n.tag===19)PT(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(vn(In,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Yv(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),rx(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Yv(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}rx(e,!0,t,null,s);break;case"together":rx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ov(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function la(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),zc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(We(153));if(e.child!==null){for(n=e.child,t=cl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=cl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function J5(n,e,t){switch(e.tag){case 3:ND(e),Hf();break;case 5:pD(e);break;case 1:Ar(e.type)&&Hv(e);break;case 4:VM(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;vn(jv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(vn(In,In.current&1),e.flags|=128,null):t&e.child.childLanes?zD(n,e,t):(vn(In,In.current&1),n=la(n,e,t),n!==null?n.sibling:null);vn(In,In.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return GD(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),vn(In,In.current),i)break;return null;case 22:case 23:return e.lanes=0,FD(n,e,t)}return la(n,e,t)}var HD,yw,VD,WD;HD=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};yw=function(){};VD=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,vc(_o.current);var s=null;switch(t){case"input":r=zS(n,r),i=zS(n,i),s=[];break;case"select":r=Fn({},r,{value:void 0}),i=Fn({},i,{value:void 0}),s=[];break;case"textarea":r=VS(n,r),i=VS(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=zv)}jS(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(pp.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(pp.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};WD=function(n,e,t,i){t!==i&&(e.flags|=4)};function sd(n,e){if(!Tn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Vi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function X5(n,e,t){var i=e.pendingProps;switch(kM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(e),null;case 1:return Ar(e.type)&&Gv(),Vi(e),null;case 3:return i=e.stateNode,Wf(),An(wr),An(Yi),jM(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Ug(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ls!==null&&(Ew(Ls),Ls=null))),yw(n,e),Vi(e),null;case 5:WM(e);var r=vc(Ep.current);if(t=e.type,n!==null&&e.stateNode!=null)VD(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(We(166));return Vi(e),null}if(n=vc(_o.current),Ug(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[po]=e,i[Mp]=s,n=(e.mode&1)!==0,t){case"dialog":xn("cancel",i),xn("close",i);break;case"iframe":case"object":case"embed":xn("load",i);break;case"video":case"audio":for(r=0;r<Ud.length;r++)xn(Ud[r],i);break;case"source":xn("error",i);break;case"img":case"image":case"link":xn("error",i),xn("load",i);break;case"details":xn("toggle",i);break;case"input":U2(i,s),xn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},xn("invalid",i);break;case"textarea":z2(i,s),xn("invalid",i)}jS(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Fg(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Fg(i.textContent,a,n),r=["children",""+a]):pp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xn("scroll",i)}switch(t){case"input":Pg(i),N2(i,s,!0);break;case"textarea":Pg(i),G2(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=zv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=vB(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[po]=e,n[Mp]=i,HD(n,e,!1,!1),e.stateNode=n;e:{switch(o=JS(t,i),t){case"dialog":xn("cancel",n),xn("close",n),r=i;break;case"iframe":case"object":case"embed":xn("load",n),r=i;break;case"video":case"audio":for(r=0;r<Ud.length;r++)xn(Ud[r],n);r=i;break;case"source":xn("error",n),r=i;break;case"img":case"image":case"link":xn("error",n),xn("load",n),r=i;break;case"details":xn("toggle",n),r=i;break;case"input":U2(n,i),r=zS(n,i),xn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Fn({},i,{value:void 0}),xn("invalid",n);break;case"textarea":z2(n,i),r=VS(n,i),xn("invalid",n);break;default:r=i}jS(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?xB(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yB(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&mp(n,l):typeof l=="number"&&mp(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(pp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xn("scroll",n):l!=null&&SM(n,s,l,o))}switch(t){case"input":Pg(n),N2(n,i,!1);break;case"textarea":Pg(n),G2(n);break;case"option":i.value!=null&&n.setAttribute("value",""+vl(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Ef(n,!!i.multiple,s,!1):i.defaultValue!=null&&Ef(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=zv)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vi(e),null;case 6:if(n&&e.stateNode!=null)WD(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(We(166));if(t=vc(Ep.current),vc(_o.current),Ug(e)){if(i=e.stateNode,t=e.memoizedProps,i[po]=e,(s=i.nodeValue!==t)&&(n=Hr,n!==null))switch(n.tag){case 3:Fg(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Fg(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[po]=e,e.stateNode=i}return Vi(e),null;case 13:if(An(In),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Tn&&zr!==null&&e.mode&1&&!(e.flags&128))aD(),Hf(),e.flags|=98560,s=!1;else if(s=Ug(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(We(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(We(317));s[po]=e}else Hf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vi(e),s=!1}else Ls!==null&&(Ew(Ls),Ls=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||In.current&1?hi===0&&(hi=3):iC())),e.updateQueue!==null&&(e.flags|=4),Vi(e),null);case 4:return Wf(),yw(n,e),n===null&&wp(e.stateNode.containerInfo),Vi(e),null;case 10:return zM(e.type._context),Vi(e),null;case 17:return Ar(e.type)&&Gv(),Vi(e),null;case 19:if(An(In),s=e.memoizedState,s===null)return Vi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)sd(s,!1);else{if(hi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Yv(n),o!==null){for(e.flags|=128,sd(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return vn(In,In.current&1|2),e.child}n=n.sibling}s.tail!==null&&Kn()>Jf&&(e.flags|=128,i=!0,sd(s,!1),e.lanes=4194304)}else{if(!i)if(n=Yv(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),sd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Tn)return Vi(e),null}else 2*Kn()-s.renderingStartTime>Jf&&t!==1073741824&&(e.flags|=128,i=!0,sd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Kn(),e.sibling=null,t=In.current,vn(In,i?t&1|2:t&1),e):(Vi(e),null);case 22:case 23:return nC(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Fr&1073741824&&(Vi(e),e.subtreeFlags&6&&(e.flags|=8192)):Vi(e),null;case 24:return null;case 25:return null}throw Error(We(156,e.tag))}function Y5(n,e){switch(kM(e),e.tag){case 1:return Ar(e.type)&&Gv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Wf(),An(wr),An(Yi),jM(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return WM(e),null;case 13:if(An(In),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(We(340));Hf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return An(In),null;case 4:return Wf(),null;case 10:return zM(e.type._context),null;case 22:case 23:return nC(),null;case 24:return null;default:return null}}var Gg=!1,Ji=!1,K5=typeof WeakSet=="function"?WeakSet:Set,it=null;function pf(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Gn(n,e,i)}else t.current=null}function _w(n,e,t){try{t()}catch(i){Gn(n,e,i)}}var RT=!1;function Q5(n,e){if(nw=Fv,n=YB(),LM(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,d=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)d=f,f=m;for(;;){if(f===n)break t;if(d===t&&++c===r&&(a=o),d===s&&++u===i&&(l=o),(m=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(iw={focusedElem:n,selectionRange:t},Fv=!1,it=e;it!==null;)if(e=it,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,it=n;else for(;it!==null;){e=it;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,_=g.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Rs(e.type,v),_);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(We(163))}}catch(A){Gn(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,it=n;break}it=e.return}return g=RT,RT=!1,g}function ep(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&_w(e,t,s)}r=r.next}while(r!==i)}}function Ly(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function xw(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function jD(n){var e=n.alternate;e!==null&&(n.alternate=null,jD(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[po],delete e[Mp],delete e[ow],delete e[B5],delete e[D5])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function JD(n){return n.tag===5||n.tag===3||n.tag===4}function IT(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||JD(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sw(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=zv));else if(i!==4&&(n=n.child,n!==null))for(Sw(n,e,t),n=n.sibling;n!==null;)Sw(n,e,t),n=n.sibling}function ww(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(ww(n,e,t),n=n.sibling;n!==null;)ww(n,e,t),n=n.sibling}var Ii=null,Bs=!1;function La(n,e,t){for(t=t.child;t!==null;)XD(n,e,t),t=t.sibling}function XD(n,e,t){if(yo&&typeof yo.onCommitFiberUnmount=="function")try{yo.onCommitFiberUnmount(Ey,t)}catch{}switch(t.tag){case 5:Ji||pf(t,e);case 6:var i=Ii,r=Bs;Ii=null,La(n,e,t),Ii=i,Bs=r,Ii!==null&&(Bs?(n=Ii,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ii.removeChild(t.stateNode));break;case 18:Ii!==null&&(Bs?(n=Ii,t=t.stateNode,n.nodeType===8?Z_(n.parentNode,t):n.nodeType===1&&Z_(n,t),_p(n)):Z_(Ii,t.stateNode));break;case 4:i=Ii,r=Bs,Ii=t.stateNode.containerInfo,Bs=!0,La(n,e,t),Ii=i,Bs=r;break;case 0:case 11:case 14:case 15:if(!Ji&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&_w(t,e,o),r=r.next}while(r!==i)}La(n,e,t);break;case 1:if(!Ji&&(pf(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Gn(t,e,a)}La(n,e,t);break;case 21:La(n,e,t);break;case 22:t.mode&1?(Ji=(i=Ji)||t.memoizedState!==null,La(n,e,t),Ji=i):La(n,e,t);break;default:La(n,e,t)}}function BT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new K5),e.forEach(function(i){var r=sz.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Es(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ii=a.stateNode,Bs=!1;break e;case 3:Ii=a.stateNode.containerInfo,Bs=!0;break e;case 4:Ii=a.stateNode.containerInfo,Bs=!0;break e}a=a.return}if(Ii===null)throw Error(We(160));XD(s,o,r),Ii=null,Bs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Gn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YD(e,n),e=e.sibling}function YD(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Es(e,n),oo(n),i&4){try{ep(3,n,n.return),Ly(3,n)}catch(v){Gn(n,n.return,v)}try{ep(5,n,n.return)}catch(v){Gn(n,n.return,v)}}break;case 1:Es(e,n),oo(n),i&512&&t!==null&&pf(t,t.return);break;case 5:if(Es(e,n),oo(n),i&512&&t!==null&&pf(t,t.return),n.flags&32){var r=n.stateNode;try{mp(r,"")}catch(v){Gn(n,n.return,v)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&mB(r,s),JS(a,o);var c=JS(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?xB(r,f):u==="dangerouslySetInnerHTML"?yB(r,f):u==="children"?mp(r,f):SM(r,u,f,c)}switch(a){case"input":GS(r,s);break;case"textarea":gB(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ef(r,!!s.multiple,m,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ef(r,!!s.multiple,s.defaultValue,!0):Ef(r,!!s.multiple,s.multiple?[]:"",!1))}r[Mp]=s}catch(v){Gn(n,n.return,v)}}break;case 6:if(Es(e,n),oo(n),i&4){if(n.stateNode===null)throw Error(We(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(v){Gn(n,n.return,v)}}break;case 3:if(Es(e,n),oo(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{_p(e.containerInfo)}catch(v){Gn(n,n.return,v)}break;case 4:Es(e,n),oo(n);break;case 13:Es(e,n),oo(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(eC=Kn())),i&4&&BT(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Ji=(c=Ji)||u,Es(e,n),Ji=c):Es(e,n),oo(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(it=n,u=n.child;u!==null;){for(f=it=u;it!==null;){switch(d=it,m=d.child,d.tag){case 0:case 11:case 14:case 15:ep(4,d,d.return);break;case 1:pf(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){i=d,t=d.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Gn(i,t,v)}}break;case 5:pf(d,d.return);break;case 22:if(d.memoizedState!==null){LT(f);continue}}m!==null?(m.return=d,it=m):LT(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_B("display",o))}catch(v){Gn(n,n.return,v)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Gn(n,n.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Es(e,n),oo(n),i&4&&BT(n);break;case 21:break;default:Es(e,n),oo(n)}}function oo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(JD(t)){var i=t;break e}t=t.return}throw Error(We(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(mp(r,""),i.flags&=-33);var s=IT(n);ww(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=IT(n);Sw(n,a,o);break;default:throw Error(We(161))}}catch(l){Gn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Z5(n,e,t){it=n,KD(n)}function KD(n,e,t){for(var i=(n.mode&1)!==0;it!==null;){var r=it,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Gg;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Ji;a=Gg;var c=Ji;if(Gg=o,(Ji=l)&&!c)for(it=r;it!==null;)o=it,l=o.child,o.tag===22&&o.memoizedState!==null?OT(r):l!==null?(l.return=o,it=l):OT(r);for(;s!==null;)it=s,KD(s),s=s.sibling;it=r,Gg=a,Ji=c}DT(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,it=s):DT(n)}}function DT(n){for(;it!==null;){var e=it;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ji||Ly(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ji)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Rs(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gT(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}gT(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&_p(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(We(163))}Ji||e.flags&512&&xw(e)}catch(d){Gn(e,e.return,d)}}if(e===n){it=null;break}if(t=e.sibling,t!==null){t.return=e.return,it=t;break}it=e.return}}function LT(n){for(;it!==null;){var e=it;if(e===n){it=null;break}var t=e.sibling;if(t!==null){t.return=e.return,it=t;break}it=e.return}}function OT(n){for(;it!==null;){var e=it;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Ly(4,e)}catch(l){Gn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Gn(e,r,l)}}var s=e.return;try{xw(e)}catch(l){Gn(e,s,l)}break;case 5:var o=e.return;try{xw(e)}catch(l){Gn(e,o,l)}}}catch(l){Gn(e,e.return,l)}if(e===n){it=null;break}var a=e.sibling;if(a!==null){a.return=e.return,it=a;break}it=e.return}}var q5=Math.ceil,Zv=ga.ReactCurrentDispatcher,qM=ga.ReactCurrentOwner,ys=ga.ReactCurrentBatchConfig,Zt=0,Ci=null,ii=null,Di=0,Fr=0,mf=El(0),hi=0,Rp=null,zc=0,Oy=0,$M=0,tp=null,yr=null,eC=0,Jf=1/0,Wo=null,qv=!1,Aw=null,al=null,Hg=!1,Za=null,$v=0,np=0,Mw=null,av=-1,lv=0;function cr(){return Zt&6?Kn():av!==-1?av:av=Kn()}function ll(n){return n.mode&1?Zt&2&&Di!==0?Di&-Di:O5.transition!==null?(lv===0&&(lv=BB()),lv):(n=on,n!==0||(n=window.event,n=n===void 0?16:NB(n.type)),n):1}function Hs(n,e,t,i){if(50<np)throw np=0,Mw=null,Error(We(185));tm(n,t,i),(!(Zt&2)||n!==Ci)&&(n===Ci&&(!(Zt&2)&&(Oy|=t),hi===4&&Ka(n,Di)),Mr(n,i),t===1&&Zt===0&&!(e.mode&1)&&(Jf=Kn()+500,Iy&&bl()))}function Mr(n,e){var t=n.callbackNode;ON(n,e);var i=kv(n,n===Ci?Di:0);if(i===0)t!==null&&W2(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&W2(t),e===1)n.tag===0?L5(kT.bind(null,n)):rD(kT.bind(null,n)),R5(function(){!(Zt&6)&&bl()}),t=null;else{switch(DB(i)){case 1:t=EM;break;case 4:t=RB;break;case 16:t=Ov;break;case 536870912:t=IB;break;default:t=Ov}t=iL(t,QD.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function QD(n,e){if(av=-1,lv=0,Zt&6)throw Error(We(327));var t=n.callbackNode;if(If()&&n.callbackNode!==t)return null;var i=kv(n,n===Ci?Di:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=ey(n,i);else{e=i;var r=Zt;Zt|=2;var s=qD();(Ci!==n||Di!==e)&&(Wo=null,Jf=Kn()+500,Cc(n,e));do try{tz();break}catch(a){ZD(n,a)}while(1);NM(),Zv.current=s,Zt=r,ii!==null?e=0:(Ci=null,Di=0,e=hi)}if(e!==0){if(e===2&&(r=ZS(n),r!==0&&(i=r,e=Cw(n,r))),e===1)throw t=Rp,Cc(n,0),Ka(n,i),Mr(n,Kn()),t;if(e===6)Ka(n,i);else{if(r=n.current.alternate,!(i&30)&&!$5(r)&&(e=ey(n,i),e===2&&(s=ZS(n),s!==0&&(i=s,e=Cw(n,s))),e===1))throw t=Rp,Cc(n,0),Ka(n,i),Mr(n,Kn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(We(345));case 2:ac(n,yr,Wo);break;case 3:if(Ka(n,i),(i&130023424)===i&&(e=eC+500-Kn(),10<e)){if(kv(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){cr(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=sw(ac.bind(null,n,yr,Wo),e);break}ac(n,yr,Wo);break;case 4:if(Ka(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Gs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Kn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*q5(i/1960))-i,10<i){n.timeoutHandle=sw(ac.bind(null,n,yr,Wo),i);break}ac(n,yr,Wo);break;case 5:ac(n,yr,Wo);break;default:throw Error(We(329))}}}return Mr(n,Kn()),n.callbackNode===t?QD.bind(null,n):null}function Cw(n,e){var t=tp;return n.current.memoizedState.isDehydrated&&(Cc(n,e).flags|=256),n=ey(n,e),n!==2&&(e=yr,yr=t,e!==null&&Ew(e)),n}function Ew(n){yr===null?yr=n:yr.push.apply(yr,n)}function $5(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Ws(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ka(n,e){for(e&=~$M,e&=~Oy,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Gs(e),i=1<<t;n[t]=-1,e&=~i}}function kT(n){if(Zt&6)throw Error(We(327));If();var e=kv(n,0);if(!(e&1))return Mr(n,Kn()),null;var t=ey(n,e);if(n.tag!==0&&t===2){var i=ZS(n);i!==0&&(e=i,t=Cw(n,i))}if(t===1)throw t=Rp,Cc(n,0),Ka(n,e),Mr(n,Kn()),t;if(t===6)throw Error(We(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ac(n,yr,Wo),Mr(n,Kn()),null}function tC(n,e){var t=Zt;Zt|=1;try{return n(e)}finally{Zt=t,Zt===0&&(Jf=Kn()+500,Iy&&bl())}}function Gc(n){Za!==null&&Za.tag===0&&!(Zt&6)&&If();var e=Zt;Zt|=1;var t=ys.transition,i=on;try{if(ys.transition=null,on=1,n)return n()}finally{on=i,ys.transition=t,Zt=e,!(Zt&6)&&bl()}}function nC(){Fr=mf.current,An(mf)}function Cc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,P5(t)),ii!==null)for(t=ii.return;t!==null;){var i=t;switch(kM(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Gv();break;case 3:Wf(),An(wr),An(Yi),jM();break;case 5:WM(i);break;case 4:Wf();break;case 13:An(In);break;case 19:An(In);break;case 10:zM(i.type._context);break;case 22:case 23:nC()}t=t.return}if(Ci=n,ii=n=cl(n.current,null),Di=Fr=e,hi=0,Rp=null,$M=Oy=zc=0,yr=tp=null,gc!==null){for(e=0;e<gc.length;e++)if(t=gc[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}gc=null}return n}function ZD(n,e){do{var t=ii;try{if(NM(),rv.current=Qv,Kv){for(var i=kn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Kv=!1}if(Nc=0,Ai=ui=kn=null,$d=!1,bp=0,qM.current=null,t===null||t.return===null){hi=1,Rp=e,ii=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Di,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=AT(o);if(m!==null){m.flags&=-257,MT(m,o,a,s,e),m.mode&1&&wT(s,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){wT(s,c,e),iC();break e}l=Error(We(426))}}else if(Tn&&a.mode&1){var _=AT(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),MT(_,o,a,s,e),FM(jf(l,a));break e}}s=l=jf(l,a),hi!==4&&(hi=2),tp===null?tp=[s]:tp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=LD(s,l,e);mT(s,x);break e;case 1:a=l;var y=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(al===null||!al.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=OD(s,a,e);mT(s,A);break e}}s=s.return}while(s!==null)}eL(t)}catch(C){e=C,ii===t&&t!==null&&(ii=t=t.return);continue}break}while(1)}function qD(){var n=Zv.current;return Zv.current=Qv,n===null?Qv:n}function iC(){(hi===0||hi===3||hi===2)&&(hi=4),Ci===null||!(zc&268435455)&&!(Oy&268435455)||Ka(Ci,Di)}function ey(n,e){var t=Zt;Zt|=2;var i=qD();(Ci!==n||Di!==e)&&(Wo=null,Cc(n,e));do try{ez();break}catch(r){ZD(n,r)}while(1);if(NM(),Zt=t,Zv.current=i,ii!==null)throw Error(We(261));return Ci=null,Di=0,hi}function ez(){for(;ii!==null;)$D(ii)}function tz(){for(;ii!==null&&!EN();)$D(ii)}function $D(n){var e=nL(n.alternate,n,Fr);n.memoizedProps=n.pendingProps,e===null?eL(n):ii=e,qM.current=null}function eL(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Y5(t,e),t!==null){t.flags&=32767,ii=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{hi=6,ii=null;return}}else if(t=X5(t,e,Fr),t!==null){ii=t;return}if(e=e.sibling,e!==null){ii=e;return}ii=e=n}while(e!==null);hi===0&&(hi=5)}function ac(n,e,t){var i=on,r=ys.transition;try{ys.transition=null,on=1,nz(n,e,t,i)}finally{ys.transition=r,on=i}return null}function nz(n,e,t,i){do If();while(Za!==null);if(Zt&6)throw Error(We(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(We(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(kN(n,s),n===Ci&&(ii=Ci=null,Di=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Hg||(Hg=!0,iL(Ov,function(){return If(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ys.transition,ys.transition=null;var o=on;on=1;var a=Zt;Zt|=4,qM.current=null,Q5(n,t),YD(t,n),w5(iw),Fv=!!nw,iw=nw=null,n.current=t,Z5(t),bN(),Zt=a,on=o,ys.transition=s}else n.current=t;if(Hg&&(Hg=!1,Za=n,$v=r),s=n.pendingLanes,s===0&&(al=null),RN(t.stateNode),Mr(n,Kn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(qv)throw qv=!1,n=Aw,Aw=null,n;return $v&1&&n.tag!==0&&If(),s=n.pendingLanes,s&1?n===Mw?np++:(np=0,Mw=n):np=0,bl(),null}function If(){if(Za!==null){var n=DB($v),e=ys.transition,t=on;try{if(ys.transition=null,on=16>n?16:n,Za===null)var i=!1;else{if(n=Za,Za=null,$v=0,Zt&6)throw Error(We(331));var r=Zt;for(Zt|=4,it=n.current;it!==null;){var s=it,o=s.child;if(it.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(it=c;it!==null;){var u=it;switch(u.tag){case 0:case 11:case 15:ep(8,u,s)}var f=u.child;if(f!==null)f.return=u,it=f;else for(;it!==null;){u=it;var d=u.sibling,m=u.return;if(jD(u),u===c){it=null;break}if(d!==null){d.return=m,it=d;break}it=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}it=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,it=o;else e:for(;it!==null;){if(s=it,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ep(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,it=x;break e}it=s.return}}var y=n.current;for(it=y;it!==null;){o=it;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,it=S;else e:for(o=y;it!==null;){if(a=it,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ly(9,a)}}catch(C){Gn(a,a.return,C)}if(a===o){it=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,it=A;break e}it=a.return}}if(Zt=r,bl(),yo&&typeof yo.onPostCommitFiberRoot=="function")try{yo.onPostCommitFiberRoot(Ey,n)}catch{}i=!0}return i}finally{on=t,ys.transition=e}}return!1}function FT(n,e,t){e=jf(t,e),e=LD(n,e,1),n=ol(n,e,1),e=cr(),n!==null&&(tm(n,1,e),Mr(n,e))}function Gn(n,e,t){if(n.tag===3)FT(n,n,t);else for(;e!==null;){if(e.tag===3){FT(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(al===null||!al.has(i))){n=jf(t,n),n=OD(e,n,1),e=ol(e,n,1),n=cr(),e!==null&&(tm(e,1,n),Mr(e,n));break}}e=e.return}}function iz(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=cr(),n.pingedLanes|=n.suspendedLanes&t,Ci===n&&(Di&t)===t&&(hi===4||hi===3&&(Di&130023424)===Di&&500>Kn()-eC?Cc(n,0):$M|=t),Mr(n,e)}function tL(n,e){e===0&&(n.mode&1?(e=Bg,Bg<<=1,!(Bg&130023424)&&(Bg=4194304)):e=1);var t=cr();n=aa(n,e),n!==null&&(tm(n,e,t),Mr(n,t))}function rz(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),tL(n,t)}function sz(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(We(314))}i!==null&&i.delete(e),tL(n,t)}var nL;nL=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||wr.current)xr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return xr=!1,J5(n,e,t);xr=!!(n.flags&131072)}else xr=!1,Tn&&e.flags&1048576&&sD(e,Wv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ov(n,e),n=e.pendingProps;var r=Gf(e,Yi.current);Rf(e,t),r=XM(null,e,i,n,r,t);var s=YM();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ar(i)?(s=!0,Hv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,HM(e),r.updater=By,e.stateNode=r,r._reactInternals=e,hw(e,i,n,t),e=mw(null,e,i,!0,s,t)):(e.tag=0,Tn&&s&&OM(e),lr(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(ov(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=az(i),n=Rs(i,n),r){case 0:e=pw(null,e,i,n,t);break e;case 1:e=bT(null,e,i,n,t);break e;case 11:e=CT(null,e,i,n,t);break e;case 14:e=ET(null,e,i,Rs(i.type,n),t);break e}throw Error(We(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Rs(i,r),pw(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Rs(i,r),bT(n,e,i,r,t);case 3:e:{if(ND(e),n===null)throw Error(We(387));i=e.pendingProps,s=e.memoizedState,r=s.element,cD(n,e),Xv(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=jf(Error(We(423)),e),e=TT(n,e,i,t,r);break e}else if(i!==r){r=jf(Error(We(424)),e),e=TT(n,e,i,t,r);break e}else for(zr=sl(e.stateNode.containerInfo.firstChild),Hr=e,Tn=!0,Ls=null,t=dD(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Hf(),i===r){e=la(n,e,t);break e}lr(n,e,i,t)}e=e.child}return e;case 5:return pD(e),n===null&&cw(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,rw(i,r)?o=null:s!==null&&rw(i,s)&&(e.flags|=32),UD(n,e),lr(n,e,o,t),e.child;case 6:return n===null&&cw(e),null;case 13:return zD(n,e,t);case 4:return VM(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Vf(e,null,i,t):lr(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Rs(i,r),CT(n,e,i,r,t);case 7:return lr(n,e,e.pendingProps,t),e.child;case 8:return lr(n,e,e.pendingProps.children,t),e.child;case 12:return lr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,vn(jv,i._currentValue),i._currentValue=o,s!==null)if(Ws(s.value,o)){if(s.children===r.children&&!wr.current){e=la(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ta(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),uw(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(We(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),uw(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}lr(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Rf(e,t),r=xs(r),i=i(r),e.flags|=1,lr(n,e,i,t),e.child;case 14:return i=e.type,r=Rs(i,e.pendingProps),r=Rs(i.type,r),ET(n,e,i,r,t);case 15:return kD(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Rs(i,r),ov(n,e),e.tag=1,Ar(i)?(n=!0,Hv(e)):n=!1,Rf(e,t),fD(e,i,r),hw(e,i,r,t),mw(null,e,i,!0,n,t);case 19:return GD(n,e,t);case 22:return FD(n,e,t)}throw Error(We(156,e.tag))};function iL(n,e){return PB(n,e)}function oz(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(n,e,t,i){return new oz(n,e,t,i)}function rC(n){return n=n.prototype,!(!n||!n.isReactComponent)}function az(n){if(typeof n=="function")return rC(n)?1:0;if(n!=null){if(n=n.$$typeof,n===AM)return 11;if(n===MM)return 14}return 2}function cl(n,e){var t=n.alternate;return t===null?(t=ms(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function cv(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")rC(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case sf:return Ec(t.children,r,s,e);case wM:o=8,r|=8;break;case kS:return n=ms(12,t,e,r|2),n.elementType=kS,n.lanes=s,n;case FS:return n=ms(13,t,e,r),n.elementType=FS,n.lanes=s,n;case US:return n=ms(19,t,e,r),n.elementType=US,n.lanes=s,n;case hB:return ky(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case uB:o=10;break e;case fB:o=9;break e;case AM:o=11;break e;case MM:o=14;break e;case Wa:o=16,i=null;break e}throw Error(We(130,n==null?n:typeof n,""))}return e=ms(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Ec(n,e,t,i){return n=ms(7,n,i,e),n.lanes=t,n}function ky(n,e,t,i){return n=ms(22,n,i,e),n.elementType=hB,n.lanes=t,n.stateNode={isHidden:!1},n}function sx(n,e,t){return n=ms(6,n,null,e),n.lanes=t,n}function ox(n,e,t){return e=ms(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function lz(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=z_(0),this.expirationTimes=z_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z_(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function sC(n,e,t,i,r,s,o,a,l){return n=new lz(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ms(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},HM(s),n}function cz(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rf,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function rL(n){if(!n)return yl;n=n._reactInternals;e:{if($c(n)!==n||n.tag!==1)throw Error(We(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ar(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(We(171))}if(n.tag===1){var t=n.type;if(Ar(t))return iD(n,t,e)}return e}function sL(n,e,t,i,r,s,o,a,l){return n=sC(t,i,!0,n,r,s,o,a,l),n.context=rL(null),t=n.current,i=cr(),r=ll(t),s=ta(i,r),s.callback=e??null,ol(t,s,r),n.current.lanes=r,tm(n,r,i),Mr(n,i),n}function Fy(n,e,t,i){var r=e.current,s=cr(),o=ll(r);return t=rL(t),e.context===null?e.context=t:e.pendingContext=t,e=ta(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=ol(r,e,o),n!==null&&(Hs(n,r,o,s),iv(n,r,o)),o}function ty(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function UT(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function oC(n,e){UT(n,e),(n=n.alternate)&&UT(n,e)}function uz(){return null}var oL=typeof reportError=="function"?reportError:function(n){console.error(n)};function aC(n){this._internalRoot=n}Uy.prototype.render=aC.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(We(409));Fy(n,e,null,null)};Uy.prototype.unmount=aC.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Gc(function(){Fy(null,n,null,null)}),e[oa]=null}};function Uy(n){this._internalRoot=n}Uy.prototype.unstable_scheduleHydration=function(n){if(n){var e=kB();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ya.length&&e!==0&&e<Ya[t].priority;t++);Ya.splice(t,0,n),t===0&&UB(n)}};function lC(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ny(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function NT(){}function fz(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=ty(o);s.call(c)}}var o=sL(e,i,n,0,null,!1,!1,"",NT);return n._reactRootContainer=o,n[oa]=o.current,wp(n.nodeType===8?n.parentNode:n),Gc(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=ty(l);a.call(c)}}var l=sC(n,0,!1,null,null,!1,!1,"",NT);return n._reactRootContainer=l,n[oa]=l.current,wp(n.nodeType===8?n.parentNode:n),Gc(function(){Fy(e,l,t,i)}),l}function zy(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=ty(o);a.call(l)}}Fy(e,o,n,r)}else o=fz(t,e,n,r,i);return ty(o)}LB=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Fd(e.pendingLanes);t!==0&&(bM(e,t|1),Mr(e,Kn()),!(Zt&6)&&(Jf=Kn()+500,bl()))}break;case 13:Gc(function(){var i=aa(n,1);if(i!==null){var r=cr();Hs(i,n,1,r)}}),oC(n,1)}};TM=function(n){if(n.tag===13){var e=aa(n,134217728);if(e!==null){var t=cr();Hs(e,n,134217728,t)}oC(n,134217728)}};OB=function(n){if(n.tag===13){var e=ll(n),t=aa(n,e);if(t!==null){var i=cr();Hs(t,n,e,i)}oC(n,e)}};kB=function(){return on};FB=function(n,e){var t=on;try{return on=n,e()}finally{on=t}};YS=function(n,e,t){switch(e){case"input":if(GS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Ry(i);if(!r)throw Error(We(90));pB(i),GS(i,r)}}}break;case"textarea":gB(n,t);break;case"select":e=t.value,e!=null&&Ef(n,!!t.multiple,e,!1)}};AB=tC;MB=Gc;var hz={usingClientEntryPoint:!1,Events:[im,cf,Ry,SB,wB,tC]},od={findFiberByHostInstance:mc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},dz={bundleType:od.bundleType,version:od.version,rendererPackageName:od.rendererPackageName,rendererConfig:od.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ga.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=bB(n),n===null?null:n.stateNode},findFiberByHostInstance:od.findFiberByHostInstance||uz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vg.isDisabled&&Vg.supportsFiber)try{Ey=Vg.inject(dz),yo=Vg}catch{}}jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hz;jr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lC(e))throw Error(We(200));return cz(n,e,null,t)};jr.createRoot=function(n,e){if(!lC(n))throw Error(We(299));var t=!1,i="",r=oL;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=sC(n,1,!1,null,null,t,!1,i,r),n[oa]=e.current,wp(n.nodeType===8?n.parentNode:n),new aC(e)};jr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(We(188)):(n=Object.keys(n).join(","),Error(We(268,n)));return n=bB(e),n=n===null?null:n.stateNode,n};jr.flushSync=function(n){return Gc(n)};jr.hydrate=function(n,e,t){if(!Ny(e))throw Error(We(200));return zy(null,n,e,!0,t)};jr.hydrateRoot=function(n,e,t){if(!lC(n))throw Error(We(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=oL;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=sL(e,null,n,1,t??null,r,!1,s,o),n[oa]=e.current,wp(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Uy(e)};jr.render=function(n,e,t){if(!Ny(e))throw Error(We(200));return zy(null,n,e,!1,t)};jr.unmountComponentAtNode=function(n){if(!Ny(n))throw Error(We(40));return n._reactRootContainer?(Gc(function(){zy(null,null,n,!1,function(){n._reactRootContainer=null,n[oa]=null})}),!0):!1};jr.unstable_batchedUpdates=tC;jr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Ny(t))throw Error(We(200));if(n==null||n._reactInternals===void 0)throw Error(We(38));return zy(n,e,t,!1,i)};jr.version="18.2.0-next-9e3b772b8-20220608";function aL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aL)}catch(n){console.error(n)}}aL(),sB.exports=jr;var pz=sB.exports,lL,zT=pz;lL=LS.createRoot=zT.createRoot,LS.hydrateRoot=zT.hydrateRoot;/**
 * @remix-run/router v1.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ip(){return Ip=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ip.apply(this,arguments)}var qa;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(qa||(qa={}));const GT="popstate";function mz(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return bw("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:ny(r)}return vz(e,t,null,n)}function ri(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function cC(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gz(){return Math.random().toString(36).substr(2,8)}function HT(n,e){return{usr:n.state,key:n.key,idx:e}}function bw(n,e,t,i){return t===void 0&&(t=null),Ip({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?dh(e):e,{state:t,key:e&&e.key||i||gz()})}function ny(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function dh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function vz(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=qa.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ip({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=qa.Pop;let _=u(),x=_==null?null:_-c;c=_,l&&l({action:a,location:v.location,delta:x})}function d(_,x){a=qa.Push;let y=bw(v.location,_,x);t&&t(y,_),c=u()+1;let S=HT(y,c),A=v.createHref(y);try{o.pushState(S,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;r.location.assign(A)}s&&l&&l({action:a,location:v.location,delta:1})}function m(_,x){a=qa.Replace;let y=bw(v.location,_,x);t&&t(y,_),c=u();let S=HT(y,c),A=v.createHref(y);o.replaceState(S,"",A),s&&l&&l({action:a,location:v.location,delta:0})}function g(_){let x=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof _=="string"?_:ny(_);return ri(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let v={get action(){return a},get location(){return n(r,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(GT,f),l=_,()=>{r.removeEventListener(GT,f),l=null}},createHref(_){return e(r,_)},createURL:g,encodeLocation(_){let x=g(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:d,replace:m,go(_){return o.go(_)}};return v}var VT;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(VT||(VT={}));function yz(n,e,t){t===void 0&&(t="/");let i=typeof e=="string"?dh(e):e,r=uC(i.pathname||"/",t);if(r==null)return null;let s=cL(n);_z(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=Tz(s[a],Iz(r));return o}function cL(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ri(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=ul([i,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(ri(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cL(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Ez(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of uL(s.path))r(s,o,l)}),e}function uL(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=uL(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function _z(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bz(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const xz=/^:\w+$/,Sz=3,wz=2,Az=1,Mz=10,Cz=-2,WT=n=>n==="*";function Ez(n,e){let t=n.split("/"),i=t.length;return t.some(WT)&&(i+=Cz),e&&(i+=wz),t.filter(r=>!WT(r)).reduce((r,s)=>r+(xz.test(s)?Sz:s===""?Az:Mz),i)}function bz(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function Tz(n,e){let{routesMeta:t}=n,i={},r="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,c=r==="/"?e:e.slice(r.length)||"/",u=Pz({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(i,u.params);let f=a.route;s.push({params:i,pathname:ul([r,u.pathname]),pathnameBase:Oz(ul([r,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(r=ul([r,u.pathnameBase]))}return s}function Pz(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Rz(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,f)=>{if(u==="*"){let d=a[f]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return c[u]=Bz(a[f]||"",u),c},{}),pathname:s,pathnameBase:o,pattern:n}}function Rz(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),cC(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(i.push(a),"/([^\\/]+)"));return n.endsWith("*")?(i.push("*"),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function Iz(n){try{return decodeURI(n)}catch(e){return cC(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Bz(n,e){try{return decodeURIComponent(n)}catch(t){return cC(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+n+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),n}}function uC(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Dz(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?dh(n):n;return{pathname:t?t.startsWith("/")?t:Lz(t,e):e,search:kz(i),hash:Fz(r)}}function Lz(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function ax(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fL(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hL(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=dh(n):(r=Ip({},n),ri(!r.pathname||!r.pathname.includes("?"),ax("?","pathname","search",r)),ri(!r.pathname||!r.pathname.includes("#"),ax("#","pathname","hash",r)),ri(!r.search||!r.search.includes("#"),ax("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(i||o==null)a=t;else{let f=e.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;r.pathname=d.join("/")}a=f>=0?e[f]:"/"}let l=Dz(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ul=n=>n.join("/").replace(/\/\/+/g,"/"),Oz=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),kz=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Fz=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Uz(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const dL=["post","put","patch","delete"];new Set(dL);const Nz=["get",...dL];new Set(Nz);/**
 * React Router v6.14.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iy(){return iy=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},iy.apply(this,arguments)}const fC=L.createContext(null),zz=L.createContext(null),ph=L.createContext(null),Gy=L.createContext(null),eu=L.createContext({outlet:null,matches:[],isDataRoute:!1}),pL=L.createContext(null);function Gz(n,e){let{relative:t}=e===void 0?{}:e;sm()||ri(!1);let{basename:i,navigator:r}=L.useContext(ph),{hash:s,pathname:o,search:a}=gL(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:ul([i,o])),r.createHref({pathname:l,search:a,hash:s})}function sm(){return L.useContext(Gy)!=null}function Hy(){return sm()||ri(!1),L.useContext(Gy).location}function mL(n){L.useContext(ph).static||L.useLayoutEffect(n)}function Hz(){let{isDataRoute:n}=L.useContext(eu);return n?tG():Vz()}function Vz(){sm()||ri(!1);let n=L.useContext(fC),{basename:e,navigator:t}=L.useContext(ph),{matches:i}=L.useContext(eu),{pathname:r}=Hy(),s=JSON.stringify(fL(i).map(l=>l.pathnameBase)),o=L.useRef(!1);return mL(()=>{o.current=!0}),L.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){t.go(l);return}let u=hL(l,JSON.parse(s),r,c.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:ul([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,s,r,n])}function gL(n,e){let{relative:t}=e===void 0?{}:e,{matches:i}=L.useContext(eu),{pathname:r}=Hy(),s=JSON.stringify(fL(i).map(o=>o.pathnameBase));return L.useMemo(()=>hL(n,JSON.parse(s),r,t==="path"),[n,s,r,t])}function Wz(n,e){return jz(n,e)}function jz(n,e,t){sm()||ri(!1);let{navigator:i}=L.useContext(ph),{matches:r}=L.useContext(eu),s=r[r.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=Hy(),c;if(e){var u;let v=typeof e=="string"?dh(e):e;a==="/"||(u=v.pathname)!=null&&u.startsWith(a)||ri(!1),c=v}else c=l;let f=c.pathname||"/",d=a==="/"?f:f.slice(a.length)||"/",m=yz(n,{pathname:d}),g=Qz(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:ul([a,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:ul([a,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),r,t);return e&&g?L.createElement(Gy.Provider,{value:{location:iy({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:qa.Pop}},g):g}function Jz(){let n=eG(),e=Uz(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),t?L.createElement("pre",{style:r},t):null,s)}const Xz=L.createElement(Jz,null);class Yz extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?L.createElement(eu.Provider,{value:this.props.routeContext},L.createElement(pL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kz(n){let{routeContext:e,match:t,children:i}=n,r=L.useContext(fC);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(eu.Provider,{value:e},i)}function Qz(n,e,t){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),n==null){var r;if((r=t)!=null&&r.errors)n=t.matches;else return null}let s=n,o=(i=t)==null?void 0:i.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||ri(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,c)=>{let u=l.route.id?o==null?void 0:o[l.route.id]:null,f=null;t&&(f=l.route.errorElement||Xz);let d=e.concat(s.slice(0,c+1)),m=()=>{let g;return u?g=f:l.route.Component?g=L.createElement(l.route.Component,null):l.route.element?g=l.route.element:g=a,L.createElement(Kz,{match:l,routeContext:{outlet:a,matches:d,isDataRoute:t!=null},children:g})};return t&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?L.createElement(Yz,{location:t.location,revalidation:t.revalidation,component:f,error:u,children:m(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):m()},null)}var Tw;(function(n){n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate"})(Tw||(Tw={}));var Bp;(function(n){n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId"})(Bp||(Bp={}));function Zz(n){let e=L.useContext(fC);return e||ri(!1),e}function qz(n){let e=L.useContext(zz);return e||ri(!1),e}function $z(n){let e=L.useContext(eu);return e||ri(!1),e}function vL(n){let e=$z(),t=e.matches[e.matches.length-1];return t.route.id||ri(!1),t.route.id}function eG(){var n;let e=L.useContext(pL),t=qz(Bp.UseRouteError),i=vL(Bp.UseRouteError);return e||((n=t.errors)==null?void 0:n[i])}function tG(){let{router:n}=Zz(Tw.UseNavigateStable),e=vL(Bp.UseNavigateStable),t=L.useRef(!1);return mL(()=>{t.current=!0}),L.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,iy({fromRouteId:e},s)))},[n,e])}function uv(n){ri(!1)}function nG(n){let{basename:e="/",children:t=null,location:i,navigationType:r=qa.Pop,navigator:s,static:o=!1}=n;sm()&&ri(!1);let a=e.replace(/^\/*/,"/"),l=L.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof i=="string"&&(i=dh(i));let{pathname:c="/",search:u="",hash:f="",state:d=null,key:m="default"}=i,g=L.useMemo(()=>{let v=uC(c,a);return v==null?null:{location:{pathname:v,search:u,hash:f,state:d,key:m},navigationType:r}},[a,c,u,f,d,m,r]);return g==null?null:L.createElement(ph.Provider,{value:l},L.createElement(Gy.Provider,{children:t,value:g}))}function iG(n){let{children:e,location:t}=n;return Wz(Pw(e),t)}var jT;(function(n){n[n.pending=0]="pending",n[n.success=1]="success",n[n.error=2]="error"})(jT||(jT={}));new Promise(()=>{});function Pw(n,e){e===void 0&&(e=[]);let t=[];return L.Children.forEach(n,(i,r)=>{if(!L.isValidElement(i))return;let s=[...e,r];if(i.type===L.Fragment){t.push.apply(t,Pw(i.props.children,s));return}i.type!==uv&&ri(!1),!i.props.index||!i.props.children||ri(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Pw(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.14.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rw(){return Rw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Rw.apply(this,arguments)}function rG(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function sG(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function oG(n,e){return n.button===0&&(!e||e==="_self")&&!sG(n)}const aG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],lG="startTransition",JT=iN[lG];function cG(n){let{basename:e,children:t,future:i,window:r}=n,s=L.useRef();s.current==null&&(s.current=mz({window:r,v5Compat:!0}));let o=s.current,[a,l]=L.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=L.useCallback(f=>{c&&JT?JT(()=>l(f)):l(f)},[l,c]);return L.useLayoutEffect(()=>o.listen(u),[o,u]),L.createElement(nG,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o})}const uG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XT=L.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u}=e,f=rG(e,aG),{basename:d}=L.useContext(ph),m,g=!1;if(typeof c=="string"&&fG.test(c)&&(m=c,uG))try{let y=new URL(window.location.href),S=c.startsWith("//")?new URL(y.protocol+c):new URL(c),A=uC(S.pathname,d);S.origin===y.origin&&A!=null?c=A+S.search+S.hash:g=!0}catch{}let v=Gz(c,{relative:r}),_=hG(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r});function x(y){i&&i(y),y.defaultPrevented||_(y)}return L.createElement("a",Rw({},f,{href:m||v,onClick:g||s?i:x,ref:t,target:l}))});var YT;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher"})(YT||(YT={}));var KT;(function(n){n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(KT||(KT={}));function hG(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=Hz(),l=Hy(),c=gL(n,{relative:o});return L.useCallback(u=>{if(oG(u,t)){u.preventDefault();let f=i!==void 0?i:ny(l)===ny(c);a(n,{replace:f,state:r,preventScrollReset:s,relative:o})}},[l,a,c,i,r,t,n,s,o])}function dG(){L.useEffect(()=>(document.body.classList.add("start-page"),()=>{document.body.classList.remove("start-page")}),[])}function js(){return js=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},js.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const om="148",pG={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},mG={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},yL=0,Iw=1,_L=2,gG=3,xL=0,Vy=1,ip=2,yc=3,wo=0,ur=1,va=2,Nd=3,na=0,ia=1,Bw=2,Dw=3,Lw=4,SL=5,uc=100,wL=101,AL=102,Ow=103,kw=104,ML=200,CL=201,EL=202,bL=203,hC=204,dC=205,TL=206,PL=207,RL=208,IL=209,BL=210,DL=0,LL=1,OL=2,ry=3,kL=4,FL=5,UL=6,NL=7,am=0,zL=1,GL=2,Vs=0,HL=1,VL=2,WL=3,pC=4,jL=5,Wy=300,ca=301,_l=302,Xf=303,Dp=304,mh=306,xl=1e3,Bi=1001,Yf=1002,Hn=1003,Lp=1004,vG=1004,Bf=1005,yG=1005,gn=1006,jy=1007,_G=1007,Ao=1008,xG=1008,ua=1009,JL=1010,XL=1011,mC=1012,YL=1013,$a=1014,gs=1015,Us=1016,KL=1017,QL=1018,bc=1020,ZL=1021,qL=1022,_r=1023,$L=1024,eO=1025,fl=1026,Hc=1027,tO=1028,nO=1029,iO=1030,rO=1031,sO=1033,fv=33776,hv=33777,dv=33778,pv=33779,Fw=35840,Uw=35841,Nw=35842,zw=35843,oO=36196,Gw=37492,Hw=37496,Vw=37808,Ww=37809,jw=37810,Jw=37811,Xw=37812,Yw=37813,Kw=37814,Qw=37815,Zw=37816,qw=37817,$w=37818,eA=37819,tA=37820,nA=37821,iA=36492,aO=2200,lO=2201,cO=2202,Kf=2300,Vc=2301,mv=2302,_c=2400,xc=2401,Op=2402,Jy=2500,gC=2501,uO=0,vC=1,sy=2,fa=3e3,pn=3001,fO=3200,yC=3201,Tl=0,hO=1,SG="",Ds="srgb",Qf="srgb-linear",wG=0,gv=7680,AG=7681,MG=7682,CG=7683,EG=34055,bG=34056,TG=5386,PG=512,RG=513,IG=514,BG=515,DG=516,LG=517,OG=518,dO=519,kp=35044,kG=35048,FG=35040,UG=35045,NG=35049,zG=35041,GG=35046,HG=35050,VG=35042,WG="100",rA="300 es",oy=1035;let ya=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const Wi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let QT=1234567;const Tc=Math.PI/180,Fp=180/Math.PI;function Vr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Wi[n&255]+Wi[n>>8&255]+Wi[n>>16&255]+Wi[n>>24&255]+"-"+Wi[e&255]+Wi[e>>8&255]+"-"+Wi[e>>16&15|64]+Wi[e>>24&255]+"-"+Wi[t&63|128]+Wi[t>>8&255]+"-"+Wi[t>>16&255]+Wi[t>>24&255]+Wi[i&255]+Wi[i>>8&255]+Wi[i>>16&255]+Wi[i>>24&255]).toLowerCase()}function Qn(n,e,t){return Math.max(e,Math.min(t,n))}function _C(n,e){return(n%e+e)%e}function jG(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function JG(n,e,t){return n!==e?(t-n)/(e-n):0}function rp(n,e,t){return(1-t)*n+t*e}function XG(n,e,t,i){return rp(n,e,1-Math.exp(-t*i))}function YG(n,e=1){return e-Math.abs(_C(n,e*2)-e)}function KG(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function QG(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function ZG(n,e){return n+Math.floor(Math.random()*(e-n+1))}function qG(n,e){return n+Math.random()*(e-n)}function $G(n){return n*(.5-Math.random())}function e6(n){n!==void 0&&(QT=n);let e=QT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function t6(n){return n*Tc}function n6(n){return n*Fp}function sA(n){return(n&n-1)===0&&n!==0}function pO(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function ay(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function i6(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),d=o((e-i)/2),m=s((i-e)/2),g=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*f,l*d,a*c);break;case"YZY":n.set(l*d,a*u,l*f,a*c);break;case"ZXZ":n.set(l*f,l*d,a*u,a*c);break;case"XZX":n.set(a*u,l*g,l*m,a*c);break;case"YXY":n.set(l*m,a*u,l*g,a*c);break;case"ZYZ":n.set(l*g,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function qo(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function mn(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Sc=Object.freeze({__proto__:null,DEG2RAD:Tc,RAD2DEG:Fp,generateUUID:Vr,clamp:Qn,euclideanModulo:_C,mapLinear:jG,inverseLerp:JG,lerp:rp,damp:XG,pingpong:YG,smoothstep:KG,smootherstep:QG,randInt:ZG,randFloat:qG,randFloatSpread:$G,seededRandom:e6,degToRad:t6,radToDeg:n6,isPowerOfTwo:sA,ceilPowerOfTwo:pO,floorPowerOfTwo:ay,setQuaternionFromProperEuler:i6,normalize:mn,denormalize:qo});class Ne{constructor(e=0,t=0){Ne.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Xi{constructor(){Xi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],f=i[7],d=i[2],m=i[5],g=i[8],v=r[0],_=r[3],x=r[6],y=r[1],S=r[4],A=r[7],C=r[2],b=r[5],P=r[8];return s[0]=o*v+a*y+l*C,s[3]=o*_+a*S+l*b,s[6]=o*x+a*A+l*P,s[1]=c*v+u*y+f*C,s[4]=c*_+u*S+f*b,s[7]=c*x+u*A+f*P,s[2]=d*v+m*y+g*C,s[5]=d*_+m*S+g*b,s[8]=d*x+m*A+g*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,d=a*l-u*s,m=c*s-o*l,g=t*f+i*d+r*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=f*v,e[1]=(r*c-u*i)*v,e[2]=(a*i-r*o)*v,e[3]=d*v,e[4]=(u*t-r*l)*v,e[5]=(r*s-a*t)*v,e[6]=m*v,e[7]=(i*l-c*t)*v,e[8]=(o*t-i*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(lx.makeScale(e,t)),this}rotate(e){return this.premultiply(lx.makeRotation(-e)),this}translate(e,t){return this.premultiply(lx.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const lx=new Xi;function mO(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const r6={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function gf(n,e){return new r6[n](e)}function Up(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Pc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function vv(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const cx={[Ds]:{[Qf]:Pc},[Qf]:{[Ds]:vv}},zn={legacyMode:!0,get workingColorSpace(){return Qf},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(cx[e]&&cx[e][t]!==void 0){const i=cx[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},gO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ci={r:0,g:0,b:0},bs={h:0,s:0,l:0},Wg={h:0,s:0,l:0};function ux(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function jg(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Je{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ds){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,zn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=zn.workingColorSpace){return this.r=e,this.g=t,this.b=i,zn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=zn.workingColorSpace){if(e=_C(e,1),t=Qn(t,0,1),i=Qn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=ux(o,s,e+1/3),this.g=ux(o,s,e),this.b=ux(o,s,e-1/3)}return zn.toWorkingColorSpace(this,r),this}setStyle(e,t=Ds){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,zn.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,zn.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,u=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,c,u,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,zn.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,zn.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Ds){const i=gO[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Pc(e.r),this.g=Pc(e.g),this.b=Pc(e.b),this}copyLinearToSRGB(e){return this.r=vv(e.r),this.g=vv(e.g),this.b=vv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ds){return zn.fromWorkingColorSpace(jg(this,ci),e),Qn(ci.r*255,0,255)<<16^Qn(ci.g*255,0,255)<<8^Qn(ci.b*255,0,255)<<0}getHexString(e=Ds){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=zn.workingColorSpace){zn.fromWorkingColorSpace(jg(this,ci),t);const i=ci.r,r=ci.g,s=ci.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=zn.workingColorSpace){return zn.fromWorkingColorSpace(jg(this,ci),t),e.r=ci.r,e.g=ci.g,e.b=ci.b,e}getStyle(e=Ds){return zn.fromWorkingColorSpace(jg(this,ci),e),e!==Ds?`color(${e} ${ci.r} ${ci.g} ${ci.b})`:`rgb(${ci.r*255|0},${ci.g*255|0},${ci.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(bs),bs.h+=e,bs.s+=t,bs.l+=i,this.setHSL(bs.h,bs.s,bs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(bs),e.getHSL(Wg);const i=rp(bs.h,Wg.h,t),r=rp(bs.s,Wg.s,t),s=rp(bs.l,Wg.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Je.NAMES=gO;let bu;class xC{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{bu===void 0&&(bu=Up("canvas")),bu.width=e.width,bu.height=e.height;const i=bu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=bu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Up("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Pc(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Pc(t[i]/255)*255):t[i]=Pc(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class wc{constructor(e=null){this.isSource=!0,this.uuid=Vr(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(fx(r[o].image)):s.push(fx(r[o]))}else s=fx(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function fx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?xC.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let s6=0;class Cn extends ya{constructor(e=Cn.DEFAULT_IMAGE,t=Cn.DEFAULT_MAPPING,i=Bi,r=Bi,s=gn,o=Ao,a=_r,l=ua,c=Cn.DEFAULT_ANISOTROPY,u=fa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:s6++}),this.uuid=Vr(),this.name="",this.source=new wc(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ne(0,0),this.repeat=new Ne(1,1),this.center=new Ne(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Xi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Wy)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case xl:e.x=e.x-Math.floor(e.x);break;case Bi:e.x=e.x<0?0:1;break;case Yf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case xl:e.y=e.y-Math.floor(e.y);break;case Bi:e.y=e.y<0?0:1;break;case Yf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Cn.DEFAULT_IMAGE=null;Cn.DEFAULT_MAPPING=Wy;Cn.DEFAULT_ANISOTROPY=1;class tn{constructor(e=0,t=0,i=0,r=1){tn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],f=l[8],d=l[1],m=l[5],g=l[9],v=l[2],_=l[6],x=l[10];if(Math.abs(u-d)<.01&&Math.abs(f-v)<.01&&Math.abs(g-_)<.01){if(Math.abs(u+d)<.1&&Math.abs(f+v)<.1&&Math.abs(g+_)<.1&&Math.abs(c+m+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,A=(m+1)/2,C=(x+1)/2,b=(u+d)/4,P=(f+v)/4,E=(g+_)/4;return S>A&&S>C?S<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(S),r=b/i,s=P/i):A>C?A<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(A),i=b/r,s=E/r):C<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=P/s,r=E/s),this.set(i,r,s,t),this}let y=Math.sqrt((_-g)*(_-g)+(f-v)*(f-v)+(d-u)*(d-u));return Math.abs(y)<.001&&(y=1),this.x=(_-g)/y,this.y=(f-v)/y,this.z=(d-u)/y,this.w=Math.acos((c+m+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ws extends ya{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new tn(0,0,e,t),this.scissorTest=!1,this.viewport=new tn(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new Cn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:gn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new wc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class lm extends Cn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Hn,this.minFilter=Hn,this.wrapR=Bi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class o6 extends ws{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new lm(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Xy extends Cn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Hn,this.minFilter=Hn,this.wrapR=Bi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class a6 extends ws{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Xy(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class l6 extends ws{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Li{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],f=i[r+3];const d=s[o+0],m=s[o+1],g=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(a===1){e[t+0]=d,e[t+1]=m,e[t+2]=g,e[t+3]=v;return}if(f!==v||l!==d||c!==m||u!==g){let _=1-a;const x=l*d+c*m+u*g+f*v,y=x>=0?1:-1,S=1-x*x;if(S>Number.EPSILON){const C=Math.sqrt(S),b=Math.atan2(C,x*y);_=Math.sin(_*b)/C,a=Math.sin(a*b)/C}const A=a*y;if(l=l*_+d*A,c=c*_+m*A,u=u*_+g*A,f=f*_+v*A,_===1-a){const C=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=C,c*=C,u*=C,f*=C}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],f=s[o],d=s[o+1],m=s[o+2],g=s[o+3];return e[t]=a*g+u*f+l*m-c*d,e[t+1]=l*g+u*d+c*f-a*m,e[t+2]=c*g+u*m+a*d-l*f,e[t+3]=u*g-a*f-l*d-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),f=a(s/2),d=l(i/2),m=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=d*u*f+c*m*g,this._y=c*m*f-d*u*g,this._z=c*u*g+d*m*f,this._w=c*u*f-d*m*g;break;case"YXZ":this._x=d*u*f+c*m*g,this._y=c*m*f-d*u*g,this._z=c*u*g-d*m*f,this._w=c*u*f+d*m*g;break;case"ZXY":this._x=d*u*f-c*m*g,this._y=c*m*f+d*u*g,this._z=c*u*g+d*m*f,this._w=c*u*f-d*m*g;break;case"ZYX":this._x=d*u*f-c*m*g,this._y=c*m*f+d*u*g,this._z=c*u*g-d*m*f,this._w=c*u*f+d*m*g;break;case"YZX":this._x=d*u*f+c*m*g,this._y=c*m*f+d*u*g,this._z=c*u*g-d*m*f,this._w=c*u*f-d*m*g;break;case"XZY":this._x=d*u*f-c*m*g,this._y=c*m*f-d*u*g,this._z=c*u*g+d*m*f,this._w=c*u*f+d*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],f=t[10],d=i+a+f;if(d>0){const m=.5/Math.sqrt(d+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>f){const m=2*Math.sqrt(1+i-a-f);this._w=(u-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-i-f);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+f-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Qn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*f+this._w*d,this._x=i*f+this._x*d,this._y=r*f+this._y*d,this._z=s*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,i=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ZT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ZT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,f=l*r+s*i-o*t,d=-s*t-o*i-a*r;return this.x=c*l+d*-s+u*-a-f*-o,this.y=u*l+d*-o+f*-s-c*-a,this.z=f*l+d*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return hx.copy(this).projectOnVector(e),this.sub(hx)}reflect(e){return this.sub(hx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Qn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const hx=new j,ZT=new Li;class _a{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],f=e[l+1],d=e[l+2];u<t&&(t=u),f<i&&(i=f),d<r&&(r=d),u>s&&(s=u),f>o&&(o=f),d>a&&(a=d)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),f=e.getY(l),d=e.getZ(l);u<t&&(t=u),f<i&&(i=f),d<r&&(r=d),u>s&&(s=u),f>o&&(o=f),d>a&&(a=d)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Jl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Jl.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Jl)}else i.boundingBox===null&&i.computeBoundingBox(),dx.copy(i.boundingBox),dx.applyMatrix4(e.matrixWorld),this.union(dx);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Jl),Jl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ad),Jg.subVectors(this.max,ad),Tu.subVectors(e.a,ad),Pu.subVectors(e.b,ad),Ru.subVectors(e.c,ad),Oa.subVectors(Pu,Tu),ka.subVectors(Ru,Pu),Xl.subVectors(Tu,Ru);let t=[0,-Oa.z,Oa.y,0,-ka.z,ka.y,0,-Xl.z,Xl.y,Oa.z,0,-Oa.x,ka.z,0,-ka.x,Xl.z,0,-Xl.x,-Oa.y,Oa.x,0,-ka.y,ka.x,0,-Xl.y,Xl.x,0];return!px(t,Tu,Pu,Ru,Jg)||(t=[1,0,0,0,1,0,0,0,1],!px(t,Tu,Pu,Ru,Jg))?!1:(Xg.crossVectors(Oa,ka),t=[Xg.x,Xg.y,Xg.z],px(t,Tu,Pu,Ru,Jg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Jl.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Jl).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Uo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Uo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Uo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Uo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Uo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Uo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Uo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Uo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Uo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Uo=[new j,new j,new j,new j,new j,new j,new j,new j],Jl=new j,dx=new _a,Tu=new j,Pu=new j,Ru=new j,Oa=new j,ka=new j,Xl=new j,ad=new j,Jg=new j,Xg=new j,Yl=new j;function px(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Yl.fromArray(n,s);const a=r.x*Math.abs(Yl.x)+r.y*Math.abs(Yl.y)+r.z*Math.abs(Yl.z),l=e.dot(Yl),c=t.dot(Yl),u=i.dot(Yl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const c6=new _a,ld=new j,mx=new j;class xa{constructor(e=new j,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):c6.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ld.subVectors(e,this.center);const t=ld.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(ld,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(mx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ld.copy(e.center).add(mx)),this.expandByPoint(ld.copy(e.center).sub(mx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const No=new j,gx=new j,Yg=new j,Fa=new j,vx=new j,Kg=new j,yx=new j;class cm{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,No)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=No.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(No.copy(this.direction).multiplyScalar(t).add(this.origin),No.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){gx.copy(e).add(t).multiplyScalar(.5),Yg.copy(t).sub(e).normalize(),Fa.copy(this.origin).sub(gx);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Yg),a=Fa.dot(this.direction),l=-Fa.dot(Yg),c=Fa.lengthSq(),u=Math.abs(1-o*o);let f,d,m,g;if(u>0)if(f=o*l-a,d=o*a-l,g=s*u,f>=0)if(d>=-g)if(d<=g){const v=1/u;f*=v,d*=v,m=f*(f+o*d+2*a)+d*(o*f+d+2*l)+c}else d=s,f=Math.max(0,-(o*d+a)),m=-f*f+d*(d+2*l)+c;else d=-s,f=Math.max(0,-(o*d+a)),m=-f*f+d*(d+2*l)+c;else d<=-g?(f=Math.max(0,-(-o*s+a)),d=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+d*(d+2*l)+c):d<=g?(f=0,d=Math.min(Math.max(-s,-l),s),m=d*(d+2*l)+c):(f=Math.max(0,-(o*s+a)),d=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+d*(d+2*l)+c);else d=o>0?-s:s,f=Math.max(0,-(o*d+a)),m=-f*f+d*(d+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(f).add(this.origin),r&&r.copy(Yg).multiplyScalar(d).add(gx),m}intersectSphere(e,t){No.subVectors(e.center,this.origin);const i=No.dot(this.direction),r=No.dot(No)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,d=this.origin;return c>=0?(i=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(i=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-d.z)*f,l=(e.max.z-d.z)*f):(a=(e.max.z-d.z)*f,l=(e.min.z-d.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,No)!==null}intersectTriangle(e,t,i,r,s){vx.subVectors(t,e),Kg.subVectors(i,e),yx.crossVectors(vx,Kg);let o=this.direction.dot(yx),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Fa.subVectors(this.origin,e);const l=a*this.direction.dot(Kg.crossVectors(Fa,Kg));if(l<0)return null;const c=a*this.direction.dot(vx.cross(Fa));if(c<0||l+c>o)return null;const u=-a*Fa.dot(yx);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class dt{constructor(){dt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,a,l,c,u,f,d,m,g,v,_){const x=this.elements;return x[0]=e,x[4]=t,x[8]=i,x[12]=r,x[1]=s,x[5]=o,x[9]=a,x[13]=l,x[2]=c,x[6]=u,x[10]=f,x[14]=d,x[3]=m,x[7]=g,x[11]=v,x[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new dt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Iu.setFromMatrixColumn(e,0).length(),s=1/Iu.setFromMatrixColumn(e,1).length(),o=1/Iu.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const d=o*u,m=o*f,g=a*u,v=a*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=m+g*c,t[5]=d-v*c,t[9]=-a*l,t[2]=v-d*c,t[6]=g+m*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,m=l*f,g=c*u,v=c*f;t[0]=d+v*a,t[4]=g*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=m*a-g,t[6]=v+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,m=l*f,g=c*u,v=c*f;t[0]=d-v*a,t[4]=-o*f,t[8]=g+m*a,t[1]=m+g*a,t[5]=o*u,t[9]=v-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,m=o*f,g=a*u,v=a*f;t[0]=l*u,t[4]=g*c-m,t[8]=d*c+v,t[1]=l*f,t[5]=v*c+d,t[9]=m*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,m=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=v-d*f,t[8]=g*f+m,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*f+g,t[10]=d-v*f}else if(e.order==="XZY"){const d=o*l,m=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=d*f+v,t[5]=o*u,t[9]=m*f-g,t[2]=g*f-m,t[6]=a*u,t[10]=v*f+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(u6,e,f6)}lookAt(e,t,i){const r=this.elements;return Or.subVectors(e,t),Or.lengthSq()===0&&(Or.z=1),Or.normalize(),Ua.crossVectors(i,Or),Ua.lengthSq()===0&&(Math.abs(i.z)===1?Or.x+=1e-4:Or.z+=1e-4,Or.normalize(),Ua.crossVectors(i,Or)),Ua.normalize(),Qg.crossVectors(Or,Ua),r[0]=Ua.x,r[4]=Qg.x,r[8]=Or.x,r[1]=Ua.y,r[5]=Qg.y,r[9]=Or.y,r[2]=Ua.z,r[6]=Qg.z,r[10]=Or.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],f=i[5],d=i[9],m=i[13],g=i[2],v=i[6],_=i[10],x=i[14],y=i[3],S=i[7],A=i[11],C=i[15],b=r[0],P=r[4],E=r[8],R=r[12],B=r[1],O=r[5],G=r[9],N=r[13],k=r[2],X=r[6],te=r[10],oe=r[14],H=r[3],J=r[7],Q=r[11],U=r[15];return s[0]=o*b+a*B+l*k+c*H,s[4]=o*P+a*O+l*X+c*J,s[8]=o*E+a*G+l*te+c*Q,s[12]=o*R+a*N+l*oe+c*U,s[1]=u*b+f*B+d*k+m*H,s[5]=u*P+f*O+d*X+m*J,s[9]=u*E+f*G+d*te+m*Q,s[13]=u*R+f*N+d*oe+m*U,s[2]=g*b+v*B+_*k+x*H,s[6]=g*P+v*O+_*X+x*J,s[10]=g*E+v*G+_*te+x*Q,s[14]=g*R+v*N+_*oe+x*U,s[3]=y*b+S*B+A*k+C*H,s[7]=y*P+S*O+A*X+C*J,s[11]=y*E+S*G+A*te+C*Q,s[15]=y*R+S*N+A*oe+C*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],d=e[10],m=e[14],g=e[3],v=e[7],_=e[11],x=e[15];return g*(+s*l*f-r*c*f-s*a*d+i*c*d+r*a*m-i*l*m)+v*(+t*l*m-t*c*d+s*o*d-r*o*m+r*c*u-s*l*u)+_*(+t*c*f-t*a*m-s*o*f+i*o*m+s*a*u-i*c*u)+x*(-r*a*u-t*l*f+t*a*d+r*o*f-i*o*d+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],m=e[11],g=e[12],v=e[13],_=e[14],x=e[15],y=f*_*c-v*d*c+v*l*m-a*_*m-f*l*x+a*d*x,S=g*d*c-u*_*c-g*l*m+o*_*m+u*l*x-o*d*x,A=u*v*c-g*f*c+g*a*m-o*v*m-u*a*x+o*f*x,C=g*f*l-u*v*l-g*a*d+o*v*d+u*a*_-o*f*_,b=t*y+i*S+r*A+s*C;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/b;return e[0]=y*P,e[1]=(v*d*s-f*_*s-v*r*m+i*_*m+f*r*x-i*d*x)*P,e[2]=(a*_*s-v*l*s+v*r*c-i*_*c-a*r*x+i*l*x)*P,e[3]=(f*l*s-a*d*s-f*r*c+i*d*c+a*r*m-i*l*m)*P,e[4]=S*P,e[5]=(u*_*s-g*d*s+g*r*m-t*_*m-u*r*x+t*d*x)*P,e[6]=(g*l*s-o*_*s-g*r*c+t*_*c+o*r*x-t*l*x)*P,e[7]=(o*d*s-u*l*s+u*r*c-t*d*c-o*r*m+t*l*m)*P,e[8]=A*P,e[9]=(g*f*s-u*v*s-g*i*m+t*v*m+u*i*x-t*f*x)*P,e[10]=(o*v*s-g*a*s+g*i*c-t*v*c-o*i*x+t*a*x)*P,e[11]=(u*a*s-o*f*s-u*i*c+t*f*c+o*i*m-t*a*m)*P,e[12]=C*P,e[13]=(u*v*r-g*f*r+g*i*d-t*v*d-u*i*_+t*f*_)*P,e[14]=(g*a*r-o*v*r-g*i*l+t*v*l+o*i*_-t*a*_)*P,e[15]=(o*f*r-u*a*r+u*i*l-t*f*l-o*i*d+t*a*d)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,f=a+a,d=s*c,m=s*u,g=s*f,v=o*u,_=o*f,x=a*f,y=l*c,S=l*u,A=l*f,C=i.x,b=i.y,P=i.z;return r[0]=(1-(v+x))*C,r[1]=(m+A)*C,r[2]=(g-S)*C,r[3]=0,r[4]=(m-A)*b,r[5]=(1-(d+x))*b,r[6]=(_+y)*b,r[7]=0,r[8]=(g+S)*P,r[9]=(_-y)*P,r[10]=(1-(d+v))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Iu.set(r[0],r[1],r[2]).length();const o=Iu.set(r[4],r[5],r[6]).length(),a=Iu.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ts.copy(this);const c=1/s,u=1/o,f=1/a;return Ts.elements[0]*=c,Ts.elements[1]*=c,Ts.elements[2]*=c,Ts.elements[4]*=u,Ts.elements[5]*=u,Ts.elements[6]*=u,Ts.elements[8]*=f,Ts.elements[9]*=f,Ts.elements[10]*=f,t.setFromRotationMatrix(Ts),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){const a=this.elements,l=2*s/(t-e),c=2*s/(i-r),u=(t+e)/(t-e),f=(i+r)/(i-r),d=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,l=1/(t-e),c=1/(i-r),u=1/(o-s),f=(t+e)*l,d=(i+r)*c,m=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Iu=new j,Ts=new dt,u6=new j(0,0,0),f6=new j(1,1,1),Ua=new j,Qg=new j,Or=new j,qT=new dt,$T=new Li;class tu{constructor(e=0,t=0,i=0,r=tu.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],f=r[2],d=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(Qn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Qn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Qn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Qn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Qn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Qn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return qT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(qT,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return $T.setFromEuler(this),this.setFromQuaternion($T,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}tu.DefaultOrder="XYZ";tu.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Rc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let h6=0;const e3=new j,Bu=new Li,zo=new dt,Zg=new j,cd=new j,d6=new j,p6=new Li,t3=new j(1,0,0),n3=new j(0,1,0),i3=new j(0,0,1),m6={type:"added"},r3={type:"removed"};class Ut extends ya{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:h6++}),this.uuid=Vr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ut.DefaultUp.clone();const e=new j,t=new tu,i=new Li,r=new j(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new dt},normalMatrix:{value:new Xi}}),this.matrix=new dt,this.matrixWorld=new dt,this.matrixAutoUpdate=Ut.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ut.DefaultMatrixWorldAutoUpdate,this.layers=new Rc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Bu.setFromAxisAngle(e,t),this.quaternion.multiply(Bu),this}rotateOnWorldAxis(e,t){return Bu.setFromAxisAngle(e,t),this.quaternion.premultiply(Bu),this}rotateX(e){return this.rotateOnAxis(t3,e)}rotateY(e){return this.rotateOnAxis(n3,e)}rotateZ(e){return this.rotateOnAxis(i3,e)}translateOnAxis(e,t){return e3.copy(e).applyQuaternion(this.quaternion),this.position.add(e3.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(t3,e)}translateY(e){return this.translateOnAxis(n3,e)}translateZ(e){return this.translateOnAxis(i3,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(zo.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Zg.copy(e):Zg.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),cd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zo.lookAt(cd,Zg,this.up):zo.lookAt(Zg,cd,this.up),this.quaternion.setFromRotationMatrix(zo),r&&(zo.extractRotation(r.matrixWorld),Bu.setFromRotationMatrix(zo),this.quaternion.premultiply(Bu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(m6)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(r3)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(r3)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),zo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),zo.multiply(e.parent.matrixWorld)),e.applyMatrix4(zo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cd,e,d6),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cd,p6,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),d=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),f.length>0&&(i.shapes=f),d.length>0&&(i.skeletons=d),m.length>0&&(i.animations=m),g.length>0&&(i.nodes=g)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Ut.DefaultUp=new j(0,1,0);Ut.DefaultMatrixAutoUpdate=!0;Ut.DefaultMatrixWorldAutoUpdate=!0;const Ps=new j,Go=new j,_x=new j,Ho=new j,Du=new j,Lu=new j,s3=new j,xx=new j,Sx=new j,wx=new j;class ds{constructor(e=new j,t=new j,i=new j){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ps.subVectors(e,t),r.cross(Ps);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Ps.subVectors(r,t),Go.subVectors(i,t),_x.subVectors(e,t);const o=Ps.dot(Ps),a=Ps.dot(Go),l=Ps.dot(_x),c=Go.dot(Go),u=Go.dot(_x),f=o*c-a*a;if(f===0)return s.set(-2,-1,-1);const d=1/f,m=(c*l-a*u)*d,g=(o*u-a*l)*d;return s.set(1-m-g,g,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ho),Ho.x>=0&&Ho.y>=0&&Ho.x+Ho.y<=1}static getUV(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Ho),l.set(0,0),l.addScaledVector(s,Ho.x),l.addScaledVector(o,Ho.y),l.addScaledVector(a,Ho.z),l}static isFrontFacing(e,t,i,r){return Ps.subVectors(i,t),Go.subVectors(e,t),Ps.cross(Go).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ps.subVectors(this.c,this.b),Go.subVectors(this.a,this.b),Ps.cross(Go).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ds.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ds.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return ds.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return ds.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ds.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Du.subVectors(r,i),Lu.subVectors(s,i),xx.subVectors(e,i);const l=Du.dot(xx),c=Lu.dot(xx);if(l<=0&&c<=0)return t.copy(i);Sx.subVectors(e,r);const u=Du.dot(Sx),f=Lu.dot(Sx);if(u>=0&&f<=u)return t.copy(r);const d=l*f-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Du,o);wx.subVectors(e,s);const m=Du.dot(wx),g=Lu.dot(wx);if(g>=0&&m<=g)return t.copy(s);const v=m*c-l*g;if(v<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(i).addScaledVector(Lu,a);const _=u*g-m*f;if(_<=0&&f-u>=0&&m-g>=0)return s3.subVectors(s,r),a=(f-u)/(f-u+(m-g)),t.copy(r).addScaledVector(s3,a);const x=1/(_+v+d);return o=v*x,a=d*x,t.copy(i).addScaledVector(Du,o).addScaledVector(Lu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let g6=0;class si extends ya{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:g6++}),this.uuid=Vr(),this.name="",this.type="Material",this.blending=ia,this.side=wo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=hC,this.blendDst=dC,this.blendEquation=uc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ry,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=dO,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=gv,this.stencilZFail=gv,this.stencilZPass=gv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ia&&(i.blending=this.blending),this.side!==wo&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class nn extends si{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ti=new j,qg=new Ne;class Kt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=kp,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)qg.fromBufferAttribute(this,t),qg.applyMatrix3(e),this.setXY(t,qg.x,qg.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ti.fromBufferAttribute(this,t),ti.applyMatrix3(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ti.fromBufferAttribute(this,t),ti.applyMatrix4(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ti.fromBufferAttribute(this,t),ti.applyNormalMatrix(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ti.fromBufferAttribute(this,t),ti.transformDirection(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=qo(t,this.array)),t}setX(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=qo(t,this.array)),t}setY(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=qo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=qo(t,this.array)),t}setW(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),i=mn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),i=mn(i,this.array),r=mn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),i=mn(i,this.array),r=mn(r,this.array),s=mn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==kp&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class v6 extends Kt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class y6 extends Kt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class _6 extends Kt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class x6 extends Kt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class SC extends Kt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class S6 extends Kt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class wC extends Kt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class w6 extends Kt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}}class ot extends Kt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class A6 extends Kt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let M6=0;const ss=new dt,Ax=new Ut,Ou=new j,kr=new _a,ud=new _a,wi=new j;class Mt extends ya{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:M6++}),this.uuid=Vr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(mO(e)?wC:SC)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Xi().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ss.makeRotationFromQuaternion(e),this.applyMatrix4(ss),this}rotateX(e){return ss.makeRotationX(e),this.applyMatrix4(ss),this}rotateY(e){return ss.makeRotationY(e),this.applyMatrix4(ss),this}rotateZ(e){return ss.makeRotationZ(e),this.applyMatrix4(ss),this}translate(e,t,i){return ss.makeTranslation(e,t,i),this.applyMatrix4(ss),this}scale(e,t,i){return ss.makeScale(e,t,i),this.applyMatrix4(ss),this}lookAt(e){return Ax.lookAt(e),Ax.updateMatrix(),this.applyMatrix4(Ax.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ou).negate(),this.translate(Ou.x,Ou.y,Ou.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ot(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new _a);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];kr.setFromBufferAttribute(s),this.morphTargetsRelative?(wi.addVectors(this.boundingBox.min,kr.min),this.boundingBox.expandByPoint(wi),wi.addVectors(this.boundingBox.max,kr.max),this.boundingBox.expandByPoint(wi)):(this.boundingBox.expandByPoint(kr.min),this.boundingBox.expandByPoint(kr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new j,1/0);return}if(e){const i=this.boundingSphere.center;if(kr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];ud.setFromBufferAttribute(a),this.morphTargetsRelative?(wi.addVectors(kr.min,ud.min),kr.expandByPoint(wi),wi.addVectors(kr.max,ud.max),kr.expandByPoint(wi)):(kr.expandByPoint(ud.min),kr.expandByPoint(ud.max))}kr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)wi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(wi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)wi.fromBufferAttribute(a,c),l&&(Ou.fromBufferAttribute(e,c),wi.add(Ou)),r=Math.max(r,i.distanceToSquared(wi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Kt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let B=0;B<a;B++)c[B]=new j,u[B]=new j;const f=new j,d=new j,m=new j,g=new Ne,v=new Ne,_=new Ne,x=new j,y=new j;function S(B,O,G){f.fromArray(r,B*3),d.fromArray(r,O*3),m.fromArray(r,G*3),g.fromArray(o,B*2),v.fromArray(o,O*2),_.fromArray(o,G*2),d.sub(f),m.sub(f),v.sub(g),_.sub(g);const N=1/(v.x*_.y-_.x*v.y);isFinite(N)&&(x.copy(d).multiplyScalar(_.y).addScaledVector(m,-v.y).multiplyScalar(N),y.copy(m).multiplyScalar(v.x).addScaledVector(d,-_.x).multiplyScalar(N),c[B].add(x),c[O].add(x),c[G].add(x),u[B].add(y),u[O].add(y),u[G].add(y))}let A=this.groups;A.length===0&&(A=[{start:0,count:i.length}]);for(let B=0,O=A.length;B<O;++B){const G=A[B],N=G.start,k=G.count;for(let X=N,te=N+k;X<te;X+=3)S(i[X+0],i[X+1],i[X+2])}const C=new j,b=new j,P=new j,E=new j;function R(B){P.fromArray(s,B*3),E.copy(P);const O=c[B];C.copy(O),C.sub(P.multiplyScalar(P.dot(O))).normalize(),b.crossVectors(E,O);const N=b.dot(u[B])<0?-1:1;l[B*4]=C.x,l[B*4+1]=C.y,l[B*4+2]=C.z,l[B*4+3]=N}for(let B=0,O=A.length;B<O;++B){const G=A[B],N=G.start,k=G.count;for(let X=N,te=N+k;X<te;X+=3)R(i[X+0]),R(i[X+1]),R(i[X+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Kt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let d=0,m=i.count;d<m;d++)i.setXYZ(d,0,0,0);const r=new j,s=new j,o=new j,a=new j,l=new j,c=new j,u=new j,f=new j;if(e)for(let d=0,m=e.count;d<m;d+=3){const g=e.getX(d+0),v=e.getX(d+1),_=e.getX(d+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,_),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,v),c.fromBufferAttribute(i,_),a.add(u),l.add(u),c.add(u),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(_,c.x,c.y,c.z)}else for(let d=0,m=t.count;d<m;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(d+0,u.x,u.y,u.z),i.setXYZ(d+1,u.x,u.y,u.z),i.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)wi.fromBufferAttribute(e,t),wi.normalize(),e.setXYZ(t,wi.x,wi.y,wi.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,d=new c.constructor(l.length*u);let m=0,g=0;for(let v=0,_=l.length;v<_;v++){a.isInterleavedBufferAttribute?m=l[v]*a.data.stride+a.offset:m=l[v]*u;for(let x=0;x<u;x++)d[g++]=c[m++]}return new Kt(d,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Mt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const d=c[u],m=e(d,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,d=c.length;f<d;f++){const m=c[f];u.push(m.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let d=0,m=f.length;d<m;d++)u.push(f[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const o3=new dt,ku=new cm,Mx=new xa,fd=new j,hd=new j,dd=new j,Cx=new j,$g=new j,e0=new Ne,t0=new Ne,n0=new Ne,Ex=new j,i0=new j;class Ln extends Ut{constructor(e=new Mt,t=new nn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){$g.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(Cx.fromBufferAttribute(f,e),o?$g.addScaledVector(Cx,u):$g.addScaledVector(Cx.sub(t),u))}t.add($g)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Mx.copy(i.boundingSphere),Mx.applyMatrix4(s),e.ray.intersectsSphere(Mx)===!1)||(o3.copy(s).invert(),ku.copy(e.ray).applyMatrix4(o3),i.boundingBox!==null&&ku.intersectsBox(i.boundingBox)===!1))return;let o;const a=i.index,l=i.attributes.position,c=i.attributes.uv,u=i.attributes.uv2,f=i.groups,d=i.drawRange;if(a!==null)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const v=f[m],_=r[v.materialIndex],x=Math.max(v.start,d.start),y=Math.min(a.count,Math.min(v.start+v.count,d.start+d.count));for(let S=x,A=y;S<A;S+=3){const C=a.getX(S),b=a.getX(S+1),P=a.getX(S+2);o=r0(this,_,e,ku,c,u,C,b,P),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const m=Math.max(0,d.start),g=Math.min(a.count,d.start+d.count);for(let v=m,_=g;v<_;v+=3){const x=a.getX(v),y=a.getX(v+1),S=a.getX(v+2);o=r0(this,r,e,ku,c,u,x,y,S),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const v=f[m],_=r[v.materialIndex],x=Math.max(v.start,d.start),y=Math.min(l.count,Math.min(v.start+v.count,d.start+d.count));for(let S=x,A=y;S<A;S+=3){const C=S,b=S+1,P=S+2;o=r0(this,_,e,ku,c,u,C,b,P),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const m=Math.max(0,d.start),g=Math.min(l.count,d.start+d.count);for(let v=m,_=g;v<_;v+=3){const x=v,y=v+1,S=v+2;o=r0(this,r,e,ku,c,u,x,y,S),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}}}function C6(n,e,t,i,r,s,o,a){let l;if(e.side===ur?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===wo,a),l===null)return null;i0.copy(a),i0.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(i0);return c<t.near||c>t.far?null:{distance:c,point:i0.clone(),object:n}}function r0(n,e,t,i,r,s,o,a,l){n.getVertexPosition(o,fd),n.getVertexPosition(a,hd),n.getVertexPosition(l,dd);const c=C6(n,e,t,i,fd,hd,dd,Ex);if(c){r&&(e0.fromBufferAttribute(r,o),t0.fromBufferAttribute(r,a),n0.fromBufferAttribute(r,l),c.uv=ds.getUV(Ex,fd,hd,dd,e0,t0,n0,new Ne)),s&&(e0.fromBufferAttribute(s,o),t0.fromBufferAttribute(s,a),n0.fromBufferAttribute(s,l),c.uv2=ds.getUV(Ex,fd,hd,dd,e0,t0,n0,new Ne));const u={a:o,b:a,c:l,normal:new j,materialIndex:0};ds.getNormal(fd,hd,dd,u.normal),c.face=u}return c}class Vn extends Mt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let d=0,m=0;g("z","y","x",-1,-1,i,t,e,o,s,0),g("z","y","x",1,-1,i,t,-e,o,s,1),g("x","z","y",1,1,e,i,t,r,o,2),g("x","z","y",1,-1,e,i,-t,r,o,3),g("x","y","z",1,-1,e,t,i,r,s,4),g("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new ot(c,3)),this.setAttribute("normal",new ot(u,3)),this.setAttribute("uv",new ot(f,2));function g(v,_,x,y,S,A,C,b,P,E,R){const B=A/P,O=C/E,G=A/2,N=C/2,k=b/2,X=P+1,te=E+1;let oe=0,H=0;const J=new j;for(let Q=0;Q<te;Q++){const U=Q*O-N;for(let V=0;V<X;V++){const Z=V*B-G;J[v]=Z*y,J[_]=U*S,J[x]=k,c.push(J.x,J.y,J.z),J[v]=0,J[_]=0,J[x]=b>0?1:-1,u.push(J.x,J.y,J.z),f.push(V/P),f.push(1-Q/E),oe+=1}}for(let Q=0;Q<E;Q++)for(let U=0;U<P;U++){const V=d+U+X*Q,Z=d+U+X*(Q+1),K=d+(U+1)+X*(Q+1),ne=d+(U+1)+X*Q;l.push(V,Z,ne),l.push(Z,K,ne),H+=6}a.addGroup(m,H,R),m+=H,d+=oe}}static fromJSON(e){return new Vn(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Zf(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function ar(n){const e={};for(let t=0;t<n.length;t++){const i=Zf(n[t]);for(const r in i)e[r]=i[r]}return e}function E6(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function vO(n){return n.getRenderTarget()===null&&n.outputEncoding===pn?Ds:Qf}const Yy={clone:Zf,merge:ar};var b6=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,T6=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Cr extends si{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=b6,this.fragmentShader=T6,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Zf(e.uniforms),this.uniformsGroups=E6(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class um extends Ut{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dt,this.projectionMatrix=new dt,this.projectionMatrixInverse=new dt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class fi extends um{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Fp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Tc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Fp*2*Math.atan(Math.tan(Tc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Tc*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Fu=-90,Uu=1;class yO extends Ut{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new fi(Fu,Uu,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new fi(Fu,Uu,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new fi(Fu,Uu,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new fi(Fu,Uu,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new fi(Fu,Uu,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new fi(Fu,Uu,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,u=e.getRenderTarget(),f=e.toneMapping,d=e.xr.enabled;e.toneMapping=Vs,e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=m,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=f,e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class fm extends Cn{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:ca,super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class AC extends ws{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new fm(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:gn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Vn(5,5,5),s=new Cr({name:"CubemapFromEquirect",uniforms:Zf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ur,blending:na});s.uniforms.tEquirect.value=t;const o=new Ln(r,s),a=t.minFilter;return t.minFilter===Ao&&(t.minFilter=gn),new yO(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const bx=new j,P6=new j,R6=new Xi;class Ja{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=bx.subVectors(i,t).cross(P6.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(bx),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||R6.getNormalMatrix(e),r=this.coplanarPoint(bx).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Nu=new xa,s0=new j;class Ky{constructor(e=new Ja,t=new Ja,i=new Ja,r=new Ja,s=new Ja,o=new Ja){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],f=i[7],d=i[8],m=i[9],g=i[10],v=i[11],_=i[12],x=i[13],y=i[14],S=i[15];return t[0].setComponents(a-r,f-l,v-d,S-_).normalize(),t[1].setComponents(a+r,f+l,v+d,S+_).normalize(),t[2].setComponents(a+s,f+c,v+m,S+x).normalize(),t[3].setComponents(a-s,f-c,v-m,S-x).normalize(),t[4].setComponents(a-o,f-u,v-g,S-y).normalize(),t[5].setComponents(a+o,f+u,v+g,S+y).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Nu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Nu)}intersectsSprite(e){return Nu.center.set(0,0,0),Nu.radius=.7071067811865476,Nu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Nu)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(s0.x=r.normal.x>0?e.max.x:e.min.x,s0.y=r.normal.y>0?e.max.y:e.min.y,s0.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(s0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function _O(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function I6(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,u){const f=c.array,d=c.usage,m=n.createBuffer();n.bindBuffer(u,m),n.bufferData(u,f,d),c.onUploadCallback();let g;if(f instanceof Float32Array)g=5126;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(f instanceof Int16Array)g=5122;else if(f instanceof Uint32Array)g=5125;else if(f instanceof Int32Array)g=5124;else if(f instanceof Int8Array)g=5120;else if(f instanceof Uint8Array)g=5121;else if(f instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:m,type:g,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,f){const d=u.array,m=u.updateRange;n.bindBuffer(f,c),m.count===-1?n.bufferSubData(f,0,d):(t?n.bufferSubData(f,m.offset*d.BYTES_PER_ELEMENT,d,m.offset,m.count):n.bufferSubData(f,m.offset*d.BYTES_PER_ELEMENT,d.subarray(m.offset,m.offset+m.count)),m.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const d=i.get(c);(!d||d.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=i.get(c);f===void 0?i.set(c,r(c,u)):f.version<c.version&&(s(f.buffer,c,u),f.version=c.version)}return{get:o,remove:a,update:l}}class Js extends Mt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,f=e/a,d=t/l,m=[],g=[],v=[],_=[];for(let x=0;x<u;x++){const y=x*d-o;for(let S=0;S<c;S++){const A=S*f-s;g.push(A,-y,0),v.push(0,0,1),_.push(S/a),_.push(1-x/l)}}for(let x=0;x<l;x++)for(let y=0;y<a;y++){const S=y+c*x,A=y+c*(x+1),C=y+1+c*(x+1),b=y+1+c*x;m.push(S,A,b),m.push(A,C,b)}this.setIndex(m),this.setAttribute("position",new ot(g,3)),this.setAttribute("normal",new ot(v,3)),this.setAttribute("uv",new ot(_,2))}static fromJSON(e){return new Js(e.width,e.height,e.widthSegments,e.heightSegments)}}var B6=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,D6=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,L6=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,O6=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,k6=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,F6=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,U6="vec3 transformed = vec3( position );",N6=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,z6=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,G6=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,H6=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,V6=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,W6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,j6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,J6=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,X6=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Y6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,K6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Q6=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Z6=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,q6=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,$6=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,eH=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,tH=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,nH=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,iH=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,rH="gl_FragColor = linearToOutputTexel( gl_FragColor );",sH=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,oH=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,aH=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,lH=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,cH=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,uH=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fH=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,hH=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,dH=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,pH=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,mH=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,gH=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,vH=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,yH=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,_H=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,xH=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,SH=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,wH=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,AH=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,MH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,CH=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,EH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,bH=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,TH=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,PH=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,RH=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,IH=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,BH=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,DH=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,LH=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,OH=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,kH=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,FH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,UH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,NH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,zH=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,GH=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,HH=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,VH=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,WH=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,jH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,JH=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,XH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,YH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,KH=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,QH=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,ZH=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,qH=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,$H=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,e8=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,t8=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,n8=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,i8=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,r8=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,s8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,o8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,a8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,l8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,c8=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,u8=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,f8=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,h8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,d8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,p8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,m8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,g8=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,v8=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,y8=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,_8=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,x8=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,S8=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,w8=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,A8=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,M8=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,C8=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,E8=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,b8=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,T8=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,P8=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const R8=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,I8=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,B8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,D8=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,L8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,O8=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,k8=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,F8=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,U8=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,N8=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,z8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,G8=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,H8=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,V8=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,W8=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,j8=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,J8=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,X8=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,K8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q8=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Z8=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,q8=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$8=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,e9=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,t9=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n9=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,i9=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r9=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,s9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,o9=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a9=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,l9=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,c9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Tt={alphamap_fragment:B6,alphamap_pars_fragment:D6,alphatest_fragment:L6,alphatest_pars_fragment:O6,aomap_fragment:k6,aomap_pars_fragment:F6,begin_vertex:U6,beginnormal_vertex:N6,bsdfs:z6,iridescence_fragment:G6,bumpmap_pars_fragment:H6,clipping_planes_fragment:V6,clipping_planes_pars_fragment:W6,clipping_planes_pars_vertex:j6,clipping_planes_vertex:J6,color_fragment:X6,color_pars_fragment:Y6,color_pars_vertex:K6,color_vertex:Q6,common:Z6,cube_uv_reflection_fragment:q6,defaultnormal_vertex:$6,displacementmap_pars_vertex:eH,displacementmap_vertex:tH,emissivemap_fragment:nH,emissivemap_pars_fragment:iH,encodings_fragment:rH,encodings_pars_fragment:sH,envmap_fragment:oH,envmap_common_pars_fragment:aH,envmap_pars_fragment:lH,envmap_pars_vertex:cH,envmap_physical_pars_fragment:SH,envmap_vertex:uH,fog_vertex:fH,fog_pars_vertex:hH,fog_fragment:dH,fog_pars_fragment:pH,gradientmap_pars_fragment:mH,lightmap_fragment:gH,lightmap_pars_fragment:vH,lights_lambert_fragment:yH,lights_lambert_pars_fragment:_H,lights_pars_begin:xH,lights_toon_fragment:wH,lights_toon_pars_fragment:AH,lights_phong_fragment:MH,lights_phong_pars_fragment:CH,lights_physical_fragment:EH,lights_physical_pars_fragment:bH,lights_fragment_begin:TH,lights_fragment_maps:PH,lights_fragment_end:RH,logdepthbuf_fragment:IH,logdepthbuf_pars_fragment:BH,logdepthbuf_pars_vertex:DH,logdepthbuf_vertex:LH,map_fragment:OH,map_pars_fragment:kH,map_particle_fragment:FH,map_particle_pars_fragment:UH,metalnessmap_fragment:NH,metalnessmap_pars_fragment:zH,morphcolor_vertex:GH,morphnormal_vertex:HH,morphtarget_pars_vertex:VH,morphtarget_vertex:WH,normal_fragment_begin:jH,normal_fragment_maps:JH,normal_pars_fragment:XH,normal_pars_vertex:YH,normal_vertex:KH,normalmap_pars_fragment:QH,clearcoat_normal_fragment_begin:ZH,clearcoat_normal_fragment_maps:qH,clearcoat_pars_fragment:$H,iridescence_pars_fragment:e8,output_fragment:t8,packing:n8,premultiplied_alpha_fragment:i8,project_vertex:r8,dithering_fragment:s8,dithering_pars_fragment:o8,roughnessmap_fragment:a8,roughnessmap_pars_fragment:l8,shadowmap_pars_fragment:c8,shadowmap_pars_vertex:u8,shadowmap_vertex:f8,shadowmask_pars_fragment:h8,skinbase_vertex:d8,skinning_pars_vertex:p8,skinning_vertex:m8,skinnormal_vertex:g8,specularmap_fragment:v8,specularmap_pars_fragment:y8,tonemapping_fragment:_8,tonemapping_pars_fragment:x8,transmission_fragment:S8,transmission_pars_fragment:w8,uv_pars_fragment:A8,uv_pars_vertex:M8,uv_vertex:C8,uv2_pars_fragment:E8,uv2_pars_vertex:b8,uv2_vertex:T8,worldpos_vertex:P8,background_vert:R8,background_frag:I8,backgroundCube_vert:B8,backgroundCube_frag:D8,cube_vert:L8,cube_frag:O8,depth_vert:k8,depth_frag:F8,distanceRGBA_vert:U8,distanceRGBA_frag:N8,equirect_vert:z8,equirect_frag:G8,linedashed_vert:H8,linedashed_frag:V8,meshbasic_vert:W8,meshbasic_frag:j8,meshlambert_vert:J8,meshlambert_frag:X8,meshmatcap_vert:Y8,meshmatcap_frag:K8,meshnormal_vert:Q8,meshnormal_frag:Z8,meshphong_vert:q8,meshphong_frag:$8,meshphysical_vert:e9,meshphysical_frag:t9,meshtoon_vert:n9,meshtoon_frag:i9,points_vert:r9,points_frag:s9,shadow_vert:o9,shadow_frag:a9,sprite_vert:l9,sprite_frag:c9},qe={common:{diffuse:{value:new Je(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Xi},uv2Transform:{value:new Xi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ne(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Je(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Je(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Xi}},sprite:{diffuse:{value:new Je(16777215)},opacity:{value:1},center:{value:new Ne(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Xi}}},Os={basic:{uniforms:ar([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.fog]),vertexShader:Tt.meshbasic_vert,fragmentShader:Tt.meshbasic_frag},lambert:{uniforms:ar([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,qe.lights,{emissive:{value:new Je(0)}}]),vertexShader:Tt.meshlambert_vert,fragmentShader:Tt.meshlambert_frag},phong:{uniforms:ar([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,qe.lights,{emissive:{value:new Je(0)},specular:{value:new Je(1118481)},shininess:{value:30}}]),vertexShader:Tt.meshphong_vert,fragmentShader:Tt.meshphong_frag},standard:{uniforms:ar([qe.common,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.roughnessmap,qe.metalnessmap,qe.fog,qe.lights,{emissive:{value:new Je(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag},toon:{uniforms:ar([qe.common,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.gradientmap,qe.fog,qe.lights,{emissive:{value:new Je(0)}}]),vertexShader:Tt.meshtoon_vert,fragmentShader:Tt.meshtoon_frag},matcap:{uniforms:ar([qe.common,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,{matcap:{value:null}}]),vertexShader:Tt.meshmatcap_vert,fragmentShader:Tt.meshmatcap_frag},points:{uniforms:ar([qe.points,qe.fog]),vertexShader:Tt.points_vert,fragmentShader:Tt.points_frag},dashed:{uniforms:ar([qe.common,qe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tt.linedashed_vert,fragmentShader:Tt.linedashed_frag},depth:{uniforms:ar([qe.common,qe.displacementmap]),vertexShader:Tt.depth_vert,fragmentShader:Tt.depth_frag},normal:{uniforms:ar([qe.common,qe.bumpmap,qe.normalmap,qe.displacementmap,{opacity:{value:1}}]),vertexShader:Tt.meshnormal_vert,fragmentShader:Tt.meshnormal_frag},sprite:{uniforms:ar([qe.sprite,qe.fog]),vertexShader:Tt.sprite_vert,fragmentShader:Tt.sprite_frag},background:{uniforms:{uvTransform:{value:new Xi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Tt.background_vert,fragmentShader:Tt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Tt.backgroundCube_vert,fragmentShader:Tt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Tt.cube_vert,fragmentShader:Tt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tt.equirect_vert,fragmentShader:Tt.equirect_frag},distanceRGBA:{uniforms:ar([qe.common,qe.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tt.distanceRGBA_vert,fragmentShader:Tt.distanceRGBA_frag},shadow:{uniforms:ar([qe.lights,qe.fog,{color:{value:new Je(0)},opacity:{value:1}}]),vertexShader:Tt.shadow_vert,fragmentShader:Tt.shadow_frag}};Os.physical={uniforms:ar([Os.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ne(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Je(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ne},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Je(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Je(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag};const o0={r:0,b:0,g:0};function u9(n,e,t,i,r,s,o){const a=new Je(0);let l=s===!0?0:1,c,u,f=null,d=0,m=null;function g(_,x){let y=!1,S=x.isScene===!0?x.background:null;S&&S.isTexture&&(S=(x.backgroundBlurriness>0?t:e).get(S));const A=n.xr,C=A.getSession&&A.getSession();C&&C.environmentBlendMode==="additive"&&(S=null),S===null?v(a,l):S&&S.isColor&&(v(S,1),y=!0),(n.autoClear||y)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===mh)?(u===void 0&&(u=new Ln(new Vn(1,1,1),new Cr({name:"BackgroundCubeMaterial",uniforms:Zf(Os.backgroundCube.uniforms),vertexShader:Os.backgroundCube.vertexShader,fragmentShader:Os.backgroundCube.fragmentShader,side:ur,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(b,P,E){this.matrixWorld.copyPosition(E.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=S,u.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,u.material.toneMapped=S.encoding!==pn,(f!==S||d!==S.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,f=S,d=S.version,m=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new Ln(new Js(2,2),new Cr({name:"BackgroundMaterial",uniforms:Zf(Os.background.uniforms),vertexShader:Os.background.vertexShader,fragmentShader:Os.background.fragmentShader,side:wo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,c.material.toneMapped=S.encoding!==pn,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(f!==S||d!==S.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=S,d=S.version,m=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function v(_,x){_.getRGB(o0,vO(n)),i.buffers.color.setClear(o0.r,o0.g,o0.b,x,o)}return{getClearColor:function(){return a},setClearColor:function(_,x=1){a.set(_),l=x,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,v(a,l)},render:g}}function f9(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=_(null);let c=l,u=!1;function f(k,X,te,oe,H){let J=!1;if(o){const Q=v(oe,te,X);c!==Q&&(c=Q,m(c.object)),J=x(k,oe,te,H),J&&y(k,oe,te,H)}else{const Q=X.wireframe===!0;(c.geometry!==oe.id||c.program!==te.id||c.wireframe!==Q)&&(c.geometry=oe.id,c.program=te.id,c.wireframe=Q,J=!0)}H!==null&&t.update(H,34963),(J||u)&&(u=!1,E(k,X,te,oe),H!==null&&n.bindBuffer(34963,t.get(H).buffer))}function d(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(k){return i.isWebGL2?n.bindVertexArray(k):s.bindVertexArrayOES(k)}function g(k){return i.isWebGL2?n.deleteVertexArray(k):s.deleteVertexArrayOES(k)}function v(k,X,te){const oe=te.wireframe===!0;let H=a[k.id];H===void 0&&(H={},a[k.id]=H);let J=H[X.id];J===void 0&&(J={},H[X.id]=J);let Q=J[oe];return Q===void 0&&(Q=_(d()),J[oe]=Q),Q}function _(k){const X=[],te=[],oe=[];for(let H=0;H<r;H++)X[H]=0,te[H]=0,oe[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:te,attributeDivisors:oe,object:k,attributes:{},index:null}}function x(k,X,te,oe){const H=c.attributes,J=X.attributes;let Q=0;const U=te.getAttributes();for(const V in U)if(U[V].location>=0){const K=H[V];let ne=J[V];if(ne===void 0&&(V==="instanceMatrix"&&k.instanceMatrix&&(ne=k.instanceMatrix),V==="instanceColor"&&k.instanceColor&&(ne=k.instanceColor)),K===void 0||K.attribute!==ne||ne&&K.data!==ne.data)return!0;Q++}return c.attributesNum!==Q||c.index!==oe}function y(k,X,te,oe){const H={},J=X.attributes;let Q=0;const U=te.getAttributes();for(const V in U)if(U[V].location>=0){let K=J[V];K===void 0&&(V==="instanceMatrix"&&k.instanceMatrix&&(K=k.instanceMatrix),V==="instanceColor"&&k.instanceColor&&(K=k.instanceColor));const ne={};ne.attribute=K,K&&K.data&&(ne.data=K.data),H[V]=ne,Q++}c.attributes=H,c.attributesNum=Q,c.index=oe}function S(){const k=c.newAttributes;for(let X=0,te=k.length;X<te;X++)k[X]=0}function A(k){C(k,0)}function C(k,X){const te=c.newAttributes,oe=c.enabledAttributes,H=c.attributeDivisors;te[k]=1,oe[k]===0&&(n.enableVertexAttribArray(k),oe[k]=1),H[k]!==X&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](k,X),H[k]=X)}function b(){const k=c.newAttributes,X=c.enabledAttributes;for(let te=0,oe=X.length;te<oe;te++)X[te]!==k[te]&&(n.disableVertexAttribArray(te),X[te]=0)}function P(k,X,te,oe,H,J){i.isWebGL2===!0&&(te===5124||te===5125)?n.vertexAttribIPointer(k,X,te,H,J):n.vertexAttribPointer(k,X,te,oe,H,J)}function E(k,X,te,oe){if(i.isWebGL2===!1&&(k.isInstancedMesh||oe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const H=oe.attributes,J=te.getAttributes(),Q=X.defaultAttributeValues;for(const U in J){const V=J[U];if(V.location>=0){let Z=H[U];if(Z===void 0&&(U==="instanceMatrix"&&k.instanceMatrix&&(Z=k.instanceMatrix),U==="instanceColor"&&k.instanceColor&&(Z=k.instanceColor)),Z!==void 0){const K=Z.normalized,ne=Z.itemSize,z=t.get(Z);if(z===void 0)continue;const ae=z.buffer,ie=z.type,ye=z.bytesPerElement;if(Z.isInterleavedBufferAttribute){const re=Z.data,he=re.stride,q=Z.offset;if(re.isInstancedInterleavedBuffer){for(let ce=0;ce<V.locationSize;ce++)C(V.location+ce,re.meshPerAttribute);k.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let ce=0;ce<V.locationSize;ce++)A(V.location+ce);n.bindBuffer(34962,ae);for(let ce=0;ce<V.locationSize;ce++)P(V.location+ce,ne/V.locationSize,ie,K,he*ye,(q+ne/V.locationSize*ce)*ye)}else{if(Z.isInstancedBufferAttribute){for(let re=0;re<V.locationSize;re++)C(V.location+re,Z.meshPerAttribute);k.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let re=0;re<V.locationSize;re++)A(V.location+re);n.bindBuffer(34962,ae);for(let re=0;re<V.locationSize;re++)P(V.location+re,ne/V.locationSize,ie,K,ne*ye,ne/V.locationSize*re*ye)}}else if(Q!==void 0){const K=Q[U];if(K!==void 0)switch(K.length){case 2:n.vertexAttrib2fv(V.location,K);break;case 3:n.vertexAttrib3fv(V.location,K);break;case 4:n.vertexAttrib4fv(V.location,K);break;default:n.vertexAttrib1fv(V.location,K)}}}}b()}function R(){G();for(const k in a){const X=a[k];for(const te in X){const oe=X[te];for(const H in oe)g(oe[H].object),delete oe[H];delete X[te]}delete a[k]}}function B(k){if(a[k.id]===void 0)return;const X=a[k.id];for(const te in X){const oe=X[te];for(const H in oe)g(oe[H].object),delete oe[H];delete X[te]}delete a[k.id]}function O(k){for(const X in a){const te=a[X];if(te[k.id]===void 0)continue;const oe=te[k.id];for(const H in oe)g(oe[H].object),delete oe[H];delete te[k.id]}}function G(){N(),u=!0,c!==l&&(c=l,m(c.object))}function N(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:G,resetDefaultState:N,dispose:R,releaseStatesOfGeometry:B,releaseStatesOfProgram:O,initAttributes:S,enableAttribute:A,disableUnusedAttributes:b}}function h9(n,e,t,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,f){if(f===0)return;let d,m;if(r)d=n,m="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[m](s,c,u,f),t.update(u,s,f)}this.setMode=o,this.render=a,this.renderInstances=l}function d9(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(P){if(P==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,f=n.getParameter(34930),d=n.getParameter(35660),m=n.getParameter(3379),g=n.getParameter(34076),v=n.getParameter(34921),_=n.getParameter(36347),x=n.getParameter(36348),y=n.getParameter(36349),S=d>0,A=o||e.has("OES_texture_float"),C=S&&A,b=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:d,maxTextureSize:m,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:_,maxVaryings:x,maxFragmentUniforms:y,vertexTextures:S,floatFragmentTextures:A,floatVertexTextures:C,maxSamples:b}}function p9(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Ja,a=new Xi,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d,m){const g=f.length!==0||d||i!==0||r;return r=d,t=u(f,m,0),i=f.length,g},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(f,d,m){const g=f.clippingPlanes,v=f.clipIntersection,_=f.clipShadows,x=n.get(f);if(!r||g===null||g.length===0||s&&!_)s?u(null):c();else{const y=s?0:i,S=y*4;let A=x.clippingState||null;l.value=A,A=u(g,d,S,m);for(let C=0;C!==S;++C)A[C]=t[C];x.clippingState=A,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,d,m,g){const v=f!==null?f.length:0;let _=null;if(v!==0){if(_=l.value,g!==!0||_===null){const x=m+v*4,y=d.matrixWorldInverse;a.getNormalMatrix(y),(_===null||_.length<x)&&(_=new Float32Array(x));for(let S=0,A=m;S!==v;++S,A+=4)o.copy(f[S]).applyMatrix4(y,a),o.normal.toArray(_,A),_[A+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,_}}function m9(n){let e=new WeakMap;function t(o,a){return a===Xf?o.mapping=ca:a===Dp&&(o.mapping=_l),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Xf||a===Dp)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new AC(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class gh extends um{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const vf=4,a3=[.125,.215,.35,.446,.526,.582],fc=20,Tx=new gh,l3=new Je;let Px=null;const lc=(1+Math.sqrt(5))/2,zu=1/lc,c3=[new j(1,1,1),new j(-1,1,1),new j(1,1,-1),new j(-1,1,-1),new j(0,lc,zu),new j(0,lc,-zu),new j(zu,0,lc),new j(-zu,0,lc),new j(lc,zu,0),new j(-lc,zu,0)];class oA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Px=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=h3(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=f3(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Px),e.scissorTest=!1,a0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ca||e.mapping===_l?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Px=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:gn,minFilter:gn,generateMipmaps:!1,type:Us,format:_r,encoding:fa,depthBuffer:!1},r=u3(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=u3(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=g9(s)),this._blurMaterial=v9(s,e,t)}return r}_compileMaterial(e){const t=new Ln(this._lodPlanes[0],e);this._renderer.compile(t,Tx)}_sceneToCubeUV(e,t,i,r){const a=new fi(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,d=u.toneMapping;u.getClearColor(l3),u.toneMapping=Vs,u.autoClear=!1;const m=new nn({name:"PMREM.Background",side:ur,depthWrite:!1,depthTest:!1}),g=new Ln(new Vn,m);let v=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,v=!0):(m.color.copy(l3),v=!0);for(let x=0;x<6;x++){const y=x%3;y===0?(a.up.set(0,l[x],0),a.lookAt(c[x],0,0)):y===1?(a.up.set(0,0,l[x]),a.lookAt(0,c[x],0)):(a.up.set(0,l[x],0),a.lookAt(0,0,c[x]));const S=this._cubeSize;a0(r,y*S,x>2?S:0,S,S),u.setRenderTarget(r),v&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=d,u.autoClear=f,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===ca||e.mapping===_l;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=h3()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=f3());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ln(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;a0(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,Tx)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=c3[(r-1)%c3.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new Ln(this._lodPlanes[r],c),d=c.uniforms,m=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*fc-1),v=s/g,_=isFinite(s)?1+Math.floor(u*v):fc;_>fc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${fc}`);const x=[];let y=0;for(let P=0;P<fc;++P){const E=P/v,R=Math.exp(-E*E/2);x.push(R),P===0?y+=R:P<_&&(y+=2*R)}for(let P=0;P<x.length;P++)x[P]=x[P]/y;d.envMap.value=e.texture,d.samples.value=_,d.weights.value=x,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:S}=this;d.dTheta.value=g,d.mipInt.value=S-i;const A=this._sizeLods[r],C=3*A*(r>S-vf?r-S+vf:0),b=4*(this._cubeSize-A);a0(t,C,b,3*A,2*A),l.setRenderTarget(t),l.render(f,Tx)}}function g9(n){const e=[],t=[],i=[];let r=n;const s=n-vf+1+a3.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-vf?l=a3[o-n+vf-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,f=1+c,d=[u,u,f,u,f,f,u,u,f,f,u,f],m=6,g=6,v=3,_=2,x=1,y=new Float32Array(v*g*m),S=new Float32Array(_*g*m),A=new Float32Array(x*g*m);for(let b=0;b<m;b++){const P=b%3*2/3-1,E=b>2?0:-1,R=[P,E,0,P+2/3,E,0,P+2/3,E+1,0,P,E,0,P+2/3,E+1,0,P,E+1,0];y.set(R,v*g*b),S.set(d,_*g*b);const B=[b,b,b,b,b,b];A.set(B,x*g*b)}const C=new Mt;C.setAttribute("position",new Kt(y,v)),C.setAttribute("uv",new Kt(S,_)),C.setAttribute("faceIndex",new Kt(A,x)),e.push(C),r>vf&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function u3(n,e,t){const i=new ws(n,e,t);return i.texture.mapping=mh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function a0(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function v9(n,e,t){const i=new Float32Array(fc),r=new j(0,1,0);return new Cr({name:"SphericalGaussianBlur",defines:{n:fc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:MC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:na,depthTest:!1,depthWrite:!1})}function f3(){return new Cr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:MC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:na,depthTest:!1,depthWrite:!1})}function h3(){return new Cr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:MC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:na,depthTest:!1,depthWrite:!1})}function MC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function y9(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Xf||l===Dp,u=l===ca||l===_l;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new oA(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||u&&f&&r(f)){t===null&&(t=new oA(n));const d=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function _9(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function x9(n,e,t,i){const r={},s=new WeakMap;function o(f){const d=f.target;d.index!==null&&e.remove(d.index);for(const g in d.attributes)e.remove(d.attributes[g]);d.removeEventListener("dispose",o),delete r[d.id];const m=s.get(d);m&&(e.remove(m),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(f,d){return r[d.id]===!0||(d.addEventListener("dispose",o),r[d.id]=!0,t.memory.geometries++),d}function l(f){const d=f.attributes;for(const g in d)e.update(d[g],34962);const m=f.morphAttributes;for(const g in m){const v=m[g];for(let _=0,x=v.length;_<x;_++)e.update(v[_],34962)}}function c(f){const d=[],m=f.index,g=f.attributes.position;let v=0;if(m!==null){const y=m.array;v=m.version;for(let S=0,A=y.length;S<A;S+=3){const C=y[S+0],b=y[S+1],P=y[S+2];d.push(C,b,b,P,P,C)}}else{const y=g.array;v=g.version;for(let S=0,A=y.length/3-1;S<A;S+=3){const C=S+0,b=S+1,P=S+2;d.push(C,b,b,P,P,C)}}const _=new(mO(d)?wC:SC)(d,1);_.version=v;const x=s.get(f);x&&e.remove(x),s.set(f,_)}function u(f){const d=s.get(f);if(d){const m=f.index;m!==null&&d.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function S9(n,e,t,i){const r=i.isWebGL2;let s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function u(d,m){n.drawElements(s,m,a,d*l),t.update(m,s,1)}function f(d,m,g){if(g===0)return;let v,_;if(r)v=n,_="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[_](s,m,a,d*l,g),t.update(m,s,g)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=f}function w9(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function A9(n,e){return n[0]-e[0]}function M9(n,e){return Math.abs(e[1])-Math.abs(n[1])}function C9(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new tn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,f,d){const m=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,_=v!==void 0?v.length:0;let x=s.get(u);if(x===void 0||x.count!==_){let te=function(){k.dispose(),s.delete(u),u.removeEventListener("dispose",te)};var g=te;x!==void 0&&x.texture.dispose();const A=u.morphAttributes.position!==void 0,C=u.morphAttributes.normal!==void 0,b=u.morphAttributes.color!==void 0,P=u.morphAttributes.position||[],E=u.morphAttributes.normal||[],R=u.morphAttributes.color||[];let B=0;A===!0&&(B=1),C===!0&&(B=2),b===!0&&(B=3);let O=u.attributes.position.count*B,G=1;O>e.maxTextureSize&&(G=Math.ceil(O/e.maxTextureSize),O=e.maxTextureSize);const N=new Float32Array(O*G*4*_),k=new lm(N,O,G,_);k.type=gs,k.needsUpdate=!0;const X=B*4;for(let oe=0;oe<_;oe++){const H=P[oe],J=E[oe],Q=R[oe],U=O*G*4*oe;for(let V=0;V<H.count;V++){const Z=V*X;A===!0&&(o.fromBufferAttribute(H,V),N[U+Z+0]=o.x,N[U+Z+1]=o.y,N[U+Z+2]=o.z,N[U+Z+3]=0),C===!0&&(o.fromBufferAttribute(J,V),N[U+Z+4]=o.x,N[U+Z+5]=o.y,N[U+Z+6]=o.z,N[U+Z+7]=0),b===!0&&(o.fromBufferAttribute(Q,V),N[U+Z+8]=o.x,N[U+Z+9]=o.y,N[U+Z+10]=o.z,N[U+Z+11]=Q.itemSize===4?o.w:1)}}x={count:_,texture:k,size:new Ne(O,G)},s.set(u,x),u.addEventListener("dispose",te)}let y=0;for(let A=0;A<m.length;A++)y+=m[A];const S=u.morphTargetsRelative?1:1-y;d.getUniforms().setValue(n,"morphTargetBaseInfluence",S),d.getUniforms().setValue(n,"morphTargetInfluences",m),d.getUniforms().setValue(n,"morphTargetsTexture",x.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}else{const v=m===void 0?0:m.length;let _=i[u.id];if(_===void 0||_.length!==v){_=[];for(let C=0;C<v;C++)_[C]=[C,0];i[u.id]=_}for(let C=0;C<v;C++){const b=_[C];b[0]=C,b[1]=m[C]}_.sort(M9);for(let C=0;C<8;C++)C<v&&_[C][1]?(a[C][0]=_[C][0],a[C][1]=_[C][1]):(a[C][0]=Number.MAX_SAFE_INTEGER,a[C][1]=0);a.sort(A9);const x=u.morphAttributes.position,y=u.morphAttributes.normal;let S=0;for(let C=0;C<8;C++){const b=a[C],P=b[0],E=b[1];P!==Number.MAX_SAFE_INTEGER&&E?(x&&u.getAttribute("morphTarget"+C)!==x[P]&&u.setAttribute("morphTarget"+C,x[P]),y&&u.getAttribute("morphNormal"+C)!==y[P]&&u.setAttribute("morphNormal"+C,y[P]),r[C]=E,S+=E):(x&&u.hasAttribute("morphTarget"+C)===!0&&u.deleteAttribute("morphTarget"+C),y&&u.hasAttribute("morphNormal"+C)===!0&&u.deleteAttribute("morphNormal"+C),r[C]=0)}const A=u.morphTargetsRelative?1:1-S;d.getUniforms().setValue(n,"morphTargetBaseInfluence",A),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function E9(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,f=e.get(l,u);return r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const xO=new Cn,SO=new lm,wO=new Xy,AO=new fm,d3=[],p3=[],m3=new Float32Array(16),g3=new Float32Array(9),v3=new Float32Array(4);function vh(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=d3[r];if(s===void 0&&(s=new Float32Array(r),d3[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function di(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function pi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Qy(n,e){let t=p3[e];t===void 0&&(t=new Int32Array(e),p3[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function b9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function T9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(di(t,e))return;n.uniform2fv(this.addr,e),pi(t,e)}}function P9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(di(t,e))return;n.uniform3fv(this.addr,e),pi(t,e)}}function R9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(di(t,e))return;n.uniform4fv(this.addr,e),pi(t,e)}}function I9(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(di(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),pi(t,e)}else{if(di(t,i))return;v3.set(i),n.uniformMatrix2fv(this.addr,!1,v3),pi(t,i)}}function B9(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(di(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),pi(t,e)}else{if(di(t,i))return;g3.set(i),n.uniformMatrix3fv(this.addr,!1,g3),pi(t,i)}}function D9(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(di(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),pi(t,e)}else{if(di(t,i))return;m3.set(i),n.uniformMatrix4fv(this.addr,!1,m3),pi(t,i)}}function L9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function O9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(di(t,e))return;n.uniform2iv(this.addr,e),pi(t,e)}}function k9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(di(t,e))return;n.uniform3iv(this.addr,e),pi(t,e)}}function F9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(di(t,e))return;n.uniform4iv(this.addr,e),pi(t,e)}}function U9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function N9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(di(t,e))return;n.uniform2uiv(this.addr,e),pi(t,e)}}function z9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(di(t,e))return;n.uniform3uiv(this.addr,e),pi(t,e)}}function G9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(di(t,e))return;n.uniform4uiv(this.addr,e),pi(t,e)}}function H9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||xO,r)}function V9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||wO,r)}function W9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||AO,r)}function j9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||SO,r)}function J9(n){switch(n){case 5126:return b9;case 35664:return T9;case 35665:return P9;case 35666:return R9;case 35674:return I9;case 35675:return B9;case 35676:return D9;case 5124:case 35670:return L9;case 35667:case 35671:return O9;case 35668:case 35672:return k9;case 35669:case 35673:return F9;case 5125:return U9;case 36294:return N9;case 36295:return z9;case 36296:return G9;case 35678:case 36198:case 36298:case 36306:case 35682:return H9;case 35679:case 36299:case 36307:return V9;case 35680:case 36300:case 36308:case 36293:return W9;case 36289:case 36303:case 36311:case 36292:return j9}}function X9(n,e){n.uniform1fv(this.addr,e)}function Y9(n,e){const t=vh(e,this.size,2);n.uniform2fv(this.addr,t)}function K9(n,e){const t=vh(e,this.size,3);n.uniform3fv(this.addr,t)}function Q9(n,e){const t=vh(e,this.size,4);n.uniform4fv(this.addr,t)}function Z9(n,e){const t=vh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function q9(n,e){const t=vh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function $9(n,e){const t=vh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function eV(n,e){n.uniform1iv(this.addr,e)}function tV(n,e){n.uniform2iv(this.addr,e)}function nV(n,e){n.uniform3iv(this.addr,e)}function iV(n,e){n.uniform4iv(this.addr,e)}function rV(n,e){n.uniform1uiv(this.addr,e)}function sV(n,e){n.uniform2uiv(this.addr,e)}function oV(n,e){n.uniform3uiv(this.addr,e)}function aV(n,e){n.uniform4uiv(this.addr,e)}function lV(n,e,t){const i=this.cache,r=e.length,s=Qy(t,r);di(i,s)||(n.uniform1iv(this.addr,s),pi(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||xO,s[o])}function cV(n,e,t){const i=this.cache,r=e.length,s=Qy(t,r);di(i,s)||(n.uniform1iv(this.addr,s),pi(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||wO,s[o])}function uV(n,e,t){const i=this.cache,r=e.length,s=Qy(t,r);di(i,s)||(n.uniform1iv(this.addr,s),pi(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||AO,s[o])}function fV(n,e,t){const i=this.cache,r=e.length,s=Qy(t,r);di(i,s)||(n.uniform1iv(this.addr,s),pi(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||SO,s[o])}function hV(n){switch(n){case 5126:return X9;case 35664:return Y9;case 35665:return K9;case 35666:return Q9;case 35674:return Z9;case 35675:return q9;case 35676:return $9;case 5124:case 35670:return eV;case 35667:case 35671:return tV;case 35668:case 35672:return nV;case 35669:case 35673:return iV;case 5125:return rV;case 36294:return sV;case 36295:return oV;case 36296:return aV;case 35678:case 36198:case 36298:case 36306:case 35682:return lV;case 35679:case 36299:case 36307:return cV;case 35680:case 36300:case 36308:case 36293:return uV;case 36289:case 36303:case 36311:case 36292:return fV}}class dV{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=J9(t.type)}}class pV{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=hV(t.type)}}class mV{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const Rx=/(\w+)(\])?(\[|\.)?/g;function y3(n,e){n.seq.push(e),n.map[e.id]=e}function gV(n,e,t){const i=n.name,r=i.length;for(Rx.lastIndex=0;;){const s=Rx.exec(i),o=Rx.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){y3(t,c===void 0?new dV(a,n,e):new pV(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new mV(a),y3(t,f)),t=f}}}class yv{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);gV(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function _3(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let vV=0;function yV(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function _V(n){switch(n){case fa:return["Linear","( value )"];case pn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function x3(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+yV(n.getShaderSource(e),o)}else return r}function xV(n,e){const t=_V(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function SV(n,e){let t;switch(e){case HL:t="Linear";break;case VL:t="Reinhard";break;case WL:t="OptimizedCineon";break;case pC:t="ACESFilmic";break;case jL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function wV(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(zd).join(`
`)}function AV(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function MV(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function zd(n){return n!==""}function S3(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function w3(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const CV=/^[ \t]*#include +<([\w\d./]+)>/gm;function aA(n){return n.replace(CV,EV)}function EV(n,e){const t=Tt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return aA(t)}const bV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function A3(n){return n.replace(bV,TV)}function TV(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function M3(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function PV(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Vy?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===ip?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===yc&&(e="SHADOWMAP_TYPE_VSM"),e}function RV(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ca:case _l:e="ENVMAP_TYPE_CUBE";break;case mh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function IV(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case _l:e="ENVMAP_MODE_REFRACTION";break}return e}function BV(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case am:e="ENVMAP_BLENDING_MULTIPLY";break;case zL:e="ENVMAP_BLENDING_MIX";break;case GL:e="ENVMAP_BLENDING_ADD";break}return e}function DV(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function LV(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=PV(t),c=RV(t),u=IV(t),f=BV(t),d=DV(t),m=t.isWebGL2?"":wV(t),g=AV(s),v=r.createProgram();let _,x,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=[g].filter(zd).join(`
`),_.length>0&&(_+=`
`),x=[m,g].filter(zd).join(`
`),x.length>0&&(x+=`
`)):(_=[M3(t),"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(zd).join(`
`),x=[m,M3(t),"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Vs?"#define TONE_MAPPING":"",t.toneMapping!==Vs?Tt.tonemapping_pars_fragment:"",t.toneMapping!==Vs?SV("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Tt.encodings_pars_fragment,xV("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(zd).join(`
`)),o=aA(o),o=S3(o,t),o=w3(o,t),a=aA(a),a=S3(a,t),a=w3(a,t),o=A3(o),a=A3(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,x=["#define varying in",t.glslVersion===rA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===rA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const S=y+_+o,A=y+x+a,C=_3(r,35633,S),b=_3(r,35632,A);if(r.attachShader(v,C),r.attachShader(v,b),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),n.debug.checkShaderErrors){const R=r.getProgramInfoLog(v).trim(),B=r.getShaderInfoLog(C).trim(),O=r.getShaderInfoLog(b).trim();let G=!0,N=!0;if(r.getProgramParameter(v,35714)===!1){G=!1;const k=x3(r,C,"vertex"),X=x3(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,35715)+`

Program Info Log: `+R+`
`+k+`
`+X)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(B===""||O==="")&&(N=!1);N&&(this.diagnostics={runnable:G,programLog:R,vertexShader:{log:B,prefix:_},fragmentShader:{log:O,prefix:x}})}r.deleteShader(C),r.deleteShader(b);let P;this.getUniforms=function(){return P===void 0&&(P=new yv(r,v)),P};let E;return this.getAttributes=function(){return E===void 0&&(E=MV(r,v)),E},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=t.shaderName,this.id=vV++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=C,this.fragmentShader=b,this}let OV=0;class kV{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new FV(e),t.set(e,i)),i}}class FV{constructor(e){this.id=OV++,this.code=e,this.usedTimes=0}}function UV(n,e,t,i,r,s,o){const a=new Rc,l=new kV,c=[],u=r.isWebGL2,f=r.logarithmicDepthBuffer,d=r.vertexTextures;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(E,R,B,O,G){const N=O.fog,k=G.geometry,X=E.isMeshStandardMaterial?O.environment:null,te=(E.isMeshStandardMaterial?t:e).get(E.envMap||X),oe=te&&te.mapping===mh?te.image.height:null,H=g[E.type];E.precision!==null&&(m=r.getMaxPrecision(E.precision),m!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",m,"instead."));const J=k.morphAttributes.position||k.morphAttributes.normal||k.morphAttributes.color,Q=J!==void 0?J.length:0;let U=0;k.morphAttributes.position!==void 0&&(U=1),k.morphAttributes.normal!==void 0&&(U=2),k.morphAttributes.color!==void 0&&(U=3);let V,Z,K,ne;if(H){const he=Os[H];V=he.vertexShader,Z=he.fragmentShader}else V=E.vertexShader,Z=E.fragmentShader,l.update(E),K=l.getVertexShaderID(E),ne=l.getFragmentShaderID(E);const z=n.getRenderTarget(),ae=E.alphaTest>0,ie=E.clearcoat>0,ye=E.iridescence>0;return{isWebGL2:u,shaderID:H,shaderName:E.type,vertexShader:V,fragmentShader:Z,defines:E.defines,customVertexShaderID:K,customFragmentShaderID:ne,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:m,instancing:G.isInstancedMesh===!0,instancingColor:G.isInstancedMesh===!0&&G.instanceColor!==null,supportsVertexTextures:d,outputEncoding:z===null?n.outputEncoding:z.isXRRenderTarget===!0?z.texture.encoding:fa,map:!!E.map,matcap:!!E.matcap,envMap:!!te,envMapMode:te&&te.mapping,envMapCubeUVHeight:oe,lightMap:!!E.lightMap,aoMap:!!E.aoMap,emissiveMap:!!E.emissiveMap,bumpMap:!!E.bumpMap,normalMap:!!E.normalMap,objectSpaceNormalMap:E.normalMapType===hO,tangentSpaceNormalMap:E.normalMapType===Tl,decodeVideoTexture:!!E.map&&E.map.isVideoTexture===!0&&E.map.encoding===pn,clearcoat:ie,clearcoatMap:ie&&!!E.clearcoatMap,clearcoatRoughnessMap:ie&&!!E.clearcoatRoughnessMap,clearcoatNormalMap:ie&&!!E.clearcoatNormalMap,iridescence:ye,iridescenceMap:ye&&!!E.iridescenceMap,iridescenceThicknessMap:ye&&!!E.iridescenceThicknessMap,displacementMap:!!E.displacementMap,roughnessMap:!!E.roughnessMap,metalnessMap:!!E.metalnessMap,specularMap:!!E.specularMap,specularIntensityMap:!!E.specularIntensityMap,specularColorMap:!!E.specularColorMap,opaque:E.transparent===!1&&E.blending===ia,alphaMap:!!E.alphaMap,alphaTest:ae,gradientMap:!!E.gradientMap,sheen:E.sheen>0,sheenColorMap:!!E.sheenColorMap,sheenRoughnessMap:!!E.sheenRoughnessMap,transmission:E.transmission>0,transmissionMap:!!E.transmissionMap,thicknessMap:!!E.thicknessMap,combine:E.combine,vertexTangents:!!E.normalMap&&!!k.attributes.tangent,vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!k.attributes.color&&k.attributes.color.itemSize===4,vertexUvs:!!E.map||!!E.bumpMap||!!E.normalMap||!!E.specularMap||!!E.alphaMap||!!E.emissiveMap||!!E.roughnessMap||!!E.metalnessMap||!!E.clearcoatMap||!!E.clearcoatRoughnessMap||!!E.clearcoatNormalMap||!!E.iridescenceMap||!!E.iridescenceThicknessMap||!!E.displacementMap||!!E.transmissionMap||!!E.thicknessMap||!!E.specularIntensityMap||!!E.specularColorMap||!!E.sheenColorMap||!!E.sheenRoughnessMap,uvsVertexOnly:!(E.map||E.bumpMap||E.normalMap||E.specularMap||E.alphaMap||E.emissiveMap||E.roughnessMap||E.metalnessMap||E.clearcoatNormalMap||E.iridescenceMap||E.iridescenceThicknessMap||E.transmission>0||E.transmissionMap||E.thicknessMap||E.specularIntensityMap||E.specularColorMap||E.sheen>0||E.sheenColorMap||E.sheenRoughnessMap)&&!!E.displacementMap,fog:!!N,useFog:E.fog===!0,fogExp2:N&&N.isFogExp2,flatShading:!!E.flatShading,sizeAttenuation:E.sizeAttenuation,logarithmicDepthBuffer:f,skinning:G.isSkinnedMesh===!0,morphTargets:k.morphAttributes.position!==void 0,morphNormals:k.morphAttributes.normal!==void 0,morphColors:k.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:U,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:E.dithering,shadowMapEnabled:n.shadowMap.enabled&&B.length>0,shadowMapType:n.shadowMap.type,toneMapping:E.toneMapped?n.toneMapping:Vs,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===va,flipSided:E.side===ur,useDepthPacking:!!E.depthPacking,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionDerivatives:E.extensions&&E.extensions.derivatives,extensionFragDepth:E.extensions&&E.extensions.fragDepth,extensionDrawBuffers:E.extensions&&E.extensions.drawBuffers,extensionShaderTextureLOD:E.extensions&&E.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:E.customProgramCacheKey()}}function _(E){const R=[];if(E.shaderID?R.push(E.shaderID):(R.push(E.customVertexShaderID),R.push(E.customFragmentShaderID)),E.defines!==void 0)for(const B in E.defines)R.push(B),R.push(E.defines[B]);return E.isRawShaderMaterial===!1&&(x(R,E),y(R,E),R.push(n.outputEncoding)),R.push(E.customProgramCacheKey),R.join()}function x(E,R){E.push(R.precision),E.push(R.outputEncoding),E.push(R.envMapMode),E.push(R.envMapCubeUVHeight),E.push(R.combine),E.push(R.vertexUvs),E.push(R.fogExp2),E.push(R.sizeAttenuation),E.push(R.morphTargetsCount),E.push(R.morphAttributeCount),E.push(R.numDirLights),E.push(R.numPointLights),E.push(R.numSpotLights),E.push(R.numSpotLightMaps),E.push(R.numHemiLights),E.push(R.numRectAreaLights),E.push(R.numDirLightShadows),E.push(R.numPointLightShadows),E.push(R.numSpotLightShadows),E.push(R.numSpotLightShadowsWithMaps),E.push(R.shadowMapType),E.push(R.toneMapping),E.push(R.numClippingPlanes),E.push(R.numClipIntersection),E.push(R.depthPacking)}function y(E,R){a.disableAll(),R.isWebGL2&&a.enable(0),R.supportsVertexTextures&&a.enable(1),R.instancing&&a.enable(2),R.instancingColor&&a.enable(3),R.map&&a.enable(4),R.matcap&&a.enable(5),R.envMap&&a.enable(6),R.lightMap&&a.enable(7),R.aoMap&&a.enable(8),R.emissiveMap&&a.enable(9),R.bumpMap&&a.enable(10),R.normalMap&&a.enable(11),R.objectSpaceNormalMap&&a.enable(12),R.tangentSpaceNormalMap&&a.enable(13),R.clearcoat&&a.enable(14),R.clearcoatMap&&a.enable(15),R.clearcoatRoughnessMap&&a.enable(16),R.clearcoatNormalMap&&a.enable(17),R.iridescence&&a.enable(18),R.iridescenceMap&&a.enable(19),R.iridescenceThicknessMap&&a.enable(20),R.displacementMap&&a.enable(21),R.specularMap&&a.enable(22),R.roughnessMap&&a.enable(23),R.metalnessMap&&a.enable(24),R.gradientMap&&a.enable(25),R.alphaMap&&a.enable(26),R.alphaTest&&a.enable(27),R.vertexColors&&a.enable(28),R.vertexAlphas&&a.enable(29),R.vertexUvs&&a.enable(30),R.vertexTangents&&a.enable(31),R.uvsVertexOnly&&a.enable(32),E.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.skinning&&a.enable(4),R.morphTargets&&a.enable(5),R.morphNormals&&a.enable(6),R.morphColors&&a.enable(7),R.premultipliedAlpha&&a.enable(8),R.shadowMapEnabled&&a.enable(9),R.physicallyCorrectLights&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.specularIntensityMap&&a.enable(15),R.specularColorMap&&a.enable(16),R.transmission&&a.enable(17),R.transmissionMap&&a.enable(18),R.thicknessMap&&a.enable(19),R.sheen&&a.enable(20),R.sheenColorMap&&a.enable(21),R.sheenRoughnessMap&&a.enable(22),R.decodeVideoTexture&&a.enable(23),R.opaque&&a.enable(24),E.push(a.mask)}function S(E){const R=g[E.type];let B;if(R){const O=Os[R];B=Yy.clone(O.uniforms)}else B=E.uniforms;return B}function A(E,R){let B;for(let O=0,G=c.length;O<G;O++){const N=c[O];if(N.cacheKey===R){B=N,++B.usedTimes;break}}return B===void 0&&(B=new LV(n,R,E,s),c.push(B)),B}function C(E){if(--E.usedTimes===0){const R=c.indexOf(E);c[R]=c[c.length-1],c.pop(),E.destroy()}}function b(E){l.remove(E)}function P(){l.dispose()}return{getParameters:v,getProgramCacheKey:_,getUniforms:S,acquireProgram:A,releaseProgram:C,releaseShaderCache:b,programs:c,dispose:P}}function NV(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function zV(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function C3(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function E3(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,d,m,g,v,_){let x=n[e];return x===void 0?(x={id:f.id,object:f,geometry:d,material:m,groupOrder:g,renderOrder:f.renderOrder,z:v,group:_},n[e]=x):(x.id=f.id,x.object=f,x.geometry=d,x.material=m,x.groupOrder=g,x.renderOrder=f.renderOrder,x.z=v,x.group=_),e++,x}function a(f,d,m,g,v,_){const x=o(f,d,m,g,v,_);m.transmission>0?i.push(x):m.transparent===!0?r.push(x):t.push(x)}function l(f,d,m,g,v,_){const x=o(f,d,m,g,v,_);m.transmission>0?i.unshift(x):m.transparent===!0?r.unshift(x):t.unshift(x)}function c(f,d){t.length>1&&t.sort(f||zV),i.length>1&&i.sort(d||C3),r.length>1&&r.sort(d||C3)}function u(){for(let f=e,d=n.length;f<d;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function GV(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new E3,n.set(i,[o])):r>=s.length?(o=new E3,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function HV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new Je};break;case"SpotLight":t={position:new j,direction:new j,color:new Je,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new Je,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new Je,groundColor:new Je};break;case"RectAreaLight":t={color:new Je,position:new j,halfWidth:new j,halfHeight:new j};break}return n[e.id]=t,t}}}function VV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ne};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ne};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ne,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let WV=0;function jV(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function JV(n,e){const t=new HV,i=VV(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new j);const s=new j,o=new dt,a=new dt;function l(u,f){let d=0,m=0,g=0;for(let O=0;O<9;O++)r.probe[O].set(0,0,0);let v=0,_=0,x=0,y=0,S=0,A=0,C=0,b=0,P=0,E=0;u.sort(jV);const R=f!==!0?Math.PI:1;for(let O=0,G=u.length;O<G;O++){const N=u[O],k=N.color,X=N.intensity,te=N.distance,oe=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)d+=k.r*X*R,m+=k.g*X*R,g+=k.b*X*R;else if(N.isLightProbe)for(let H=0;H<9;H++)r.probe[H].addScaledVector(N.sh.coefficients[H],X);else if(N.isDirectionalLight){const H=t.get(N);if(H.color.copy(N.color).multiplyScalar(N.intensity*R),N.castShadow){const J=N.shadow,Q=i.get(N);Q.shadowBias=J.bias,Q.shadowNormalBias=J.normalBias,Q.shadowRadius=J.radius,Q.shadowMapSize=J.mapSize,r.directionalShadow[v]=Q,r.directionalShadowMap[v]=oe,r.directionalShadowMatrix[v]=N.shadow.matrix,A++}r.directional[v]=H,v++}else if(N.isSpotLight){const H=t.get(N);H.position.setFromMatrixPosition(N.matrixWorld),H.color.copy(k).multiplyScalar(X*R),H.distance=te,H.coneCos=Math.cos(N.angle),H.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),H.decay=N.decay,r.spot[x]=H;const J=N.shadow;if(N.map&&(r.spotLightMap[P]=N.map,P++,J.updateMatrices(N),N.castShadow&&E++),r.spotLightMatrix[x]=J.matrix,N.castShadow){const Q=i.get(N);Q.shadowBias=J.bias,Q.shadowNormalBias=J.normalBias,Q.shadowRadius=J.radius,Q.shadowMapSize=J.mapSize,r.spotShadow[x]=Q,r.spotShadowMap[x]=oe,b++}x++}else if(N.isRectAreaLight){const H=t.get(N);H.color.copy(k).multiplyScalar(X),H.halfWidth.set(N.width*.5,0,0),H.halfHeight.set(0,N.height*.5,0),r.rectArea[y]=H,y++}else if(N.isPointLight){const H=t.get(N);if(H.color.copy(N.color).multiplyScalar(N.intensity*R),H.distance=N.distance,H.decay=N.decay,N.castShadow){const J=N.shadow,Q=i.get(N);Q.shadowBias=J.bias,Q.shadowNormalBias=J.normalBias,Q.shadowRadius=J.radius,Q.shadowMapSize=J.mapSize,Q.shadowCameraNear=J.camera.near,Q.shadowCameraFar=J.camera.far,r.pointShadow[_]=Q,r.pointShadowMap[_]=oe,r.pointShadowMatrix[_]=N.shadow.matrix,C++}r.point[_]=H,_++}else if(N.isHemisphereLight){const H=t.get(N);H.skyColor.copy(N.color).multiplyScalar(X*R),H.groundColor.copy(N.groundColor).multiplyScalar(X*R),r.hemi[S]=H,S++}}y>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=qe.LTC_FLOAT_1,r.rectAreaLTC2=qe.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=qe.LTC_HALF_1,r.rectAreaLTC2=qe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=m,r.ambient[2]=g;const B=r.hash;(B.directionalLength!==v||B.pointLength!==_||B.spotLength!==x||B.rectAreaLength!==y||B.hemiLength!==S||B.numDirectionalShadows!==A||B.numPointShadows!==C||B.numSpotShadows!==b||B.numSpotMaps!==P)&&(r.directional.length=v,r.spot.length=x,r.rectArea.length=y,r.point.length=_,r.hemi.length=S,r.directionalShadow.length=A,r.directionalShadowMap.length=A,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=b,r.spotShadowMap.length=b,r.directionalShadowMatrix.length=A,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=b+P-E,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=E,B.directionalLength=v,B.pointLength=_,B.spotLength=x,B.rectAreaLength=y,B.hemiLength=S,B.numDirectionalShadows=A,B.numPointShadows=C,B.numSpotShadows=b,B.numSpotMaps=P,r.version=WV++)}function c(u,f){let d=0,m=0,g=0,v=0,_=0;const x=f.matrixWorldInverse;for(let y=0,S=u.length;y<S;y++){const A=u[y];if(A.isDirectionalLight){const C=r.directional[d];C.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(x),d++}else if(A.isSpotLight){const C=r.spot[g];C.position.setFromMatrixPosition(A.matrixWorld),C.position.applyMatrix4(x),C.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(x),g++}else if(A.isRectAreaLight){const C=r.rectArea[v];C.position.setFromMatrixPosition(A.matrixWorld),C.position.applyMatrix4(x),a.identity(),o.copy(A.matrixWorld),o.premultiply(x),a.extractRotation(o),C.halfWidth.set(A.width*.5,0,0),C.halfHeight.set(0,A.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),v++}else if(A.isPointLight){const C=r.point[m];C.position.setFromMatrixPosition(A.matrixWorld),C.position.applyMatrix4(x),m++}else if(A.isHemisphereLight){const C=r.hemi[_];C.direction.setFromMatrixPosition(A.matrixWorld),C.direction.transformDirection(x),_++}}}return{setup:l,setupView:c,state:r}}function b3(n,e){const t=new JV(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(f){i.push(f)}function a(f){r.push(f)}function l(f){t.setup(i,f)}function c(f){t.setupView(i,f)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function XV(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new b3(n,e),t.set(s,[l])):o>=a.length?(l=new b3(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class Zy extends si{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=fO,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class qy extends si{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new j,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const YV=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,KV=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function QV(n,e,t){let i=new Ky;const r=new Ne,s=new Ne,o=new tn,a=new Zy({depthPacking:yC}),l=new qy,c={},u=t.maxTextureSize,f={0:ur,1:wo,2:va},d=new Cr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ne},radius:{value:4}},vertexShader:YV,fragmentShader:KV}),m=d.clone();m.defines.HORIZONTAL_PASS=1;const g=new Mt;g.setAttribute("position",new Kt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Ln(g,d),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Vy,this.render=function(A,C,b){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||A.length===0)return;const P=n.getRenderTarget(),E=n.getActiveCubeFace(),R=n.getActiveMipmapLevel(),B=n.state;B.setBlending(na),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);for(let O=0,G=A.length;O<G;O++){const N=A[O],k=N.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",N,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;r.copy(k.mapSize);const X=k.getFrameExtents();if(r.multiply(X),s.copy(k.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/X.x),r.x=s.x*X.x,k.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/X.y),r.y=s.y*X.y,k.mapSize.y=s.y)),k.map===null){const oe=this.type!==yc?{minFilter:Hn,magFilter:Hn}:{};k.map=new ws(r.x,r.y,oe),k.map.texture.name=N.name+".shadowMap",k.camera.updateProjectionMatrix()}n.setRenderTarget(k.map),n.clear();const te=k.getViewportCount();for(let oe=0;oe<te;oe++){const H=k.getViewport(oe);o.set(s.x*H.x,s.y*H.y,s.x*H.z,s.y*H.w),B.viewport(o),k.updateMatrices(N,oe),i=k.getFrustum(),S(C,b,k.camera,N,this.type)}k.isPointLightShadow!==!0&&this.type===yc&&x(k,b),k.needsUpdate=!1}_.needsUpdate=!1,n.setRenderTarget(P,E,R)};function x(A,C){const b=e.update(v);d.defines.VSM_SAMPLES!==A.blurSamples&&(d.defines.VSM_SAMPLES=A.blurSamples,m.defines.VSM_SAMPLES=A.blurSamples,d.needsUpdate=!0,m.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new ws(r.x,r.y)),d.uniforms.shadow_pass.value=A.map.texture,d.uniforms.resolution.value=A.mapSize,d.uniforms.radius.value=A.radius,n.setRenderTarget(A.mapPass),n.clear(),n.renderBufferDirect(C,null,b,d,v,null),m.uniforms.shadow_pass.value=A.mapPass.texture,m.uniforms.resolution.value=A.mapSize,m.uniforms.radius.value=A.radius,n.setRenderTarget(A.map),n.clear(),n.renderBufferDirect(C,null,b,m,v,null)}function y(A,C,b,P,E,R){let B=null;const O=b.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(O!==void 0)B=O;else if(B=b.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const G=B.uuid,N=C.uuid;let k=c[G];k===void 0&&(k={},c[G]=k);let X=k[N];X===void 0&&(X=B.clone(),k[N]=X),B=X}return B.visible=C.visible,B.wireframe=C.wireframe,R===yc?B.side=C.shadowSide!==null?C.shadowSide:C.side:B.side=C.shadowSide!==null?C.shadowSide:f[C.side],B.alphaMap=C.alphaMap,B.alphaTest=C.alphaTest,B.map=C.map,B.clipShadows=C.clipShadows,B.clippingPlanes=C.clippingPlanes,B.clipIntersection=C.clipIntersection,B.displacementMap=C.displacementMap,B.displacementScale=C.displacementScale,B.displacementBias=C.displacementBias,B.wireframeLinewidth=C.wireframeLinewidth,B.linewidth=C.linewidth,b.isPointLight===!0&&B.isMeshDistanceMaterial===!0&&(B.referencePosition.setFromMatrixPosition(b.matrixWorld),B.nearDistance=P,B.farDistance=E),B}function S(A,C,b,P,E){if(A.visible===!1)return;if(A.layers.test(C.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&E===yc)&&(!A.frustumCulled||i.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,A.matrixWorld);const O=e.update(A),G=A.material;if(Array.isArray(G)){const N=O.groups;for(let k=0,X=N.length;k<X;k++){const te=N[k],oe=G[te.materialIndex];if(oe&&oe.visible){const H=y(A,oe,P,b.near,b.far,E);n.renderBufferDirect(b,null,O,H,A,te)}}}else if(G.visible){const N=y(A,G,P,b.near,b.far,E);n.renderBufferDirect(b,null,O,N,A,null)}}const B=A.children;for(let O=0,G=B.length;O<G;O++)S(B[O],C,b,P,E)}}function ZV(n,e,t){const i=t.isWebGL2;function r(){let se=!1;const xe=new tn;let ze=null;const Ye=new tn(0,0,0,0);return{setMask:function(nt){ze!==nt&&!se&&(n.colorMask(nt,nt,nt,nt),ze=nt)},setLocked:function(nt){se=nt},setClear:function(nt,xt,Nt,jt,zt){zt===!0&&(nt*=jt,xt*=jt,Nt*=jt),xe.set(nt,xt,Nt,jt),Ye.equals(xe)===!1&&(n.clearColor(nt,xt,Nt,jt),Ye.copy(xe))},reset:function(){se=!1,ze=null,Ye.set(-1,0,0,0)}}}function s(){let se=!1,xe=null,ze=null,Ye=null;return{setTest:function(nt){nt?ae(2929):ie(2929)},setMask:function(nt){xe!==nt&&!se&&(n.depthMask(nt),xe=nt)},setFunc:function(nt){if(ze!==nt){switch(nt){case DL:n.depthFunc(512);break;case LL:n.depthFunc(519);break;case OL:n.depthFunc(513);break;case ry:n.depthFunc(515);break;case kL:n.depthFunc(514);break;case FL:n.depthFunc(518);break;case UL:n.depthFunc(516);break;case NL:n.depthFunc(517);break;default:n.depthFunc(515)}ze=nt}},setLocked:function(nt){se=nt},setClear:function(nt){Ye!==nt&&(n.clearDepth(nt),Ye=nt)},reset:function(){se=!1,xe=null,ze=null,Ye=null}}}function o(){let se=!1,xe=null,ze=null,Ye=null,nt=null,xt=null,Nt=null,jt=null,zt=null;return{setTest:function(Gt){se||(Gt?ae(2960):ie(2960))},setMask:function(Gt){xe!==Gt&&!se&&(n.stencilMask(Gt),xe=Gt)},setFunc:function(Gt,Ht,Pt){(ze!==Gt||Ye!==Ht||nt!==Pt)&&(n.stencilFunc(Gt,Ht,Pt),ze=Gt,Ye=Ht,nt=Pt)},setOp:function(Gt,Ht,Pt){(xt!==Gt||Nt!==Ht||jt!==Pt)&&(n.stencilOp(Gt,Ht,Pt),xt=Gt,Nt=Ht,jt=Pt)},setLocked:function(Gt){se=Gt},setClear:function(Gt){zt!==Gt&&(n.clearStencil(Gt),zt=Gt)},reset:function(){se=!1,xe=null,ze=null,Ye=null,nt=null,xt=null,Nt=null,jt=null,zt=null}}}const a=new r,l=new s,c=new o,u=new WeakMap,f=new WeakMap;let d={},m={},g=new WeakMap,v=[],_=null,x=!1,y=null,S=null,A=null,C=null,b=null,P=null,E=null,R=!1,B=null,O=null,G=null,N=null,k=null;const X=n.getParameter(35661);let te=!1,oe=0;const H=n.getParameter(7938);H.indexOf("WebGL")!==-1?(oe=parseFloat(/^WebGL (\d)/.exec(H)[1]),te=oe>=1):H.indexOf("OpenGL ES")!==-1&&(oe=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),te=oe>=2);let J=null,Q={};const U=n.getParameter(3088),V=n.getParameter(2978),Z=new tn().fromArray(U),K=new tn().fromArray(V);function ne(se,xe,ze){const Ye=new Uint8Array(4),nt=n.createTexture();n.bindTexture(se,nt),n.texParameteri(se,10241,9728),n.texParameteri(se,10240,9728);for(let xt=0;xt<ze;xt++)n.texImage2D(xe+xt,0,6408,1,1,0,6408,5121,Ye);return nt}const z={};z[3553]=ne(3553,3553,1),z[34067]=ne(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ae(2929),l.setFunc(ry),Ae(!1),ke(Iw),ae(2884),Ce(na);function ae(se){d[se]!==!0&&(n.enable(se),d[se]=!0)}function ie(se){d[se]!==!1&&(n.disable(se),d[se]=!1)}function ye(se,xe){return m[se]!==xe?(n.bindFramebuffer(se,xe),m[se]=xe,i&&(se===36009&&(m[36160]=xe),se===36160&&(m[36009]=xe)),!0):!1}function re(se,xe){let ze=v,Ye=!1;if(se)if(ze=g.get(xe),ze===void 0&&(ze=[],g.set(xe,ze)),se.isWebGLMultipleRenderTargets){const nt=se.texture;if(ze.length!==nt.length||ze[0]!==36064){for(let xt=0,Nt=nt.length;xt<Nt;xt++)ze[xt]=36064+xt;ze.length=nt.length,Ye=!0}}else ze[0]!==36064&&(ze[0]=36064,Ye=!0);else ze[0]!==1029&&(ze[0]=1029,Ye=!0);Ye&&(t.isWebGL2?n.drawBuffers(ze):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ze))}function he(se){return _!==se?(n.useProgram(se),_=se,!0):!1}const q={[uc]:32774,[wL]:32778,[AL]:32779};if(i)q[Ow]=32775,q[kw]=32776;else{const se=e.get("EXT_blend_minmax");se!==null&&(q[Ow]=se.MIN_EXT,q[kw]=se.MAX_EXT)}const ce={[ML]:0,[CL]:1,[EL]:768,[hC]:770,[BL]:776,[RL]:774,[TL]:772,[bL]:769,[dC]:771,[IL]:775,[PL]:773};function Ce(se,xe,ze,Ye,nt,xt,Nt,jt){if(se===na){x===!0&&(ie(3042),x=!1);return}if(x===!1&&(ae(3042),x=!0),se!==SL){if(se!==y||jt!==R){if((S!==uc||b!==uc)&&(n.blendEquation(32774),S=uc,b=uc),jt)switch(se){case ia:n.blendFuncSeparate(1,771,1,771);break;case Bw:n.blendFunc(1,1);break;case Dw:n.blendFuncSeparate(0,769,0,1);break;case Lw:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",se);break}else switch(se){case ia:n.blendFuncSeparate(770,771,1,771);break;case Bw:n.blendFunc(770,1);break;case Dw:n.blendFuncSeparate(0,769,0,1);break;case Lw:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",se);break}A=null,C=null,P=null,E=null,y=se,R=jt}return}nt=nt||xe,xt=xt||ze,Nt=Nt||Ye,(xe!==S||nt!==b)&&(n.blendEquationSeparate(q[xe],q[nt]),S=xe,b=nt),(ze!==A||Ye!==C||xt!==P||Nt!==E)&&(n.blendFuncSeparate(ce[ze],ce[Ye],ce[xt],ce[Nt]),A=ze,C=Ye,P=xt,E=Nt),y=se,R=!1}function ge(se,xe){se.side===va?ie(2884):ae(2884);let ze=se.side===ur;xe&&(ze=!ze),Ae(ze),se.blending===ia&&se.transparent===!1?Ce(na):Ce(se.blending,se.blendEquation,se.blendSrc,se.blendDst,se.blendEquationAlpha,se.blendSrcAlpha,se.blendDstAlpha,se.premultipliedAlpha),l.setFunc(se.depthFunc),l.setTest(se.depthTest),l.setMask(se.depthWrite),a.setMask(se.colorWrite);const Ye=se.stencilWrite;c.setTest(Ye),Ye&&(c.setMask(se.stencilWriteMask),c.setFunc(se.stencilFunc,se.stencilRef,se.stencilFuncMask),c.setOp(se.stencilFail,se.stencilZFail,se.stencilZPass)),De(se.polygonOffset,se.polygonOffsetFactor,se.polygonOffsetUnits),se.alphaToCoverage===!0?ae(32926):ie(32926)}function Ae(se){B!==se&&(se?n.frontFace(2304):n.frontFace(2305),B=se)}function ke(se){se!==yL?(ae(2884),se!==O&&(se===Iw?n.cullFace(1029):se===_L?n.cullFace(1028):n.cullFace(1032))):ie(2884),O=se}function ve(se){se!==G&&(te&&n.lineWidth(se),G=se)}function De(se,xe,ze){se?(ae(32823),(N!==xe||k!==ze)&&(n.polygonOffset(xe,ze),N=xe,k=ze)):ie(32823)}function Le(se){se?ae(3089):ie(3089)}function we(se){se===void 0&&(se=33984+X-1),J!==se&&(n.activeTexture(se),J=se)}function F(se,xe,ze){ze===void 0&&(J===null?ze=33984+X-1:ze=J);let Ye=Q[ze];Ye===void 0&&(Ye={type:void 0,texture:void 0},Q[ze]=Ye),(Ye.type!==se||Ye.texture!==xe)&&(J!==ze&&(n.activeTexture(ze),J=ze),n.bindTexture(se,xe||z[se]),Ye.type=se,Ye.texture=xe)}function D(){const se=Q[J];se!==void 0&&se.type!==void 0&&(n.bindTexture(se.type,null),se.type=void 0,se.texture=void 0)}function $(){try{n.compressedTexImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function le(){try{n.compressedTexImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Se(){try{n.texSubImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Te(){try{n.texSubImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Oe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Be(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Me(){try{n.texStorage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Xe(){try{n.texStorage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Ie(){try{n.texImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Ve(){try{n.texImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function He(se){Z.equals(se)===!1&&(n.scissor(se.x,se.y,se.z,se.w),Z.copy(se))}function Fe(se){K.equals(se)===!1&&(n.viewport(se.x,se.y,se.z,se.w),K.copy(se))}function Ze(se,xe){let ze=f.get(xe);ze===void 0&&(ze=new WeakMap,f.set(xe,ze));let Ye=ze.get(se);Ye===void 0&&(Ye=n.getUniformBlockIndex(xe,se.name),ze.set(se,Ye))}function lt(se,xe){const Ye=f.get(xe).get(se);u.get(xe)!==Ye&&(n.uniformBlockBinding(xe,Ye,se.__bindingPointIndex),u.set(xe,Ye))}function yt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},J=null,Q={},m={},g=new WeakMap,v=[],_=null,x=!1,y=null,S=null,A=null,C=null,b=null,P=null,E=null,R=!1,B=null,O=null,G=null,N=null,k=null,Z.set(0,0,n.canvas.width,n.canvas.height),K.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ae,disable:ie,bindFramebuffer:ye,drawBuffers:re,useProgram:he,setBlending:Ce,setMaterial:ge,setFlipSided:Ae,setCullFace:ke,setLineWidth:ve,setPolygonOffset:De,setScissorTest:Le,activeTexture:we,bindTexture:F,unbindTexture:D,compressedTexImage2D:$,compressedTexImage3D:le,texImage2D:Ie,texImage3D:Ve,updateUBOMapping:Ze,uniformBlockBinding:lt,texStorage2D:Me,texStorage3D:Xe,texSubImage2D:Se,texSubImage3D:Te,compressedTexSubImage2D:Oe,compressedTexSubImage3D:Be,scissor:He,viewport:Fe,reset:yt}}function qV(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,f=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let v;const _=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(F,D){return x?new OffscreenCanvas(F,D):Up("canvas")}function S(F,D,$,le){let Se=1;if((F.width>le||F.height>le)&&(Se=le/Math.max(F.width,F.height)),Se<1||D===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const Te=D?ay:Math.floor,Oe=Te(Se*F.width),Be=Te(Se*F.height);v===void 0&&(v=y(Oe,Be));const Me=$?y(Oe,Be):v;return Me.width=Oe,Me.height=Be,Me.getContext("2d").drawImage(F,0,0,Oe,Be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Oe+"x"+Be+")."),Me}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function A(F){return sA(F.width)&&sA(F.height)}function C(F){return a?!1:F.wrapS!==Bi||F.wrapT!==Bi||F.minFilter!==Hn&&F.minFilter!==gn}function b(F,D){return F.generateMipmaps&&D&&F.minFilter!==Hn&&F.minFilter!==gn}function P(F){n.generateMipmap(F)}function E(F,D,$,le,Se=!1){if(a===!1)return D;if(F!==null){if(n[F]!==void 0)return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let Te=D;return D===6403&&($===5126&&(Te=33326),$===5131&&(Te=33325),$===5121&&(Te=33321)),D===33319&&($===5126&&(Te=33328),$===5131&&(Te=33327),$===5121&&(Te=33323)),D===6408&&($===5126&&(Te=34836),$===5131&&(Te=34842),$===5121&&(Te=le===pn&&Se===!1?35907:32856),$===32819&&(Te=32854),$===32820&&(Te=32855)),(Te===33325||Te===33326||Te===33327||Te===33328||Te===34842||Te===34836)&&e.get("EXT_color_buffer_float"),Te}function R(F,D,$){return b(F,$)===!0||F.isFramebufferTexture&&F.minFilter!==Hn&&F.minFilter!==gn?Math.log2(Math.max(D.width,D.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?D.mipmaps.length:1}function B(F){return F===Hn||F===Lp||F===Bf?9728:9729}function O(F){const D=F.target;D.removeEventListener("dispose",O),N(D),D.isVideoTexture&&g.delete(D)}function G(F){const D=F.target;D.removeEventListener("dispose",G),X(D)}function N(F){const D=i.get(F);if(D.__webglInit===void 0)return;const $=F.source,le=_.get($);if(le){const Se=le[D.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&k(F),Object.keys(le).length===0&&_.delete($)}i.remove(F)}function k(F){const D=i.get(F);n.deleteTexture(D.__webglTexture);const $=F.source,le=_.get($);delete le[D.__cacheKey],o.memory.textures--}function X(F){const D=F.texture,$=i.get(F),le=i.get(D);if(le.__webglTexture!==void 0&&(n.deleteTexture(le.__webglTexture),o.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++)n.deleteFramebuffer($.__webglFramebuffer[Se]),$.__webglDepthbuffer&&n.deleteRenderbuffer($.__webglDepthbuffer[Se]);else{if(n.deleteFramebuffer($.__webglFramebuffer),$.__webglDepthbuffer&&n.deleteRenderbuffer($.__webglDepthbuffer),$.__webglMultisampledFramebuffer&&n.deleteFramebuffer($.__webglMultisampledFramebuffer),$.__webglColorRenderbuffer)for(let Se=0;Se<$.__webglColorRenderbuffer.length;Se++)$.__webglColorRenderbuffer[Se]&&n.deleteRenderbuffer($.__webglColorRenderbuffer[Se]);$.__webglDepthRenderbuffer&&n.deleteRenderbuffer($.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let Se=0,Te=D.length;Se<Te;Se++){const Oe=i.get(D[Se]);Oe.__webglTexture&&(n.deleteTexture(Oe.__webglTexture),o.memory.textures--),i.remove(D[Se])}i.remove(D),i.remove(F)}let te=0;function oe(){te=0}function H(){const F=te;return F>=l&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+l),te+=1,F}function J(F){const D=[];return D.push(F.wrapS),D.push(F.wrapT),D.push(F.wrapR||0),D.push(F.magFilter),D.push(F.minFilter),D.push(F.anisotropy),D.push(F.internalFormat),D.push(F.format),D.push(F.type),D.push(F.generateMipmaps),D.push(F.premultiplyAlpha),D.push(F.flipY),D.push(F.unpackAlignment),D.push(F.encoding),D.join()}function Q(F,D){const $=i.get(F);if(F.isVideoTexture&&Le(F),F.isRenderTargetTexture===!1&&F.version>0&&$.__version!==F.version){const le=F.image;if(le===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(le.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ie($,F,D);return}}t.bindTexture(3553,$.__webglTexture,33984+D)}function U(F,D){const $=i.get(F);if(F.version>0&&$.__version!==F.version){ie($,F,D);return}t.bindTexture(35866,$.__webglTexture,33984+D)}function V(F,D){const $=i.get(F);if(F.version>0&&$.__version!==F.version){ie($,F,D);return}t.bindTexture(32879,$.__webglTexture,33984+D)}function Z(F,D){const $=i.get(F);if(F.version>0&&$.__version!==F.version){ye($,F,D);return}t.bindTexture(34067,$.__webglTexture,33984+D)}const K={[xl]:10497,[Bi]:33071,[Yf]:33648},ne={[Hn]:9728,[Lp]:9984,[Bf]:9986,[gn]:9729,[jy]:9985,[Ao]:9987};function z(F,D,$){if($?(n.texParameteri(F,10242,K[D.wrapS]),n.texParameteri(F,10243,K[D.wrapT]),(F===32879||F===35866)&&n.texParameteri(F,32882,K[D.wrapR]),n.texParameteri(F,10240,ne[D.magFilter]),n.texParameteri(F,10241,ne[D.minFilter])):(n.texParameteri(F,10242,33071),n.texParameteri(F,10243,33071),(F===32879||F===35866)&&n.texParameteri(F,32882,33071),(D.wrapS!==Bi||D.wrapT!==Bi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(F,10240,B(D.magFilter)),n.texParameteri(F,10241,B(D.minFilter)),D.minFilter!==Hn&&D.minFilter!==gn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const le=e.get("EXT_texture_filter_anisotropic");if(D.magFilter===Hn||D.minFilter!==Bf&&D.minFilter!==Ao||D.type===gs&&e.has("OES_texture_float_linear")===!1||a===!1&&D.type===Us&&e.has("OES_texture_half_float_linear")===!1)return;(D.anisotropy>1||i.get(D).__currentAnisotropy)&&(n.texParameterf(F,le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),i.get(D).__currentAnisotropy=D.anisotropy)}}function ae(F,D){let $=!1;F.__webglInit===void 0&&(F.__webglInit=!0,D.addEventListener("dispose",O));const le=D.source;let Se=_.get(le);Se===void 0&&(Se={},_.set(le,Se));const Te=J(D);if(Te!==F.__cacheKey){Se[Te]===void 0&&(Se[Te]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,$=!0),Se[Te].usedTimes++;const Oe=Se[F.__cacheKey];Oe!==void 0&&(Se[F.__cacheKey].usedTimes--,Oe.usedTimes===0&&k(D)),F.__cacheKey=Te,F.__webglTexture=Se[Te].texture}return $}function ie(F,D,$){let le=3553;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(le=35866),D.isData3DTexture&&(le=32879);const Se=ae(F,D),Te=D.source;t.bindTexture(le,F.__webglTexture,33984+$);const Oe=i.get(Te);if(Te.version!==Oe.__version||Se===!0){t.activeTexture(33984+$),n.pixelStorei(37440,D.flipY),n.pixelStorei(37441,D.premultiplyAlpha),n.pixelStorei(3317,D.unpackAlignment),n.pixelStorei(37443,0);const Be=C(D)&&A(D.image)===!1;let Me=S(D.image,Be,!1,u);Me=we(D,Me);const Xe=A(Me)||a,Ie=s.convert(D.format,D.encoding);let Ve=s.convert(D.type),He=E(D.internalFormat,Ie,Ve,D.encoding,D.isVideoTexture);z(le,D,Xe);let Fe;const Ze=D.mipmaps,lt=a&&D.isVideoTexture!==!0,yt=Oe.__version===void 0||Se===!0,se=R(D,Me,Xe);if(D.isDepthTexture)He=6402,a?D.type===gs?He=36012:D.type===$a?He=33190:D.type===bc?He=35056:He=33189:D.type===gs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===fl&&He===6402&&D.type!==mC&&D.type!==$a&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=$a,Ve=s.convert(D.type)),D.format===Hc&&He===6402&&(He=34041,D.type!==bc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=bc,Ve=s.convert(D.type))),yt&&(lt?t.texStorage2D(3553,1,He,Me.width,Me.height):t.texImage2D(3553,0,He,Me.width,Me.height,0,Ie,Ve,null));else if(D.isDataTexture)if(Ze.length>0&&Xe){lt&&yt&&t.texStorage2D(3553,se,He,Ze[0].width,Ze[0].height);for(let xe=0,ze=Ze.length;xe<ze;xe++)Fe=Ze[xe],lt?t.texSubImage2D(3553,xe,0,0,Fe.width,Fe.height,Ie,Ve,Fe.data):t.texImage2D(3553,xe,He,Fe.width,Fe.height,0,Ie,Ve,Fe.data);D.generateMipmaps=!1}else lt?(yt&&t.texStorage2D(3553,se,He,Me.width,Me.height),t.texSubImage2D(3553,0,0,0,Me.width,Me.height,Ie,Ve,Me.data)):t.texImage2D(3553,0,He,Me.width,Me.height,0,Ie,Ve,Me.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){lt&&yt&&t.texStorage3D(35866,se,He,Ze[0].width,Ze[0].height,Me.depth);for(let xe=0,ze=Ze.length;xe<ze;xe++)Fe=Ze[xe],D.format!==_r?Ie!==null?lt?t.compressedTexSubImage3D(35866,xe,0,0,0,Fe.width,Fe.height,Me.depth,Ie,Fe.data,0,0):t.compressedTexImage3D(35866,xe,He,Fe.width,Fe.height,Me.depth,0,Fe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):lt?t.texSubImage3D(35866,xe,0,0,0,Fe.width,Fe.height,Me.depth,Ie,Ve,Fe.data):t.texImage3D(35866,xe,He,Fe.width,Fe.height,Me.depth,0,Ie,Ve,Fe.data)}else{lt&&yt&&t.texStorage2D(3553,se,He,Ze[0].width,Ze[0].height);for(let xe=0,ze=Ze.length;xe<ze;xe++)Fe=Ze[xe],D.format!==_r?Ie!==null?lt?t.compressedTexSubImage2D(3553,xe,0,0,Fe.width,Fe.height,Ie,Fe.data):t.compressedTexImage2D(3553,xe,He,Fe.width,Fe.height,0,Fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):lt?t.texSubImage2D(3553,xe,0,0,Fe.width,Fe.height,Ie,Ve,Fe.data):t.texImage2D(3553,xe,He,Fe.width,Fe.height,0,Ie,Ve,Fe.data)}else if(D.isDataArrayTexture)lt?(yt&&t.texStorage3D(35866,se,He,Me.width,Me.height,Me.depth),t.texSubImage3D(35866,0,0,0,0,Me.width,Me.height,Me.depth,Ie,Ve,Me.data)):t.texImage3D(35866,0,He,Me.width,Me.height,Me.depth,0,Ie,Ve,Me.data);else if(D.isData3DTexture)lt?(yt&&t.texStorage3D(32879,se,He,Me.width,Me.height,Me.depth),t.texSubImage3D(32879,0,0,0,0,Me.width,Me.height,Me.depth,Ie,Ve,Me.data)):t.texImage3D(32879,0,He,Me.width,Me.height,Me.depth,0,Ie,Ve,Me.data);else if(D.isFramebufferTexture){if(yt)if(lt)t.texStorage2D(3553,se,He,Me.width,Me.height);else{let xe=Me.width,ze=Me.height;for(let Ye=0;Ye<se;Ye++)t.texImage2D(3553,Ye,He,xe,ze,0,Ie,Ve,null),xe>>=1,ze>>=1}}else if(Ze.length>0&&Xe){lt&&yt&&t.texStorage2D(3553,se,He,Ze[0].width,Ze[0].height);for(let xe=0,ze=Ze.length;xe<ze;xe++)Fe=Ze[xe],lt?t.texSubImage2D(3553,xe,0,0,Ie,Ve,Fe):t.texImage2D(3553,xe,He,Ie,Ve,Fe);D.generateMipmaps=!1}else lt?(yt&&t.texStorage2D(3553,se,He,Me.width,Me.height),t.texSubImage2D(3553,0,0,0,Ie,Ve,Me)):t.texImage2D(3553,0,He,Ie,Ve,Me);b(D,Xe)&&P(le),Oe.__version=Te.version,D.onUpdate&&D.onUpdate(D)}F.__version=D.version}function ye(F,D,$){if(D.image.length!==6)return;const le=ae(F,D),Se=D.source;t.bindTexture(34067,F.__webglTexture,33984+$);const Te=i.get(Se);if(Se.version!==Te.__version||le===!0){t.activeTexture(33984+$),n.pixelStorei(37440,D.flipY),n.pixelStorei(37441,D.premultiplyAlpha),n.pixelStorei(3317,D.unpackAlignment),n.pixelStorei(37443,0);const Oe=D.isCompressedTexture||D.image[0].isCompressedTexture,Be=D.image[0]&&D.image[0].isDataTexture,Me=[];for(let xe=0;xe<6;xe++)!Oe&&!Be?Me[xe]=S(D.image[xe],!1,!0,c):Me[xe]=Be?D.image[xe].image:D.image[xe],Me[xe]=we(D,Me[xe]);const Xe=Me[0],Ie=A(Xe)||a,Ve=s.convert(D.format,D.encoding),He=s.convert(D.type),Fe=E(D.internalFormat,Ve,He,D.encoding),Ze=a&&D.isVideoTexture!==!0,lt=Te.__version===void 0||le===!0;let yt=R(D,Xe,Ie);z(34067,D,Ie);let se;if(Oe){Ze&&lt&&t.texStorage2D(34067,yt,Fe,Xe.width,Xe.height);for(let xe=0;xe<6;xe++){se=Me[xe].mipmaps;for(let ze=0;ze<se.length;ze++){const Ye=se[ze];D.format!==_r?Ve!==null?Ze?t.compressedTexSubImage2D(34069+xe,ze,0,0,Ye.width,Ye.height,Ve,Ye.data):t.compressedTexImage2D(34069+xe,ze,Fe,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ze?t.texSubImage2D(34069+xe,ze,0,0,Ye.width,Ye.height,Ve,He,Ye.data):t.texImage2D(34069+xe,ze,Fe,Ye.width,Ye.height,0,Ve,He,Ye.data)}}}else{se=D.mipmaps,Ze&&lt&&(se.length>0&&yt++,t.texStorage2D(34067,yt,Fe,Me[0].width,Me[0].height));for(let xe=0;xe<6;xe++)if(Be){Ze?t.texSubImage2D(34069+xe,0,0,0,Me[xe].width,Me[xe].height,Ve,He,Me[xe].data):t.texImage2D(34069+xe,0,Fe,Me[xe].width,Me[xe].height,0,Ve,He,Me[xe].data);for(let ze=0;ze<se.length;ze++){const nt=se[ze].image[xe].image;Ze?t.texSubImage2D(34069+xe,ze+1,0,0,nt.width,nt.height,Ve,He,nt.data):t.texImage2D(34069+xe,ze+1,Fe,nt.width,nt.height,0,Ve,He,nt.data)}}else{Ze?t.texSubImage2D(34069+xe,0,0,0,Ve,He,Me[xe]):t.texImage2D(34069+xe,0,Fe,Ve,He,Me[xe]);for(let ze=0;ze<se.length;ze++){const Ye=se[ze];Ze?t.texSubImage2D(34069+xe,ze+1,0,0,Ve,He,Ye.image[xe]):t.texImage2D(34069+xe,ze+1,Fe,Ve,He,Ye.image[xe])}}}b(D,Ie)&&P(34067),Te.__version=Se.version,D.onUpdate&&D.onUpdate(D)}F.__version=D.version}function re(F,D,$,le,Se){const Te=s.convert($.format,$.encoding),Oe=s.convert($.type),Be=E($.internalFormat,Te,Oe,$.encoding);i.get(D).__hasExternalTextures||(Se===32879||Se===35866?t.texImage3D(Se,0,Be,D.width,D.height,D.depth,0,Te,Oe,null):t.texImage2D(Se,0,Be,D.width,D.height,0,Te,Oe,null)),t.bindFramebuffer(36160,F),De(D)?d.framebufferTexture2DMultisampleEXT(36160,le,Se,i.get($).__webglTexture,0,ve(D)):(Se===3553||Se>=34069&&Se<=34074)&&n.framebufferTexture2D(36160,le,Se,i.get($).__webglTexture,0),t.bindFramebuffer(36160,null)}function he(F,D,$){if(n.bindRenderbuffer(36161,F),D.depthBuffer&&!D.stencilBuffer){let le=33189;if($||De(D)){const Se=D.depthTexture;Se&&Se.isDepthTexture&&(Se.type===gs?le=36012:Se.type===$a&&(le=33190));const Te=ve(D);De(D)?d.renderbufferStorageMultisampleEXT(36161,Te,le,D.width,D.height):n.renderbufferStorageMultisample(36161,Te,le,D.width,D.height)}else n.renderbufferStorage(36161,le,D.width,D.height);n.framebufferRenderbuffer(36160,36096,36161,F)}else if(D.depthBuffer&&D.stencilBuffer){const le=ve(D);$&&De(D)===!1?n.renderbufferStorageMultisample(36161,le,35056,D.width,D.height):De(D)?d.renderbufferStorageMultisampleEXT(36161,le,35056,D.width,D.height):n.renderbufferStorage(36161,34041,D.width,D.height),n.framebufferRenderbuffer(36160,33306,36161,F)}else{const le=D.isWebGLMultipleRenderTargets===!0?D.texture:[D.texture];for(let Se=0;Se<le.length;Se++){const Te=le[Se],Oe=s.convert(Te.format,Te.encoding),Be=s.convert(Te.type),Me=E(Te.internalFormat,Oe,Be,Te.encoding),Xe=ve(D);$&&De(D)===!1?n.renderbufferStorageMultisample(36161,Xe,Me,D.width,D.height):De(D)?d.renderbufferStorageMultisampleEXT(36161,Xe,Me,D.width,D.height):n.renderbufferStorage(36161,Me,D.width,D.height)}}n.bindRenderbuffer(36161,null)}function q(F,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,F),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),Q(D.depthTexture,0);const le=i.get(D.depthTexture).__webglTexture,Se=ve(D);if(D.depthTexture.format===fl)De(D)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,le,0,Se):n.framebufferTexture2D(36160,36096,3553,le,0);else if(D.depthTexture.format===Hc)De(D)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,le,0,Se):n.framebufferTexture2D(36160,33306,3553,le,0);else throw new Error("Unknown depthTexture format")}function ce(F){const D=i.get(F),$=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture&&!D.__autoAllocateDepthBuffer){if($)throw new Error("target.depthTexture not supported in Cube render targets");q(D.__webglFramebuffer,F)}else if($){D.__webglDepthbuffer=[];for(let le=0;le<6;le++)t.bindFramebuffer(36160,D.__webglFramebuffer[le]),D.__webglDepthbuffer[le]=n.createRenderbuffer(),he(D.__webglDepthbuffer[le],F,!1)}else t.bindFramebuffer(36160,D.__webglFramebuffer),D.__webglDepthbuffer=n.createRenderbuffer(),he(D.__webglDepthbuffer,F,!1);t.bindFramebuffer(36160,null)}function Ce(F,D,$){const le=i.get(F);D!==void 0&&re(le.__webglFramebuffer,F,F.texture,36064,3553),$!==void 0&&ce(F)}function ge(F){const D=F.texture,$=i.get(F),le=i.get(D);F.addEventListener("dispose",G),F.isWebGLMultipleRenderTargets!==!0&&(le.__webglTexture===void 0&&(le.__webglTexture=n.createTexture()),le.__version=D.version,o.memory.textures++);const Se=F.isWebGLCubeRenderTarget===!0,Te=F.isWebGLMultipleRenderTargets===!0,Oe=A(F)||a;if(Se){$.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)$.__webglFramebuffer[Be]=n.createFramebuffer()}else{if($.__webglFramebuffer=n.createFramebuffer(),Te)if(r.drawBuffers){const Be=F.texture;for(let Me=0,Xe=Be.length;Me<Xe;Me++){const Ie=i.get(Be[Me]);Ie.__webglTexture===void 0&&(Ie.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&F.samples>0&&De(F)===!1){const Be=Te?D:[D];$.__webglMultisampledFramebuffer=n.createFramebuffer(),$.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,$.__webglMultisampledFramebuffer);for(let Me=0;Me<Be.length;Me++){const Xe=Be[Me];$.__webglColorRenderbuffer[Me]=n.createRenderbuffer(),n.bindRenderbuffer(36161,$.__webglColorRenderbuffer[Me]);const Ie=s.convert(Xe.format,Xe.encoding),Ve=s.convert(Xe.type),He=E(Xe.internalFormat,Ie,Ve,Xe.encoding,F.isXRRenderTarget===!0),Fe=ve(F);n.renderbufferStorageMultisample(36161,Fe,He,F.width,F.height),n.framebufferRenderbuffer(36160,36064+Me,36161,$.__webglColorRenderbuffer[Me])}n.bindRenderbuffer(36161,null),F.depthBuffer&&($.__webglDepthRenderbuffer=n.createRenderbuffer(),he($.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(36160,null)}}if(Se){t.bindTexture(34067,le.__webglTexture),z(34067,D,Oe);for(let Be=0;Be<6;Be++)re($.__webglFramebuffer[Be],F,D,36064,34069+Be);b(D,Oe)&&P(34067),t.unbindTexture()}else if(Te){const Be=F.texture;for(let Me=0,Xe=Be.length;Me<Xe;Me++){const Ie=Be[Me],Ve=i.get(Ie);t.bindTexture(3553,Ve.__webglTexture),z(3553,Ie,Oe),re($.__webglFramebuffer,F,Ie,36064+Me,3553),b(Ie,Oe)&&P(3553)}t.unbindTexture()}else{let Be=3553;(F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(a?Be=F.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Be,le.__webglTexture),z(Be,D,Oe),re($.__webglFramebuffer,F,D,36064,Be),b(D,Oe)&&P(Be),t.unbindTexture()}F.depthBuffer&&ce(F)}function Ae(F){const D=A(F)||a,$=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let le=0,Se=$.length;le<Se;le++){const Te=$[le];if(b(Te,D)){const Oe=F.isWebGLCubeRenderTarget?34067:3553,Be=i.get(Te).__webglTexture;t.bindTexture(Oe,Be),P(Oe),t.unbindTexture()}}}function ke(F){if(a&&F.samples>0&&De(F)===!1){const D=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],$=F.width,le=F.height;let Se=16384;const Te=[],Oe=F.stencilBuffer?33306:36096,Be=i.get(F),Me=F.isWebGLMultipleRenderTargets===!0;if(Me)for(let Xe=0;Xe<D.length;Xe++)t.bindFramebuffer(36160,Be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Xe,36161,null),t.bindFramebuffer(36160,Be.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Xe,3553,null,0);t.bindFramebuffer(36008,Be.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Be.__webglFramebuffer);for(let Xe=0;Xe<D.length;Xe++){Te.push(36064+Xe),F.depthBuffer&&Te.push(Oe);const Ie=Be.__ignoreDepthValues!==void 0?Be.__ignoreDepthValues:!1;if(Ie===!1&&(F.depthBuffer&&(Se|=256),F.stencilBuffer&&(Se|=1024)),Me&&n.framebufferRenderbuffer(36008,36064,36161,Be.__webglColorRenderbuffer[Xe]),Ie===!0&&(n.invalidateFramebuffer(36008,[Oe]),n.invalidateFramebuffer(36009,[Oe])),Me){const Ve=i.get(D[Xe]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,Ve,0)}n.blitFramebuffer(0,0,$,le,0,0,$,le,Se,9728),m&&n.invalidateFramebuffer(36008,Te)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Me)for(let Xe=0;Xe<D.length;Xe++){t.bindFramebuffer(36160,Be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Xe,36161,Be.__webglColorRenderbuffer[Xe]);const Ie=i.get(D[Xe]).__webglTexture;t.bindFramebuffer(36160,Be.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Xe,3553,Ie,0)}t.bindFramebuffer(36009,Be.__webglMultisampledFramebuffer)}}function ve(F){return Math.min(f,F.samples)}function De(F){const D=i.get(F);return a&&F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function Le(F){const D=o.render.frame;g.get(F)!==D&&(g.set(F,D),F.update())}function we(F,D){const $=F.encoding,le=F.format,Se=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||F.format===oy||$!==fa&&($===pn?a===!1?e.has("EXT_sRGB")===!0&&le===_r?(F.format=oy,F.minFilter=gn,F.generateMipmaps=!1):D=xC.sRGBToLinear(D):(le!==_r||Se!==ua)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",$)),D}this.allocateTextureUnit=H,this.resetTextureUnits=oe,this.setTexture2D=Q,this.setTexture2DArray=U,this.setTexture3D=V,this.setTextureCube=Z,this.rebindTextures=Ce,this.setupRenderTarget=ge,this.updateRenderTargetMipmap=Ae,this.updateMultisampleRenderTarget=ke,this.setupDepthRenderbuffer=ce,this.setupFrameBufferTexture=re,this.useMultisampledRTT=De}function MO(n,e,t){const i=t.isWebGL2;function r(s,o=null){let a;if(s===ua)return 5121;if(s===KL)return 32819;if(s===QL)return 32820;if(s===JL)return 5120;if(s===XL)return 5122;if(s===mC)return 5123;if(s===YL)return 5124;if(s===$a)return 5125;if(s===gs)return 5126;if(s===Us)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===ZL)return 6406;if(s===_r)return 6408;if(s===$L)return 6409;if(s===eO)return 6410;if(s===fl)return 6402;if(s===Hc)return 34041;if(s===qL)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===oy)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===tO)return 6403;if(s===nO)return 36244;if(s===iO)return 33319;if(s===rO)return 33320;if(s===sO)return 36249;if(s===fv||s===hv||s===dv||s===pv)if(o===pn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===fv)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===hv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===dv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===pv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===fv)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===hv)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===dv)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===pv)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Fw||s===Uw||s===Nw||s===zw)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===Fw)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Uw)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Nw)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===zw)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===oO)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Gw||s===Hw)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===Gw)return o===pn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===Hw)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===Vw||s===Ww||s===jw||s===Jw||s===Xw||s===Yw||s===Kw||s===Qw||s===Zw||s===qw||s===$w||s===eA||s===tA||s===nA)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===Vw)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Ww)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===jw)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Jw)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Xw)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Yw)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Kw)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Qw)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Zw)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===qw)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===$w)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===eA)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===tA)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===nA)return o===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===iA)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===iA)return o===pn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===bc?i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class CO extends fi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class $o extends Ut{constructor(){super(),this.isGroup=!0,this.type="Group"}}const $V={type:"move"};class Ix{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new $o,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new $o,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new $o,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const v of e.hand.values()){const _=t.getJointPose(v,i),x=this._getHandJoint(c,v);_!==null&&(x.matrix.fromArray(_.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.jointRadius=_.radius),x.visible=_!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],d=u.position.distanceTo(f.position),m=.02,g=.005;c.inputState.pinching&&d>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent($V)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new $o;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class EO extends Cn{constructor(e,t,i,r,s,o,a,l,c,u){if(u=u!==void 0?u:fl,u!==fl&&u!==Hc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===fl&&(i=$a),i===void 0&&u===Hc&&(i=bc),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Hn,this.minFilter=l!==void 0?l:Hn,this.flipY=!1,this.generateMipmaps=!1}}class eW extends ya{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,f=null,d=null,m=null;const g=t.getContextAttributes();let v=null,_=null;const x=[],y=[],S=new Set,A=new Map,C=new fi;C.layers.enable(1),C.viewport=new tn;const b=new fi;b.layers.enable(2),b.viewport=new tn;const P=[C,b],E=new CO;E.layers.enable(1),E.layers.enable(2);let R=null,B=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(U){let V=x[U];return V===void 0&&(V=new Ix,x[U]=V),V.getTargetRaySpace()},this.getControllerGrip=function(U){let V=x[U];return V===void 0&&(V=new Ix,x[U]=V),V.getGripSpace()},this.getHand=function(U){let V=x[U];return V===void 0&&(V=new Ix,x[U]=V),V.getHandSpace()};function O(U){const V=y.indexOf(U.inputSource);if(V===-1)return;const Z=x[V];Z!==void 0&&Z.dispatchEvent({type:U.type,data:U.inputSource})}function G(){r.removeEventListener("select",O),r.removeEventListener("selectstart",O),r.removeEventListener("selectend",O),r.removeEventListener("squeeze",O),r.removeEventListener("squeezestart",O),r.removeEventListener("squeezeend",O),r.removeEventListener("end",G),r.removeEventListener("inputsourceschange",N);for(let U=0;U<x.length;U++){const V=y[U];V!==null&&(y[U]=null,x[U].disconnect(V))}R=null,B=null,e.setRenderTarget(v),d=null,f=null,u=null,r=null,_=null,Q.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(U){s=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(U){a=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(U){l=U},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return u},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(U){if(r=U,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",O),r.addEventListener("selectstart",O),r.addEventListener("selectend",O),r.addEventListener("squeeze",O),r.addEventListener("squeezestart",O),r.addEventListener("squeezeend",O),r.addEventListener("end",G),r.addEventListener("inputsourceschange",N),g.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const V={antialias:r.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(r,t,V),r.updateRenderState({baseLayer:d}),_=new ws(d.framebufferWidth,d.framebufferHeight,{format:_r,type:ua,encoding:e.outputEncoding,stencilBuffer:g.stencil})}else{let V=null,Z=null,K=null;g.depth&&(K=g.stencil?35056:33190,V=g.stencil?Hc:fl,Z=g.stencil?bc:$a);const ne={colorFormat:32856,depthFormat:K,scaleFactor:s};u=new XRWebGLBinding(r,t),f=u.createProjectionLayer(ne),r.updateRenderState({layers:[f]}),_=new ws(f.textureWidth,f.textureHeight,{format:_r,type:ua,depthTexture:new EO(f.textureWidth,f.textureHeight,Z,void 0,void 0,void 0,void 0,void 0,void 0,V),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});const z=e.properties.get(_);z.__ignoreDepthValues=f.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=await r.requestReferenceSpace(a),Q.setContext(r),Q.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function N(U){for(let V=0;V<U.removed.length;V++){const Z=U.removed[V],K=y.indexOf(Z);K>=0&&(y[K]=null,x[K].disconnect(Z))}for(let V=0;V<U.added.length;V++){const Z=U.added[V];let K=y.indexOf(Z);if(K===-1){for(let z=0;z<x.length;z++)if(z>=y.length){y.push(Z),K=z;break}else if(y[z]===null){y[z]=Z,K=z;break}if(K===-1)break}const ne=x[K];ne&&ne.connect(Z)}}const k=new j,X=new j;function te(U,V,Z){k.setFromMatrixPosition(V.matrixWorld),X.setFromMatrixPosition(Z.matrixWorld);const K=k.distanceTo(X),ne=V.projectionMatrix.elements,z=Z.projectionMatrix.elements,ae=ne[14]/(ne[10]-1),ie=ne[14]/(ne[10]+1),ye=(ne[9]+1)/ne[5],re=(ne[9]-1)/ne[5],he=(ne[8]-1)/ne[0],q=(z[8]+1)/z[0],ce=ae*he,Ce=ae*q,ge=K/(-he+q),Ae=ge*-he;V.matrixWorld.decompose(U.position,U.quaternion,U.scale),U.translateX(Ae),U.translateZ(ge),U.matrixWorld.compose(U.position,U.quaternion,U.scale),U.matrixWorldInverse.copy(U.matrixWorld).invert();const ke=ae+ge,ve=ie+ge,De=ce-Ae,Le=Ce+(K-Ae),we=ye*ie/ve*ke,F=re*ie/ve*ke;U.projectionMatrix.makePerspective(De,Le,we,F,ke,ve)}function oe(U,V){V===null?U.matrixWorld.copy(U.matrix):U.matrixWorld.multiplyMatrices(V.matrixWorld,U.matrix),U.matrixWorldInverse.copy(U.matrixWorld).invert()}this.updateCamera=function(U){if(r===null)return;E.near=b.near=C.near=U.near,E.far=b.far=C.far=U.far,(R!==E.near||B!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),R=E.near,B=E.far);const V=U.parent,Z=E.cameras;oe(E,V);for(let ne=0;ne<Z.length;ne++)oe(Z[ne],V);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),U.matrix.copy(E.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale);const K=U.children;for(let ne=0,z=K.length;ne<z;ne++)K[ne].updateMatrixWorld(!0);Z.length===2?te(E,C,b):E.projectionMatrix.copy(C.projectionMatrix)},this.getCamera=function(){return E},this.getFoveation=function(){if(f!==null)return f.fixedFoveation;if(d!==null)return d.fixedFoveation},this.setFoveation=function(U){f!==null&&(f.fixedFoveation=U),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=U)},this.getPlanes=function(){return S};let H=null;function J(U,V){if(c=V.getViewerPose(l||o),m=V,c!==null){const Z=c.views;d!==null&&(e.setRenderTargetFramebuffer(_,d.framebuffer),e.setRenderTarget(_));let K=!1;Z.length!==E.cameras.length&&(E.cameras.length=0,K=!0);for(let ne=0;ne<Z.length;ne++){const z=Z[ne];let ae=null;if(d!==null)ae=d.getViewport(z);else{const ye=u.getViewSubImage(f,z);ae=ye.viewport,ne===0&&(e.setRenderTargetTextures(_,ye.colorTexture,f.ignoreDepthValues?void 0:ye.depthStencilTexture),e.setRenderTarget(_))}let ie=P[ne];ie===void 0&&(ie=new fi,ie.layers.enable(ne),ie.viewport=new tn,P[ne]=ie),ie.matrix.fromArray(z.transform.matrix),ie.projectionMatrix.fromArray(z.projectionMatrix),ie.viewport.set(ae.x,ae.y,ae.width,ae.height),ne===0&&E.matrix.copy(ie.matrix),K===!0&&E.cameras.push(ie)}}for(let Z=0;Z<x.length;Z++){const K=y[Z],ne=x[Z];K!==null&&ne!==void 0&&ne.update(K,V,l||o)}if(H&&H(U,V),V.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:V.detectedPlanes});let Z=null;for(const K of S)V.detectedPlanes.has(K)||(Z===null&&(Z=[]),Z.push(K));if(Z!==null)for(const K of Z)S.delete(K),A.delete(K),i.dispatchEvent({type:"planeremoved",data:K});for(const K of V.detectedPlanes)if(!S.has(K))S.add(K),A.set(K,V.lastChangedTime),i.dispatchEvent({type:"planeadded",data:K});else{const ne=A.get(K);K.lastChangedTime>ne&&(A.set(K,K.lastChangedTime),i.dispatchEvent({type:"planechanged",data:K}))}}m=null}const Q=new _O;Q.setAnimationLoop(J),this.setAnimationLoop=function(U){H=U},this.dispose=function(){}}}function tW(n,e){function t(v,_){_.color.getRGB(v.fogColor.value,vO(n)),_.isFog?(v.fogNear.value=_.near,v.fogFar.value=_.far):_.isFogExp2&&(v.fogDensity.value=_.density)}function i(v,_,x,y,S){_.isMeshBasicMaterial||_.isMeshLambertMaterial?r(v,_):_.isMeshToonMaterial?(r(v,_),u(v,_)):_.isMeshPhongMaterial?(r(v,_),c(v,_)):_.isMeshStandardMaterial?(r(v,_),f(v,_),_.isMeshPhysicalMaterial&&d(v,_,S)):_.isMeshMatcapMaterial?(r(v,_),m(v,_)):_.isMeshDepthMaterial?r(v,_):_.isMeshDistanceMaterial?(r(v,_),g(v,_)):_.isMeshNormalMaterial?r(v,_):_.isLineBasicMaterial?(s(v,_),_.isLineDashedMaterial&&o(v,_)):_.isPointsMaterial?a(v,_,x,y):_.isSpriteMaterial?l(v,_):_.isShadowMaterial?(v.color.value.copy(_.color),v.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function r(v,_){v.opacity.value=_.opacity,_.color&&v.diffuse.value.copy(_.color),_.emissive&&v.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(v.map.value=_.map),_.alphaMap&&(v.alphaMap.value=_.alphaMap),_.bumpMap&&(v.bumpMap.value=_.bumpMap,v.bumpScale.value=_.bumpScale,_.side===ur&&(v.bumpScale.value*=-1)),_.displacementMap&&(v.displacementMap.value=_.displacementMap,v.displacementScale.value=_.displacementScale,v.displacementBias.value=_.displacementBias),_.emissiveMap&&(v.emissiveMap.value=_.emissiveMap),_.normalMap&&(v.normalMap.value=_.normalMap,v.normalScale.value.copy(_.normalScale),_.side===ur&&v.normalScale.value.negate()),_.specularMap&&(v.specularMap.value=_.specularMap),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest);const x=e.get(_).envMap;if(x&&(v.envMap.value=x,v.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=_.reflectivity,v.ior.value=_.ior,v.refractionRatio.value=_.refractionRatio),_.lightMap){v.lightMap.value=_.lightMap;const A=n.physicallyCorrectLights!==!0?Math.PI:1;v.lightMapIntensity.value=_.lightMapIntensity*A}_.aoMap&&(v.aoMap.value=_.aoMap,v.aoMapIntensity.value=_.aoMapIntensity);let y;_.map?y=_.map:_.specularMap?y=_.specularMap:_.displacementMap?y=_.displacementMap:_.normalMap?y=_.normalMap:_.bumpMap?y=_.bumpMap:_.roughnessMap?y=_.roughnessMap:_.metalnessMap?y=_.metalnessMap:_.alphaMap?y=_.alphaMap:_.emissiveMap?y=_.emissiveMap:_.clearcoatMap?y=_.clearcoatMap:_.clearcoatNormalMap?y=_.clearcoatNormalMap:_.clearcoatRoughnessMap?y=_.clearcoatRoughnessMap:_.iridescenceMap?y=_.iridescenceMap:_.iridescenceThicknessMap?y=_.iridescenceThicknessMap:_.specularIntensityMap?y=_.specularIntensityMap:_.specularColorMap?y=_.specularColorMap:_.transmissionMap?y=_.transmissionMap:_.thicknessMap?y=_.thicknessMap:_.sheenColorMap?y=_.sheenColorMap:_.sheenRoughnessMap&&(y=_.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),v.uvTransform.value.copy(y.matrix));let S;_.aoMap?S=_.aoMap:_.lightMap&&(S=_.lightMap),S!==void 0&&(S.isWebGLRenderTarget&&(S=S.texture),S.matrixAutoUpdate===!0&&S.updateMatrix(),v.uv2Transform.value.copy(S.matrix))}function s(v,_){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity}function o(v,_){v.dashSize.value=_.dashSize,v.totalSize.value=_.dashSize+_.gapSize,v.scale.value=_.scale}function a(v,_,x,y){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,v.size.value=_.size*x,v.scale.value=y*.5,_.map&&(v.map.value=_.map),_.alphaMap&&(v.alphaMap.value=_.alphaMap),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest);let S;_.map?S=_.map:_.alphaMap&&(S=_.alphaMap),S!==void 0&&(S.matrixAutoUpdate===!0&&S.updateMatrix(),v.uvTransform.value.copy(S.matrix))}function l(v,_){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,v.rotation.value=_.rotation,_.map&&(v.map.value=_.map),_.alphaMap&&(v.alphaMap.value=_.alphaMap),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest);let x;_.map?x=_.map:_.alphaMap&&(x=_.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),v.uvTransform.value.copy(x.matrix))}function c(v,_){v.specular.value.copy(_.specular),v.shininess.value=Math.max(_.shininess,1e-4)}function u(v,_){_.gradientMap&&(v.gradientMap.value=_.gradientMap)}function f(v,_){v.roughness.value=_.roughness,v.metalness.value=_.metalness,_.roughnessMap&&(v.roughnessMap.value=_.roughnessMap),_.metalnessMap&&(v.metalnessMap.value=_.metalnessMap),e.get(_).envMap&&(v.envMapIntensity.value=_.envMapIntensity)}function d(v,_,x){v.ior.value=_.ior,_.sheen>0&&(v.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),v.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(v.sheenColorMap.value=_.sheenColorMap),_.sheenRoughnessMap&&(v.sheenRoughnessMap.value=_.sheenRoughnessMap)),_.clearcoat>0&&(v.clearcoat.value=_.clearcoat,v.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(v.clearcoatMap.value=_.clearcoatMap),_.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap),_.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),v.clearcoatNormalMap.value=_.clearcoatNormalMap,_.side===ur&&v.clearcoatNormalScale.value.negate())),_.iridescence>0&&(v.iridescence.value=_.iridescence,v.iridescenceIOR.value=_.iridescenceIOR,v.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(v.iridescenceMap.value=_.iridescenceMap),_.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=_.iridescenceThicknessMap)),_.transmission>0&&(v.transmission.value=_.transmission,v.transmissionSamplerMap.value=x.texture,v.transmissionSamplerSize.value.set(x.width,x.height),_.transmissionMap&&(v.transmissionMap.value=_.transmissionMap),v.thickness.value=_.thickness,_.thicknessMap&&(v.thicknessMap.value=_.thicknessMap),v.attenuationDistance.value=_.attenuationDistance,v.attenuationColor.value.copy(_.attenuationColor)),v.specularIntensity.value=_.specularIntensity,v.specularColor.value.copy(_.specularColor),_.specularIntensityMap&&(v.specularIntensityMap.value=_.specularIntensityMap),_.specularColorMap&&(v.specularColorMap.value=_.specularColorMap)}function m(v,_){_.matcap&&(v.matcap.value=_.matcap)}function g(v,_){v.referencePosition.value.copy(_.referencePosition),v.nearDistance.value=_.nearDistance,v.farDistance.value=_.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function nW(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function l(y,S){const A=S.program;i.uniformBlockBinding(y,A)}function c(y,S){let A=r[y.id];A===void 0&&(g(y),A=u(y),r[y.id]=A,y.addEventListener("dispose",_));const C=S.program;i.updateUBOMapping(y,C);const b=e.render.frame;s[y.id]!==b&&(d(y),s[y.id]=b)}function u(y){const S=f();y.__bindingPointIndex=S;const A=n.createBuffer(),C=y.__size,b=y.usage;return n.bindBuffer(35345,A),n.bufferData(35345,C,b),n.bindBuffer(35345,null),n.bindBufferBase(35345,S,A),A}function f(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){const S=r[y.id],A=y.uniforms,C=y.__cache;n.bindBuffer(35345,S);for(let b=0,P=A.length;b<P;b++){const E=A[b];if(m(E,b,C)===!0){const R=E.__offset,B=Array.isArray(E.value)?E.value:[E.value];let O=0;for(let G=0;G<B.length;G++){const N=B[G],k=v(N);typeof N=="number"?(E.__data[0]=N,n.bufferSubData(35345,R+O,E.__data)):N.isMatrix3?(E.__data[0]=N.elements[0],E.__data[1]=N.elements[1],E.__data[2]=N.elements[2],E.__data[3]=N.elements[0],E.__data[4]=N.elements[3],E.__data[5]=N.elements[4],E.__data[6]=N.elements[5],E.__data[7]=N.elements[0],E.__data[8]=N.elements[6],E.__data[9]=N.elements[7],E.__data[10]=N.elements[8],E.__data[11]=N.elements[0]):(N.toArray(E.__data,O),O+=k.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,R,E.__data)}}n.bindBuffer(35345,null)}function m(y,S,A){const C=y.value;if(A[S]===void 0){if(typeof C=="number")A[S]=C;else{const b=Array.isArray(C)?C:[C],P=[];for(let E=0;E<b.length;E++)P.push(b[E].clone());A[S]=P}return!0}else if(typeof C=="number"){if(A[S]!==C)return A[S]=C,!0}else{const b=Array.isArray(A[S])?A[S]:[A[S]],P=Array.isArray(C)?C:[C];for(let E=0;E<b.length;E++){const R=b[E];if(R.equals(P[E])===!1)return R.copy(P[E]),!0}}return!1}function g(y){const S=y.uniforms;let A=0;const C=16;let b=0;for(let P=0,E=S.length;P<E;P++){const R=S[P],B={boundary:0,storage:0},O=Array.isArray(R.value)?R.value:[R.value];for(let G=0,N=O.length;G<N;G++){const k=O[G],X=v(k);B.boundary+=X.boundary,B.storage+=X.storage}if(R.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=A,P>0){b=A%C;const G=C-b;b!==0&&G-B.boundary<0&&(A+=C-b,R.__offset=A)}A+=B.storage}return b=A%C,b>0&&(A+=C-b),y.__size=A,y.__cache={},this}function v(y){const S={boundary:0,storage:0};return typeof y=="number"?(S.boundary=4,S.storage=4):y.isVector2?(S.boundary=8,S.storage=8):y.isVector3||y.isColor?(S.boundary=16,S.storage=12):y.isVector4?(S.boundary=16,S.storage=16):y.isMatrix3?(S.boundary=48,S.storage=48):y.isMatrix4?(S.boundary=64,S.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),S}function _(y){const S=y.target;S.removeEventListener("dispose",_);const A=o.indexOf(S.__bindingPointIndex);o.splice(A,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete s[S.id]}function x(){for(const y in r)n.deleteBuffer(r[y]);o=[],r={},s={}}return{bind:l,update:c,dispose:x}}function iW(){const n=Up("canvas");return n.style.display="block",n}function CC(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:iW(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,r=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",c=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let u;t!==null?u=t.getContextAttributes().alpha:u=n.alpha!==void 0?n.alpha:!1;let f=null,d=null;const m=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=fa,this.physicallyCorrectLights=!1,this.toneMapping=Vs,this.toneMappingExposure=1;const v=this;let _=!1,x=0,y=0,S=null,A=-1,C=null;const b=new tn,P=new tn;let E=null,R=e.width,B=e.height,O=1,G=null,N=null;const k=new tn(0,0,R,B),X=new tn(0,0,R,B);let te=!1;const oe=new Ky;let H=!1,J=!1,Q=null;const U=new dt,V=new Ne,Z=new j,K={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ne(){return S===null?O:1}let z=t;function ae(Y,pe){for(let me=0;me<Y.length;me++){const ue=Y[me],be=e.getContext(ue,pe);if(be!==null)return be}return null}try{const Y={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${om}`),e.addEventListener("webglcontextlost",He,!1),e.addEventListener("webglcontextrestored",Fe,!1),e.addEventListener("webglcontextcreationerror",Ze,!1),z===null){const pe=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&pe.shift(),z=ae(pe,Y),z===null)throw ae(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}z.getShaderPrecisionFormat===void 0&&(z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Y){throw console.error("THREE.WebGLRenderer: "+Y.message),Y}let ie,ye,re,he,q,ce,Ce,ge,Ae,ke,ve,De,Le,we,F,D,$,le,Se,Te,Oe,Be,Me,Xe;function Ie(){ie=new _9(z),ye=new d9(z,ie,n),ie.init(ye),Be=new MO(z,ie,ye),re=new ZV(z,ie,ye),he=new w9,q=new NV,ce=new qV(z,ie,re,q,ye,Be,he),Ce=new m9(v),ge=new y9(v),Ae=new I6(z,ye),Me=new f9(z,ie,Ae,ye),ke=new x9(z,Ae,he,Me),ve=new E9(z,ke,Ae,he),Se=new C9(z,ye,ce),D=new p9(q),De=new UV(v,Ce,ge,ie,ye,Me,D),Le=new tW(v,q),we=new GV,F=new XV(ie,ye),le=new u9(v,Ce,ge,re,ve,u,o),$=new QV(v,ve,ye),Xe=new nW(z,he,ye,re),Te=new h9(z,ie,he,ye),Oe=new S9(z,ie,he,ye),he.programs=De.programs,v.capabilities=ye,v.extensions=ie,v.properties=q,v.renderLists=we,v.shadowMap=$,v.state=re,v.info=he}Ie();const Ve=new eW(v,z);this.xr=Ve,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const Y=ie.get("WEBGL_lose_context");Y&&Y.loseContext()},this.forceContextRestore=function(){const Y=ie.get("WEBGL_lose_context");Y&&Y.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(Y){Y!==void 0&&(O=Y,this.setSize(R,B,!1))},this.getSize=function(Y){return Y.set(R,B)},this.setSize=function(Y,pe,me){if(Ve.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}R=Y,B=pe,e.width=Math.floor(Y*O),e.height=Math.floor(pe*O),me!==!1&&(e.style.width=Y+"px",e.style.height=pe+"px"),this.setViewport(0,0,Y,pe)},this.getDrawingBufferSize=function(Y){return Y.set(R*O,B*O).floor()},this.setDrawingBufferSize=function(Y,pe,me){R=Y,B=pe,O=me,e.width=Math.floor(Y*me),e.height=Math.floor(pe*me),this.setViewport(0,0,Y,pe)},this.getCurrentViewport=function(Y){return Y.copy(b)},this.getViewport=function(Y){return Y.copy(k)},this.setViewport=function(Y,pe,me,ue){Y.isVector4?k.set(Y.x,Y.y,Y.z,Y.w):k.set(Y,pe,me,ue),re.viewport(b.copy(k).multiplyScalar(O).floor())},this.getScissor=function(Y){return Y.copy(X)},this.setScissor=function(Y,pe,me,ue){Y.isVector4?X.set(Y.x,Y.y,Y.z,Y.w):X.set(Y,pe,me,ue),re.scissor(P.copy(X).multiplyScalar(O).floor())},this.getScissorTest=function(){return te},this.setScissorTest=function(Y){re.setScissorTest(te=Y)},this.setOpaqueSort=function(Y){G=Y},this.setTransparentSort=function(Y){N=Y},this.getClearColor=function(Y){return Y.copy(le.getClearColor())},this.setClearColor=function(){le.setClearColor.apply(le,arguments)},this.getClearAlpha=function(){return le.getClearAlpha()},this.setClearAlpha=function(){le.setClearAlpha.apply(le,arguments)},this.clear=function(Y=!0,pe=!0,me=!0){let ue=0;Y&&(ue|=16384),pe&&(ue|=256),me&&(ue|=1024),z.clear(ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",He,!1),e.removeEventListener("webglcontextrestored",Fe,!1),e.removeEventListener("webglcontextcreationerror",Ze,!1),we.dispose(),F.dispose(),q.dispose(),Ce.dispose(),ge.dispose(),ve.dispose(),Me.dispose(),Xe.dispose(),De.dispose(),Ve.dispose(),Ve.removeEventListener("sessionstart",Ye),Ve.removeEventListener("sessionend",nt),Q&&(Q.dispose(),Q=null),xt.stop()};function He(Y){Y.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function Fe(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const Y=he.autoReset,pe=$.enabled,me=$.autoUpdate,ue=$.needsUpdate,be=$.type;Ie(),he.autoReset=Y,$.enabled=pe,$.autoUpdate=me,$.needsUpdate=ue,$.type=be}function Ze(Y){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Y.statusMessage)}function lt(Y){const pe=Y.target;pe.removeEventListener("dispose",lt),yt(pe)}function yt(Y){se(Y),q.remove(Y)}function se(Y){const pe=q.get(Y).programs;pe!==void 0&&(pe.forEach(function(me){De.releaseProgram(me)}),Y.isShaderMaterial&&De.releaseShaderCache(Y))}this.renderBufferDirect=function(Y,pe,me,ue,be,tt){pe===null&&(pe=K);const ut=be.isMesh&&be.matrixWorld.determinant()<0,gt=oi(Y,pe,me,ue,be);re.setMaterial(ue,ut);let bt=me.index,Rt=1;ue.wireframe===!0&&(bt=ke.getWireframeAttribute(me),Rt=2);const It=me.drawRange,kt=me.attributes.position;let _n=It.start*Rt,Zn=(It.start+It.count)*Rt;tt!==null&&(_n=Math.max(_n,tt.start*Rt),Zn=Math.min(Zn,(tt.start+tt.count)*Rt)),bt!==null?(_n=Math.max(_n,0),Zn=Math.min(Zn,bt.count)):kt!=null&&(_n=Math.max(_n,0),Zn=Math.min(Zn,kt.count));const qi=Zn-_n;if(qi<0||qi===1/0)return;Me.setup(be,ue,gt,me,bt);let br,Ke=Te;if(bt!==null&&(br=Ae.get(bt),Ke=Oe,Ke.setIndex(br)),be.isMesh)ue.wireframe===!0?(re.setLineWidth(ue.wireframeLinewidth*ne()),Ke.setMode(1)):Ke.setMode(4);else if(be.isLine){let vt=ue.linewidth;vt===void 0&&(vt=1),re.setLineWidth(vt*ne()),be.isLineSegments?Ke.setMode(1):be.isLineLoop?Ke.setMode(2):Ke.setMode(3)}else be.isPoints?Ke.setMode(0):be.isSprite&&Ke.setMode(4);if(be.isInstancedMesh)Ke.renderInstances(_n,qi,be.count);else if(me.isInstancedBufferGeometry){const vt=me._maxInstanceCount!==void 0?me._maxInstanceCount:1/0,bo=Math.min(me.instanceCount,vt);Ke.renderInstances(_n,qi,bo)}else Ke.render(_n,qi)},this.compile=function(Y,pe){function me(ue,be,tt){ue.transparent===!0&&ue.side===Nd?(ue.side=ur,ue.needsUpdate=!0,Pt(ue,be,tt),ue.side=wo,ue.needsUpdate=!0,Pt(ue,be,tt),ue.side=Nd):Pt(ue,be,tt)}d=F.get(Y),d.init(),g.push(d),Y.traverseVisible(function(ue){ue.isLight&&ue.layers.test(pe.layers)&&(d.pushLight(ue),ue.castShadow&&d.pushShadow(ue))}),d.setupLights(v.physicallyCorrectLights),Y.traverse(function(ue){const be=ue.material;if(be)if(Array.isArray(be))for(let tt=0;tt<be.length;tt++){const ut=be[tt];me(ut,Y,ue)}else me(be,Y,ue)}),g.pop(),d=null};let xe=null;function ze(Y){xe&&xe(Y)}function Ye(){xt.stop()}function nt(){xt.start()}const xt=new _O;xt.setAnimationLoop(ze),typeof self<"u"&&xt.setContext(self),this.setAnimationLoop=function(Y){xe=Y,Ve.setAnimationLoop(Y),Y===null?xt.stop():xt.start()},Ve.addEventListener("sessionstart",Ye),Ve.addEventListener("sessionend",nt),this.render=function(Y,pe){if(pe!==void 0&&pe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(_===!0)return;Y.matrixWorldAutoUpdate===!0&&Y.updateMatrixWorld(),pe.parent===null&&pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),Ve.enabled===!0&&Ve.isPresenting===!0&&(Ve.cameraAutoUpdate===!0&&Ve.updateCamera(pe),pe=Ve.getCamera()),Y.isScene===!0&&Y.onBeforeRender(v,Y,pe,S),d=F.get(Y,g.length),d.init(),g.push(d),U.multiplyMatrices(pe.projectionMatrix,pe.matrixWorldInverse),oe.setFromProjectionMatrix(U),J=this.localClippingEnabled,H=D.init(this.clippingPlanes,J,pe),f=we.get(Y,m.length),f.init(),m.push(f),Nt(Y,pe,0,v.sortObjects),f.finish(),v.sortObjects===!0&&f.sort(G,N),H===!0&&D.beginShadows();const me=d.state.shadowsArray;if($.render(me,Y,pe),H===!0&&D.endShadows(),this.info.autoReset===!0&&this.info.reset(),le.render(f,Y),d.setupLights(v.physicallyCorrectLights),pe.isArrayCamera){const ue=pe.cameras;for(let be=0,tt=ue.length;be<tt;be++){const ut=ue[be];jt(f,Y,ut,ut.viewport)}}else jt(f,Y,pe);S!==null&&(ce.updateMultisampleRenderTarget(S),ce.updateRenderTargetMipmap(S)),Y.isScene===!0&&Y.onAfterRender(v,Y,pe),Me.resetDefaultState(),A=-1,C=null,g.pop(),g.length>0?d=g[g.length-1]:d=null,m.pop(),m.length>0?f=m[m.length-1]:f=null};function Nt(Y,pe,me,ue){if(Y.visible===!1)return;if(Y.layers.test(pe.layers)){if(Y.isGroup)me=Y.renderOrder;else if(Y.isLOD)Y.autoUpdate===!0&&Y.update(pe);else if(Y.isLight)d.pushLight(Y),Y.castShadow&&d.pushShadow(Y);else if(Y.isSprite){if(!Y.frustumCulled||oe.intersectsSprite(Y)){ue&&Z.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(U);const ut=ve.update(Y),gt=Y.material;gt.visible&&f.push(Y,ut,gt,me,Z.z,null)}}else if((Y.isMesh||Y.isLine||Y.isPoints)&&(Y.isSkinnedMesh&&Y.skeleton.frame!==he.render.frame&&(Y.skeleton.update(),Y.skeleton.frame=he.render.frame),!Y.frustumCulled||oe.intersectsObject(Y))){ue&&Z.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(U);const ut=ve.update(Y),gt=Y.material;if(Array.isArray(gt)){const bt=ut.groups;for(let Rt=0,It=bt.length;Rt<It;Rt++){const kt=bt[Rt],_n=gt[kt.materialIndex];_n&&_n.visible&&f.push(Y,ut,_n,me,Z.z,kt)}}else gt.visible&&f.push(Y,ut,gt,me,Z.z,null)}}const tt=Y.children;for(let ut=0,gt=tt.length;ut<gt;ut++)Nt(tt[ut],pe,me,ue)}function jt(Y,pe,me,ue){const be=Y.opaque,tt=Y.transmissive,ut=Y.transparent;d.setupLightsView(me),tt.length>0&&zt(be,pe,me),ue&&re.viewport(b.copy(ue)),be.length>0&&Gt(be,pe,me),tt.length>0&&Gt(tt,pe,me),ut.length>0&&Gt(ut,pe,me),re.buffers.depth.setTest(!0),re.buffers.depth.setMask(!0),re.buffers.color.setMask(!0),re.setPolygonOffset(!1)}function zt(Y,pe,me){const ue=ye.isWebGL2;Q===null&&(Q=new ws(1,1,{generateMipmaps:!0,type:ie.has("EXT_color_buffer_half_float")?Us:ua,minFilter:Ao,samples:ue&&s===!0?4:0})),v.getDrawingBufferSize(V),ue?Q.setSize(V.x,V.y):Q.setSize(ay(V.x),ay(V.y));const be=v.getRenderTarget();v.setRenderTarget(Q),v.clear();const tt=v.toneMapping;v.toneMapping=Vs,Gt(Y,pe,me),v.toneMapping=tt,ce.updateMultisampleRenderTarget(Q),ce.updateRenderTargetMipmap(Q),v.setRenderTarget(be)}function Gt(Y,pe,me){const ue=pe.isScene===!0?pe.overrideMaterial:null;for(let be=0,tt=Y.length;be<tt;be++){const ut=Y[be],gt=ut.object,bt=ut.geometry,Rt=ue===null?ut.material:ue,It=ut.group;gt.layers.test(me.layers)&&Ht(gt,pe,me,bt,Rt,It)}}function Ht(Y,pe,me,ue,be,tt){Y.onBeforeRender(v,pe,me,ue,be,tt),Y.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,Y.matrixWorld),Y.normalMatrix.getNormalMatrix(Y.modelViewMatrix),be.onBeforeRender(v,pe,me,ue,Y,tt),be.transparent===!0&&be.side===Nd?(be.side=ur,be.needsUpdate=!0,v.renderBufferDirect(me,pe,ue,be,Y,tt),be.side=wo,be.needsUpdate=!0,v.renderBufferDirect(me,pe,ue,be,Y,tt),be.side=Nd):v.renderBufferDirect(me,pe,ue,be,Y,tt),Y.onAfterRender(v,pe,me,ue,be,tt)}function Pt(Y,pe,me){pe.isScene!==!0&&(pe=K);const ue=q.get(Y),be=d.state.lights,tt=d.state.shadowsArray,ut=be.state.version,gt=De.getParameters(Y,be.state,tt,pe,me),bt=De.getProgramCacheKey(gt);let Rt=ue.programs;ue.environment=Y.isMeshStandardMaterial?pe.environment:null,ue.fog=pe.fog,ue.envMap=(Y.isMeshStandardMaterial?ge:Ce).get(Y.envMap||ue.environment),Rt===void 0&&(Y.addEventListener("dispose",lt),Rt=new Map,ue.programs=Rt);let It=Rt.get(bt);if(It!==void 0){if(ue.currentProgram===It&&ue.lightsStateVersion===ut)return vi(Y,gt),It}else gt.uniforms=De.getUniforms(Y),Y.onBuild(me,gt,v),Y.onBeforeCompile(gt,v),It=De.acquireProgram(gt,bt),Rt.set(bt,It),ue.uniforms=gt.uniforms;const kt=ue.uniforms;(!Y.isShaderMaterial&&!Y.isRawShaderMaterial||Y.clipping===!0)&&(kt.clippingPlanes=D.uniform),vi(Y,gt),ue.needsLights=yn(Y),ue.lightsStateVersion=ut,ue.needsLights&&(kt.ambientLightColor.value=be.state.ambient,kt.lightProbe.value=be.state.probe,kt.directionalLights.value=be.state.directional,kt.directionalLightShadows.value=be.state.directionalShadow,kt.spotLights.value=be.state.spot,kt.spotLightShadows.value=be.state.spotShadow,kt.rectAreaLights.value=be.state.rectArea,kt.ltc_1.value=be.state.rectAreaLTC1,kt.ltc_2.value=be.state.rectAreaLTC2,kt.pointLights.value=be.state.point,kt.pointLightShadows.value=be.state.pointShadow,kt.hemisphereLights.value=be.state.hemi,kt.directionalShadowMap.value=be.state.directionalShadowMap,kt.directionalShadowMatrix.value=be.state.directionalShadowMatrix,kt.spotShadowMap.value=be.state.spotShadowMap,kt.spotLightMatrix.value=be.state.spotLightMatrix,kt.spotLightMap.value=be.state.spotLightMap,kt.pointShadowMap.value=be.state.pointShadowMap,kt.pointShadowMatrix.value=be.state.pointShadowMatrix);const _n=It.getUniforms(),Zn=yv.seqWithValue(_n.seq,kt);return ue.currentProgram=It,ue.uniformsList=Zn,It}function vi(Y,pe){const me=q.get(Y);me.outputEncoding=pe.outputEncoding,me.instancing=pe.instancing,me.skinning=pe.skinning,me.morphTargets=pe.morphTargets,me.morphNormals=pe.morphNormals,me.morphColors=pe.morphColors,me.morphTargetsCount=pe.morphTargetsCount,me.numClippingPlanes=pe.numClippingPlanes,me.numIntersection=pe.numClipIntersection,me.vertexAlphas=pe.vertexAlphas,me.vertexTangents=pe.vertexTangents,me.toneMapping=pe.toneMapping}function oi(Y,pe,me,ue,be){pe.isScene!==!0&&(pe=K),ce.resetTextureUnits();const tt=pe.fog,ut=ue.isMeshStandardMaterial?pe.environment:null,gt=S===null?v.outputEncoding:S.isXRRenderTarget===!0?S.texture.encoding:fa,bt=(ue.isMeshStandardMaterial?ge:Ce).get(ue.envMap||ut),Rt=ue.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,It=!!ue.normalMap&&!!me.attributes.tangent,kt=!!me.morphAttributes.position,_n=!!me.morphAttributes.normal,Zn=!!me.morphAttributes.color,qi=ue.toneMapped?v.toneMapping:Vs,br=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,Ke=br!==void 0?br.length:0,vt=q.get(ue),bo=d.state.lights;if(H===!0&&(J===!0||Y!==C)){const Xt=Y===C&&ue.id===A;D.setState(ue,Y,Xt)}let cn=!1;ue.version===vt.__version?(vt.needsLights&&vt.lightsStateVersion!==bo.state.version||vt.outputEncoding!==gt||be.isInstancedMesh&&vt.instancing===!1||!be.isInstancedMesh&&vt.instancing===!0||be.isSkinnedMesh&&vt.skinning===!1||!be.isSkinnedMesh&&vt.skinning===!0||vt.envMap!==bt||ue.fog===!0&&vt.fog!==tt||vt.numClippingPlanes!==void 0&&(vt.numClippingPlanes!==D.numPlanes||vt.numIntersection!==D.numIntersection)||vt.vertexAlphas!==Rt||vt.vertexTangents!==It||vt.morphTargets!==kt||vt.morphNormals!==_n||vt.morphColors!==Zn||vt.toneMapping!==qi||ye.isWebGL2===!0&&vt.morphTargetsCount!==Ke)&&(cn=!0):(cn=!0,vt.__version=ue.version);let Qr=vt.currentProgram;cn===!0&&(Qr=Pt(ue,pe,be));let Zs=!1,bi=!1,Ti=!1;const St=Qr.getUniforms(),Dt=vt.uniforms;if(re.useProgram(Qr.program)&&(Zs=!0,bi=!0,Ti=!0),ue.id!==A&&(A=ue.id,bi=!0),Zs||C!==Y){if(St.setValue(z,"projectionMatrix",Y.projectionMatrix),ye.logarithmicDepthBuffer&&St.setValue(z,"logDepthBufFC",2/(Math.log(Y.far+1)/Math.LN2)),C!==Y&&(C=Y,bi=!0,Ti=!0),ue.isShaderMaterial||ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshStandardMaterial||ue.envMap){const Xt=St.map.cameraPosition;Xt!==void 0&&Xt.setValue(z,Z.setFromMatrixPosition(Y.matrixWorld))}(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial)&&St.setValue(z,"isOrthographic",Y.isOrthographicCamera===!0),(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial||ue.isShadowMaterial||be.isSkinnedMesh)&&St.setValue(z,"viewMatrix",Y.matrixWorldInverse)}if(be.isSkinnedMesh){St.setOptional(z,be,"bindMatrix"),St.setOptional(z,be,"bindMatrixInverse");const Xt=be.skeleton;Xt&&(ye.floatVertexTextures?(Xt.boneTexture===null&&Xt.computeBoneTexture(),St.setValue(z,"boneTexture",Xt.boneTexture,ce),St.setValue(z,"boneTextureSize",Xt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const $i=me.morphAttributes;if(($i.position!==void 0||$i.normal!==void 0||$i.color!==void 0&&ye.isWebGL2===!0)&&Se.update(be,me,ue,Qr),(bi||vt.receiveShadow!==be.receiveShadow)&&(vt.receiveShadow=be.receiveShadow,St.setValue(z,"receiveShadow",be.receiveShadow)),ue.isMeshGouraudMaterial&&ue.envMap!==null&&(Dt.envMap.value=bt,Dt.flipEnvMap.value=bt.isCubeTexture&&bt.isRenderTargetTexture===!1?-1:1),bi&&(St.setValue(z,"toneMappingExposure",v.toneMappingExposure),vt.needsLights&&Vt(Dt,Ti),tt&&ue.fog===!0&&Le.refreshFogUniforms(Dt,tt),Le.refreshMaterialUniforms(Dt,ue,O,B,Q),yv.upload(z,vt.uniformsList,Dt,ce)),ue.isShaderMaterial&&ue.uniformsNeedUpdate===!0&&(yv.upload(z,vt.uniformsList,Dt,ce),ue.uniformsNeedUpdate=!1),ue.isSpriteMaterial&&St.setValue(z,"center",be.center),St.setValue(z,"modelViewMatrix",be.modelViewMatrix),St.setValue(z,"normalMatrix",be.normalMatrix),St.setValue(z,"modelMatrix",be.matrixWorld),ue.isShaderMaterial||ue.isRawShaderMaterial){const Xt=ue.uniformsGroups;for(let Wn=0,er=Xt.length;Wn<er;Wn++)if(ye.isWebGL2){const Tr=Xt[Wn];Xe.update(Tr,Qr),Xe.bind(Tr,Qr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Qr}function Vt(Y,pe){Y.ambientLightColor.needsUpdate=pe,Y.lightProbe.needsUpdate=pe,Y.directionalLights.needsUpdate=pe,Y.directionalLightShadows.needsUpdate=pe,Y.pointLights.needsUpdate=pe,Y.pointLightShadows.needsUpdate=pe,Y.spotLights.needsUpdate=pe,Y.spotLightShadows.needsUpdate=pe,Y.rectAreaLights.needsUpdate=pe,Y.hemisphereLights.needsUpdate=pe}function yn(Y){return Y.isMeshLambertMaterial||Y.isMeshToonMaterial||Y.isMeshPhongMaterial||Y.isMeshStandardMaterial||Y.isShadowMaterial||Y.isShaderMaterial&&Y.lights===!0}this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(Y,pe,me){q.get(Y.texture).__webglTexture=pe,q.get(Y.depthTexture).__webglTexture=me;const ue=q.get(Y);ue.__hasExternalTextures=!0,ue.__hasExternalTextures&&(ue.__autoAllocateDepthBuffer=me===void 0,ue.__autoAllocateDepthBuffer||ie.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ue.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Y,pe){const me=q.get(Y);me.__webglFramebuffer=pe,me.__useDefaultFramebuffer=pe===void 0},this.setRenderTarget=function(Y,pe=0,me=0){S=Y,x=pe,y=me;let ue=!0,be=null,tt=!1,ut=!1;if(Y){const bt=q.get(Y);bt.__useDefaultFramebuffer!==void 0?(re.bindFramebuffer(36160,null),ue=!1):bt.__webglFramebuffer===void 0?ce.setupRenderTarget(Y):bt.__hasExternalTextures&&ce.rebindTextures(Y,q.get(Y.texture).__webglTexture,q.get(Y.depthTexture).__webglTexture);const Rt=Y.texture;(Rt.isData3DTexture||Rt.isDataArrayTexture||Rt.isCompressedArrayTexture)&&(ut=!0);const It=q.get(Y).__webglFramebuffer;Y.isWebGLCubeRenderTarget?(be=It[pe],tt=!0):ye.isWebGL2&&Y.samples>0&&ce.useMultisampledRTT(Y)===!1?be=q.get(Y).__webglMultisampledFramebuffer:be=It,b.copy(Y.viewport),P.copy(Y.scissor),E=Y.scissorTest}else b.copy(k).multiplyScalar(O).floor(),P.copy(X).multiplyScalar(O).floor(),E=te;if(re.bindFramebuffer(36160,be)&&ye.drawBuffers&&ue&&re.drawBuffers(Y,be),re.viewport(b),re.scissor(P),re.setScissorTest(E),tt){const bt=q.get(Y.texture);z.framebufferTexture2D(36160,36064,34069+pe,bt.__webglTexture,me)}else if(ut){const bt=q.get(Y.texture),Rt=pe||0;z.framebufferTextureLayer(36160,36064,bt.__webglTexture,me||0,Rt)}A=-1},this.readRenderTargetPixels=function(Y,pe,me,ue,be,tt,ut){if(!(Y&&Y.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let gt=q.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&ut!==void 0&&(gt=gt[ut]),gt){re.bindFramebuffer(36160,gt);try{const bt=Y.texture,Rt=bt.format,It=bt.type;if(Rt!==_r&&Be.convert(Rt)!==z.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const kt=It===Us&&(ie.has("EXT_color_buffer_half_float")||ye.isWebGL2&&ie.has("EXT_color_buffer_float"));if(It!==ua&&Be.convert(It)!==z.getParameter(35738)&&!(It===gs&&(ye.isWebGL2||ie.has("OES_texture_float")||ie.has("WEBGL_color_buffer_float")))&&!kt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pe>=0&&pe<=Y.width-ue&&me>=0&&me<=Y.height-be&&z.readPixels(pe,me,ue,be,Be.convert(Rt),Be.convert(It),tt)}finally{const bt=S!==null?q.get(S).__webglFramebuffer:null;re.bindFramebuffer(36160,bt)}}},this.copyFramebufferToTexture=function(Y,pe,me=0){const ue=Math.pow(2,-me),be=Math.floor(pe.image.width*ue),tt=Math.floor(pe.image.height*ue);ce.setTexture2D(pe,0),z.copyTexSubImage2D(3553,me,0,0,Y.x,Y.y,be,tt),re.unbindTexture()},this.copyTextureToTexture=function(Y,pe,me,ue=0){const be=pe.image.width,tt=pe.image.height,ut=Be.convert(me.format),gt=Be.convert(me.type);ce.setTexture2D(me,0),z.pixelStorei(37440,me.flipY),z.pixelStorei(37441,me.premultiplyAlpha),z.pixelStorei(3317,me.unpackAlignment),pe.isDataTexture?z.texSubImage2D(3553,ue,Y.x,Y.y,be,tt,ut,gt,pe.image.data):pe.isCompressedTexture?z.compressedTexSubImage2D(3553,ue,Y.x,Y.y,pe.mipmaps[0].width,pe.mipmaps[0].height,ut,pe.mipmaps[0].data):z.texSubImage2D(3553,ue,Y.x,Y.y,ut,gt,pe.image),ue===0&&me.generateMipmaps&&z.generateMipmap(3553),re.unbindTexture()},this.copyTextureToTexture3D=function(Y,pe,me,ue,be=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const tt=Y.max.x-Y.min.x+1,ut=Y.max.y-Y.min.y+1,gt=Y.max.z-Y.min.z+1,bt=Be.convert(ue.format),Rt=Be.convert(ue.type);let It;if(ue.isData3DTexture)ce.setTexture3D(ue,0),It=32879;else if(ue.isDataArrayTexture)ce.setTexture2DArray(ue,0),It=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}z.pixelStorei(37440,ue.flipY),z.pixelStorei(37441,ue.premultiplyAlpha),z.pixelStorei(3317,ue.unpackAlignment);const kt=z.getParameter(3314),_n=z.getParameter(32878),Zn=z.getParameter(3316),qi=z.getParameter(3315),br=z.getParameter(32877),Ke=me.isCompressedTexture?me.mipmaps[0]:me.image;z.pixelStorei(3314,Ke.width),z.pixelStorei(32878,Ke.height),z.pixelStorei(3316,Y.min.x),z.pixelStorei(3315,Y.min.y),z.pixelStorei(32877,Y.min.z),me.isDataTexture||me.isData3DTexture?z.texSubImage3D(It,be,pe.x,pe.y,pe.z,tt,ut,gt,bt,Rt,Ke.data):me.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),z.compressedTexSubImage3D(It,be,pe.x,pe.y,pe.z,tt,ut,gt,bt,Ke.data)):z.texSubImage3D(It,be,pe.x,pe.y,pe.z,tt,ut,gt,bt,Rt,Ke),z.pixelStorei(3314,kt),z.pixelStorei(32878,_n),z.pixelStorei(3316,Zn),z.pixelStorei(3315,qi),z.pixelStorei(32877,br),be===0&&ue.generateMipmaps&&z.generateMipmap(It),re.unbindTexture()},this.initTexture=function(Y){Y.isCubeTexture?ce.setTextureCube(Y,0):Y.isData3DTexture?ce.setTexture3D(Y,0):Y.isDataArrayTexture||Y.isCompressedArrayTexture?ce.setTexture2DArray(Y,0):ce.setTexture2D(Y,0),re.unbindTexture()},this.resetState=function(){x=0,y=0,S=null,re.reset(),Me.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class bO extends CC{}bO.prototype.isWebGL1Renderer=!0;class $y{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Je(e),this.density=t}clone(){return new $y(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class e1{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Je(e),this.near=t,this.far=i}clone(){return new e1(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Np extends Ut{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class hm{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=kp,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Vr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const sr=new j;class Sl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)sr.fromBufferAttribute(this,t),sr.applyMatrix4(e),this.setXYZ(t,sr.x,sr.y,sr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)sr.fromBufferAttribute(this,t),sr.applyNormalMatrix(e),this.setXYZ(t,sr.x,sr.y,sr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)sr.fromBufferAttribute(this,t),sr.transformDirection(e),this.setXYZ(t,sr.x,sr.y,sr.z);return this}setX(e,t){return this.normalized&&(t=mn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=qo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=qo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=qo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=qo(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=mn(t,this.array),i=mn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=mn(t,this.array),i=mn(i,this.array),r=mn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=mn(t,this.array),i=mn(i,this.array),r=mn(r,this.array),s=mn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Kt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Sl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class EC extends si{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Je(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Gu;const pd=new j,Hu=new j,Vu=new j,Wu=new Ne,md=new Ne,TO=new dt,l0=new j,gd=new j,c0=new j,T3=new Ne,Bx=new Ne,P3=new Ne;class PO extends Ut{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Gu===void 0){Gu=new Mt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new hm(t,5);Gu.setIndex([0,1,2,0,2,3]),Gu.setAttribute("position",new Sl(i,3,0,!1)),Gu.setAttribute("uv",new Sl(i,2,3,!1))}this.geometry=Gu,this.material=e!==void 0?e:new EC,this.center=new Ne(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Hu.setFromMatrixScale(this.matrixWorld),TO.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Vu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Hu.multiplyScalar(-Vu.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;u0(l0.set(-.5,-.5,0),Vu,o,Hu,r,s),u0(gd.set(.5,-.5,0),Vu,o,Hu,r,s),u0(c0.set(.5,.5,0),Vu,o,Hu,r,s),T3.set(0,0),Bx.set(1,0),P3.set(1,1);let a=e.ray.intersectTriangle(l0,gd,c0,!1,pd);if(a===null&&(u0(gd.set(-.5,.5,0),Vu,o,Hu,r,s),Bx.set(0,1),a=e.ray.intersectTriangle(l0,c0,gd,!1,pd),a===null))return;const l=e.ray.origin.distanceTo(pd);l<e.near||l>e.far||t.push({distance:l,point:pd.clone(),uv:ds.getUV(pd,l0,gd,c0,T3,Bx,P3,new Ne),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function u0(n,e,t,i,r,s){Wu.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(md.x=s*Wu.x-r*Wu.y,md.y=r*Wu.x+s*Wu.y):md.copy(Wu),n.copy(e),n.x+=md.x,n.y+=md.y,n.applyMatrix4(TO)}const f0=new j,R3=new j;class RO extends Ut{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){f0.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(f0);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){f0.setFromMatrixPosition(e.matrixWorld),R3.setFromMatrixPosition(this.matrixWorld);const i=f0.distanceTo(R3)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const I3=new j,B3=new tn,D3=new tn,rW=new j,L3=new dt;class bC extends Ln{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new dt,this.bindMatrixInverse=new dt}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new tn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;B3.fromBufferAttribute(r.attributes.skinIndex,e),D3.fromBufferAttribute(r.attributes.skinWeight,e),I3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=D3.getComponent(s);if(o!==0){const a=B3.getComponent(s);L3.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(rW.copy(I3).applyMatrix4(L3),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class t1 extends Ut{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Df extends Cn{constructor(e=null,t=1,i=1,r,s,o,a,l,c=Hn,u=Hn,f,d){super(null,o,a,l,c,u,r,s,f,d),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const O3=new dt,sW=new dt;class dm{constructor(e=[],t=[]){this.uuid=Vr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new dt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new dt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:sW;O3.multiplyMatrices(a,t[s]),O3.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new dm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=pO(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Df(t,e,e,_r,gs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new t1),this.bones.push(o),this.boneInverses.push(new dt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Wc extends Kt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const k3=new dt,F3=new dt,h0=[],oW=new dt,vd=new Ln;class TC extends Ln{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Wc(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,oW)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(vd.geometry=this.geometry,vd.material=this.material,vd.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,k3),F3.multiplyMatrices(i,k3),vd.matrixWorld=F3,vd.raycast(e,h0);for(let o=0,a=h0.length;o<a;o++){const l=h0[o];l.instanceId=s,l.object=this,t.push(l)}h0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Wc(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Qi extends si{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Je(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const U3=new j,N3=new j,z3=new dt,Dx=new cm,d0=new xa;class ha extends Ut{constructor(e=new Mt,t=new Qi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)U3.fromBufferAttribute(t,r-1),N3.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=U3.distanceTo(N3);e.setAttribute("lineDistance",new ot(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),d0.copy(i.boundingSphere),d0.applyMatrix4(r),d0.radius+=s,e.ray.intersectsSphere(d0)===!1)return;z3.copy(r).invert(),Dx.copy(e.ray).applyMatrix4(z3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new j,u=new j,f=new j,d=new j,m=this.isLineSegments?2:1,g=i.index,_=i.attributes.position;if(g!==null){const x=Math.max(0,o.start),y=Math.min(g.count,o.start+o.count);for(let S=x,A=y-1;S<A;S+=m){const C=g.getX(S),b=g.getX(S+1);if(c.fromBufferAttribute(_,C),u.fromBufferAttribute(_,b),Dx.distanceSqToSegment(c,u,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const E=e.ray.origin.distanceTo(d);E<e.near||E>e.far||t.push({distance:E,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const x=Math.max(0,o.start),y=Math.min(_.count,o.start+o.count);for(let S=x,A=y-1;S<A;S+=m){if(c.fromBufferAttribute(_,S),u.fromBufferAttribute(_,S+1),Dx.distanceSqToSegment(c,u,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(d);b<e.near||b>e.far||t.push({distance:b,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const G3=new j,H3=new j;class Xs extends ha{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)G3.fromBufferAttribute(t,r),H3.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+G3.distanceTo(H3);e.setAttribute("lineDistance",new ot(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class PC extends ha{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class n1 extends si{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Je(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const V3=new dt,lA=new cm,p0=new xa,m0=new j;class RC extends Ut{constructor(e=new Mt,t=new n1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),p0.copy(i.boundingSphere),p0.applyMatrix4(r),p0.radius+=s,e.ray.intersectsSphere(p0)===!1)return;V3.copy(r).invert(),lA.copy(e.ray).applyMatrix4(V3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const d=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let g=d,v=m;g<v;g++){const _=c.getX(g);m0.fromBufferAttribute(f,_),W3(m0,_,l,r,e,t,this)}}else{const d=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let g=d,v=m;g<v;g++)m0.fromBufferAttribute(f,g),W3(m0,g,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function W3(n,e,t,i,r,s,o){const a=lA.distanceSqToPoint(n);if(a<t){const l=new j;lA.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class aW extends Cn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:gn,this.magFilter=s!==void 0?s:gn,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class lW extends Cn{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=Hn,this.minFilter=Hn,this.generateMipmaps=!1,this.needsUpdate=!0}}class IC extends Cn{constructor(e,t,i,r,s,o,a,l,c,u,f,d){super(null,o,a,l,c,u,r,s,f,d),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class cW extends IC{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Bi}}class uW extends Cn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ys{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],d=i[r+1]-u,m=(o-u)/d;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Ne:new j);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new j,r=[],s=[],o=[],a=new j,l=new dt;for(let m=0;m<=e;m++){const g=m/e;r[m]=this.getTangentAt(g,new j)}s[0]=new j,o[0]=new j;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),d<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Qn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(Qn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],m*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class i1 extends Ys{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new Ne,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),d=l-this.aX,m=c-this.aY;l=d*u-m*f+this.aX,c=d*f+m*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class IO extends i1{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function BC(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let d=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+f)+(l-a)/f;d*=u,m*=u,r(o,a,d,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const g0=new j,Lx=new BC,Ox=new BC,kx=new BC;class DC extends Ys{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new j){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(g0.subVectors(r[0],r[1]).add(r[0]),c=g0);const f=r[a%s],d=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(g0.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=g0),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(f),m),v=Math.pow(f.distanceToSquared(d),m),_=Math.pow(d.distanceToSquared(u),m);v<1e-4&&(v=1),g<1e-4&&(g=v),_<1e-4&&(_=v),Lx.initNonuniformCatmullRom(c.x,f.x,d.x,u.x,g,v,_),Ox.initNonuniformCatmullRom(c.y,f.y,d.y,u.y,g,v,_),kx.initNonuniformCatmullRom(c.z,f.z,d.z,u.z,g,v,_)}else this.curveType==="catmullrom"&&(Lx.initCatmullRom(c.x,f.x,d.x,u.x,this.tension),Ox.initCatmullRom(c.y,f.y,d.y,u.y,this.tension),kx.initCatmullRom(c.z,f.z,d.z,u.z,this.tension));return i.set(Lx.calc(l),Ox.calc(l),kx.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new j().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function j3(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function fW(n,e){const t=1-n;return t*t*e}function hW(n,e){return 2*(1-n)*n*e}function dW(n,e){return n*n*e}function sp(n,e,t,i){return fW(n,e)+hW(n,t)+dW(n,i)}function pW(n,e){const t=1-n;return t*t*t*e}function mW(n,e){const t=1-n;return 3*t*t*n*e}function gW(n,e){return 3*(1-n)*n*n*e}function vW(n,e){return n*n*n*e}function op(n,e,t,i,r){return pW(n,e)+mW(n,t)+gW(n,i)+vW(n,r)}class LC extends Ys{constructor(e=new Ne,t=new Ne,i=new Ne,r=new Ne){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ne){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(op(e,r.x,s.x,o.x,a.x),op(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class BO extends Ys{constructor(e=new j,t=new j,i=new j,r=new j){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new j){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(op(e,r.x,s.x,o.x,a.x),op(e,r.y,s.y,o.y,a.y),op(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class r1 extends Ys{constructor(e=new Ne,t=new Ne){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ne){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Ne;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class DO extends Ys{constructor(e=new j,t=new j){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new j){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OC extends Ys{constructor(e=new Ne,t=new Ne,i=new Ne){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ne){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(sp(e,r.x,s.x,o.x),sp(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kC extends Ys{constructor(e=new j,t=new j,i=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new j){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(sp(e,r.x,s.x,o.x),sp(e,r.y,s.y,o.y),sp(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class FC extends Ys{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ne){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(j3(a,l.x,c.x,u.x,f.x),j3(a,l.y,c.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ne().fromArray(r))}return this}}var UC=Object.freeze({__proto__:null,ArcCurve:IO,CatmullRomCurve3:DC,CubicBezierCurve:LC,CubicBezierCurve3:BO,EllipseCurve:i1,LineCurve:r1,LineCurve3:DO,QuadraticBezierCurve:OC,QuadraticBezierCurve3:kC,SplineCurve:FC});class LO extends Ys{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new r1(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new UC[r.type]().fromJSON(r))}return this}}class zp extends LO{constructor(e){super(),this.type="Path",this.currentPoint=new Ne,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new r1(this.currentPoint.clone(),new Ne(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new OC(this.currentPoint.clone(),new Ne(e,t),new Ne(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new LC(this.currentPoint.clone(),new Ne(e,t),new Ne(i,r),new Ne(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new FC(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new i1(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class yh extends Mt{constructor(e=[new Ne(0,-.5),new Ne(.5,0),new Ne(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Qn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,f=new j,d=new Ne,m=new j,g=new j,v=new j;let _=0,x=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:_=e[y+1].x-e[y].x,x=e[y+1].y-e[y].y,m.x=x*1,m.y=-_,m.z=x*0,v.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:_=e[y+1].x-e[y].x,x=e[y+1].y-e[y].y,m.x=x*1,m.y=-_,m.z=x*0,g.copy(m),m.x+=v.x,m.y+=v.y,m.z+=v.z,m.normalize(),l.push(m.x,m.y,m.z),v.copy(g)}for(let y=0;y<=t;y++){const S=i+y*u*r,A=Math.sin(S),C=Math.cos(S);for(let b=0;b<=e.length-1;b++){f.x=e[b].x*A,f.y=e[b].y,f.z=e[b].x*C,o.push(f.x,f.y,f.z),d.x=y/t,d.y=b/(e.length-1),a.push(d.x,d.y);const P=l[3*b+0]*A,E=l[3*b+1],R=l[3*b+0]*C;c.push(P,E,R)}}for(let y=0;y<t;y++)for(let S=0;S<e.length-1;S++){const A=S+y*e.length,C=A,b=A+e.length,P=A+e.length+1,E=A+1;s.push(C,b,E),s.push(P,E,b)}this.setIndex(s),this.setAttribute("position",new ot(o,3)),this.setAttribute("uv",new ot(a,2)),this.setAttribute("normal",new ot(c,3))}static fromJSON(e){return new yh(e.points,e.segments,e.phiStart,e.phiLength)}}class pm extends yh{constructor(e=1,t=1,i=4,r=8){const s=new zp;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new pm(e.radius,e.length,e.capSegments,e.radialSegments)}}class mm extends Mt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new j,u=new Ne;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,d=3;f<=t;f++,d+=3){const m=i+f/t*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[d]/e+1)/2,u.y=(o[d+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new ot(o,3)),this.setAttribute("normal",new ot(a,3)),this.setAttribute("uv",new ot(l,2))}static fromJSON(e){return new mm(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class nu extends Mt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],f=[],d=[],m=[];let g=0;const v=[],_=i/2;let x=0;y(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(u),this.setAttribute("position",new ot(f,3)),this.setAttribute("normal",new ot(d,3)),this.setAttribute("uv",new ot(m,2));function y(){const A=new j,C=new j;let b=0;const P=(t-e)/i;for(let E=0;E<=s;E++){const R=[],B=E/s,O=B*(t-e)+e;for(let G=0;G<=r;G++){const N=G/r,k=N*l+a,X=Math.sin(k),te=Math.cos(k);C.x=O*X,C.y=-B*i+_,C.z=O*te,f.push(C.x,C.y,C.z),A.set(X,P,te).normalize(),d.push(A.x,A.y,A.z),m.push(N,1-B),R.push(g++)}v.push(R)}for(let E=0;E<r;E++)for(let R=0;R<s;R++){const B=v[R][E],O=v[R+1][E],G=v[R+1][E+1],N=v[R][E+1];u.push(B,O,N),u.push(O,G,N),b+=6}c.addGroup(x,b,0),x+=b}function S(A){const C=g,b=new Ne,P=new j;let E=0;const R=A===!0?e:t,B=A===!0?1:-1;for(let G=1;G<=r;G++)f.push(0,_*B,0),d.push(0,B,0),m.push(.5,.5),g++;const O=g;for(let G=0;G<=r;G++){const k=G/r*l+a,X=Math.cos(k),te=Math.sin(k);P.x=R*te,P.y=_*B,P.z=R*X,f.push(P.x,P.y,P.z),d.push(0,B,0),b.x=X*.5+.5,b.y=te*.5*B+.5,m.push(b.x,b.y),g++}for(let G=0;G<r;G++){const N=C+G,k=O+G;A===!0?u.push(k,k+1,N):u.push(k+1,k,N),E+=3}c.addGroup(x,E,A===!0?1:2),x+=E}}static fromJSON(e){return new nu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class gm extends nu{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new gm(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Sa extends Mt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new ot(s,3)),this.setAttribute("normal",new ot(s.slice(),3)),this.setAttribute("uv",new ot(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(y){const S=new j,A=new j,C=new j;for(let b=0;b<t.length;b+=3)m(t[b+0],S),m(t[b+1],A),m(t[b+2],C),l(S,A,C,y)}function l(y,S,A,C){const b=C+1,P=[];for(let E=0;E<=b;E++){P[E]=[];const R=y.clone().lerp(A,E/b),B=S.clone().lerp(A,E/b),O=b-E;for(let G=0;G<=O;G++)G===0&&E===b?P[E][G]=R:P[E][G]=R.clone().lerp(B,G/O)}for(let E=0;E<b;E++)for(let R=0;R<2*(b-E)-1;R++){const B=Math.floor(R/2);R%2===0?(d(P[E][B+1]),d(P[E+1][B]),d(P[E][B])):(d(P[E][B+1]),d(P[E+1][B+1]),d(P[E+1][B]))}}function c(y){const S=new j;for(let A=0;A<s.length;A+=3)S.x=s[A+0],S.y=s[A+1],S.z=s[A+2],S.normalize().multiplyScalar(y),s[A+0]=S.x,s[A+1]=S.y,s[A+2]=S.z}function u(){const y=new j;for(let S=0;S<s.length;S+=3){y.x=s[S+0],y.y=s[S+1],y.z=s[S+2];const A=_(y)/2/Math.PI+.5,C=x(y)/Math.PI+.5;o.push(A,1-C)}g(),f()}function f(){for(let y=0;y<o.length;y+=6){const S=o[y+0],A=o[y+2],C=o[y+4],b=Math.max(S,A,C),P=Math.min(S,A,C);b>.9&&P<.1&&(S<.2&&(o[y+0]+=1),A<.2&&(o[y+2]+=1),C<.2&&(o[y+4]+=1))}}function d(y){s.push(y.x,y.y,y.z)}function m(y,S){const A=y*3;S.x=e[A+0],S.y=e[A+1],S.z=e[A+2]}function g(){const y=new j,S=new j,A=new j,C=new j,b=new Ne,P=new Ne,E=new Ne;for(let R=0,B=0;R<s.length;R+=9,B+=6){y.set(s[R+0],s[R+1],s[R+2]),S.set(s[R+3],s[R+4],s[R+5]),A.set(s[R+6],s[R+7],s[R+8]),b.set(o[B+0],o[B+1]),P.set(o[B+2],o[B+3]),E.set(o[B+4],o[B+5]),C.copy(y).add(S).add(A).divideScalar(3);const O=_(C);v(b,B+0,y,O),v(P,B+2,S,O),v(E,B+4,A,O)}}function v(y,S,A,C){C<0&&y.x===1&&(o[S]=y.x-1),A.x===0&&A.z===0&&(o[S]=C/2/Math.PI+.5)}function _(y){return Math.atan2(y.z,-y.x)}function x(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}static fromJSON(e){return new Sa(e.vertices,e.indices,e.radius,e.details)}}class vm extends Sa{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new vm(e.radius,e.detail)}}const v0=new j,y0=new j,Fx=new j,_0=new ds;class OO extends Mt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Tc*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),d={},m=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:v,b:_,c:x}=_0;if(v.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),x.fromBufferAttribute(a,c[2]),_0.getNormal(Fx),f[0]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,f[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,f[2]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let y=0;y<3;y++){const S=(y+1)%3,A=f[y],C=f[S],b=_0[u[y]],P=_0[u[S]],E=`${A}_${C}`,R=`${C}_${A}`;R in d&&d[R]?(Fx.dot(d[R].normal)<=s&&(m.push(b.x,b.y,b.z),m.push(P.x,P.y,P.z)),d[R]=null):E in d||(d[E]={index0:c[y],index1:c[S],normal:Fx.clone()})}}for(const g in d)if(d[g]){const{index0:v,index1:_}=d[g];v0.fromBufferAttribute(a,v),y0.fromBufferAttribute(a,_),m.push(v0.x,v0.y,v0.z),m.push(y0.x,y0.y,y0.z)}this.setAttribute("position",new ot(m,3))}}}class Ic extends zp{constructor(e){super(e),this.uuid=Vr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new zp().fromJSON(r))}return this}}const yW={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=kO(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,d,m;if(i&&(s=AW(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let g=t;g<r;g+=t)f=n[g],d=n[g+1],f<a&&(a=f),d<l&&(l=d),f>c&&(c=f),d>u&&(u=d);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return Gp(s,o,t,a,l,m,0),o}};function kO(n,e,t,i,r){let s,o;if(r===LW(n,e,t,i)>0)for(s=e;s<t;s+=i)o=J3(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=J3(s,n[s],n[s+1],o);return o&&s1(o,o.next)&&(Vp(o),o=o.next),o}function jc(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(s1(t,t.next)||Dn(t.prev,t,t.next)===0)){if(Vp(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Gp(n,e,t,i,r,s,o){if(!n)return;!o&&s&&TW(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?xW(n,i,r,s):_W(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Vp(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=SW(jc(n),e,t),Gp(n,e,t,i,r,s,2)):o===2&&wW(n,e,t,i,r,s):Gp(jc(n),e,t,i,r,s,1);break}}}function _W(n){const e=n.prev,t=n,i=n.next;if(Dn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,d=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let g=i.next;for(;g!==e;){if(g.x>=u&&g.x<=d&&g.y>=f&&g.y<=m&&yf(r,a,s,l,o,c,g.x,g.y)&&Dn(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function xW(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Dn(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,f=s.y,d=o.y,m=a<l?a<c?a:c:l<c?l:c,g=u<f?u<d?u:d:f<d?f:d,v=a>l?a>c?a:c:l>c?l:c,_=u>f?u>d?u:d:f>d?f:d,x=cA(m,g,e,t,i),y=cA(v,_,e,t,i);let S=n.prevZ,A=n.nextZ;for(;S&&S.z>=x&&A&&A.z<=y;){if(S.x>=m&&S.x<=v&&S.y>=g&&S.y<=_&&S!==r&&S!==o&&yf(a,u,l,f,c,d,S.x,S.y)&&Dn(S.prev,S,S.next)>=0||(S=S.prevZ,A.x>=m&&A.x<=v&&A.y>=g&&A.y<=_&&A!==r&&A!==o&&yf(a,u,l,f,c,d,A.x,A.y)&&Dn(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;S&&S.z>=x;){if(S.x>=m&&S.x<=v&&S.y>=g&&S.y<=_&&S!==r&&S!==o&&yf(a,u,l,f,c,d,S.x,S.y)&&Dn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;A&&A.z<=y;){if(A.x>=m&&A.x<=v&&A.y>=g&&A.y<=_&&A!==r&&A!==o&&yf(a,u,l,f,c,d,A.x,A.y)&&Dn(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function SW(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!s1(r,s)&&FO(r,i,i.next,s)&&Hp(r,s)&&Hp(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Vp(i),Vp(i.next),i=n=s),i=i.next}while(i!==n);return jc(i)}function wW(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&IW(o,a)){let l=UO(o,a);o=jc(o,o.next),l=jc(l,l.next),Gp(o,e,t,i,r,s,0),Gp(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function AW(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=kO(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(RW(c));for(r.sort(MW),s=0;s<r.length;s++)t=CW(r[s],t);return t}function MW(n,e){return n.x-e.x}function CW(n,e){const t=EW(n,e);if(!t)return e;const i=UO(t,n);return jc(i,i.next),jc(t,t.next)}function EW(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>i&&(i=d,r=t.x<t.next.x?t:t.next,d===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&yf(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),Hp(t,n)&&(f<u||f===u&&(t.x>r.x||t.x===r.x&&bW(r,t)))&&(r=t,u=f)),t=t.next;while(t!==a);return r}function bW(n,e){return Dn(n.prev,n,e.prev)<0&&Dn(e.next,n,n.next)<0}function TW(n,e,t,i){let r=n;do r.z===0&&(r.z=cA(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,PW(r)}function PW(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function cA(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function RW(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function yf(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function IW(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!BW(n,e)&&(Hp(n,e)&&Hp(e,n)&&DW(n,e)&&(Dn(n.prev,n,e.prev)||Dn(n,e.prev,e))||s1(n,e)&&Dn(n.prev,n,n.next)>0&&Dn(e.prev,e,e.next)>0)}function Dn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function s1(n,e){return n.x===e.x&&n.y===e.y}function FO(n,e,t,i){const r=S0(Dn(n,e,t)),s=S0(Dn(n,e,i)),o=S0(Dn(t,i,n)),a=S0(Dn(t,i,e));return!!(r!==s&&o!==a||r===0&&x0(n,t,e)||s===0&&x0(n,i,e)||o===0&&x0(t,n,i)||a===0&&x0(t,e,i))}function x0(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function S0(n){return n>0?1:n<0?-1:0}function BW(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&FO(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Hp(n,e){return Dn(n.prev,n,n.next)<0?Dn(n,e,n.next)>=0&&Dn(n,n.prev,e)>=0:Dn(n,e,n.prev)<0||Dn(n,n.next,e)<0}function DW(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function UO(n,e){const t=new uA(n.i,n.x,n.y),i=new uA(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function J3(n,e,t,i){const r=new uA(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Vp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function uA(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function LW(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class xo{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return xo.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];X3(e),Y3(i,e);let o=e.length;t.forEach(X3);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,Y3(i,t[l]);const a=yW.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function X3(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Y3(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class _h extends Mt{constructor(e=new Ic([new Ne(.5,.5),new Ne(-.5,.5),new Ne(-.5,-.5),new Ne(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new ot(r,3)),this.setAttribute("uv",new ot(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:m-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,y=t.UVGenerator!==void 0?t.UVGenerator:OW;let S,A=!1,C,b,P,E;x&&(S=x.getSpacedPoints(u),A=!0,d=!1,C=x.computeFrenetFrames(u,!1),b=new j,P=new j,E=new j),d||(_=0,m=0,g=0,v=0);const R=a.extractPoints(c);let B=R.shape;const O=R.holes;if(!xo.isClockWise(B)){B=B.reverse();for(let q=0,ce=O.length;q<ce;q++){const Ce=O[q];xo.isClockWise(Ce)&&(O[q]=Ce.reverse())}}const N=xo.triangulateShape(B,O),k=B;for(let q=0,ce=O.length;q<ce;q++){const Ce=O[q];B=B.concat(Ce)}function X(q,ce,Ce){return ce||console.error("THREE.ExtrudeGeometry: vec does not exist"),ce.clone().multiplyScalar(Ce).add(q)}const te=B.length,oe=N.length;function H(q,ce,Ce){let ge,Ae,ke;const ve=q.x-ce.x,De=q.y-ce.y,Le=Ce.x-q.x,we=Ce.y-q.y,F=ve*ve+De*De,D=ve*we-De*Le;if(Math.abs(D)>Number.EPSILON){const $=Math.sqrt(F),le=Math.sqrt(Le*Le+we*we),Se=ce.x-De/$,Te=ce.y+ve/$,Oe=Ce.x-we/le,Be=Ce.y+Le/le,Me=((Oe-Se)*we-(Be-Te)*Le)/(ve*we-De*Le);ge=Se+ve*Me-q.x,Ae=Te+De*Me-q.y;const Xe=ge*ge+Ae*Ae;if(Xe<=2)return new Ne(ge,Ae);ke=Math.sqrt(Xe/2)}else{let $=!1;ve>Number.EPSILON?Le>Number.EPSILON&&($=!0):ve<-Number.EPSILON?Le<-Number.EPSILON&&($=!0):Math.sign(De)===Math.sign(we)&&($=!0),$?(ge=-De,Ae=ve,ke=Math.sqrt(F)):(ge=ve,Ae=De,ke=Math.sqrt(F/2))}return new Ne(ge/ke,Ae/ke)}const J=[];for(let q=0,ce=k.length,Ce=ce-1,ge=q+1;q<ce;q++,Ce++,ge++)Ce===ce&&(Ce=0),ge===ce&&(ge=0),J[q]=H(k[q],k[Ce],k[ge]);const Q=[];let U,V=J.concat();for(let q=0,ce=O.length;q<ce;q++){const Ce=O[q];U=[];for(let ge=0,Ae=Ce.length,ke=Ae-1,ve=ge+1;ge<Ae;ge++,ke++,ve++)ke===Ae&&(ke=0),ve===Ae&&(ve=0),U[ge]=H(Ce[ge],Ce[ke],Ce[ve]);Q.push(U),V=V.concat(U)}for(let q=0;q<_;q++){const ce=q/_,Ce=m*Math.cos(ce*Math.PI/2),ge=g*Math.sin(ce*Math.PI/2)+v;for(let Ae=0,ke=k.length;Ae<ke;Ae++){const ve=X(k[Ae],J[Ae],ge);ae(ve.x,ve.y,-Ce)}for(let Ae=0,ke=O.length;Ae<ke;Ae++){const ve=O[Ae];U=Q[Ae];for(let De=0,Le=ve.length;De<Le;De++){const we=X(ve[De],U[De],ge);ae(we.x,we.y,-Ce)}}}const Z=g+v;for(let q=0;q<te;q++){const ce=d?X(B[q],V[q],Z):B[q];A?(P.copy(C.normals[0]).multiplyScalar(ce.x),b.copy(C.binormals[0]).multiplyScalar(ce.y),E.copy(S[0]).add(P).add(b),ae(E.x,E.y,E.z)):ae(ce.x,ce.y,0)}for(let q=1;q<=u;q++)for(let ce=0;ce<te;ce++){const Ce=d?X(B[ce],V[ce],Z):B[ce];A?(P.copy(C.normals[q]).multiplyScalar(Ce.x),b.copy(C.binormals[q]).multiplyScalar(Ce.y),E.copy(S[q]).add(P).add(b),ae(E.x,E.y,E.z)):ae(Ce.x,Ce.y,f/u*q)}for(let q=_-1;q>=0;q--){const ce=q/_,Ce=m*Math.cos(ce*Math.PI/2),ge=g*Math.sin(ce*Math.PI/2)+v;for(let Ae=0,ke=k.length;Ae<ke;Ae++){const ve=X(k[Ae],J[Ae],ge);ae(ve.x,ve.y,f+Ce)}for(let Ae=0,ke=O.length;Ae<ke;Ae++){const ve=O[Ae];U=Q[Ae];for(let De=0,Le=ve.length;De<Le;De++){const we=X(ve[De],U[De],ge);A?ae(we.x,we.y+S[u-1].y,S[u-1].x+Ce):ae(we.x,we.y,f+Ce)}}}K(),ne();function K(){const q=r.length/3;if(d){let ce=0,Ce=te*ce;for(let ge=0;ge<oe;ge++){const Ae=N[ge];ie(Ae[2]+Ce,Ae[1]+Ce,Ae[0]+Ce)}ce=u+_*2,Ce=te*ce;for(let ge=0;ge<oe;ge++){const Ae=N[ge];ie(Ae[0]+Ce,Ae[1]+Ce,Ae[2]+Ce)}}else{for(let ce=0;ce<oe;ce++){const Ce=N[ce];ie(Ce[2],Ce[1],Ce[0])}for(let ce=0;ce<oe;ce++){const Ce=N[ce];ie(Ce[0]+te*u,Ce[1]+te*u,Ce[2]+te*u)}}i.addGroup(q,r.length/3-q,0)}function ne(){const q=r.length/3;let ce=0;z(k,ce),ce+=k.length;for(let Ce=0,ge=O.length;Ce<ge;Ce++){const Ae=O[Ce];z(Ae,ce),ce+=Ae.length}i.addGroup(q,r.length/3-q,1)}function z(q,ce){let Ce=q.length;for(;--Ce>=0;){const ge=Ce;let Ae=Ce-1;Ae<0&&(Ae=q.length-1);for(let ke=0,ve=u+_*2;ke<ve;ke++){const De=te*ke,Le=te*(ke+1),we=ce+ge+De,F=ce+Ae+De,D=ce+Ae+Le,$=ce+ge+Le;ye(we,F,D,$)}}}function ae(q,ce,Ce){l.push(q),l.push(ce),l.push(Ce)}function ie(q,ce,Ce){re(q),re(ce),re(Ce);const ge=r.length/3,Ae=y.generateTopUV(i,r,ge-3,ge-2,ge-1);he(Ae[0]),he(Ae[1]),he(Ae[2])}function ye(q,ce,Ce,ge){re(q),re(ce),re(ge),re(ce),re(Ce),re(ge);const Ae=r.length/3,ke=y.generateSideWallUV(i,r,Ae-6,Ae-3,Ae-2,Ae-1);he(ke[0]),he(ke[1]),he(ke[3]),he(ke[1]),he(ke[2]),he(ke[3])}function re(q){r.push(l[q*3+0]),r.push(l[q*3+1]),r.push(l[q*3+2])}function he(q){s.push(q.x),s.push(q.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return kW(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new UC[r.type]().fromJSON(r)),new _h(i,e.options)}}const OW={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Ne(s,o),new Ne(a,l),new Ne(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],f=e[i*3+2],d=e[r*3],m=e[r*3+1],g=e[r*3+2],v=e[s*3],_=e[s*3+1],x=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ne(o,1-l),new Ne(c,1-f),new Ne(d,1-g),new Ne(v,1-x)]:[new Ne(a,1-l),new Ne(u,1-f),new Ne(m,1-g),new Ne(_,1-x)]}};function kW(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class xh extends Sa{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new xh(e.radius,e.detail)}}class Sh extends Sa{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sh(e.radius,e.detail)}}class ym extends Mt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let f=e;const d=(t-e)/r,m=new j,g=new Ne;for(let v=0;v<=r;v++){for(let _=0;_<=i;_++){const x=s+_/i*o;m.x=f*Math.cos(x),m.y=f*Math.sin(x),l.push(m.x,m.y,m.z),c.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,u.push(g.x,g.y)}f+=d}for(let v=0;v<r;v++){const _=v*(i+1);for(let x=0;x<i;x++){const y=x+_,S=y,A=y+i+1,C=y+i+2,b=y+1;a.push(S,A,b),a.push(A,C,b)}}this.setIndex(a),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(c,3)),this.setAttribute("uv",new ot(u,2))}static fromJSON(e){return new ym(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class _m extends Mt{constructor(e=new Ic([new Ne(0,.5),new Ne(-.5,-.5),new Ne(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new ot(r,3)),this.setAttribute("normal",new ot(s,3)),this.setAttribute("uv",new ot(o,2));function c(u){const f=r.length/3,d=u.extractPoints(t);let m=d.shape;const g=d.holes;xo.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,x=g.length;_<x;_++){const y=g[_];xo.isClockWise(y)===!0&&(g[_]=y.reverse())}const v=xo.triangulateShape(m,g);for(let _=0,x=g.length;_<x;_++){const y=g[_];m=m.concat(y)}for(let _=0,x=m.length;_<x;_++){const y=m[_];r.push(y.x,y.y,0),s.push(0,0,1),o.push(y.x,y.y)}for(let _=0,x=v.length;_<x;_++){const y=v[_],S=y[0]+f,A=y[1]+f,C=y[2]+f;i.push(S,A,C),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return FW(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new _m(i,e.curveSegments)}}function FW(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class wh extends Mt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new j,d=new j,m=[],g=[],v=[],_=[];for(let x=0;x<=i;x++){const y=[],S=x/i;let A=0;x==0&&o==0?A=.5/t:x==i&&l==Math.PI&&(A=-.5/t);for(let C=0;C<=t;C++){const b=C/t;f.x=-e*Math.cos(r+b*s)*Math.sin(o+S*a),f.y=e*Math.cos(o+S*a),f.z=e*Math.sin(r+b*s)*Math.sin(o+S*a),g.push(f.x,f.y,f.z),d.copy(f).normalize(),v.push(d.x,d.y,d.z),_.push(b+A,1-S),y.push(c++)}u.push(y)}for(let x=0;x<i;x++)for(let y=0;y<t;y++){const S=u[x][y+1],A=u[x][y],C=u[x+1][y],b=u[x+1][y+1];(x!==0||o>0)&&m.push(S,A,b),(x!==i-1||l<Math.PI)&&m.push(A,C,b)}this.setIndex(m),this.setAttribute("position",new ot(g,3)),this.setAttribute("normal",new ot(v,3)),this.setAttribute("uv",new ot(_,2))}static fromJSON(e){return new wh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class xm extends Sa{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new xm(e.radius,e.detail)}}class Sm extends Mt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new j,f=new j,d=new j;for(let m=0;m<=i;m++)for(let g=0;g<=r;g++){const v=g/r*s,_=m/i*Math.PI*2;f.x=(e+t*Math.cos(_))*Math.cos(v),f.y=(e+t*Math.cos(_))*Math.sin(v),f.z=t*Math.sin(_),a.push(f.x,f.y,f.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),d.subVectors(f,u).normalize(),l.push(d.x,d.y,d.z),c.push(g/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let g=1;g<=r;g++){const v=(r+1)*m+g-1,_=(r+1)*(m-1)+g-1,x=(r+1)*(m-1)+g,y=(r+1)*m+g;o.push(v,_,y),o.push(_,x,y)}this.setIndex(o),this.setAttribute("position",new ot(a,3)),this.setAttribute("normal",new ot(l,3)),this.setAttribute("uv",new ot(c,2))}static fromJSON(e){return new Sm(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class wm extends Mt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],f=new j,d=new j,m=new j,g=new j,v=new j,_=new j,x=new j;for(let S=0;S<=i;++S){const A=S/i*s*Math.PI*2;y(A,s,o,e,m),y(A+.01,s,o,e,g),_.subVectors(g,m),x.addVectors(g,m),v.crossVectors(_,x),x.crossVectors(v,_),v.normalize(),x.normalize();for(let C=0;C<=r;++C){const b=C/r*Math.PI*2,P=-t*Math.cos(b),E=t*Math.sin(b);f.x=m.x+(P*x.x+E*v.x),f.y=m.y+(P*x.y+E*v.y),f.z=m.z+(P*x.z+E*v.z),l.push(f.x,f.y,f.z),d.subVectors(f,m).normalize(),c.push(d.x,d.y,d.z),u.push(S/i),u.push(C/r)}}for(let S=1;S<=i;S++)for(let A=1;A<=r;A++){const C=(r+1)*(S-1)+(A-1),b=(r+1)*S+(A-1),P=(r+1)*S+A,E=(r+1)*(S-1)+A;a.push(C,b,E),a.push(b,P,E)}this.setIndex(a),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(c,3)),this.setAttribute("uv",new ot(u,2));function y(S,A,C,b,P){const E=Math.cos(S),R=Math.sin(S),B=C/A*S,O=Math.cos(B);P.x=b*(2+O)*.5*E,P.y=b*(2+O)*R*.5,P.z=b*Math.sin(B)*.5}}static fromJSON(e){return new wm(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Am extends Mt{constructor(e=new kC(new j(-1,-1,0),new j(-1,1,0),new j(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new j,l=new j,c=new Ne;let u=new j;const f=[],d=[],m=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new ot(f,3)),this.setAttribute("normal",new ot(d,3)),this.setAttribute("uv",new ot(m,2));function v(){for(let S=0;S<t;S++)_(S);_(s===!1?t:0),y(),x()}function _(S){u=e.getPointAt(S/t,u);const A=o.normals[S],C=o.binormals[S];for(let b=0;b<=r;b++){const P=b/r*Math.PI*2,E=Math.sin(P),R=-Math.cos(P);l.x=R*A.x+E*C.x,l.y=R*A.y+E*C.y,l.z=R*A.z+E*C.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,f.push(a.x,a.y,a.z)}}function x(){for(let S=1;S<=t;S++)for(let A=1;A<=r;A++){const C=(r+1)*(S-1)+(A-1),b=(r+1)*S+(A-1),P=(r+1)*S+A,E=(r+1)*(S-1)+A;g.push(C,b,E),g.push(b,P,E)}}function y(){for(let S=0;S<=t;S++)for(let A=0;A<=r;A++)c.x=S/t,c.y=A/r,m.push(c.x,c.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Am(new UC[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class NO extends Mt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new j,s=new j;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],d=f.start,m=f.count;for(let g=d,v=d+m;g<v;g+=3)for(let _=0;_<3;_++){const x=a.getX(g+_),y=a.getX(g+(_+1)%3);r.fromBufferAttribute(o,x),s.fromBufferAttribute(o,y),K3(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),K3(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new ot(t,3))}}}function K3(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var Q3=Object.freeze({__proto__:null,BoxGeometry:Vn,CapsuleGeometry:pm,CircleGeometry:mm,ConeGeometry:gm,CylinderGeometry:nu,DodecahedronGeometry:vm,EdgesGeometry:OO,ExtrudeGeometry:_h,IcosahedronGeometry:xh,LatheGeometry:yh,OctahedronGeometry:Sh,PlaneGeometry:Js,PolyhedronGeometry:Sa,RingGeometry:ym,ShapeGeometry:_m,SphereGeometry:wh,TetrahedronGeometry:xm,TorusGeometry:Sm,TorusKnotGeometry:wm,TubeGeometry:Am,WireframeGeometry:NO});class zO extends si{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Je(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class GO extends Cr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Xr extends si{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Je(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tl,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ks extends Xr{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ne(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Qn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Je(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Je(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Je(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Pl extends si{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Je(16777215),this.specular=new Je(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tl,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class HO extends si{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Je(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tl,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class NC extends si{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tl,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class VO extends si{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tl,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WO extends si{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Je(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tl,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jO extends Qi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ls(n,e,t){return zC(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Ac(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function zC(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function JO(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function fA(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function GC(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function UW(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],d=[];for(let m=0;m<c.times.length;++m){const g=c.times[m]*r;if(!(g<t||g>=i)){f.push(c.times[m]);for(let v=0;v<u;++v)d.push(c.values[m*u+v])}}f.length!==0&&(c.times=Ac(f,c.times.constructor),c.values=Ac(d,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function NW(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(x){return x.name===a.name&&x.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let d=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);const g=a.times.length-1;let v;if(s<=a.times[0]){const x=u,y=f-u;v=ls(a.values,x,y)}else if(s>=a.times[g]){const x=g*f+u,y=x+f-u;v=ls(a.values,x,y)}else{const x=a.createInterpolant(),y=u,S=f-u;x.evaluate(s),v=ls(x.resultBuffer,y,S)}l==="quaternion"&&new Li().fromArray(v).normalize().conjugate().toArray(v);const _=c.times.length;for(let x=0;x<_;++x){const y=x*m+d;if(l==="quaternion")Li.multiplyQuaternionsFlat(c.values,y,v,0,c.values,y);else{const S=m-d*2;for(let A=0;A<S;++A)c.values[y+A]-=v[A]}}}return n.blendMode=gC,n}var zW=Object.freeze({__proto__:null,arraySlice:ls,convertArray:Ac,isTypedArray:zC,getKeyframeOrder:JO,sortedArray:fA,flattenJSON:GC,subclip:UW,makeClipAdditive:NW});class Ah{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class XO extends Ah{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:_c,endingEnd:_c}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case xc:s=e,a=2*t-i;break;case Op:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case xc:o=e,l=2*i-t;break;case Op:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,m=this._weightNext,g=(i-t)/(r-t),v=g*g,_=v*g,x=-d*_+2*d*v-d*g,y=(1+d)*_+(-1.5-2*d)*v+(-.5+d)*g+1,S=(-1-m)*_+(1.5+m)*v+.5*g,A=m*_-m*v;for(let C=0;C!==a;++C)s[C]=x*o[u+C]+y*o[c+C]+S*o[l+C]+A*o[f+C];return s}}class HC extends Ah{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),f=1-u;for(let d=0;d!==a;++d)s[d]=o[c+d]*f+o[l+d]*u;return s}}class YO extends Ah{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Qs{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ac(t,this.TimeBufferType),this.values=Ac(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ac(e.times,Array),values:Ac(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new YO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new HC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new XO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Kf:t=this.InterpolantFactoryMethodDiscrete;break;case Vc:t=this.InterpolantFactoryMethodLinear;break;case mv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Kf;case this.InterpolantFactoryMethodLinear:return Vc;case this.InterpolantFactoryMethodSmooth:return mv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=ls(i,s,o),this.values=ls(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&zC(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=ls(this.times),t=ls(this.values),i=this.getValueSize(),r=this.getInterpolation()===mv,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,d=f-i,m=f+i;for(let g=0;g!==i;++g){const v=t[f+g];if(v!==t[d+g]||v!==t[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,d=o*i;for(let m=0;m!==i;++m)t[d+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=ls(e,0,o),this.values=ls(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=ls(this.times,0),t=ls(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Qs.prototype.TimeBufferType=Float32Array;Qs.prototype.ValueBufferType=Float32Array;Qs.prototype.DefaultInterpolation=Vc;class iu extends Qs{}iu.prototype.ValueTypeName="bool";iu.prototype.ValueBufferType=Array;iu.prototype.DefaultInterpolation=Kf;iu.prototype.InterpolantFactoryMethodLinear=void 0;iu.prototype.InterpolantFactoryMethodSmooth=void 0;class VC extends Qs{}VC.prototype.ValueTypeName="color";class qf extends Qs{}qf.prototype.ValueTypeName="number";class KO extends Ah{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Li.slerpFlat(s,0,o,c-a,o,c,l);return s}}class wl extends Qs{InterpolantFactoryMethodLinear(e){return new KO(this.times,this.values,this.getValueSize(),e)}}wl.prototype.ValueTypeName="quaternion";wl.prototype.DefaultInterpolation=Vc;wl.prototype.InterpolantFactoryMethodSmooth=void 0;class ru extends Qs{}ru.prototype.ValueTypeName="string";ru.prototype.ValueBufferType=Array;ru.prototype.DefaultInterpolation=Kf;ru.prototype.InterpolantFactoryMethodLinear=void 0;ru.prototype.InterpolantFactoryMethodSmooth=void 0;class $f extends Qs{}$f.prototype.ValueTypeName="vector";class eh{constructor(e,t=-1,i,r=Jy){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Vr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(HW(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Qs.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=JO(l);l=fA(l,1,u),c=fA(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new qf(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let d=r[f];d||(r[f]=d=[]),d.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,d,m,g,v){if(m.length!==0){const _=[],x=[];GC(m,_,x,g),_.length!==0&&v.push(new f(d,_,x))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const d=c[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const m={};let g;for(g=0;g<d.length;g++)if(d[g].morphTargets)for(let v=0;v<d[g].morphTargets.length;v++)m[d[g].morphTargets[v]]=-1;for(const v in m){const _=[],x=[];for(let y=0;y!==d[g].morphTargets.length;++y){const S=d[g];_.push(S.time),x.push(S.morphTarget===v?1:0)}r.push(new qf(".morphTargetInfluence["+v+"]",_,x))}l=m.length*o}else{const m=".bones["+t[f].name+"]";i($f,m+".position",d,"pos",r),i(wl,m+".quaternion",d,"rot",r),i($f,m+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function GW(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return qf;case"vector":case"vector2":case"vector3":case"vector4":return $f;case"color":return VC;case"quaternion":return wl;case"bool":case"boolean":return iu;case"string":return ru}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function HW(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=GW(n.type);if(n.times===void 0){const t=[],i=[];GC(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Jc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class WC{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,d=c.length;f<d;f+=2){const m=c[f],g=c[f+1];if(m.global&&(m.lastIndex=0),m.test(u))return g}return null}}}const QO=new WC;class Zi{constructor(e){this.manager=e!==void 0?e:QO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Vo={};class VW extends Error{constructor(e,t){super(e),this.response=t}}class Er extends Zi{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Jc.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Vo[e]!==void 0){Vo[e].push({onLoad:t,onProgress:i,onError:r});return}Vo[e]=[],Vo[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Vo[e],f=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=d?parseInt(d):0,g=m!==0;let v=0;const _=new ReadableStream({start(x){y();function y(){f.read().then(({done:S,value:A})=>{if(S)x.close();else{v+=A.byteLength;const C=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:m});for(let b=0,P=u.length;b<P;b++){const E=u[b];E.onProgress&&E.onProgress(C)}x.enqueue(A),y()}})}}});return new Response(_)}else throw new VW(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),d=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(d);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{Jc.add(e,c);const u=Vo[e];delete Vo[e];for(let f=0,d=u.length;f<d;f++){const m=u[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=Vo[e];if(u===void 0)throw this.manager.itemError(e),c;delete Vo[e];for(let f=0,d=u.length;f<d;f++){const m=u[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class WW extends Zi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Er(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=eh.parse(e[i]);t.push(r)}return t}}class jW extends Zi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new IC,l=new Er(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(d){const m=s.parse(d,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=gn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,d=e.length;f<d;++f)u(f);else l.load(e,function(f){const d=s.parse(f,!0);if(d.isCubemap){const m=d.mipmaps.length/d.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let v=0;v<d.mipmapCount;v++)o[g].mipmaps.push(d.mipmaps[g*d.mipmapCount+v]),o[g].format=d.format,o[g].width=d.width,o[g].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=gn),a.format=d.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class Wp extends Zi{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Jc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Up("img");function l(){u(),Jc.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class ZO extends Zi{constructor(e){super(e)}load(e,t,i,r){const s=new fm,o=new Wp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class qO extends Zi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Df,a=new Er(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Bi,o.wrapT=c.wrapT!==void 0?c.wrapT:Bi,o.magFilter=c.magFilter!==void 0?c.magFilter:gn,o.minFilter=c.minFilter!==void 0?c.minFilter:gn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Ao),c.mipmapCount===1&&(o.minFilter=gn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},i,r),o}}class $O extends Zi{constructor(e){super(e)}load(e,t,i,r){const s=new Cn,o=new Wp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Rl extends Ut{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Je(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class ek extends Rl{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ut.DefaultUp),this.updateMatrix(),this.groundColor=new Je(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Ux=new dt,Z3=new j,q3=new j;class jC{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ne(512,512),this.map=null,this.mapPass=null,this.matrix=new dt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ky,this._frameExtents=new Ne(1,1),this._viewportCount=1,this._viewports=[new tn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Z3.setFromMatrixPosition(e.matrixWorld),t.position.copy(Z3),q3.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(q3),t.updateMatrixWorld(),Ux.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ux),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Ux)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class JW extends jC{constructor(){super(new fi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Fp*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class JC extends Rl{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ut.DefaultUp),this.updateMatrix(),this.target=new Ut,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new JW}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const $3=new dt,yd=new j,Nx=new j;class XW extends jC{constructor(){super(new fi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ne(4,2),this._viewportCount=6,this._viewports=[new tn(2,1,1,1),new tn(0,1,1,1),new tn(3,1,1,1),new tn(1,1,1,1),new tn(3,0,1,1),new tn(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),yd.setFromMatrixPosition(e.matrixWorld),i.position.copy(yd),Nx.copy(i.position),Nx.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Nx),i.updateMatrixWorld(),r.makeTranslation(-yd.x,-yd.y,-yd.z),$3.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix($3)}}class XC extends Rl{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new XW}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class YW extends jC{constructor(){super(new gh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class YC extends Rl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ut.DefaultUp),this.updateMatrix(),this.target=new Ut,this.shadow=new YW}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class tk extends Rl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class nk extends Rl{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class ik{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new j)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class o1 extends Rl{constructor(e=new ik,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class a1 extends Zi{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Er(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=a1.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Je().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Je().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ne().fromArray(o.value);break;case"v3":r.uniforms[s].value=new j().fromArray(o.value);break;case"v4":r.uniforms[s].value=new tn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Xi().fromArray(o.value);break;case"m4":r.uniforms[s].value=new dt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ne().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ne().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:zO,SpriteMaterial:EC,RawShaderMaterial:GO,ShaderMaterial:Cr,PointsMaterial:n1,MeshPhysicalMaterial:Ks,MeshStandardMaterial:Xr,MeshPhongMaterial:Pl,MeshToonMaterial:HO,MeshNormalMaterial:NC,MeshLambertMaterial:VO,MeshDepthMaterial:Zy,MeshDistanceMaterial:qy,MeshBasicMaterial:nn,MeshMatcapMaterial:WO,LineDashedMaterial:jO,LineBasicMaterial:Qi,Material:si};return new t[e]}}class So{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class KC extends Mt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class rk extends Zi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Er(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,g){if(t[g]!==void 0)return t[g];const _=m.interleavedBuffers[g],x=s(m,_.buffer),y=gf(_.type,x),S=new hm(y,_.stride);return S.uuid=_.uuid,t[g]=S,S}function s(m,g){if(i[g]!==void 0)return i[g];const _=m.arrayBuffers[g],x=new Uint32Array(_).buffer;return i[g]=x,x}const o=e.isInstancedBufferGeometry?new KC:new Mt,a=e.data.index;if(a!==void 0){const m=gf(a.type,a.array);o.setIndex(new Kt(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let v;if(g.isInterleavedBufferAttribute){const _=r(e.data,g.data);v=new Sl(_,g.itemSize,g.offset,g.normalized)}else{const _=gf(g.type,g.array),x=g.isInstancedBufferAttribute?Wc:Kt;v=new x(_,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),g.updateRange!==void 0&&(v.updateRange.offset=g.updateRange.offset,v.updateRange.count=g.updateRange.count),o.setAttribute(m,v)}const c=e.data.morphAttributes;if(c)for(const m in c){const g=c[m],v=[];for(let _=0,x=g.length;_<x;_++){const y=g[_];let S;if(y.isInterleavedBufferAttribute){const A=r(e.data,y.data);S=new Sl(A,y.itemSize,y.offset,y.normalized)}else{const A=gf(y.type,y.array);S=new Kt(A,y.itemSize,y.normalized)}y.name!==void 0&&(S.name=y.name),v.push(S)}o.morphAttributes[m]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,g=f.length;m!==g;++m){const v=f[m];o.addGroup(v.start,v.count,v.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const m=new j;d.center!==void 0&&m.fromArray(d.center),o.boundingSphere=new xa(m,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class KW extends Zi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?So.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Er(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?So.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Er(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let f=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Ic().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new dm().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new rk;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in Q3?a=Q3[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new a1;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=eh.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:gf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new WC(t);s=new Wp(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],d=f.url;if(Array.isArray(d)){const m=[];for(let g=0,v=d.length;g<v;g++){const _=d[g],x=a(_);x!==null&&(x instanceof HTMLImageElement?m.push(x):m.push(new Df(x.data,x.width,x.height)))}r[f.uuid]=new wc(m)}else{const m=a(f.url);r[f.uuid]=new wc(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:gf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Wp(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,d=c.length;f<d;f++){const m=c[f],g=await s(m);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new Df(g.data,g.width,g.height)))}i[l.uuid]=new wc(u)}else{const u=await s(l.url);i[l.uuid]=new wc(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new fm,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Df:u=new Cn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,QW)),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],eP),u.wrapT=i(a.wrap[1],eP)),a.format!==void 0&&(u.format=a.format),a.type!==void 0&&(u.type=a.type),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,tP)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,tP)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,i,r,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const m=[];for(let g=0,v=d.length;g<v;g++){const _=d[g];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(i[_])}return m}return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),i[d]}}function c(d){return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),r[d]}let u,f;switch(e.type){case"Scene":o=new Np,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Je(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new e1(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new $y(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":o=new fi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new gh(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new tk(e.color,e.intensity);break;case"DirectionalLight":o=new YC(e.color,e.intensity);break;case"PointLight":o=new XC(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new nk(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new JC(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new ek(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new o1().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new bC(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new Ln(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const d=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new TC(u,f,d),o.instanceMatrix=new Wc(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new Wc(new Float32Array(g.array),g.itemSize));break;case"LOD":o=new RO;break;case"Line":o=new ha(a(e.geometry),l(e.material));break;case"LineLoop":o=new PC(a(e.geometry),l(e.material));break;case"LineSegments":o=new Xs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new RC(a(e.geometry),l(e.material));break;case"Sprite":o=new PO(l(e.material));break;case"Group":o=new $o;break;case"Bone":o=new t1;break;default:o=new Ut}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let m=0;m<d.length;m++)o.add(this.parseObject(d[m],t,i,r,s))}if(e.animations!==void 0){const d=e.animations;for(let m=0;m<d.length;m++){const g=d[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let m=0;m<d.length;m++){const g=d[m],v=o.getObjectByProperty("uuid",g.object);v!==void 0&&o.addLevel(v,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const QW={UVMapping:Wy,CubeReflectionMapping:ca,CubeRefractionMapping:_l,EquirectangularReflectionMapping:Xf,EquirectangularRefractionMapping:Dp,CubeUVReflectionMapping:mh},eP={RepeatWrapping:xl,ClampToEdgeWrapping:Bi,MirroredRepeatWrapping:Yf},tP={NearestFilter:Hn,NearestMipmapNearestFilter:Lp,NearestMipmapLinearFilter:Bf,LinearFilter:gn,LinearMipmapNearestFilter:jy,LinearMipmapLinearFilter:Ao};class sk extends Zi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Jc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Jc.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let w0;class QC{static getContext(){return w0===void 0&&(w0=new(window.AudioContext||window.webkitAudioContext)),w0}static setContext(e){w0=e}}class ZW extends Zi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Er(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);QC.getContext().decodeAudioData(l,function(u){t(u)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class qW extends o1{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new Je().set(e),s=new Je().set(t),o=new j(r.r,r.g,r.b),a=new j(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class $W extends o1{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new Je().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const nP=new dt,iP=new dt,Kl=new dt;class e7{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new fi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new fi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Kl.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Tc*t.fov*.5)/t.zoom;let a,l;iP.elements[12]=-r,nP.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Kl.elements[0]=2*t.near/(l-a),Kl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Kl),a=-o*t.aspect-s,l=o*t.aspect-s,Kl.elements[0]=2*t.near/(l-a),Kl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Kl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(iP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(nP)}}class ZC{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=rP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=rP();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function rP(){return(typeof performance>"u"?Date:performance).now()}const Ql=new j,sP=new Li,t7=new j,Zl=new j;class n7 extends Ut{constructor(){super(),this.type="AudioListener",this.context=QC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ZC}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ql,sP,t7),Zl.set(0,0,-1).applyQuaternion(sP),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ql.x,r),t.positionY.linearRampToValueAtTime(Ql.y,r),t.positionZ.linearRampToValueAtTime(Ql.z,r),t.forwardX.linearRampToValueAtTime(Zl.x,r),t.forwardY.linearRampToValueAtTime(Zl.y,r),t.forwardZ.linearRampToValueAtTime(Zl.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Ql.x,Ql.y,Ql.z),t.setOrientation(Zl.x,Zl.y,Zl.z,i.x,i.y,i.z)}}class ok extends Ut{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ql=new j,oP=new Li,i7=new j,$l=new j;class r7 extends ok{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ql,oP,i7),$l.set(0,0,1).applyQuaternion(oP);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ql.x,i),t.positionY.linearRampToValueAtTime(ql.y,i),t.positionZ.linearRampToValueAtTime(ql.z,i),t.orientationX.linearRampToValueAtTime($l.x,i),t.orientationY.linearRampToValueAtTime($l.y,i),t.orientationZ.linearRampToValueAtTime($l.z,i)}else t.setPosition(ql.x,ql.y,ql.z),t.setOrientation($l.x,$l.y,$l.z)}}class s7{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class ak{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Li.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Li.multiplyQuaternionsFlat(e,o,e,t,e,i),Li.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const qC="\\[\\]\\.:\\/",o7=new RegExp("["+qC+"]","g"),$C="[^"+qC+"]",a7="[^"+qC.replace("\\.","")+"]",l7=/((?:WC+[\/:])*)/.source.replace("WC",$C),c7=/(WCOD+)?/.source.replace("WCOD",a7),u7=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",$C),f7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",$C),h7=new RegExp("^"+l7+c7+u7+f7+"$"),d7=["material","materials","bones","map"];class p7{constructor(e,t,i){const r=i||Yt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Yt{constructor(e,t,i){this.path=t,this.parsedPath=i||Yt.parseTrackName(t),this.node=Yt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Yt.Composite(e,t,i):new Yt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(o7,"")}static parseTrackName(e){const t=h7.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);d7.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Yt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Yt.Composite=p7;Yt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Yt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Yt.prototype.GetterByBindingType=[Yt.prototype._getValue_direct,Yt.prototype._getValue_array,Yt.prototype._getValue_arrayElement,Yt.prototype._getValue_toArray];Yt.prototype.SetterByBindingTypeAndVersioning=[[Yt.prototype._setValue_direct,Yt.prototype._setValue_direct_setNeedsUpdate,Yt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Yt.prototype._setValue_array,Yt.prototype._setValue_array_setNeedsUpdate,Yt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Yt.prototype._setValue_arrayElement,Yt.prototype._setValue_arrayElement_setNeedsUpdate,Yt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Yt.prototype._setValue_fromArray,Yt.prototype._setValue_fromArray_setNeedsUpdate,Yt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class m7{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Vr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const d=arguments[u],m=d.uuid;let g=t[m];if(g===void 0){g=l++,t[m]=g,e.push(d);for(let v=0,_=o;v!==_;++v)s[v].push(new Yt(d,i[v],r[v]))}else if(g<c){a=e[g];const v=--c,_=e[v];t[_.uuid]=g,e[g]=_,t[m]=v,e[v]=d;for(let x=0,y=o;x!==y;++x){const S=s[x],A=S[v];let C=S[g];S[g]=A,C===void 0&&(C=new Yt(d,i[x],r[x])),S[v]=C}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const f=s++,d=e[f];t[d.uuid]=u,e[u]=d,t[c]=f,e[f]=l;for(let m=0,g=r;m!==g;++m){const v=i[m],_=v[f],x=v[u];v[u]=_,v[f]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=t[u];if(f!==void 0)if(delete t[u],f<s){const d=--s,m=e[d],g=--o,v=e[g];t[m.uuid]=f,e[f]=m,t[v.uuid]=d,e[d]=v,e.pop();for(let _=0,x=r;_!==x;++_){const y=i[_],S=y[d],A=y[g];y[f]=S,y[d]=A,y.pop()}}else{const d=--o,m=e[d];d>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let g=0,v=r;g!==v;++g){const _=i[g];_[f]=_[d],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let d=u,m=l.length;d!==m;++d){const g=l[d];f[d]=new Yt(g,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class g7{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:_c,endingEnd:_c};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=lO,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case gC:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case Jy:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===cO;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===aO){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=xc,r.endingEnd=xc):(e?r.endingStart=this.zeroSlopeAtStart?xc:_c:r.endingStart=Op,t?r.endingEnd=this.zeroSlopeAtEnd?xc:_c:r.endingEnd=Op)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const v7=new Float32Array(1);class y7 extends ya{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const d=r[f],m=d.name;let g=u[m];if(g!==void 0)++g.referenceCount,o[f]=g;else{if(g=o[f],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const v=t&&t._propertyBindings[f].binding.parsedPath;g=new ak(Yt.create(i,m,v),d.ValueTypeName,d.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[f]=g}a[f].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete f[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new HC(new Float32Array(2),new Float32Array(2),1,v7),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?eh.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Jy),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new g7(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?eh.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class eE{constructor(e){this.value=e}clone(){return new eE(this.value.clone===void 0?this.value:this.value.clone())}}let _7=0;class x7 extends ya{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_7++}),this.name="",this.usage=kp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class S7 extends hm{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class w7{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class tE{constructor(e,t,i=0,r=1/0){this.ray=new cm(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Rc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return hA(e,this,i,t),i.sort(aP),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)hA(e[r],this,i,t);return i.sort(aP),i}}function aP(n,e){return n.distance-e.distance}function hA(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)hA(r[s],e,t,!0)}}class A7{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Qn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class M7{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const lP=new Ne;class C7{constructor(e=new Ne(1/0,1/0),t=new Ne(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=lP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return lP.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const cP=new j,A0=new j;class E7{constructor(e=new j,t=new j){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){cP.subVectors(e,this.start),A0.subVectors(this.end,this.start);const i=A0.dot(A0);let s=A0.dot(cP)/i;return t&&(s=Qn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const uP=new j;class b7 extends Ut{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Mt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new ot(r,3));const s=new Qi({fog:!1,toneMapped:!1});this.cone=new Xs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),uP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(uP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Na=new j,M0=new dt,zx=new dt;class T7 extends Xs{constructor(e){const t=lk(e),i=new Mt,r=[],s=[],o=new Je(0,0,1),a=new Je(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new ot(r,3)),i.setAttribute("color",new ot(s,3));const l=new Qi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");zx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(M0.multiplyMatrices(zx,a.matrixWorld),Na.setFromMatrixPosition(M0),r.setXYZ(o,Na.x,Na.y,Na.z),M0.multiplyMatrices(zx,a.parent.matrixWorld),Na.setFromMatrixPosition(M0),r.setXYZ(o+1,Na.x,Na.y,Na.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function lk(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,lk(n.children[t]));return e}class P7 extends Ln{constructor(e,t,i){const r=new wh(t,4,2),s=new nn({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const R7=new j,fP=new Je,hP=new Je;class I7 extends Ut{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Sh(t);r.rotateY(Math.PI*.5),this.material=new nn({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Kt(o,3)),this.add(new Ln(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");fP.copy(this.light.color),hP.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?fP:hP;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(R7.setFromMatrixPosition(this.light.matrixWorld).negate())}}let B7=class extends Xs{constructor(e=10,t=10,i=4473924,r=8947848){i=new Je(i),r=new Je(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let d=0,m=0,g=-a;d<=t;d++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const v=d===s?i:r;v.toArray(c,m),m+=3,v.toArray(c,m),m+=3,v.toArray(c,m),m+=3,v.toArray(c,m),m+=3}const u=new Mt;u.setAttribute("position",new ot(l,3)),u.setAttribute("color",new ot(c,3));const f=new Qi({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}};class D7 extends Xs{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Je(s),o=new Je(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const d=f/t*(Math.PI*2),m=Math.sin(d)*e,g=Math.cos(d)*e;a.push(0,0,0),a.push(m,0,g);const v=f&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let f=0;f<i;f++){const d=f&1?s:o,m=e-e/i*f;for(let g=0;g<r;g++){let v=g/r*(Math.PI*2),_=Math.sin(v)*m,x=Math.cos(v)*m;a.push(_,0,x),l.push(d.r,d.g,d.b),v=(g+1)/r*(Math.PI*2),_=Math.sin(v)*m,x=Math.cos(v)*m,a.push(_,0,x),l.push(d.r,d.g,d.b)}}const c=new Mt;c.setAttribute("position",new ot(a,3)),c.setAttribute("color",new ot(l,3));const u=new Qi({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const dP=new j,C0=new j,pP=new j;class L7 extends Ut{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Mt;r.setAttribute("position",new ot([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Qi({fog:!1,toneMapped:!1});this.lightPlane=new ha(r,s),this.add(this.lightPlane),r=new Mt,r.setAttribute("position",new ot([0,0,0,0,0,1],3)),this.targetLine=new ha(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),dP.setFromMatrixPosition(this.light.matrixWorld),C0.setFromMatrixPosition(this.light.target.matrixWorld),pP.subVectors(C0,dP),this.lightPlane.lookAt(C0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(C0),this.targetLine.scale.z=pP.length()}}const E0=new j,Nn=new um;class O7 extends Xs{constructor(e){const t=new Mt,i=new Qi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,v){l(g),l(v)}function l(g){r.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(r.length/3-1)}t.setAttribute("position",new ot(r,3)),t.setAttribute("color",new ot(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Je(16755200),u=new Je(16711680),f=new Je(43775),d=new Je(16777215),m=new Je(3355443);this.setColors(c,u,f,d,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Nn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Xn("c",t,e,Nn,0,0,-1),Xn("t",t,e,Nn,0,0,1),Xn("n1",t,e,Nn,-i,-r,-1),Xn("n2",t,e,Nn,i,-r,-1),Xn("n3",t,e,Nn,-i,r,-1),Xn("n4",t,e,Nn,i,r,-1),Xn("f1",t,e,Nn,-i,-r,1),Xn("f2",t,e,Nn,i,-r,1),Xn("f3",t,e,Nn,-i,r,1),Xn("f4",t,e,Nn,i,r,1),Xn("u1",t,e,Nn,i*.7,r*1.1,-1),Xn("u2",t,e,Nn,-i*.7,r*1.1,-1),Xn("u3",t,e,Nn,0,r*2,-1),Xn("cf1",t,e,Nn,-i,0,1),Xn("cf2",t,e,Nn,i,0,1),Xn("cf3",t,e,Nn,0,-r,1),Xn("cf4",t,e,Nn,0,r,1),Xn("cn1",t,e,Nn,-i,0,-1),Xn("cn2",t,e,Nn,i,0,-1),Xn("cn3",t,e,Nn,0,-r,-1),Xn("cn4",t,e,Nn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Xn(n,e,t,i,r,s,o){E0.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],E0.x,E0.y,E0.z)}}const b0=new _a;class k7 extends Xs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Mt;s.setIndex(new Kt(i,1)),s.setAttribute("position",new Kt(r,3)),super(s,new Qi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&b0.setFromObject(this.object),b0.isEmpty())return;const t=b0.min,i=b0.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class F7 extends Xs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Mt;s.setIndex(new Kt(i,1)),s.setAttribute("position",new ot(r,3)),super(s,new Qi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class U7 extends ha{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Mt;o.setAttribute("position",new ot(s,3)),o.computeBoundingSphere(),super(o,new Qi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Mt;l.setAttribute("position",new ot(a,3)),l.computeBoundingSphere(),this.add(new Ln(l,new nn({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const mP=new j;let T0,Gx;class N7 extends Ut{constructor(e=new j(0,0,1),t=new j(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",T0===void 0&&(T0=new Mt,T0.setAttribute("position",new ot([0,0,0,0,1,0],3)),Gx=new nu(0,.5,1,5,1),Gx.translate(0,-.5,0)),this.position.copy(t),this.line=new ha(T0,new Qi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ln(Gx,new nn({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{mP.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(mP,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class z7 extends Xs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Mt;r.setAttribute("position",new ot(t,3)),r.setAttribute("color",new ot(i,3));const s=new Qi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Je,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ck{constructor(){this.type="ShapePath",this.color=new Je,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new zp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const y=[];for(let S=0,A=x.length;S<A;S++){const C=x[S],b=new Ic;b.curves=C.curves,y.push(b)}return y}function i(x,y){const S=y.length;let A=!1;for(let C=S-1,b=0;b<S;C=b++){let P=y[C],E=y[b],R=E.x-P.x,B=E.y-P.y;if(Math.abs(B)>Number.EPSILON){if(B<0&&(P=y[b],R=-R,E=y[C],B=-B),x.y<P.y||x.y>E.y)continue;if(x.y===P.y){if(x.x===P.x)return!0}else{const O=B*(x.x-P.x)-R*(x.y-P.y);if(O===0)return!0;if(O<0)continue;A=!A}}else{if(x.y!==P.y)continue;if(E.x<=x.x&&x.x<=P.x||P.x<=x.x&&x.x<=E.x)return!0}}return A}const r=xo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Ic,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const f=[],d=[];let m=[],g=0,v;d[g]=void 0,m[g]=[];for(let x=0,y=s.length;x<y;x++)a=s[x],v=a.getPoints(),o=r(v),o=e?!o:o,o?(!u&&d[g]&&g++,d[g]={s:new Ic,p:v},d[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:v[0]});if(!d[0])return t(s);if(d.length>1){let x=!1,y=0;for(let S=0,A=d.length;S<A;S++)f[S]=[];for(let S=0,A=d.length;S<A;S++){const C=m[S];for(let b=0;b<C.length;b++){const P=C[b];let E=!0;for(let R=0;R<d.length;R++)i(P.p,d[R].p)&&(S!==R&&y++,E?(E=!1,f[R].push(P)):x=!0);E&&f[S].push(P)}}y>0&&x===!1&&(m=f)}let _;for(let x=0,y=d.length;x<y;x++){l=d[x].s,c.push(l),_=m[x];for(let S=0,A=_.length;S<A;S++)l.holes.push(_[S].h)}return c}}const Xo=G7();function G7(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function H7(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Qn(n,-65504,65504),Xo.floatView[0]=n;const e=Xo.uint32View[0],t=e>>23&511;return Xo.baseTable[t]+((e&8388607)>>Xo.shiftTable[t])}function V7(n){const e=n>>10;return Xo.uint32View[0]=Xo.mantissaTable[Xo.offsetTable[e]+(n&1023)]+Xo.exponentTable[e],Xo.floatView[0]}var Gd=Object.freeze({__proto__:null,toHalfFloat:H7,fromHalfFloat:V7});function W7(){console.error("THREE.ImmediateRenderObject has been removed.")}class j7 extends ws{constructor(e,t,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,i),this.samples=4}}class J7 extends lm{constructor(e,t,i,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,i,r)}}class X7 extends Xy{constructor(e,t,i,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,i,r)}}class Y7 extends Vn{constructor(e,t,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,r,s,o)}}class K7 extends pm{constructor(e,t,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,r)}}class Q7 extends mm{constructor(e,t,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,r)}}class Z7 extends gm{constructor(e,t,i,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,r,s,o,a)}}class q7 extends nu{constructor(e,t,i,r,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,r,s,o,a,l)}}class $7 extends vm{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class ej extends _h{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class tj extends xh{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class nj extends yh{constructor(e,t,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,r)}}class ij extends Sh{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class rj extends Js{constructor(e,t,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,r)}}class sj extends Sa{constructor(e,t,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,r)}}class oj extends ym{constructor(e,t,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,r,s,o)}}class aj extends _m{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class lj extends wh{constructor(e,t,i,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,r,s,o,a)}}class cj extends xm{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class uj extends Sm{constructor(e,t,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,r,s)}}class fj extends wm{constructor(e,t,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,r,s,o)}}class hj extends Am{constructor(e,t,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:om}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=om);const nE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:pC,AddEquation:uc,AddOperation:GL,AdditiveAnimationBlendMode:gC,AdditiveBlending:Bw,AlphaFormat:ZL,AlwaysDepth:LL,AlwaysStencilFunc:dO,AmbientLight:tk,AmbientLightProbe:$W,AnimationClip:eh,AnimationLoader:WW,AnimationMixer:y7,AnimationObjectGroup:m7,AnimationUtils:zW,ArcCurve:IO,ArrayCamera:CO,ArrowHelper:N7,Audio:ok,AudioAnalyser:s7,AudioContext:QC,AudioListener:n7,AudioLoader:ZW,AxesHelper:z7,BackSide:ur,BasicDepthPacking:fO,BasicShadowMap:xL,Bone:t1,BooleanKeyframeTrack:iu,Box2:C7,Box3:_a,Box3Helper:F7,BoxBufferGeometry:Y7,BoxGeometry:Vn,BoxHelper:k7,BufferAttribute:Kt,BufferGeometry:Mt,BufferGeometryLoader:rk,ByteType:JL,Cache:Jc,Camera:um,CameraHelper:O7,CanvasTexture:uW,CapsuleBufferGeometry:K7,CapsuleGeometry:pm,CatmullRomCurve3:DC,CineonToneMapping:WL,CircleBufferGeometry:Q7,CircleGeometry:mm,ClampToEdgeWrapping:Bi,Clock:ZC,Color:Je,ColorKeyframeTrack:VC,ColorManagement:zn,CompressedArrayTexture:cW,CompressedTexture:IC,CompressedTextureLoader:jW,ConeBufferGeometry:Z7,ConeGeometry:gm,CubeCamera:yO,CubeReflectionMapping:ca,CubeRefractionMapping:_l,CubeTexture:fm,CubeTextureLoader:ZO,CubeUVReflectionMapping:mh,CubicBezierCurve:LC,CubicBezierCurve3:BO,CubicInterpolant:XO,CullFaceBack:Iw,CullFaceFront:_L,CullFaceFrontBack:gG,CullFaceNone:yL,Curve:Ys,CurvePath:LO,CustomBlending:SL,CustomToneMapping:jL,CylinderBufferGeometry:q7,CylinderGeometry:nu,Cylindrical:M7,Data3DTexture:Xy,DataArrayTexture:lm,DataTexture:Df,DataTexture2DArray:J7,DataTexture3D:X7,DataTextureLoader:qO,DataUtils:Gd,DecrementStencilOp:CG,DecrementWrapStencilOp:bG,DefaultLoadingManager:QO,DepthFormat:fl,DepthStencilFormat:Hc,DepthTexture:EO,DirectionalLight:YC,DirectionalLightHelper:L7,DiscreteInterpolant:YO,DodecahedronBufferGeometry:$7,DodecahedronGeometry:vm,DoubleSide:va,DstAlphaFactor:TL,DstColorFactor:RL,DynamicCopyUsage:HG,DynamicDrawUsage:kG,DynamicReadUsage:NG,EdgesGeometry:OO,EllipseCurve:i1,EqualDepth:kL,EqualStencilFunc:IG,EquirectangularReflectionMapping:Xf,EquirectangularRefractionMapping:Dp,Euler:tu,EventDispatcher:ya,ExtrudeBufferGeometry:ej,ExtrudeGeometry:_h,FileLoader:Er,Float16BufferAttribute:w6,Float32BufferAttribute:ot,Float64BufferAttribute:A6,FloatType:gs,Fog:e1,FogExp2:$y,FramebufferTexture:lW,FrontSide:wo,Frustum:Ky,GLBufferAttribute:w7,GLSL1:WG,GLSL3:rA,GreaterDepth:UL,GreaterEqualDepth:FL,GreaterEqualStencilFunc:OG,GreaterStencilFunc:DG,GridHelper:B7,Group:$o,HalfFloatType:Us,HemisphereLight:ek,HemisphereLightHelper:I7,HemisphereLightProbe:qW,IcosahedronBufferGeometry:tj,IcosahedronGeometry:xh,ImageBitmapLoader:sk,ImageLoader:Wp,ImageUtils:xC,ImmediateRenderObject:W7,IncrementStencilOp:MG,IncrementWrapStencilOp:EG,InstancedBufferAttribute:Wc,InstancedBufferGeometry:KC,InstancedInterleavedBuffer:S7,InstancedMesh:TC,Int16BufferAttribute:x6,Int32BufferAttribute:S6,Int8BufferAttribute:v6,IntType:YL,InterleavedBuffer:hm,InterleavedBufferAttribute:Sl,Interpolant:Ah,InterpolateDiscrete:Kf,InterpolateLinear:Vc,InterpolateSmooth:mv,InvertStencilOp:TG,KeepStencilOp:gv,KeyframeTrack:Qs,LOD:RO,LatheBufferGeometry:nj,LatheGeometry:yh,Layers:Rc,LessDepth:OL,LessEqualDepth:ry,LessEqualStencilFunc:BG,LessStencilFunc:RG,Light:Rl,LightProbe:o1,Line:ha,Line3:E7,LineBasicMaterial:Qi,LineCurve:r1,LineCurve3:DO,LineDashedMaterial:jO,LineLoop:PC,LineSegments:Xs,LinearEncoding:fa,LinearFilter:gn,LinearInterpolant:HC,LinearMipMapLinearFilter:xG,LinearMipMapNearestFilter:_G,LinearMipmapLinearFilter:Ao,LinearMipmapNearestFilter:jy,LinearSRGBColorSpace:Qf,LinearToneMapping:HL,Loader:Zi,LoaderUtils:So,LoadingManager:WC,LoopOnce:aO,LoopPingPong:cO,LoopRepeat:lO,LuminanceAlphaFormat:eO,LuminanceFormat:$L,MOUSE:pG,Material:si,MaterialLoader:a1,MathUtils:Sc,Matrix3:Xi,Matrix4:dt,MaxEquation:kw,Mesh:Ln,MeshBasicMaterial:nn,MeshDepthMaterial:Zy,MeshDistanceMaterial:qy,MeshLambertMaterial:VO,MeshMatcapMaterial:WO,MeshNormalMaterial:NC,MeshPhongMaterial:Pl,MeshPhysicalMaterial:Ks,MeshStandardMaterial:Xr,MeshToonMaterial:HO,MinEquation:Ow,MirroredRepeatWrapping:Yf,MixOperation:zL,MultiplyBlending:Lw,MultiplyOperation:am,NearestFilter:Hn,NearestMipMapLinearFilter:yG,NearestMipMapNearestFilter:vG,NearestMipmapLinearFilter:Bf,NearestMipmapNearestFilter:Lp,NeverDepth:DL,NeverStencilFunc:PG,NoBlending:na,NoColorSpace:SG,NoToneMapping:Vs,NormalAnimationBlendMode:Jy,NormalBlending:ia,NotEqualDepth:NL,NotEqualStencilFunc:LG,NumberKeyframeTrack:qf,Object3D:Ut,ObjectLoader:KW,ObjectSpaceNormalMap:hO,OctahedronBufferGeometry:ij,OctahedronGeometry:Sh,OneFactor:CL,OneMinusDstAlphaFactor:PL,OneMinusDstColorFactor:IL,OneMinusSrcAlphaFactor:dC,OneMinusSrcColorFactor:bL,OrthographicCamera:gh,PCFShadowMap:Vy,PCFSoftShadowMap:ip,PMREMGenerator:oA,Path:zp,PerspectiveCamera:fi,Plane:Ja,PlaneBufferGeometry:rj,PlaneGeometry:Js,PlaneHelper:U7,PointLight:XC,PointLightHelper:P7,Points:RC,PointsMaterial:n1,PolarGridHelper:D7,PolyhedronBufferGeometry:sj,PolyhedronGeometry:Sa,PositionalAudio:r7,PropertyBinding:Yt,PropertyMixer:ak,QuadraticBezierCurve:OC,QuadraticBezierCurve3:kC,Quaternion:Li,QuaternionKeyframeTrack:wl,QuaternionLinearInterpolant:KO,REVISION:om,RGBADepthPacking:yC,RGBAFormat:_r,RGBAIntegerFormat:sO,RGBA_ASTC_10x10_Format:eA,RGBA_ASTC_10x5_Format:Zw,RGBA_ASTC_10x6_Format:qw,RGBA_ASTC_10x8_Format:$w,RGBA_ASTC_12x10_Format:tA,RGBA_ASTC_12x12_Format:nA,RGBA_ASTC_4x4_Format:Vw,RGBA_ASTC_5x4_Format:Ww,RGBA_ASTC_5x5_Format:jw,RGBA_ASTC_6x5_Format:Jw,RGBA_ASTC_6x6_Format:Xw,RGBA_ASTC_8x5_Format:Yw,RGBA_ASTC_8x6_Format:Kw,RGBA_ASTC_8x8_Format:Qw,RGBA_BPTC_Format:iA,RGBA_ETC2_EAC_Format:Hw,RGBA_PVRTC_2BPPV1_Format:zw,RGBA_PVRTC_4BPPV1_Format:Nw,RGBA_S3TC_DXT1_Format:hv,RGBA_S3TC_DXT3_Format:dv,RGBA_S3TC_DXT5_Format:pv,RGBFormat:qL,RGB_ETC1_Format:oO,RGB_ETC2_Format:Gw,RGB_PVRTC_2BPPV1_Format:Uw,RGB_PVRTC_4BPPV1_Format:Fw,RGB_S3TC_DXT1_Format:fv,RGFormat:iO,RGIntegerFormat:rO,RawShaderMaterial:GO,Ray:cm,Raycaster:tE,RectAreaLight:nk,RedFormat:tO,RedIntegerFormat:nO,ReinhardToneMapping:VL,RepeatWrapping:xl,ReplaceStencilOp:AG,ReverseSubtractEquation:AL,RingBufferGeometry:oj,RingGeometry:ym,SRGBColorSpace:Ds,Scene:Np,ShaderChunk:Tt,ShaderLib:Os,ShaderMaterial:Cr,ShadowMaterial:zO,Shape:Ic,ShapeBufferGeometry:aj,ShapeGeometry:_m,ShapePath:ck,ShapeUtils:xo,ShortType:XL,Skeleton:dm,SkeletonHelper:T7,SkinnedMesh:bC,Source:wc,Sphere:xa,SphereBufferGeometry:lj,SphereGeometry:wh,Spherical:A7,SphericalHarmonics3:ik,SplineCurve:FC,SpotLight:JC,SpotLightHelper:b7,Sprite:PO,SpriteMaterial:EC,SrcAlphaFactor:hC,SrcAlphaSaturateFactor:BL,SrcColorFactor:EL,StaticCopyUsage:GG,StaticDrawUsage:kp,StaticReadUsage:UG,StereoCamera:e7,StreamCopyUsage:VG,StreamDrawUsage:FG,StreamReadUsage:zG,StringKeyframeTrack:ru,SubtractEquation:wL,SubtractiveBlending:Dw,TOUCH:mG,TangentSpaceNormalMap:Tl,TetrahedronBufferGeometry:cj,TetrahedronGeometry:xm,Texture:Cn,TextureLoader:$O,TorusBufferGeometry:uj,TorusGeometry:Sm,TorusKnotBufferGeometry:fj,TorusKnotGeometry:wm,Triangle:ds,TriangleFanDrawMode:sy,TriangleStripDrawMode:vC,TrianglesDrawMode:uO,TubeBufferGeometry:hj,TubeGeometry:Am,TwoPassDoubleSide:Nd,UVMapping:Wy,Uint16BufferAttribute:SC,Uint32BufferAttribute:wC,Uint8BufferAttribute:y6,Uint8ClampedBufferAttribute:_6,Uniform:eE,UniformsGroup:x7,UniformsLib:qe,UniformsUtils:Yy,UnsignedByteType:ua,UnsignedInt248Type:bc,UnsignedIntType:$a,UnsignedShort4444Type:KL,UnsignedShort5551Type:QL,UnsignedShortType:mC,VSMShadowMap:yc,Vector2:Ne,Vector3:j,Vector4:tn,VectorKeyframeTrack:$f,VideoTexture:aW,WebGL1Renderer:bO,WebGL3DRenderTarget:a6,WebGLArrayRenderTarget:o6,WebGLCubeRenderTarget:AC,WebGLMultipleRenderTargets:l6,WebGLMultisampleRenderTarget:j7,WebGLRenderTarget:ws,WebGLRenderer:CC,WebGLUtils:MO,WireframeGeometry:NO,WrapAroundEnding:Op,ZeroCurvatureEnding:_c,ZeroFactor:ML,ZeroSlopeEnding:xc,ZeroStencilOp:wG,_SRGBAFormat:oy,sRGBEncoding:pn},Symbol.toStringTag,{value:"Module"}));var uk={exports:{}},su={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */su.ConcurrentRoot=1;su.ContinuousEventPriority=4;su.DefaultEventPriority=16;su.DiscreteEventPriority=1;su.IdleEventPriority=536870912;su.LegacyRoot=0;uk.exports=su;var _f=uk.exports;function dj(n){let e;const t=new Set,i=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const d=e;e=u?f:Object.assign({},e,f),t.forEach(m=>m(e,d))}},r=()=>e,s=(c,u=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=u(e);function m(){const g=u(e);if(!f(d,g)){const v=d;c(d=g,v)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const pj=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),gP=pj?L.useEffect:L.useLayoutEffect;function fk(n){const e=typeof n=="function"?dj(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=L.useReducer(_=>_+1,0),o=e.getState(),a=L.useRef(o),l=L.useRef(i),c=L.useRef(r),u=L.useRef(!1),f=L.useRef();f.current===void 0&&(f.current=i(o));let d,m=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(d=i(o),m=!r(f.current,d)),gP(()=>{m&&(f.current=d),a.current=o,l.current=i,c.current=r,u.current=!1});const g=L.useRef(o);gP(()=>{const _=()=>{try{const y=e.getState(),S=l.current(y);c.current(f.current,S)||(a.current=y,f.current=S,s())}catch{u.current=!0,s()}},x=e.subscribe(_);return e.getState()!==g.current&&_(),x},[]);const v=m?d:f.current;return L.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var hk={exports:{}},dk={exports:{}},pk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(H,J){var Q=H.length;H.push(J);e:for(;0<Q;){var U=Q-1>>>1,V=H[U];if(0<r(V,J))H[U]=J,H[Q]=V,Q=U;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var J=H[0],Q=H.pop();if(Q!==J){H[0]=Q;e:for(var U=0,V=H.length,Z=V>>>1;U<Z;){var K=2*(U+1)-1,ne=H[K],z=K+1,ae=H[z];if(0>r(ne,Q))z<V&&0>r(ae,ne)?(H[U]=ae,H[z]=Q,U=z):(H[U]=ne,H[K]=Q,U=K);else if(z<V&&0>r(ae,Q))H[U]=ae,H[z]=Q,U=z;else break e}}return J}function r(H,J){var Q=H.sortIndex-J.sortIndex;return Q!==0?Q:H.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,m=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var J=t(c);J!==null;){if(J.callback===null)i(c);else if(J.startTime<=H)i(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(c)}}function A(H){if(v=!1,S(H),!g)if(t(l)!==null)g=!0,te(C);else{var J=t(c);J!==null&&oe(A,J.startTime-H)}}function C(H,J){g=!1,v&&(v=!1,x(E),E=-1),m=!0;var Q=d;try{for(S(J),f=t(l);f!==null&&(!(f.expirationTime>J)||H&&!O());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var V=U(f.expirationTime<=J);J=n.unstable_now(),typeof V=="function"?f.callback=V:f===t(l)&&i(l),S(J)}else i(l);f=t(l)}if(f!==null)var Z=!0;else{var K=t(c);K!==null&&oe(A,K.startTime-J),Z=!1}return Z}finally{f=null,d=Q,m=!1}}var b=!1,P=null,E=-1,R=5,B=-1;function O(){return!(n.unstable_now()-B<R)}function G(){if(P!==null){var H=n.unstable_now();B=H;var J=!0;try{J=P(!0,H)}finally{J?N():(b=!1,P=null)}}else b=!1}var N;if(typeof y=="function")N=function(){y(G)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,X=k.port2;k.port1.onmessage=G,N=function(){X.postMessage(null)}}else N=function(){_(G,0)};function te(H){P=H,b||(b=!0,N())}function oe(H,J){E=_(function(){H(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,te(C))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(H){switch(d){case 1:case 2:case 3:var J=3;break;default:J=d}var Q=d;d=J;try{return H()}finally{d=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=d;d=H;try{return J()}finally{d=Q}},n.unstable_scheduleCallback=function(H,J,Q){var U=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?U+Q:U):Q=U,H){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Q+V,H={id:u++,callback:J,priorityLevel:H,startTime:Q,expirationTime:V,sortIndex:-1},Q>U?(H.sortIndex=Q,e(c,H),t(l)===null&&H===t(c)&&(v?(x(E),E=-1):v=!0,oe(A,Q-U))):(H.sortIndex=V,e(l,H),g||m||(g=!0,te(C))),H},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(H){var J=d;return function(){var Q=d;d=J;try{return H.apply(this,arguments)}finally{d=Q}}}})(pk);dk.exports=pk;var dA=dk.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mj=function(e){var t={},i=L,r=dA,s=Object.assign;function o(h){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+h,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),C=Symbol.iterator;function b(h){return h===null||typeof h!="object"?null:(h=C&&h[C]||h["@@iterator"],typeof h=="function"?h:null)}function P(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case f:return"StrictMode";case _:return"Suspense";case x:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case g:return(h.displayName||"Context")+".Consumer";case m:return(h._context.displayName||"Context")+".Provider";case v:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case y:return p=h.displayName||null,p!==null?p:P(h.type)||"Memo";case S:p=h._payload,h=h._init;try{return P(h(p))}catch{}}return null}function E(h){var p=h.type;switch(h.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=p.render,h=h.displayName||h.name||"",p.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(p);case 8:return p===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function R(h){var p=h,w=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,p.flags&4098&&(w=p.return),h=p.return;while(h)}return p.tag===3?w:null}function B(h){if(R(h)!==h)throw Error(o(188))}function O(h){var p=h.alternate;if(!p){if(p=R(h),p===null)throw Error(o(188));return p!==h?null:h}for(var w=h,M=p;;){var T=w.return;if(T===null)break;var I=T.alternate;if(I===null){if(M=T.return,M!==null){w=M;continue}break}if(T.child===I.child){for(I=T.child;I;){if(I===w)return B(T),h;if(I===M)return B(T),p;I=I.sibling}throw Error(o(188))}if(w.return!==M.return)w=T,M=I;else{for(var ee=!1,fe=T.child;fe;){if(fe===w){ee=!0,w=T,M=I;break}if(fe===M){ee=!0,M=T,w=I;break}fe=fe.sibling}if(!ee){for(fe=I.child;fe;){if(fe===w){ee=!0,w=I,M=T;break}if(fe===M){ee=!0,M=I,w=T;break}fe=fe.sibling}if(!ee)throw Error(o(189))}}if(w.alternate!==M)throw Error(o(190))}if(w.tag!==3)throw Error(o(188));return w.stateNode.current===w?h:p}function G(h){return h=O(h),h!==null?N(h):null}function N(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var p=N(h);if(p!==null)return p;h=h.sibling}return null}function k(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var p=k(h);if(p!==null)return p}h=h.sibling}return null}var X=Array.isArray,te=e.getPublicInstance,oe=e.getRootHostContext,H=e.getChildHostContext,J=e.prepareForCommit,Q=e.resetAfterCommit,U=e.createInstance,V=e.appendInitialChild,Z=e.finalizeInitialChildren,K=e.prepareUpdate,ne=e.shouldSetTextContent,z=e.createTextInstance,ae=e.scheduleTimeout,ie=e.cancelTimeout,ye=e.noTimeout,re=e.isPrimaryRenderer,he=e.supportsMutation,q=e.supportsPersistence,ce=e.supportsHydration,Ce=e.getInstanceFromNode,ge=e.preparePortalMount,Ae=e.getCurrentEventPriority,ke=e.detachDeletedInstance,ve=e.supportsMicrotasks,De=e.scheduleMicrotask,Le=e.supportsTestSelectors,we=e.findFiberRoot,F=e.getBoundingRect,D=e.getTextContent,$=e.isHiddenSubtree,le=e.matchAccessibilityRole,Se=e.setFocusIfFocusable,Te=e.setupIntersectionObserver,Oe=e.appendChild,Be=e.appendChildToContainer,Me=e.commitTextUpdate,Xe=e.commitMount,Ie=e.commitUpdate,Ve=e.insertBefore,He=e.insertInContainerBefore,Fe=e.removeChild,Ze=e.removeChildFromContainer,lt=e.resetTextContent,yt=e.hideInstance,se=e.hideTextInstance,xe=e.unhideInstance,ze=e.unhideTextInstance,Ye=e.clearContainer,nt=e.cloneInstance,xt=e.createContainerChildSet,Nt=e.appendChildToContainerChildSet,jt=e.finalizeContainerChildren,zt=e.replaceContainerChildren,Gt=e.cloneHiddenInstance,Ht=e.cloneHiddenTextInstance,Pt=e.canHydrateInstance,vi=e.canHydrateTextInstance,oi=e.canHydrateSuspenseInstance,Vt=e.isSuspenseInstancePending,yn=e.isSuspenseInstanceFallback,Y=e.registerSuspenseInstanceRetry,pe=e.getNextHydratableSibling,me=e.getFirstHydratableChild,ue=e.getFirstHydratableChildWithinContainer,be=e.getFirstHydratableChildWithinSuspenseInstance,tt=e.hydrateInstance,ut=e.hydrateTextInstance,gt=e.hydrateSuspenseInstance,bt=e.getNextHydratableInstanceAfterSuspenseInstance,Rt=e.commitHydratedContainer,It=e.commitHydratedSuspenseInstance,kt=e.clearSuspenseBoundary,_n=e.clearSuspenseBoundaryFromContainer,Zn=e.shouldDeleteUnhydratedTailInstances,qi=e.didNotMatchHydratedContainerTextInstance,br=e.didNotMatchHydratedTextInstance,Ke;function vt(h){if(Ke===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);Ke=p&&p[1]||""}return`
`+Ke+h}var bo=!1;function cn(h,p){if(!h||bo)return"";bo=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(je){var M=je}Reflect.construct(h,[],p)}else{try{p.call()}catch(je){M=je}h.call(p.prototype)}else{try{throw Error()}catch(je){M=je}h()}}catch(je){if(je&&M&&typeof je.stack=="string"){for(var T=je.stack.split(`
`),I=M.stack.split(`
`),ee=T.length-1,fe=I.length-1;1<=ee&&0<=fe&&T[ee]!==I[fe];)fe--;for(;1<=ee&&0<=fe;ee--,fe--)if(T[ee]!==I[fe]){if(ee!==1||fe!==1)do if(ee--,fe--,0>fe||T[ee]!==I[fe]){var Pe=`
`+T[ee].replace(" at new "," at ");return h.displayName&&Pe.includes("<anonymous>")&&(Pe=Pe.replace("<anonymous>",h.displayName)),Pe}while(1<=ee&&0<=fe);break}}}finally{bo=!1,Error.prepareStackTrace=w}return(h=h?h.displayName||h.name:"")?vt(h):""}var Qr=Object.prototype.hasOwnProperty,Zs=[],bi=-1;function Ti(h){return{current:h}}function St(h){0>bi||(h.current=Zs[bi],Zs[bi]=null,bi--)}function Dt(h,p){bi++,Zs[bi]=h.current,h.current=p}var $i={},Xt=Ti($i),Wn=Ti(!1),er=$i;function Tr(h,p){var w=h.type.contextTypes;if(!w)return $i;var M=h.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===p)return M.__reactInternalMemoizedMaskedChildContext;var T={},I;for(I in w)T[I]=p[I];return M&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=p,h.__reactInternalMemoizedMaskedChildContext=T),T}function jn(h){return h=h.childContextTypes,h!=null}function wa(){St(Wn),St(Xt)}function lu(h,p,w){if(Xt.current!==$i)throw Error(o(168));Dt(Xt,p),Dt(Wn,w)}function cu(h,p,w){var M=h.stateNode;if(p=p.childContextTypes,typeof M.getChildContext!="function")return w;M=M.getChildContext();for(var T in M)if(!(T in p))throw Error(o(108,E(h)||"Unknown",T));return s({},w,M)}function qs(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||$i,er=Xt.current,Dt(Xt,h),Dt(Wn,Wn.current),!0}function Fm(h,p,w){var M=h.stateNode;if(!M)throw Error(o(169));w?(h=cu(h,p,er),M.__reactInternalMemoizedMergedChildContext=h,St(Wn),St(Xt),Dt(Xt,h)):St(Wn),Dt(Wn,w)}var ki=Math.clz32?Math.clz32:Um,uu=Math.log,Bl=Math.LN2;function Um(h){return h>>>=0,h===0?32:31-(uu(h)/Bl|0)|0}var To=64,Po=4194304;function Ro(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Dl(h,p){var w=h.pendingLanes;if(w===0)return 0;var M=0,T=h.suspendedLanes,I=h.pingedLanes,ee=w&268435455;if(ee!==0){var fe=ee&~T;fe!==0?M=Ro(fe):(I&=ee,I!==0&&(M=Ro(I)))}else ee=w&~T,ee!==0?M=Ro(ee):I!==0&&(M=Ro(I));if(M===0)return 0;if(p!==0&&p!==M&&!(p&T)&&(T=M&-M,I=p&-p,T>=I||T===16&&(I&4194240)!==0))return p;if(M&4&&(M|=w&16),p=h.entangledLanes,p!==0)for(h=h.entanglements,p&=M;0<p;)w=31-ki(p),T=1<<w,M|=h[w],p&=~T;return M}function Nm(h,p){switch(h){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ph(h,p){for(var w=h.suspendedLanes,M=h.pingedLanes,T=h.expirationTimes,I=h.pendingLanes;0<I;){var ee=31-ki(I),fe=1<<ee,Pe=T[ee];Pe===-1?(!(fe&w)||fe&M)&&(T[ee]=Nm(fe,p)):Pe<=p&&(h.expiredLanes|=fe),I&=~fe}}function Io(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function fu(h){for(var p=[],w=0;31>w;w++)p.push(h);return p}function $s(h,p,w){h.pendingLanes|=p,p!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,p=31-ki(p),h[p]=w}function Aa(h,p){var w=h.pendingLanes&~p;h.pendingLanes=p,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=p,h.mutableReadLanes&=p,h.entangledLanes&=p,p=h.entanglements;var M=h.eventTimes;for(h=h.expirationTimes;0<w;){var T=31-ki(w),I=1<<T;p[T]=0,M[T]=-1,h[T]=-1,w&=~I}}function eo(h,p){var w=h.entangledLanes|=p;for(h=h.entanglements;w;){var M=31-ki(w),T=1<<M;T&p|h[M]&p&&(h[M]|=p),w&=~T}}var Ft=0;function Rh(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var Bo=r.unstable_scheduleCallback,hu=r.unstable_cancelCallback,Ih=r.unstable_shouldYield,zm=r.unstable_requestPaint,En=r.unstable_now,Ma=r.unstable_ImmediatePriority,Gm=r.unstable_UserBlockingPriority,tr=r.unstable_NormalPriority,Bh=r.unstable_IdlePriority,Ca=null,Pr=null;function Dh(h){if(Pr&&typeof Pr.onCommitFiberRoot=="function")try{Pr.onCommitFiberRoot(Ca,h,void 0,(h.current.flags&128)===128)}catch{}}function du(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var Rr=typeof Object.is=="function"?Object.is:du,nr=null,to=!1,Zr=!1;function Lh(h){nr===null?nr=[h]:nr.push(h)}function Oh(h){to=!0,Lh(h)}function dr(){if(!Zr&&nr!==null){Zr=!0;var h=0,p=Ft;try{var w=nr;for(Ft=1;h<w.length;h++){var M=w[h];do M=M(!0);while(M!==null)}nr=null,to=!1}catch(T){throw nr!==null&&(nr=nr.slice(h+1)),Bo(Ma,dr),T}finally{Ft=p,Zr=!1}}return null}var Ll=a.ReactCurrentBatchConfig;function Ol(h,p){if(Rr(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var w=Object.keys(h),M=Object.keys(p);if(w.length!==M.length)return!1;for(M=0;M<w.length;M++){var T=w[M];if(!Qr.call(p,T)||!Rr(h[T],p[T]))return!1}return!0}function kl(h){switch(h.tag){case 5:return vt(h.type);case 16:return vt("Lazy");case 13:return vt("Suspense");case 19:return vt("SuspenseList");case 0:case 2:case 15:return h=cn(h.type,!1),h;case 11:return h=cn(h.type.render,!1),h;case 1:return h=cn(h.type,!0),h;default:return""}}function Fi(h,p){if(h&&h.defaultProps){p=s({},p),h=h.defaultProps;for(var w in h)p[w]===void 0&&(p[w]=h[w]);return p}return p}var yi=Ti(null),pu=null,As=null,Ea=null;function mu(){Ea=As=pu=null}function Hm(h,p,w){re?(Dt(yi,p._currentValue),p._currentValue=w):(Dt(yi,p._currentValue2),p._currentValue2=w)}function no(h){var p=yi.current;St(yi),re?h._currentValue=p:h._currentValue2=p}function qn(h,p,w){for(;h!==null;){var M=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,M!==null&&(M.childLanes|=p)):M!==null&&(M.childLanes&p)!==p&&(M.childLanes|=p),h===w)break;h=h.return}}function _i(h,p){pu=h,Ea=As=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&p&&(Dr=!0),h.firstContext=null)}function un(h){var p=re?h._currentValue:h._currentValue2;if(Ea!==h)if(h={context:h,memoizedValue:p,next:null},As===null){if(pu===null)throw Error(o(308));As=h,pu.dependencies={lanes:0,firstContext:h}}else As=As.next=h;return p}var ai=null,Ms=!1;function H1(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sb(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Do(h,p){return{eventTime:h,lane:p,tag:0,payload:null,callback:null,next:null}}function ba(h,p){var w=h.updateQueue;w!==null&&(w=w.shared,$n!==null&&h.mode&1&&!(Lt&2)?(h=w.interleaved,h===null?(p.next=p,ai===null?ai=[w]:ai.push(w)):(p.next=h.next,h.next=p),w.interleaved=p):(h=w.pending,h===null?p.next=p:(p.next=h.next,h.next=p),w.pending=p))}function Vm(h,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var M=p.lanes;M&=h.pendingLanes,w|=M,p.lanes=w,eo(h,w)}}function ob(h,p){var w=h.updateQueue,M=h.alternate;if(M!==null&&(M=M.updateQueue,w===M)){var T=null,I=null;if(w=w.firstBaseUpdate,w!==null){do{var ee={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};I===null?T=I=ee:I=I.next=ee,w=w.next}while(w!==null);I===null?T=I=p:I=I.next=p}else T=I=p;w={baseState:M.baseState,firstBaseUpdate:T,lastBaseUpdate:I,shared:M.shared,effects:M.effects},h.updateQueue=w;return}h=w.lastBaseUpdate,h===null?w.firstBaseUpdate=p:h.next=p,w.lastBaseUpdate=p}function Wm(h,p,w,M){var T=h.updateQueue;Ms=!1;var I=T.firstBaseUpdate,ee=T.lastBaseUpdate,fe=T.shared.pending;if(fe!==null){T.shared.pending=null;var Pe=fe,je=Pe.next;Pe.next=null,ee===null?I=je:ee.next=je,ee=Pe;var rt=h.alternate;rt!==null&&(rt=rt.updateQueue,fe=rt.lastBaseUpdate,fe!==ee&&(fe===null?rt.firstBaseUpdate=je:fe.next=je,rt.lastBaseUpdate=Pe))}if(I!==null){var Ct=T.baseState;ee=0,rt=je=Pe=null,fe=I;do{var ft=fe.lane,fn=fe.eventTime;if((M&ft)===ft){rt!==null&&(rt=rt.next={eventTime:fn,lane:0,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null});e:{var ct=h,Gi=fe;switch(ft=p,fn=w,Gi.tag){case 1:if(ct=Gi.payload,typeof ct=="function"){Ct=ct.call(fn,Ct,ft);break e}Ct=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=Gi.payload,ft=typeof ct=="function"?ct.call(fn,Ct,ft):ct,ft==null)break e;Ct=s({},Ct,ft);break e;case 2:Ms=!0}}fe.callback!==null&&fe.lane!==0&&(h.flags|=64,ft=T.effects,ft===null?T.effects=[fe]:ft.push(fe))}else fn={eventTime:fn,lane:ft,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},rt===null?(je=rt=fn,Pe=Ct):rt=rt.next=fn,ee|=ft;if(fe=fe.next,fe===null){if(fe=T.shared.pending,fe===null)break;ft=fe,fe=ft.next,ft.next=null,T.lastBaseUpdate=ft,T.shared.pending=null}}while(1);if(rt===null&&(Pe=Ct),T.baseState=Pe,T.firstBaseUpdate=je,T.lastBaseUpdate=rt,p=T.shared.interleaved,p!==null){T=p;do ee|=T.lane,T=T.next;while(T!==p)}else I===null&&(T.shared.lanes=0);Mu|=ee,h.lanes=ee,h.memoizedState=Ct}}function ab(h,p,w){if(h=p.effects,p.effects=null,h!==null)for(p=0;p<h.length;p++){var M=h[p],T=M.callback;if(T!==null){if(M.callback=null,M=w,typeof T!="function")throw Error(o(191,T));T.call(M)}}}var lb=new i.Component().refs;function V1(h,p,w,M){p=h.memoizedState,w=w(M,p),w=w==null?p:s({},p,w),h.memoizedState=w,h.lanes===0&&(h.updateQueue.baseState=w)}var jm={isMounted:function(h){return(h=h._reactInternals)?R(h)===h:!1},enqueueSetState:function(h,p,w){h=h._reactInternals;var M=rr(),T=Ra(h),I=Do(M,T);I.payload=p,w!=null&&(I.callback=w),ba(h,I),p=ns(h,T,M),p!==null&&Vm(p,h,T)},enqueueReplaceState:function(h,p,w){h=h._reactInternals;var M=rr(),T=Ra(h),I=Do(M,T);I.tag=1,I.payload=p,w!=null&&(I.callback=w),ba(h,I),p=ns(h,T,M),p!==null&&Vm(p,h,T)},enqueueForceUpdate:function(h,p){h=h._reactInternals;var w=rr(),M=Ra(h),T=Do(w,M);T.tag=2,p!=null&&(T.callback=p),ba(h,T),p=ns(h,M,w),p!==null&&Vm(p,h,M)}};function cb(h,p,w,M,T,I,ee){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(M,I,ee):p.prototype&&p.prototype.isPureReactComponent?!Ol(w,M)||!Ol(T,I):!0}function ub(h,p,w){var M=!1,T=$i,I=p.contextType;return typeof I=="object"&&I!==null?I=un(I):(T=jn(p)?er:Xt.current,M=p.contextTypes,I=(M=M!=null)?Tr(h,T):$i),p=new p(w,I),h.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=jm,h.stateNode=p,p._reactInternals=h,M&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=T,h.__reactInternalMemoizedMaskedChildContext=I),p}function fb(h,p,w,M){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,M),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,M),p.state!==h&&jm.enqueueReplaceState(p,p.state,null)}function W1(h,p,w,M){var T=h.stateNode;T.props=w,T.state=h.memoizedState,T.refs=lb,H1(h);var I=p.contextType;typeof I=="object"&&I!==null?T.context=un(I):(I=jn(p)?er:Xt.current,T.context=Tr(h,I)),T.state=h.memoizedState,I=p.getDerivedStateFromProps,typeof I=="function"&&(V1(h,p,I,w),T.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(p=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),p!==T.state&&jm.enqueueReplaceState(T,T.state,null),Wm(h,w,T,M),T.state=h.memoizedState),typeof T.componentDidMount=="function"&&(h.flags|=4194308)}var gu=[],vu=0,Jm=null,Xm=0,qr=[],$r=0,Fl=null,Lo=1,Oo="";function Ul(h,p){gu[vu++]=Xm,gu[vu++]=Jm,Jm=h,Xm=p}function hb(h,p,w){qr[$r++]=Lo,qr[$r++]=Oo,qr[$r++]=Fl,Fl=h;var M=Lo;h=Oo;var T=32-ki(M)-1;M&=~(1<<T),w+=1;var I=32-ki(p)+T;if(30<I){var ee=T-T%5;I=(M&(1<<ee)-1).toString(32),M>>=ee,T-=ee,Lo=1<<32-ki(p)+T|w<<T|M,Oo=I+h}else Lo=1<<I|w<<T|M,Oo=h}function j1(h){h.return!==null&&(Ul(h,1),hb(h,1,0))}function J1(h){for(;h===Jm;)Jm=gu[--vu],gu[vu]=null,Xm=gu[--vu],gu[vu]=null;for(;h===Fl;)Fl=qr[--$r],qr[$r]=null,Oo=qr[--$r],qr[$r]=null,Lo=qr[--$r],qr[$r]=null}var Ir=null,Br=null,bn=!1,kh=!1,Cs=null;function db(h,p){var w=is(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=h,p=h.deletions,p===null?(h.deletions=[w],h.flags|=16):p.push(w)}function pb(h,p){switch(h.tag){case 5:return p=Pt(p,h.type,h.pendingProps),p!==null?(h.stateNode=p,Ir=h,Br=me(p),!0):!1;case 6:return p=vi(p,h.pendingProps),p!==null?(h.stateNode=p,Ir=h,Br=null,!0):!1;case 13:if(p=oi(p),p!==null){var w=Fl!==null?{id:Lo,overflow:Oo}:null;return h.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=is(18,null,null,0),w.stateNode=p,w.return=h,h.child=w,Ir=h,Br=null,!0}return!1;default:return!1}}function X1(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Y1(h){if(bn){var p=Br;if(p){var w=p;if(!pb(h,p)){if(X1(h))throw Error(o(418));p=pe(w);var M=Ir;p&&pb(h,p)?db(M,w):(h.flags=h.flags&-4097|2,bn=!1,Ir=h)}}else{if(X1(h))throw Error(o(418));h.flags=h.flags&-4097|2,bn=!1,Ir=h}}}function mb(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Ir=h}function Fh(h){if(!ce||h!==Ir)return!1;if(!bn)return mb(h),bn=!0,!1;if(h.tag!==3&&(h.tag!==5||Zn(h.type)&&!ne(h.type,h.memoizedProps))){var p=Br;if(p){if(X1(h)){for(h=Br;h;)h=pe(h);throw Error(o(418))}for(;p;)db(h,p),p=pe(p)}}if(mb(h),h.tag===13){if(!ce)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));Br=bt(h)}else Br=Ir?pe(h.stateNode):null;return!0}function yu(){ce&&(Br=Ir=null,kh=bn=!1)}function K1(h){Cs===null?Cs=[h]:Cs.push(h)}function Uh(h,p,w){if(h=w.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(o(309));var M=w.stateNode}if(!M)throw Error(o(147,h));var T=M,I=""+h;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===I?p.ref:(p=function(ee){var fe=T.refs;fe===lb&&(fe=T.refs={}),ee===null?delete fe[I]:fe[I]=ee},p._stringRef=I,p)}if(typeof h!="string")throw Error(o(284));if(!w._owner)throw Error(o(290,h))}return h}function Ym(h,p){throw h=Object.prototype.toString.call(p),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h))}function gb(h){var p=h._init;return p(h._payload)}function vb(h){function p(_e,de){if(h){var Ee=_e.deletions;Ee===null?(_e.deletions=[de],_e.flags|=16):Ee.push(de)}}function w(_e,de){if(!h)return null;for(;de!==null;)p(_e,de),de=de.sibling;return null}function M(_e,de){for(_e=new Map;de!==null;)de.key!==null?_e.set(de.key,de):_e.set(de.index,de),de=de.sibling;return _e}function T(_e,de){return _e=Ba(_e,de),_e.index=0,_e.sibling=null,_e}function I(_e,de,Ee){return _e.index=Ee,h?(Ee=_e.alternate,Ee!==null?(Ee=Ee.index,Ee<de?(_e.flags|=2,de):Ee):(_e.flags|=2,de)):(_e.flags|=1048576,de)}function ee(_e){return h&&_e.alternate===null&&(_e.flags|=2),_e}function fe(_e,de,Ee,et){return de===null||de.tag!==6?(de=B_(Ee,_e.mode,et),de.return=_e,de):(de=T(de,Ee),de.return=_e,de)}function Pe(_e,de,Ee,et){var at=Ee.type;return at===u?rt(_e,de,Ee.props.children,et,Ee.key):de!==null&&(de.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&gb(at)===de.type)?(et=T(de,Ee.props),et.ref=Uh(_e,de,Ee),et.return=_e,et):(et=Cg(Ee.type,Ee.key,Ee.props,null,_e.mode,et),et.ref=Uh(_e,de,Ee),et.return=_e,et)}function je(_e,de,Ee,et){return de===null||de.tag!==4||de.stateNode.containerInfo!==Ee.containerInfo||de.stateNode.implementation!==Ee.implementation?(de=D_(Ee,_e.mode,et),de.return=_e,de):(de=T(de,Ee.children||[]),de.return=_e,de)}function rt(_e,de,Ee,et,at){return de===null||de.tag!==7?(de=jl(Ee,_e.mode,et,at),de.return=_e,de):(de=T(de,Ee),de.return=_e,de)}function Ct(_e,de,Ee){if(typeof de=="string"&&de!==""||typeof de=="number")return de=B_(""+de,_e.mode,Ee),de.return=_e,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case l:return Ee=Cg(de.type,de.key,de.props,null,_e.mode,Ee),Ee.ref=Uh(_e,null,de),Ee.return=_e,Ee;case c:return de=D_(de,_e.mode,Ee),de.return=_e,de;case S:var et=de._init;return Ct(_e,et(de._payload),Ee)}if(X(de)||b(de))return de=jl(de,_e.mode,Ee,null),de.return=_e,de;Ym(_e,de)}return null}function ft(_e,de,Ee,et){var at=de!==null?de.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return at!==null?null:fe(_e,de,""+Ee,et);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case l:return Ee.key===at?Pe(_e,de,Ee,et):null;case c:return Ee.key===at?je(_e,de,Ee,et):null;case S:return at=Ee._init,ft(_e,de,at(Ee._payload),et)}if(X(Ee)||b(Ee))return at!==null?null:rt(_e,de,Ee,et,null);Ym(_e,Ee)}return null}function fn(_e,de,Ee,et,at){if(typeof et=="string"&&et!==""||typeof et=="number")return _e=_e.get(Ee)||null,fe(de,_e,""+et,at);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case l:return _e=_e.get(et.key===null?Ee:et.key)||null,Pe(de,_e,et,at);case c:return _e=_e.get(et.key===null?Ee:et.key)||null,je(de,_e,et,at);case S:var Bt=et._init;return fn(_e,de,Ee,Bt(et._payload),at)}if(X(et)||b(et))return _e=_e.get(Ee)||null,rt(de,_e,et,at,null);Ym(de,et)}return null}function ct(_e,de,Ee,et){for(var at=null,Bt=null,Et=de,qt=de=0,Si=null;Et!==null&&qt<Ee.length;qt++){Et.index>qt?(Si=Et,Et=null):Si=Et.sibling;var $t=ft(_e,Et,Ee[qt],et);if($t===null){Et===null&&(Et=Si);break}h&&Et&&$t.alternate===null&&p(_e,Et),de=I($t,de,qt),Bt===null?at=$t:Bt.sibling=$t,Bt=$t,Et=Si}if(qt===Ee.length)return w(_e,Et),bn&&Ul(_e,qt),at;if(Et===null){for(;qt<Ee.length;qt++)Et=Ct(_e,Ee[qt],et),Et!==null&&(de=I(Et,de,qt),Bt===null?at=Et:Bt.sibling=Et,Bt=Et);return bn&&Ul(_e,qt),at}for(Et=M(_e,Et);qt<Ee.length;qt++)Si=fn(Et,_e,qt,Ee[qt],et),Si!==null&&(h&&Si.alternate!==null&&Et.delete(Si.key===null?qt:Si.key),de=I(Si,de,qt),Bt===null?at=Si:Bt.sibling=Si,Bt=Si);return h&&Et.forEach(function(Da){return p(_e,Da)}),bn&&Ul(_e,qt),at}function Gi(_e,de,Ee,et){var at=b(Ee);if(typeof at!="function")throw Error(o(150));if(Ee=at.call(Ee),Ee==null)throw Error(o(151));for(var Bt=at=null,Et=de,qt=de=0,Si=null,$t=Ee.next();Et!==null&&!$t.done;qt++,$t=Ee.next()){Et.index>qt?(Si=Et,Et=null):Si=Et.sibling;var Da=ft(_e,Et,$t.value,et);if(Da===null){Et===null&&(Et=Si);break}h&&Et&&Da.alternate===null&&p(_e,Et),de=I(Da,de,qt),Bt===null?at=Da:Bt.sibling=Da,Bt=Da,Et=Si}if($t.done)return w(_e,Et),bn&&Ul(_e,qt),at;if(Et===null){for(;!$t.done;qt++,$t=Ee.next())$t=Ct(_e,$t.value,et),$t!==null&&(de=I($t,de,qt),Bt===null?at=$t:Bt.sibling=$t,Bt=$t);return bn&&Ul(_e,qt),at}for(Et=M(_e,Et);!$t.done;qt++,$t=Ee.next())$t=fn(Et,_e,qt,$t.value,et),$t!==null&&(h&&$t.alternate!==null&&Et.delete($t.key===null?qt:$t.key),de=I($t,de,qt),Bt===null?at=$t:Bt.sibling=$t,Bt=$t);return h&&Et.forEach(function(z4){return p(_e,z4)}),bn&&Ul(_e,qt),at}function rs(_e,de,Ee,et){if(typeof Ee=="object"&&Ee!==null&&Ee.type===u&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case l:e:{for(var at=Ee.key,Bt=de;Bt!==null;){if(Bt.key===at){if(at=Ee.type,at===u){if(Bt.tag===7){w(_e,Bt.sibling),de=T(Bt,Ee.props.children),de.return=_e,_e=de;break e}}else if(Bt.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&gb(at)===Bt.type){w(_e,Bt.sibling),de=T(Bt,Ee.props),de.ref=Uh(_e,Bt,Ee),de.return=_e,_e=de;break e}w(_e,Bt);break}else p(_e,Bt);Bt=Bt.sibling}Ee.type===u?(de=jl(Ee.props.children,_e.mode,et,Ee.key),de.return=_e,_e=de):(et=Cg(Ee.type,Ee.key,Ee.props,null,_e.mode,et),et.ref=Uh(_e,de,Ee),et.return=_e,_e=et)}return ee(_e);case c:e:{for(Bt=Ee.key;de!==null;){if(de.key===Bt)if(de.tag===4&&de.stateNode.containerInfo===Ee.containerInfo&&de.stateNode.implementation===Ee.implementation){w(_e,de.sibling),de=T(de,Ee.children||[]),de.return=_e,_e=de;break e}else{w(_e,de);break}else p(_e,de);de=de.sibling}de=D_(Ee,_e.mode,et),de.return=_e,_e=de}return ee(_e);case S:return Bt=Ee._init,rs(_e,de,Bt(Ee._payload),et)}if(X(Ee))return ct(_e,de,Ee,et);if(b(Ee))return Gi(_e,de,Ee,et);Ym(_e,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,de!==null&&de.tag===6?(w(_e,de.sibling),de=T(de,Ee),de.return=_e,_e=de):(w(_e,de),de=B_(Ee,_e.mode,et),de.return=_e,_e=de),ee(_e)):w(_e,de)}return rs}var _u=vb(!0),yb=vb(!1),Nh={},es=Ti(Nh),zh=Ti(Nh),xu=Ti(Nh);function io(h){if(h===Nh)throw Error(o(174));return h}function Q1(h,p){Dt(xu,p),Dt(zh,h),Dt(es,Nh),h=oe(p),St(es),Dt(es,h)}function Su(){St(es),St(zh),St(xu)}function _b(h){var p=io(xu.current),w=io(es.current);p=H(w,h.type,p),w!==p&&(Dt(zh,h),Dt(es,p))}function Z1(h){zh.current===h&&(St(es),St(zh))}var Rn=Ti(0);function Km(h){for(var p=h;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||Vt(w)||yn(w)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var q1=[];function $1(){for(var h=0;h<q1.length;h++){var p=q1[h];re?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}q1.length=0}var Qm=a.ReactCurrentDispatcher,ts=a.ReactCurrentBatchConfig,wu=0,Un=null,Ui=null,xi=null,Zm=!1,Gh=!1,Hh=0,f4=0;function Ni(){throw Error(o(321))}function e_(h,p){if(p===null)return!1;for(var w=0;w<p.length&&w<h.length;w++)if(!Rr(h[w],p[w]))return!1;return!0}function t_(h,p,w,M,T,I){if(wu=I,Un=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Qm.current=h===null||h.memoizedState===null?m4:g4,h=w(M,T),Gh){I=0;do{if(Gh=!1,Hh=0,25<=I)throw Error(o(301));I+=1,xi=Ui=null,p.updateQueue=null,Qm.current=v4,h=w(M,T)}while(Gh)}if(Qm.current=ng,p=Ui!==null&&Ui.next!==null,wu=0,xi=Ui=Un=null,Zm=!1,p)throw Error(o(300));return h}function n_(){var h=Hh!==0;return Hh=0,h}function ko(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xi===null?Un.memoizedState=xi=h:xi=xi.next=h,xi}function ro(){if(Ui===null){var h=Un.alternate;h=h!==null?h.memoizedState:null}else h=Ui.next;var p=xi===null?Un.memoizedState:xi.next;if(p!==null)xi=p,Ui=h;else{if(h===null)throw Error(o(310));Ui=h,h={memoizedState:Ui.memoizedState,baseState:Ui.baseState,baseQueue:Ui.baseQueue,queue:Ui.queue,next:null},xi===null?Un.memoizedState=xi=h:xi=xi.next=h}return xi}function Nl(h,p){return typeof p=="function"?p(h):p}function qm(h){var p=ro(),w=p.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=h;var M=Ui,T=M.baseQueue,I=w.pending;if(I!==null){if(T!==null){var ee=T.next;T.next=I.next,I.next=ee}M.baseQueue=T=I,w.pending=null}if(T!==null){I=T.next,M=M.baseState;var fe=ee=null,Pe=null,je=I;do{var rt=je.lane;if((wu&rt)===rt)Pe!==null&&(Pe=Pe.next={lane:0,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null}),M=je.hasEagerState?je.eagerState:h(M,je.action);else{var Ct={lane:rt,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null};Pe===null?(fe=Pe=Ct,ee=M):Pe=Pe.next=Ct,Un.lanes|=rt,Mu|=rt}je=je.next}while(je!==null&&je!==I);Pe===null?ee=M:Pe.next=fe,Rr(M,p.memoizedState)||(Dr=!0),p.memoizedState=M,p.baseState=ee,p.baseQueue=Pe,w.lastRenderedState=M}if(h=w.interleaved,h!==null){T=h;do I=T.lane,Un.lanes|=I,Mu|=I,T=T.next;while(T!==h)}else T===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function $m(h){var p=ro(),w=p.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=h;var M=w.dispatch,T=w.pending,I=p.memoizedState;if(T!==null){w.pending=null;var ee=T=T.next;do I=h(I,ee.action),ee=ee.next;while(ee!==T);Rr(I,p.memoizedState)||(Dr=!0),p.memoizedState=I,p.baseQueue===null&&(p.baseState=I),w.lastRenderedState=I}return[I,M]}function xb(){}function Sb(h,p){var w=Un,M=ro(),T=p(),I=!Rr(M.memoizedState,T);if(I&&(M.memoizedState=T,Dr=!0),M=M.queue,Wh(Mb.bind(null,w,M,h),[h]),M.getSnapshot!==p||I||xi!==null&&xi.memoizedState.tag&1){if(w.flags|=2048,Vh(9,Ab.bind(null,w,M,T,p),void 0,null),$n===null)throw Error(o(349));wu&30||wb(w,p,T)}return T}function wb(h,p,w){h.flags|=16384,h={getSnapshot:p,value:w},p=Un.updateQueue,p===null?(p={lastEffect:null,stores:null},Un.updateQueue=p,p.stores=[h]):(w=p.stores,w===null?p.stores=[h]:w.push(h))}function Ab(h,p,w,M){p.value=w,p.getSnapshot=M,Cb(p)&&ns(h,1,-1)}function Mb(h,p,w){return w(function(){Cb(p)&&ns(h,1,-1)})}function Cb(h){var p=h.getSnapshot;h=h.value;try{var w=p();return!Rr(h,w)}catch{return!0}}function i_(h){var p=ko();return typeof h=="function"&&(h=h()),p.memoizedState=p.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nl,lastRenderedState:h},p.queue=h,h=h.dispatch=p4.bind(null,Un,h),[p.memoizedState,h]}function Vh(h,p,w,M){return h={tag:h,create:p,destroy:w,deps:M,next:null},p=Un.updateQueue,p===null?(p={lastEffect:null,stores:null},Un.updateQueue=p,p.lastEffect=h.next=h):(w=p.lastEffect,w===null?p.lastEffect=h.next=h:(M=w.next,w.next=h,h.next=M,p.lastEffect=h)),h}function Eb(){return ro().memoizedState}function eg(h,p,w,M){var T=ko();Un.flags|=h,T.memoizedState=Vh(1|p,w,void 0,M===void 0?null:M)}function tg(h,p,w,M){var T=ro();M=M===void 0?null:M;var I=void 0;if(Ui!==null){var ee=Ui.memoizedState;if(I=ee.destroy,M!==null&&e_(M,ee.deps)){T.memoizedState=Vh(p,w,I,M);return}}Un.flags|=h,T.memoizedState=Vh(1|p,w,I,M)}function r_(h,p){return eg(8390656,8,h,p)}function Wh(h,p){return tg(2048,8,h,p)}function bb(h,p){return tg(4,2,h,p)}function Tb(h,p){return tg(4,4,h,p)}function Pb(h,p){if(typeof p=="function")return h=h(),p(h),function(){p(null)};if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function Rb(h,p,w){return w=w!=null?w.concat([h]):null,tg(4,4,Pb.bind(null,p,h),w)}function s_(){}function Ib(h,p){var w=ro();p=p===void 0?null:p;var M=w.memoizedState;return M!==null&&p!==null&&e_(p,M[1])?M[0]:(w.memoizedState=[h,p],h)}function Bb(h,p){var w=ro();p=p===void 0?null:p;var M=w.memoizedState;return M!==null&&p!==null&&e_(p,M[1])?M[0]:(h=h(),w.memoizedState=[h,p],h)}function h4(h,p){var w=Ft;Ft=w!==0&&4>w?w:4,h(!0);var M=ts.transition;ts.transition={};try{h(!1),p()}finally{Ft=w,ts.transition=M}}function Db(){return ro().memoizedState}function d4(h,p,w){var M=Ra(h);w={lane:M,action:w,hasEagerState:!1,eagerState:null,next:null},Lb(h)?Ob(p,w):(kb(h,p,w),w=rr(),h=ns(h,M,w),h!==null&&Fb(h,p,M))}function p4(h,p,w){var M=Ra(h),T={lane:M,action:w,hasEagerState:!1,eagerState:null,next:null};if(Lb(h))Ob(p,T);else{kb(h,p,T);var I=h.alternate;if(h.lanes===0&&(I===null||I.lanes===0)&&(I=p.lastRenderedReducer,I!==null))try{var ee=p.lastRenderedState,fe=I(ee,w);if(T.hasEagerState=!0,T.eagerState=fe,Rr(fe,ee))return}catch{}finally{}w=rr(),h=ns(h,M,w),h!==null&&Fb(h,p,M)}}function Lb(h){var p=h.alternate;return h===Un||p!==null&&p===Un}function Ob(h,p){Gh=Zm=!0;var w=h.pending;w===null?p.next=p:(p.next=w.next,w.next=p),h.pending=p}function kb(h,p,w){$n!==null&&h.mode&1&&!(Lt&2)?(h=p.interleaved,h===null?(w.next=w,ai===null?ai=[p]:ai.push(p)):(w.next=h.next,h.next=w),p.interleaved=w):(h=p.pending,h===null?w.next=w:(w.next=h.next,h.next=w),p.pending=w)}function Fb(h,p,w){if(w&4194240){var M=p.lanes;M&=h.pendingLanes,w|=M,p.lanes=w,eo(h,w)}}var ng={readContext:un,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},m4={readContext:un,useCallback:function(h,p){return ko().memoizedState=[h,p===void 0?null:p],h},useContext:un,useEffect:r_,useImperativeHandle:function(h,p,w){return w=w!=null?w.concat([h]):null,eg(4194308,4,Pb.bind(null,p,h),w)},useLayoutEffect:function(h,p){return eg(4194308,4,h,p)},useInsertionEffect:function(h,p){return eg(4,2,h,p)},useMemo:function(h,p){var w=ko();return p=p===void 0?null:p,h=h(),w.memoizedState=[h,p],h},useReducer:function(h,p,w){var M=ko();return p=w!==void 0?w(p):p,M.memoizedState=M.baseState=p,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:p},M.queue=h,h=h.dispatch=d4.bind(null,Un,h),[M.memoizedState,h]},useRef:function(h){var p=ko();return h={current:h},p.memoizedState=h},useState:i_,useDebugValue:s_,useDeferredValue:function(h){var p=i_(h),w=p[0],M=p[1];return r_(function(){var T=ts.transition;ts.transition={};try{M(h)}finally{ts.transition=T}},[h]),w},useTransition:function(){var h=i_(!1),p=h[0];return h=h4.bind(null,h[1]),ko().memoizedState=h,[p,h]},useMutableSource:function(){},useSyncExternalStore:function(h,p,w){var M=Un,T=ko();if(bn){if(w===void 0)throw Error(o(407));w=w()}else{if(w=p(),$n===null)throw Error(o(349));wu&30||wb(M,p,w)}T.memoizedState=w;var I={value:w,getSnapshot:p};return T.queue=I,r_(Mb.bind(null,M,I,h),[h]),M.flags|=2048,Vh(9,Ab.bind(null,M,I,w,p),void 0,null),w},useId:function(){var h=ko(),p=$n.identifierPrefix;if(bn){var w=Oo,M=Lo;w=(M&~(1<<32-ki(M)-1)).toString(32)+w,p=":"+p+"R"+w,w=Hh++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=f4++,p=":"+p+"r"+w.toString(32)+":";return h.memoizedState=p},unstable_isNewReconciler:!1},g4={readContext:un,useCallback:Ib,useContext:un,useEffect:Wh,useImperativeHandle:Rb,useInsertionEffect:bb,useLayoutEffect:Tb,useMemo:Bb,useReducer:qm,useRef:Eb,useState:function(){return qm(Nl)},useDebugValue:s_,useDeferredValue:function(h){var p=qm(Nl),w=p[0],M=p[1];return Wh(function(){var T=ts.transition;ts.transition={};try{M(h)}finally{ts.transition=T}},[h]),w},useTransition:function(){var h=qm(Nl)[0],p=ro().memoizedState;return[h,p]},useMutableSource:xb,useSyncExternalStore:Sb,useId:Db,unstable_isNewReconciler:!1},v4={readContext:un,useCallback:Ib,useContext:un,useEffect:Wh,useImperativeHandle:Rb,useInsertionEffect:bb,useLayoutEffect:Tb,useMemo:Bb,useReducer:$m,useRef:Eb,useState:function(){return $m(Nl)},useDebugValue:s_,useDeferredValue:function(h){var p=$m(Nl),w=p[0],M=p[1];return Wh(function(){var T=ts.transition;ts.transition={};try{M(h)}finally{ts.transition=T}},[h]),w},useTransition:function(){var h=$m(Nl)[0],p=ro().memoizedState;return[h,p]},useMutableSource:xb,useSyncExternalStore:Sb,useId:Db,unstable_isNewReconciler:!1};function o_(h,p){try{var w="",M=p;do w+=kl(M),M=M.return;while(M);var T=w}catch(I){T=`
Error generating stack: `+I.message+`
`+I.stack}return{value:h,source:p,stack:T}}function a_(h,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var y4=typeof WeakMap=="function"?WeakMap:Map;function Ub(h,p,w){w=Do(-1,w),w.tag=3,w.payload={element:null};var M=p.value;return w.callback=function(){yg||(yg=!0,C_=M),a_(h,p)},w}function Nb(h,p,w){w=Do(-1,w),w.tag=3;var M=h.type.getDerivedStateFromError;if(typeof M=="function"){var T=p.value;w.payload=function(){return M(T)},w.callback=function(){a_(h,p)}}var I=h.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(w.callback=function(){a_(h,p),typeof M!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var ee=p.stack;this.componentDidCatch(p.value,{componentStack:ee!==null?ee:""})}),w}function zb(h,p,w){var M=h.pingCache;if(M===null){M=h.pingCache=new y4;var T=new Set;M.set(p,T)}else T=M.get(p),T===void 0&&(T=new Set,M.set(p,T));T.has(w)||(T.add(w),h=B4.bind(null,h,p,w),p.then(h,h))}function Gb(h){do{var p;if((p=h.tag===13)&&(p=h.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return h;h=h.return}while(h!==null);return null}function Hb(h,p,w,M,T){return h.mode&1?(h.flags|=65536,h.lanes=T,h):(h===p?h.flags|=65536:(h.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=Do(-1,1),p.tag=2,ba(w,p))),w.lanes|=1),h)}function so(h){h.flags|=4}function Vb(h,p){if(h!==null&&h.child===p.child)return!0;if(p.flags&16)return!1;for(h=p.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var jh,Jh,ig,rg;if(he)jh=function(h,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)V(h,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Jh=function(){},ig=function(h,p,w,M,T){if(h=h.memoizedProps,h!==M){var I=p.stateNode,ee=io(es.current);w=K(I,w,h,M,T,ee),(p.updateQueue=w)&&so(p)}},rg=function(h,p,w,M){w!==M&&so(p)};else if(q){jh=function(h,p,w,M){for(var T=p.child;T!==null;){if(T.tag===5){var I=T.stateNode;w&&M&&(I=Gt(I,T.type,T.memoizedProps,T)),V(h,I)}else if(T.tag===6)I=T.stateNode,w&&M&&(I=Ht(I,T.memoizedProps,T)),V(h,I);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)I=T.child,I!==null&&(I.return=T),jh(h,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===p)break;for(;T.sibling===null;){if(T.return===null||T.return===p)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var Wb=function(h,p,w,M){for(var T=p.child;T!==null;){if(T.tag===5){var I=T.stateNode;w&&M&&(I=Gt(I,T.type,T.memoizedProps,T)),Nt(h,I)}else if(T.tag===6)I=T.stateNode,w&&M&&(I=Ht(I,T.memoizedProps,T)),Nt(h,I);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)I=T.child,I!==null&&(I.return=T),Wb(h,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===p)break;for(;T.sibling===null;){if(T.return===null||T.return===p)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};Jh=function(h,p){var w=p.stateNode;if(!Vb(h,p)){h=w.containerInfo;var M=xt(h);Wb(M,p,!1,!1),w.pendingChildren=M,so(p),jt(h,M)}},ig=function(h,p,w,M,T){var I=h.stateNode,ee=h.memoizedProps;if((h=Vb(h,p))&&ee===M)p.stateNode=I;else{var fe=p.stateNode,Pe=io(es.current),je=null;ee!==M&&(je=K(fe,w,ee,M,T,Pe)),h&&je===null?p.stateNode=I:(I=nt(I,je,w,ee,M,p,h,fe),Z(I,w,M,T,Pe)&&so(p),p.stateNode=I,h?so(p):jh(I,p,!1,!1))}},rg=function(h,p,w,M){w!==M?(h=io(xu.current),w=io(es.current),p.stateNode=z(M,h,w,p),so(p)):p.stateNode=h.stateNode}}else Jh=function(){},ig=function(){},rg=function(){};function Xh(h,p){if(!bn)switch(h.tailMode){case"hidden":p=h.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?h.tail=null:w.sibling=null;break;case"collapsed":w=h.tail;for(var M=null;w!==null;)w.alternate!==null&&(M=w),w=w.sibling;M===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:M.sibling=null}}function zi(h){var p=h.alternate!==null&&h.alternate.child===h.child,w=0,M=0;if(p)for(var T=h.child;T!==null;)w|=T.lanes|T.childLanes,M|=T.subtreeFlags&14680064,M|=T.flags&14680064,T.return=h,T=T.sibling;else for(T=h.child;T!==null;)w|=T.lanes|T.childLanes,M|=T.subtreeFlags,M|=T.flags,T.return=h,T=T.sibling;return h.subtreeFlags|=M,h.childLanes=w,p}function _4(h,p,w){var M=p.pendingProps;switch(J1(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zi(p),null;case 1:return jn(p.type)&&wa(),zi(p),null;case 3:return M=p.stateNode,Su(),St(Wn),St(Xt),$1(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(h===null||h.child===null)&&(Fh(p)?so(p):h===null||h.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,Cs!==null&&(T_(Cs),Cs=null))),Jh(h,p),zi(p),null;case 5:Z1(p),w=io(xu.current);var T=p.type;if(h!==null&&p.stateNode!=null)ig(h,p,T,M,w),h.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!M){if(p.stateNode===null)throw Error(o(166));return zi(p),null}if(h=io(es.current),Fh(p)){if(!ce)throw Error(o(175));h=tt(p.stateNode,p.type,p.memoizedProps,w,h,p,!kh),p.updateQueue=h,h!==null&&so(p)}else{var I=U(T,M,w,h,p);jh(I,p,!1,!1),p.stateNode=I,Z(I,T,M,w,h)&&so(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return zi(p),null;case 6:if(h&&p.stateNode!=null)rg(h,p,h.memoizedProps,M);else{if(typeof M!="string"&&p.stateNode===null)throw Error(o(166));if(h=io(xu.current),w=io(es.current),Fh(p)){if(!ce)throw Error(o(176));if(h=p.stateNode,M=p.memoizedProps,(w=ut(h,M,p,!kh))&&(T=Ir,T!==null))switch(I=(T.mode&1)!==0,T.tag){case 3:qi(T.stateNode.containerInfo,h,M,I);break;case 5:br(T.type,T.memoizedProps,T.stateNode,h,M,I)}w&&so(p)}else p.stateNode=z(M,h,w,p)}return zi(p),null;case 13:if(St(Rn),M=p.memoizedState,bn&&Br!==null&&p.mode&1&&!(p.flags&128)){for(h=Br;h;)h=pe(h);return yu(),p.flags|=98560,p}if(M!==null&&M.dehydrated!==null){if(M=Fh(p),h===null){if(!M)throw Error(o(318));if(!ce)throw Error(o(344));if(h=p.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));gt(h,p)}else yu(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return zi(p),null}return Cs!==null&&(T_(Cs),Cs=null),p.flags&128?(p.lanes=w,p):(M=M!==null,w=!1,h===null?Fh(p):w=h.memoizedState!==null,M&&!w&&(p.child.flags|=8192,p.mode&1&&(h===null||Rn.current&1?li===0&&(li=3):R_())),p.updateQueue!==null&&(p.flags|=4),zi(p),null);case 4:return Su(),Jh(h,p),h===null&&ge(p.stateNode.containerInfo),zi(p),null;case 10:return no(p.type._context),zi(p),null;case 17:return jn(p.type)&&wa(),zi(p),null;case 19:if(St(Rn),T=p.memoizedState,T===null)return zi(p),null;if(M=(p.flags&128)!==0,I=T.rendering,I===null)if(M)Xh(T,!1);else{if(li!==0||h!==null&&h.flags&128)for(h=p.child;h!==null;){if(I=Km(h),I!==null){for(p.flags|=128,Xh(T,!1),h=I.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),p.subtreeFlags=0,h=w,M=p.child;M!==null;)w=M,T=h,w.flags&=14680066,I=w.alternate,I===null?(w.childLanes=0,w.lanes=T,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=I.childLanes,w.lanes=I.lanes,w.child=I.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=I.memoizedProps,w.memoizedState=I.memoizedState,w.updateQueue=I.updateQueue,w.type=I.type,T=I.dependencies,w.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),M=M.sibling;return Dt(Rn,Rn.current&1|2),p.child}h=h.sibling}T.tail!==null&&En()>M_&&(p.flags|=128,M=!0,Xh(T,!1),p.lanes=4194304)}else{if(!M)if(h=Km(I),h!==null){if(p.flags|=128,M=!0,h=h.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),Xh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!I.alternate&&!bn)return zi(p),null}else 2*En()-T.renderingStartTime>M_&&w!==1073741824&&(p.flags|=128,M=!0,Xh(T,!1),p.lanes=4194304);T.isBackwards?(I.sibling=p.child,p.child=I):(h=T.last,h!==null?h.sibling=I:p.child=I,T.last=I)}return T.tail!==null?(p=T.tail,T.rendering=p,T.tail=p.sibling,T.renderingStartTime=En(),p.sibling=null,h=Rn.current,Dt(Rn,M?h&1|2:h&1),p):(zi(p),null);case 22:case 23:return P_(),M=p.memoizedState!==null,h!==null&&h.memoizedState!==null!==M&&(p.flags|=8192),M&&p.mode&1?Lr&1073741824&&(zi(p),he&&p.subtreeFlags&6&&(p.flags|=8192)):zi(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var x4=a.ReactCurrentOwner,Dr=!1;function ir(h,p,w,M){p.child=h===null?yb(p,null,w,M):_u(p,h.child,w,M)}function jb(h,p,w,M,T){w=w.render;var I=p.ref;return _i(p,T),M=t_(h,p,w,M,I,T),w=n_(),h!==null&&!Dr?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~T,Fo(h,p,T)):(bn&&w&&j1(p),p.flags|=1,ir(h,p,M,T),p.child)}function Jb(h,p,w,M,T){if(h===null){var I=w.type;return typeof I=="function"&&!I_(I)&&I.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=I,Xb(h,p,I,M,T)):(h=Cg(w.type,null,M,p,p.mode,T),h.ref=p.ref,h.return=p,p.child=h)}if(I=h.child,!(h.lanes&T)){var ee=I.memoizedProps;if(w=w.compare,w=w!==null?w:Ol,w(ee,M)&&h.ref===p.ref)return Fo(h,p,T)}return p.flags|=1,h=Ba(I,M),h.ref=p.ref,h.return=p,p.child=h}function Xb(h,p,w,M,T){if(h!==null&&Ol(h.memoizedProps,M)&&h.ref===p.ref)if(Dr=!1,(h.lanes&T)!==0)h.flags&131072&&(Dr=!0);else return p.lanes=h.lanes,Fo(h,p,T);return l_(h,p,w,M,T)}function Yb(h,p,w){var M=p.pendingProps,T=M.children,I=h!==null?h.memoizedState:null;if(M.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},Dt(Au,Lr),Lr|=w;else if(w&1073741824)p.memoizedState={baseLanes:0,cachePool:null},M=I!==null?I.baseLanes:w,Dt(Au,Lr),Lr|=M;else return h=I!==null?I.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:h,cachePool:null},p.updateQueue=null,Dt(Au,Lr),Lr|=h,null;else I!==null?(M=I.baseLanes|w,p.memoizedState=null):M=w,Dt(Au,Lr),Lr|=M;return ir(h,p,T,w),p.child}function Kb(h,p){var w=p.ref;(h===null&&w!==null||h!==null&&h.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function l_(h,p,w,M,T){var I=jn(w)?er:Xt.current;return I=Tr(p,I),_i(p,T),w=t_(h,p,w,M,I,T),M=n_(),h!==null&&!Dr?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~T,Fo(h,p,T)):(bn&&M&&j1(p),p.flags|=1,ir(h,p,w,T),p.child)}function Qb(h,p,w,M,T){if(jn(w)){var I=!0;qs(p)}else I=!1;if(_i(p,T),p.stateNode===null)h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),ub(p,w,M),W1(p,w,M,T),M=!0;else if(h===null){var ee=p.stateNode,fe=p.memoizedProps;ee.props=fe;var Pe=ee.context,je=w.contextType;typeof je=="object"&&je!==null?je=un(je):(je=jn(w)?er:Xt.current,je=Tr(p,je));var rt=w.getDerivedStateFromProps,Ct=typeof rt=="function"||typeof ee.getSnapshotBeforeUpdate=="function";Ct||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(fe!==M||Pe!==je)&&fb(p,ee,M,je),Ms=!1;var ft=p.memoizedState;ee.state=ft,Wm(p,M,ee,T),Pe=p.memoizedState,fe!==M||ft!==Pe||Wn.current||Ms?(typeof rt=="function"&&(V1(p,w,rt,M),Pe=p.memoizedState),(fe=Ms||cb(p,w,fe,M,ft,Pe,je))?(Ct||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=M,p.memoizedState=Pe),ee.props=M,ee.state=Pe,ee.context=je,M=fe):(typeof ee.componentDidMount=="function"&&(p.flags|=4194308),M=!1)}else{ee=p.stateNode,sb(h,p),fe=p.memoizedProps,je=p.type===p.elementType?fe:Fi(p.type,fe),ee.props=je,Ct=p.pendingProps,ft=ee.context,Pe=w.contextType,typeof Pe=="object"&&Pe!==null?Pe=un(Pe):(Pe=jn(w)?er:Xt.current,Pe=Tr(p,Pe));var fn=w.getDerivedStateFromProps;(rt=typeof fn=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(fe!==Ct||ft!==Pe)&&fb(p,ee,M,Pe),Ms=!1,ft=p.memoizedState,ee.state=ft,Wm(p,M,ee,T);var ct=p.memoizedState;fe!==Ct||ft!==ct||Wn.current||Ms?(typeof fn=="function"&&(V1(p,w,fn,M),ct=p.memoizedState),(je=Ms||cb(p,w,je,M,ft,ct,Pe)||!1)?(rt||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(M,ct,Pe),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(M,ct,Pe)),typeof ee.componentDidUpdate=="function"&&(p.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ee.componentDidUpdate!="function"||fe===h.memoizedProps&&ft===h.memoizedState||(p.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||fe===h.memoizedProps&&ft===h.memoizedState||(p.flags|=1024),p.memoizedProps=M,p.memoizedState=ct),ee.props=M,ee.state=ct,ee.context=Pe,M=je):(typeof ee.componentDidUpdate!="function"||fe===h.memoizedProps&&ft===h.memoizedState||(p.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||fe===h.memoizedProps&&ft===h.memoizedState||(p.flags|=1024),M=!1)}return c_(h,p,w,M,I,T)}function c_(h,p,w,M,T,I){Kb(h,p);var ee=(p.flags&128)!==0;if(!M&&!ee)return T&&Fm(p,w,!1),Fo(h,p,I);M=p.stateNode,x4.current=p;var fe=ee&&typeof w.getDerivedStateFromError!="function"?null:M.render();return p.flags|=1,h!==null&&ee?(p.child=_u(p,h.child,null,I),p.child=_u(p,null,fe,I)):ir(h,p,fe,I),p.memoizedState=M.state,T&&Fm(p,w,!0),p.child}function Zb(h){var p=h.stateNode;p.pendingContext?lu(h,p.pendingContext,p.pendingContext!==p.context):p.context&&lu(h,p.context,!1),Q1(h,p.containerInfo)}function qb(h,p,w,M,T){return yu(),K1(T),p.flags|=256,ir(h,p,w,M),p.child}var sg={dehydrated:null,treeContext:null,retryLane:0};function og(h){return{baseLanes:h,cachePool:null}}function $b(h,p,w){var M=p.pendingProps,T=Rn.current,I=!1,ee=(p.flags&128)!==0,fe;if((fe=ee)||(fe=h!==null&&h.memoizedState===null?!1:(T&2)!==0),fe?(I=!0,p.flags&=-129):(h===null||h.memoizedState!==null)&&(T|=1),Dt(Rn,T&1),h===null)return Y1(p),h=p.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(p.mode&1?yn(h)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(T=M.children,h=M.fallback,I?(M=p.mode,I=p.child,T={mode:"hidden",children:T},!(M&1)&&I!==null?(I.childLanes=0,I.pendingProps=T):I=Eg(T,M,0,null),h=jl(h,M,w,null),I.return=p,h.return=p,I.sibling=h,p.child=I,p.child.memoizedState=og(w),p.memoizedState=sg,h):u_(p,T));if(T=h.memoizedState,T!==null){if(fe=T.dehydrated,fe!==null){if(ee)return p.flags&256?(p.flags&=-257,ag(h,p,w,Error(o(422)))):p.memoizedState!==null?(p.child=h.child,p.flags|=128,null):(I=M.fallback,T=p.mode,M=Eg({mode:"visible",children:M.children},T,0,null),I=jl(I,T,w,null),I.flags|=2,M.return=p,I.return=p,M.sibling=I,p.child=M,p.mode&1&&_u(p,h.child,null,w),p.child.memoizedState=og(w),p.memoizedState=sg,I);if(!(p.mode&1))p=ag(h,p,w,null);else if(yn(fe))p=ag(h,p,w,Error(o(419)));else if(M=(w&h.childLanes)!==0,Dr||M){if(M=$n,M!==null){switch(w&-w){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}M=I&(M.suspendedLanes|w)?0:I,M!==0&&M!==T.retryLane&&(T.retryLane=M,ns(h,M,-1))}R_(),p=ag(h,p,w,Error(o(421)))}else Vt(fe)?(p.flags|=128,p.child=h.child,p=D4.bind(null,h),Y(fe,p),p=null):(w=T.treeContext,ce&&(Br=be(fe),Ir=p,bn=!0,Cs=null,kh=!1,w!==null&&(qr[$r++]=Lo,qr[$r++]=Oo,qr[$r++]=Fl,Lo=w.id,Oo=w.overflow,Fl=p)),p=u_(p,p.pendingProps.children),p.flags|=4096);return p}return I?(M=t2(h,p,M.children,M.fallback,w),I=p.child,T=h.child.memoizedState,I.memoizedState=T===null?og(w):{baseLanes:T.baseLanes|w,cachePool:null},I.childLanes=h.childLanes&~w,p.memoizedState=sg,M):(w=e2(h,p,M.children,w),p.memoizedState=null,w)}return I?(M=t2(h,p,M.children,M.fallback,w),I=p.child,T=h.child.memoizedState,I.memoizedState=T===null?og(w):{baseLanes:T.baseLanes|w,cachePool:null},I.childLanes=h.childLanes&~w,p.memoizedState=sg,M):(w=e2(h,p,M.children,w),p.memoizedState=null,w)}function u_(h,p){return p=Eg({mode:"visible",children:p},h.mode,0,null),p.return=h,h.child=p}function e2(h,p,w,M){var T=h.child;return h=T.sibling,w=Ba(T,{mode:"visible",children:w}),!(p.mode&1)&&(w.lanes=M),w.return=p,w.sibling=null,h!==null&&(M=p.deletions,M===null?(p.deletions=[h],p.flags|=16):M.push(h)),p.child=w}function t2(h,p,w,M,T){var I=p.mode;h=h.child;var ee=h.sibling,fe={mode:"hidden",children:w};return!(I&1)&&p.child!==h?(w=p.child,w.childLanes=0,w.pendingProps=fe,p.deletions=null):(w=Ba(h,fe),w.subtreeFlags=h.subtreeFlags&14680064),ee!==null?M=Ba(ee,M):(M=jl(M,I,T,null),M.flags|=2),M.return=p,w.return=p,w.sibling=M,p.child=w,M}function ag(h,p,w,M){return M!==null&&K1(M),_u(p,h.child,null,w),h=u_(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function n2(h,p,w){h.lanes|=p;var M=h.alternate;M!==null&&(M.lanes|=p),qn(h.return,p,w)}function f_(h,p,w,M,T){var I=h.memoizedState;I===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:M,tail:w,tailMode:T}:(I.isBackwards=p,I.rendering=null,I.renderingStartTime=0,I.last=M,I.tail=w,I.tailMode=T)}function i2(h,p,w){var M=p.pendingProps,T=M.revealOrder,I=M.tail;if(ir(h,p,M.children,w),M=Rn.current,M&2)M=M&1|2,p.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&n2(h,w,p);else if(h.tag===19)n2(h,w,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}M&=1}if(Dt(Rn,M),!(p.mode&1))p.memoizedState=null;else switch(T){case"forwards":for(w=p.child,T=null;w!==null;)h=w.alternate,h!==null&&Km(h)===null&&(T=w),w=w.sibling;w=T,w===null?(T=p.child,p.child=null):(T=w.sibling,w.sibling=null),f_(p,!1,T,w,I);break;case"backwards":for(w=null,T=p.child,p.child=null;T!==null;){if(h=T.alternate,h!==null&&Km(h)===null){p.child=T;break}h=T.sibling,T.sibling=w,w=T,T=h}f_(p,!0,w,null,I);break;case"together":f_(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Fo(h,p,w){if(h!==null&&(p.dependencies=h.dependencies),Mu|=p.lanes,!(w&p.childLanes))return null;if(h!==null&&p.child!==h.child)throw Error(o(153));if(p.child!==null){for(h=p.child,w=Ba(h,h.pendingProps),p.child=w,w.return=p;h.sibling!==null;)h=h.sibling,w=w.sibling=Ba(h,h.pendingProps),w.return=p;w.sibling=null}return p.child}function S4(h,p,w){switch(p.tag){case 3:Zb(p),yu();break;case 5:_b(p);break;case 1:jn(p.type)&&qs(p);break;case 4:Q1(p,p.stateNode.containerInfo);break;case 10:Hm(p,p.type._context,p.memoizedProps.value);break;case 13:var M=p.memoizedState;if(M!==null)return M.dehydrated!==null?(Dt(Rn,Rn.current&1),p.flags|=128,null):w&p.child.childLanes?$b(h,p,w):(Dt(Rn,Rn.current&1),h=Fo(h,p,w),h!==null?h.sibling:null);Dt(Rn,Rn.current&1);break;case 19:if(M=(w&p.childLanes)!==0,h.flags&128){if(M)return i2(h,p,w);p.flags|=128}var T=p.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Dt(Rn,Rn.current),M)break;return null;case 22:case 23:return p.lanes=0,Yb(h,p,w)}return Fo(h,p,w)}function w4(h,p){switch(J1(p),p.tag){case 1:return jn(p.type)&&wa(),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return Su(),St(Wn),St(Xt),$1(),h=p.flags,h&65536&&!(h&128)?(p.flags=h&-65537|128,p):null;case 5:return Z1(p),null;case 13:if(St(Rn),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(o(340));yu()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return St(Rn),null;case 4:return Su(),null;case 10:return no(p.type._context),null;case 22:case 23:return P_(),null;case 24:return null;default:return null}}var lg=!1,zl=!1,A4=typeof WeakSet=="function"?WeakSet:Set,$e=null;function cg(h,p){var w=h.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(M){gr(h,p,M)}else w.current=null}function h_(h,p,w){try{w()}catch(M){gr(h,p,M)}}var r2=!1;function M4(h,p){for(J(h.containerInfo),$e=p;$e!==null;)if(h=$e,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,$e=p;else for(;$e!==null;){h=$e;try{var w=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var M=w.memoizedProps,T=w.memoizedState,I=h.stateNode,ee=I.getSnapshotBeforeUpdate(h.elementType===h.type?M:Fi(h.type,M),T);I.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:he&&Ye(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(fe){gr(h,h.return,fe)}if(p=h.sibling,p!==null){p.return=h.return,$e=p;break}$e=h.return}return w=r2,r2=!1,w}function Gl(h,p,w){var M=p.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var T=M=M.next;do{if((T.tag&h)===h){var I=T.destroy;T.destroy=void 0,I!==void 0&&h_(p,w,I)}T=T.next}while(T!==M)}}function Yh(h,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&h)===h){var M=w.create;w.destroy=M()}w=w.next}while(w!==p)}}function d_(h){var p=h.ref;if(p!==null){var w=h.stateNode;switch(h.tag){case 5:h=te(w);break;default:h=w}typeof p=="function"?p(h):p.current=h}}function s2(h,p,w){if(Pr&&typeof Pr.onCommitFiberUnmount=="function")try{Pr.onCommitFiberUnmount(Ca,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(h=p.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var M=h=h.next;do{var T=M,I=T.destroy;T=T.tag,I!==void 0&&(T&2||T&4)&&h_(p,w,I),M=M.next}while(M!==h)}break;case 1:if(cg(p,w),h=p.stateNode,typeof h.componentWillUnmount=="function")try{h.props=p.memoizedProps,h.state=p.memoizedState,h.componentWillUnmount()}catch(ee){gr(p,w,ee)}break;case 5:cg(p,w);break;case 4:he?f2(h,p,w):q&&q&&(p=p.stateNode.containerInfo,w=xt(p),zt(p,w))}}function o2(h,p,w){for(var M=p;;)if(s2(h,M,w),M.child===null||he&&M.tag===4){if(M===p)break;for(;M.sibling===null;){if(M.return===null||M.return===p)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function a2(h){var p=h.alternate;p!==null&&(h.alternate=null,a2(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&ke(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function l2(h){return h.tag===5||h.tag===3||h.tag===4}function c2(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||l2(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function u2(h){if(he){e:{for(var p=h.return;p!==null;){if(l2(p))break e;p=p.return}throw Error(o(160))}var w=p;switch(w.tag){case 5:p=w.stateNode,w.flags&32&&(lt(p),w.flags&=-33),w=c2(h),m_(h,w,p);break;case 3:case 4:p=w.stateNode.containerInfo,w=c2(h),p_(h,w,p);break;default:throw Error(o(161))}}}function p_(h,p,w){var M=h.tag;if(M===5||M===6)h=h.stateNode,p?He(w,h,p):Be(w,h);else if(M!==4&&(h=h.child,h!==null))for(p_(h,p,w),h=h.sibling;h!==null;)p_(h,p,w),h=h.sibling}function m_(h,p,w){var M=h.tag;if(M===5||M===6)h=h.stateNode,p?Ve(w,h,p):Oe(w,h);else if(M!==4&&(h=h.child,h!==null))for(m_(h,p,w),h=h.sibling;h!==null;)m_(h,p,w),h=h.sibling}function f2(h,p,w){for(var M=p,T=!1,I,ee;;){if(!T){T=M.return;e:for(;;){if(T===null)throw Error(o(160));switch(I=T.stateNode,T.tag){case 5:ee=!1;break e;case 3:I=I.containerInfo,ee=!0;break e;case 4:I=I.containerInfo,ee=!0;break e}T=T.return}T=!0}if(M.tag===5||M.tag===6)o2(h,M,w),ee?Ze(I,M.stateNode):Fe(I,M.stateNode);else if(M.tag===18)ee?_n(I,M.stateNode):kt(I,M.stateNode);else if(M.tag===4){if(M.child!==null){I=M.stateNode.containerInfo,ee=!0,M.child.return=M,M=M.child;continue}}else if(s2(h,M,w),M.child!==null){M.child.return=M,M=M.child;continue}if(M===p)break;for(;M.sibling===null;){if(M.return===null||M.return===p)return;M=M.return,M.tag===4&&(T=!1)}M.sibling.return=M.return,M=M.sibling}}function g_(h,p){if(he){switch(p.tag){case 0:case 11:case 14:case 15:Gl(3,p,p.return),Yh(3,p),Gl(5,p,p.return);return;case 1:return;case 5:var w=p.stateNode;if(w!=null){var M=p.memoizedProps;h=h!==null?h.memoizedProps:M;var T=p.type,I=p.updateQueue;p.updateQueue=null,I!==null&&Ie(w,I,T,h,M,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));w=p.memoizedProps,Me(p.stateNode,h!==null?h.memoizedProps:w,w);return;case 3:ce&&h!==null&&h.memoizedState.isDehydrated&&Rt(p.stateNode.containerInfo);return;case 12:return;case 13:ug(p);return;case 19:ug(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:Gl(3,p,p.return),Yh(3,p),Gl(5,p,p.return);return;case 12:return;case 13:ug(p);return;case 19:ug(p);return;case 3:ce&&h!==null&&h.memoizedState.isDehydrated&&Rt(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(q){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,zt(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function ug(h){var p=h.updateQueue;if(p!==null){h.updateQueue=null;var w=h.stateNode;w===null&&(w=h.stateNode=new A4),p.forEach(function(M){var T=L4.bind(null,h,M);w.has(M)||(w.add(M),M.then(T,T))})}}function C4(h,p){for($e=p;$e!==null;){p=$e;var w=p.deletions;if(w!==null)for(var M=0;M<w.length;M++){var T=w[M];try{var I=h;he?f2(I,T,p):o2(I,T,p);var ee=T.alternate;ee!==null&&(ee.return=null),T.return=null}catch(at){gr(T,p,at)}}if(w=p.child,p.subtreeFlags&12854&&w!==null)w.return=p,$e=w;else for(;$e!==null;){p=$e;try{var fe=p.flags;if(fe&32&&he&&lt(p.stateNode),fe&512){var Pe=p.alternate;if(Pe!==null){var je=Pe.ref;je!==null&&(typeof je=="function"?je(null):je.current=null)}}if(fe&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var rt=p.alternate;(rt===null||rt.memoizedState===null)&&(A_=En())}break;case 22:var Ct=p.memoizedState!==null,ft=p.alternate,fn=ft!==null&&ft.memoizedState!==null;if(w=p,he){e:if(M=w,T=Ct,I=null,he)for(var ct=M;;){if(ct.tag===5){if(I===null){I=ct;var Gi=ct.stateNode;T?yt(Gi):xe(ct.stateNode,ct.memoizedProps)}}else if(ct.tag===6){if(I===null){var rs=ct.stateNode;T?se(rs):ze(rs,ct.memoizedProps)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===M)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===M)break;for(;ct.sibling===null;){if(ct.return===null||ct.return===M)break e;I===ct&&(I=null),ct=ct.return}I===ct&&(I=null),ct.sibling.return=ct.return,ct=ct.sibling}}if(Ct&&!fn&&w.mode&1){$e=w;for(var _e=w.child;_e!==null;){for(w=$e=_e;$e!==null;){M=$e;var de=M.child;switch(M.tag){case 0:case 11:case 14:case 15:Gl(4,M,M.return);break;case 1:cg(M,M.return);var Ee=M.stateNode;if(typeof Ee.componentWillUnmount=="function"){var et=M.return;try{Ee.props=M.memoizedProps,Ee.state=M.memoizedState,Ee.componentWillUnmount()}catch(at){gr(M,et,at)}}break;case 5:cg(M,M.return);break;case 22:if(M.memoizedState!==null){p2(w);continue}}de!==null?(de.return=M,$e=de):p2(w)}_e=_e.sibling}}}switch(fe&4102){case 2:u2(p),p.flags&=-3;break;case 6:u2(p),p.flags&=-3,g_(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,g_(p.alternate,p);break;case 4:g_(p.alternate,p)}}catch(at){gr(p,p.return,at)}if(w=p.sibling,w!==null){w.return=p.return,$e=w;break}$e=p.return}}}function E4(h,p,w){$e=h,h2(h)}function h2(h,p,w){for(var M=(h.mode&1)!==0;$e!==null;){var T=$e,I=T.child;if(T.tag===22&&M){var ee=T.memoizedState!==null||lg;if(!ee){var fe=T.alternate,Pe=fe!==null&&fe.memoizedState!==null||zl;fe=lg;var je=zl;if(lg=ee,(zl=Pe)&&!je)for($e=T;$e!==null;)ee=$e,Pe=ee.child,ee.tag===22&&ee.memoizedState!==null?m2(T):Pe!==null?(Pe.return=ee,$e=Pe):m2(T);for(;I!==null;)$e=I,h2(I),I=I.sibling;$e=T,lg=fe,zl=je}d2(h)}else T.subtreeFlags&8772&&I!==null?(I.return=T,$e=I):d2(h)}}function d2(h){for(;$e!==null;){var p=$e;if(p.flags&8772){var w=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:zl||Yh(5,p);break;case 1:var M=p.stateNode;if(p.flags&4&&!zl)if(w===null)M.componentDidMount();else{var T=p.elementType===p.type?w.memoizedProps:Fi(p.type,w.memoizedProps);M.componentDidUpdate(T,w.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var I=p.updateQueue;I!==null&&ab(p,I,M);break;case 3:var ee=p.updateQueue;if(ee!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=te(p.child.stateNode);break;case 1:w=p.child.stateNode}ab(p,ee,w)}break;case 5:var fe=p.stateNode;w===null&&p.flags&4&&Xe(fe,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(ce&&p.memoizedState===null){var Pe=p.alternate;if(Pe!==null){var je=Pe.memoizedState;if(je!==null){var rt=je.dehydrated;rt!==null&&It(rt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}zl||p.flags&512&&d_(p)}catch(Ct){gr(p,p.return,Ct)}}if(p===h){$e=null;break}if(w=p.sibling,w!==null){w.return=p.return,$e=w;break}$e=p.return}}function p2(h){for(;$e!==null;){var p=$e;if(p===h){$e=null;break}var w=p.sibling;if(w!==null){w.return=p.return,$e=w;break}$e=p.return}}function m2(h){for(;$e!==null;){var p=$e;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{Yh(4,p)}catch(Pe){gr(p,w,Pe)}break;case 1:var M=p.stateNode;if(typeof M.componentDidMount=="function"){var T=p.return;try{M.componentDidMount()}catch(Pe){gr(p,T,Pe)}}var I=p.return;try{d_(p)}catch(Pe){gr(p,I,Pe)}break;case 5:var ee=p.return;try{d_(p)}catch(Pe){gr(p,ee,Pe)}}}catch(Pe){gr(p,p.return,Pe)}if(p===h){$e=null;break}var fe=p.sibling;if(fe!==null){fe.return=p.return,$e=fe;break}$e=p.return}}var fg=0,hg=1,dg=2,pg=3,mg=4;if(typeof Symbol=="function"&&Symbol.for){var Kh=Symbol.for;fg=Kh("selector.component"),hg=Kh("selector.has_pseudo_class"),dg=Kh("selector.role"),pg=Kh("selector.test_id"),mg=Kh("selector.text")}function v_(h){var p=Ce(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(h=we(h),h===null)throw Error(o(362));return h.stateNode.current}function y_(h,p){switch(p.$$typeof){case fg:if(h.type===p.value)return!0;break;case hg:e:{p=p.value,h=[h,0];for(var w=0;w<h.length;){var M=h[w++],T=h[w++],I=p[T];if(M.tag!==5||!$(M)){for(;I!=null&&y_(M,I);)T++,I=p[T];if(T===p.length){p=!0;break e}else for(M=M.child;M!==null;)h.push(M,T),M=M.sibling}}p=!1}return p;case dg:if(h.tag===5&&le(h.stateNode,p.value))return!0;break;case mg:if((h.tag===5||h.tag===6)&&(h=D(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case pg:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function __(h){switch(h.$$typeof){case fg:return"<"+(P(h.value)||"Unknown")+">";case hg:return":has("+(__(h)||"")+")";case dg:return'[role="'+h.value+'"]';case mg:return'"'+h.value+'"';case pg:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function g2(h,p){var w=[];h=[h,0];for(var M=0;M<h.length;){var T=h[M++],I=h[M++],ee=p[I];if(T.tag!==5||!$(T)){for(;ee!=null&&y_(T,ee);)I++,ee=p[I];if(I===p.length)w.push(T);else for(T=T.child;T!==null;)h.push(T,I),T=T.sibling}}return w}function x_(h,p){if(!Le)throw Error(o(363));h=v_(h),h=g2(h,p),p=[],h=Array.from(h);for(var w=0;w<h.length;){var M=h[w++];if(M.tag===5)$(M)||p.push(M.stateNode);else for(M=M.child;M!==null;)h.push(M),M=M.sibling}return p}var b4=Math.ceil,gg=a.ReactCurrentDispatcher,S_=a.ReactCurrentOwner,Jn=a.ReactCurrentBatchConfig,Lt=0,$n=null,ei=null,Pi=0,Lr=0,Au=Ti(0),li=0,Qh=null,Mu=0,vg=0,w_=0,Zh=null,pr=null,A_=0,M_=1/0;function Cu(){M_=En()+500}var yg=!1,C_=null,Ta=null,_g=!1,Pa=null,xg=0,qh=0,E_=null,Sg=-1,wg=0;function rr(){return Lt&6?En():Sg!==-1?Sg:Sg=En()}function Ra(h){return h.mode&1?Lt&2&&Pi!==0?Pi&-Pi:Ll.transition!==null?(wg===0&&(h=To,To<<=1,!(To&4194240)&&(To=64),wg=h),wg):(h=Ft,h!==0?h:Ae()):1}function ns(h,p,w){if(50<qh)throw qh=0,E_=null,Error(o(185));var M=Ag(h,p);return M===null?null:($s(M,p,w),(!(Lt&2)||M!==$n)&&(M===$n&&(!(Lt&2)&&(vg|=p),li===4&&Ia(M,Pi)),mr(M,w),p===1&&Lt===0&&!(h.mode&1)&&(Cu(),to&&dr())),M)}function Ag(h,p){h.lanes|=p;var w=h.alternate;for(w!==null&&(w.lanes|=p),w=h,h=h.return;h!==null;)h.childLanes|=p,w=h.alternate,w!==null&&(w.childLanes|=p),w=h,h=h.return;return w.tag===3?w.stateNode:null}function mr(h,p){var w=h.callbackNode;Ph(h,p);var M=Dl(h,h===$n?Pi:0);if(M===0)w!==null&&hu(w),h.callbackNode=null,h.callbackPriority=0;else if(p=M&-M,h.callbackPriority!==p){if(w!=null&&hu(w),p===1)h.tag===0?Oh(y2.bind(null,h)):Lh(y2.bind(null,h)),ve?De(function(){Lt===0&&dr()}):Bo(Ma,dr),w=null;else{switch(Rh(M)){case 1:w=Ma;break;case 4:w=Gm;break;case 16:w=tr;break;case 536870912:w=Bh;break;default:w=tr}w=b2(w,v2.bind(null,h))}h.callbackPriority=p,h.callbackNode=w}}function v2(h,p){if(Sg=-1,wg=0,Lt&6)throw Error(o(327));var w=h.callbackNode;if(Wl()&&h.callbackNode!==w)return null;var M=Dl(h,h===$n?Pi:0);if(M===0)return null;if(M&30||M&h.expiredLanes||p)p=Mg(h,M);else{p=M;var T=Lt;Lt|=2;var I=S2();($n!==h||Pi!==p)&&(Cu(),Hl(h,p));do try{R4();break}catch(fe){x2(h,fe)}while(1);mu(),gg.current=I,Lt=T,ei!==null?p=0:($n=null,Pi=0,p=li)}if(p!==0){if(p===2&&(T=Io(h),T!==0&&(M=T,p=b_(h,T))),p===1)throw w=Qh,Hl(h,0),Ia(h,M),mr(h,En()),w;if(p===6)Ia(h,M);else{if(T=h.current.alternate,!(M&30)&&!T4(T)&&(p=Mg(h,M),p===2&&(I=Io(h),I!==0&&(M=I,p=b_(h,I))),p===1))throw w=Qh,Hl(h,0),Ia(h,M),mr(h,En()),w;switch(h.finishedWork=T,h.finishedLanes=M,p){case 0:case 1:throw Error(o(345));case 2:Vl(h,pr);break;case 3:if(Ia(h,M),(M&130023424)===M&&(p=A_+500-En(),10<p)){if(Dl(h,0)!==0)break;if(T=h.suspendedLanes,(T&M)!==M){rr(),h.pingedLanes|=h.suspendedLanes&T;break}h.timeoutHandle=ae(Vl.bind(null,h,pr),p);break}Vl(h,pr);break;case 4:if(Ia(h,M),(M&4194240)===M)break;for(p=h.eventTimes,T=-1;0<M;){var ee=31-ki(M);I=1<<ee,ee=p[ee],ee>T&&(T=ee),M&=~I}if(M=T,M=En()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*b4(M/1960))-M,10<M){h.timeoutHandle=ae(Vl.bind(null,h,pr),M);break}Vl(h,pr);break;case 5:Vl(h,pr);break;default:throw Error(o(329))}}}return mr(h,En()),h.callbackNode===w?v2.bind(null,h):null}function b_(h,p){var w=Zh;return h.current.memoizedState.isDehydrated&&(Hl(h,p).flags|=256),h=Mg(h,p),h!==2&&(p=pr,pr=w,p!==null&&T_(p)),h}function T_(h){pr===null?pr=h:pr.push.apply(pr,h)}function T4(h){for(var p=h;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var M=0;M<w.length;M++){var T=w[M],I=T.getSnapshot;T=T.value;try{if(!Rr(I(),T))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Ia(h,p){for(p&=~w_,p&=~vg,h.suspendedLanes|=p,h.pingedLanes&=~p,h=h.expirationTimes;0<p;){var w=31-ki(p),M=1<<w;h[w]=-1,p&=~M}}function y2(h){if(Lt&6)throw Error(o(327));Wl();var p=Dl(h,0);if(!(p&1))return mr(h,En()),null;var w=Mg(h,p);if(h.tag!==0&&w===2){var M=Io(h);M!==0&&(p=M,w=b_(h,M))}if(w===1)throw w=Qh,Hl(h,0),Ia(h,p),mr(h,En()),w;if(w===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=p,Vl(h,pr),mr(h,En()),null}function _2(h){Pa!==null&&Pa.tag===0&&!(Lt&6)&&Wl();var p=Lt;Lt|=1;var w=Jn.transition,M=Ft;try{if(Jn.transition=null,Ft=1,h)return h()}finally{Ft=M,Jn.transition=w,Lt=p,!(Lt&6)&&dr()}}function P_(){Lr=Au.current,St(Au)}function Hl(h,p){h.finishedWork=null,h.finishedLanes=0;var w=h.timeoutHandle;if(w!==ye&&(h.timeoutHandle=ye,ie(w)),ei!==null)for(w=ei.return;w!==null;){var M=w;switch(J1(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&wa();break;case 3:Su(),St(Wn),St(Xt),$1();break;case 5:Z1(M);break;case 4:Su();break;case 13:St(Rn);break;case 19:St(Rn);break;case 10:no(M.type._context);break;case 22:case 23:P_()}w=w.return}if($n=h,ei=h=Ba(h.current,null),Pi=Lr=p,li=0,Qh=null,w_=vg=Mu=0,pr=Zh=null,ai!==null){for(p=0;p<ai.length;p++)if(w=ai[p],M=w.interleaved,M!==null){w.interleaved=null;var T=M.next,I=w.pending;if(I!==null){var ee=I.next;I.next=T,M.next=ee}w.pending=M}ai=null}return h}function x2(h,p){do{var w=ei;try{if(mu(),Qm.current=ng,Zm){for(var M=Un.memoizedState;M!==null;){var T=M.queue;T!==null&&(T.pending=null),M=M.next}Zm=!1}if(wu=0,xi=Ui=Un=null,Gh=!1,Hh=0,S_.current=null,w===null||w.return===null){li=1,Qh=p,ei=null;break}e:{var I=h,ee=w.return,fe=w,Pe=p;if(p=Pi,fe.flags|=32768,Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var je=Pe,rt=fe,Ct=rt.tag;if(!(rt.mode&1)&&(Ct===0||Ct===11||Ct===15)){var ft=rt.alternate;ft?(rt.updateQueue=ft.updateQueue,rt.memoizedState=ft.memoizedState,rt.lanes=ft.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var fn=Gb(ee);if(fn!==null){fn.flags&=-257,Hb(fn,ee,fe,I,p),fn.mode&1&&zb(I,je,p),p=fn,Pe=je;var ct=p.updateQueue;if(ct===null){var Gi=new Set;Gi.add(Pe),p.updateQueue=Gi}else ct.add(Pe);break e}else{if(!(p&1)){zb(I,je,p),R_();break e}Pe=Error(o(426))}}else if(bn&&fe.mode&1){var rs=Gb(ee);if(rs!==null){!(rs.flags&65536)&&(rs.flags|=256),Hb(rs,ee,fe,I,p),K1(Pe);break e}}I=Pe,li!==4&&(li=2),Zh===null?Zh=[I]:Zh.push(I),Pe=o_(Pe,fe),fe=ee;do{switch(fe.tag){case 3:fe.flags|=65536,p&=-p,fe.lanes|=p;var _e=Ub(fe,Pe,p);ob(fe,_e);break e;case 1:I=Pe;var de=fe.type,Ee=fe.stateNode;if(!(fe.flags&128)&&(typeof de.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(Ta===null||!Ta.has(Ee)))){fe.flags|=65536,p&=-p,fe.lanes|=p;var et=Nb(fe,I,p);ob(fe,et);break e}}fe=fe.return}while(fe!==null)}A2(w)}catch(at){p=at,ei===w&&w!==null&&(ei=w=w.return);continue}break}while(1)}function S2(){var h=gg.current;return gg.current=ng,h===null?ng:h}function R_(){(li===0||li===3||li===2)&&(li=4),$n===null||!(Mu&268435455)&&!(vg&268435455)||Ia($n,Pi)}function Mg(h,p){var w=Lt;Lt|=2;var M=S2();$n===h&&Pi===p||Hl(h,p);do try{P4();break}catch(T){x2(h,T)}while(1);if(mu(),Lt=w,gg.current=M,ei!==null)throw Error(o(261));return $n=null,Pi=0,li}function P4(){for(;ei!==null;)w2(ei)}function R4(){for(;ei!==null&&!Ih();)w2(ei)}function w2(h){var p=E2(h.alternate,h,Lr);h.memoizedProps=h.pendingProps,p===null?A2(h):ei=p,S_.current=null}function A2(h){var p=h;do{var w=p.alternate;if(h=p.return,p.flags&32768){if(w=w4(w,p),w!==null){w.flags&=32767,ei=w;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{li=6,ei=null;return}}else if(w=_4(w,p,Lr),w!==null){ei=w;return}if(p=p.sibling,p!==null){ei=p;return}ei=p=h}while(p!==null);li===0&&(li=5)}function Vl(h,p){var w=Ft,M=Jn.transition;try{Jn.transition=null,Ft=1,I4(h,p,w)}finally{Jn.transition=M,Ft=w}return null}function I4(h,p,w){do Wl();while(Pa!==null);if(Lt&6)throw Error(o(327));var M=h.finishedWork,T=h.finishedLanes;if(M===null)return null;if(h.finishedWork=null,h.finishedLanes=0,M===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var I=M.lanes|M.childLanes;if(Aa(h,I),h===$n&&(ei=$n=null,Pi=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||_g||(_g=!0,b2(tr,function(){return Wl(),null})),I=(M.flags&15990)!==0,M.subtreeFlags&15990||I){I=Jn.transition,Jn.transition=null;var ee=Ft;Ft=1;var fe=Lt;Lt|=4,S_.current=null,M4(h,M),C4(h,M),Q(h.containerInfo),h.current=M,E4(M),zm(),Lt=fe,Ft=ee,Jn.transition=I}else h.current=M;if(_g&&(_g=!1,Pa=h,xg=T),I=h.pendingLanes,I===0&&(Ta=null),Dh(M.stateNode),mr(h,En()),p!==null)for(w=h.onRecoverableError,M=0;M<p.length;M++)w(p[M]);if(yg)throw yg=!1,h=C_,C_=null,h;return xg&1&&h.tag!==0&&Wl(),I=h.pendingLanes,I&1?h===E_?qh++:(qh=0,E_=h):qh=0,dr(),null}function Wl(){if(Pa!==null){var h=Rh(xg),p=Jn.transition,w=Ft;try{if(Jn.transition=null,Ft=16>h?16:h,Pa===null)var M=!1;else{if(h=Pa,Pa=null,xg=0,Lt&6)throw Error(o(331));var T=Lt;for(Lt|=4,$e=h.current;$e!==null;){var I=$e,ee=I.child;if($e.flags&16){var fe=I.deletions;if(fe!==null){for(var Pe=0;Pe<fe.length;Pe++){var je=fe[Pe];for($e=je;$e!==null;){var rt=$e;switch(rt.tag){case 0:case 11:case 15:Gl(8,rt,I)}var Ct=rt.child;if(Ct!==null)Ct.return=rt,$e=Ct;else for(;$e!==null;){rt=$e;var ft=rt.sibling,fn=rt.return;if(a2(rt),rt===je){$e=null;break}if(ft!==null){ft.return=fn,$e=ft;break}$e=fn}}}var ct=I.alternate;if(ct!==null){var Gi=ct.child;if(Gi!==null){ct.child=null;do{var rs=Gi.sibling;Gi.sibling=null,Gi=rs}while(Gi!==null)}}$e=I}}if(I.subtreeFlags&2064&&ee!==null)ee.return=I,$e=ee;else e:for(;$e!==null;){if(I=$e,I.flags&2048)switch(I.tag){case 0:case 11:case 15:Gl(9,I,I.return)}var _e=I.sibling;if(_e!==null){_e.return=I.return,$e=_e;break e}$e=I.return}}var de=h.current;for($e=de;$e!==null;){ee=$e;var Ee=ee.child;if(ee.subtreeFlags&2064&&Ee!==null)Ee.return=ee,$e=Ee;else e:for(ee=de;$e!==null;){if(fe=$e,fe.flags&2048)try{switch(fe.tag){case 0:case 11:case 15:Yh(9,fe)}}catch(at){gr(fe,fe.return,at)}if(fe===ee){$e=null;break e}var et=fe.sibling;if(et!==null){et.return=fe.return,$e=et;break e}$e=fe.return}}if(Lt=T,dr(),Pr&&typeof Pr.onPostCommitFiberRoot=="function")try{Pr.onPostCommitFiberRoot(Ca,h)}catch{}M=!0}return M}finally{Ft=w,Jn.transition=p}}return!1}function M2(h,p,w){p=o_(w,p),p=Ub(h,p,1),ba(h,p),p=rr(),h=Ag(h,1),h!==null&&($s(h,1,p),mr(h,p))}function gr(h,p,w){if(h.tag===3)M2(h,h,w);else for(;p!==null;){if(p.tag===3){M2(p,h,w);break}else if(p.tag===1){var M=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Ta===null||!Ta.has(M))){h=o_(w,h),h=Nb(p,h,1),ba(p,h),h=rr(),p=Ag(p,1),p!==null&&($s(p,1,h),mr(p,h));break}}p=p.return}}function B4(h,p,w){var M=h.pingCache;M!==null&&M.delete(p),p=rr(),h.pingedLanes|=h.suspendedLanes&w,$n===h&&(Pi&w)===w&&(li===4||li===3&&(Pi&130023424)===Pi&&500>En()-A_?Hl(h,0):w_|=w),mr(h,p)}function C2(h,p){p===0&&(h.mode&1?(p=Po,Po<<=1,!(Po&130023424)&&(Po=4194304)):p=1);var w=rr();h=Ag(h,p),h!==null&&($s(h,p,w),mr(h,w))}function D4(h){var p=h.memoizedState,w=0;p!==null&&(w=p.retryLane),C2(h,w)}function L4(h,p){var w=0;switch(h.tag){case 13:var M=h.stateNode,T=h.memoizedState;T!==null&&(w=T.retryLane);break;case 19:M=h.stateNode;break;default:throw Error(o(314))}M!==null&&M.delete(p),C2(h,w)}var E2;E2=function(h,p,w){if(h!==null)if(h.memoizedProps!==p.pendingProps||Wn.current)Dr=!0;else{if(!(h.lanes&w)&&!(p.flags&128))return Dr=!1,S4(h,p,w);Dr=!!(h.flags&131072)}else Dr=!1,bn&&p.flags&1048576&&hb(p,Xm,p.index);switch(p.lanes=0,p.tag){case 2:var M=p.type;h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps;var T=Tr(p,Xt.current);_i(p,w),T=t_(null,p,M,h,T,w);var I=n_();return p.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,jn(M)?(I=!0,qs(p)):I=!1,p.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,H1(p),T.updater=jm,p.stateNode=T,T._reactInternals=p,W1(p,M,h,w),p=c_(null,p,M,!0,I,w)):(p.tag=0,bn&&I&&j1(p),ir(null,p,T,w),p=p.child),p;case 16:M=p.elementType;e:{switch(h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps,T=M._init,M=T(M._payload),p.type=M,T=p.tag=k4(M),h=Fi(M,h),T){case 0:p=l_(null,p,M,h,w);break e;case 1:p=Qb(null,p,M,h,w);break e;case 11:p=jb(null,p,M,h,w);break e;case 14:p=Jb(null,p,M,Fi(M.type,h),w);break e}throw Error(o(306,M,""))}return p;case 0:return M=p.type,T=p.pendingProps,T=p.elementType===M?T:Fi(M,T),l_(h,p,M,T,w);case 1:return M=p.type,T=p.pendingProps,T=p.elementType===M?T:Fi(M,T),Qb(h,p,M,T,w);case 3:e:{if(Zb(p),h===null)throw Error(o(387));M=p.pendingProps,I=p.memoizedState,T=I.element,sb(h,p),Wm(p,M,null,w);var ee=p.memoizedState;if(M=ee.element,ce&&I.isDehydrated)if(I={element:M,isDehydrated:!1,cache:ee.cache,transitions:ee.transitions},p.updateQueue.baseState=I,p.memoizedState=I,p.flags&256){T=Error(o(423)),p=qb(h,p,M,w,T);break e}else if(M!==T){T=Error(o(424)),p=qb(h,p,M,w,T);break e}else for(ce&&(Br=ue(p.stateNode.containerInfo),Ir=p,bn=!0,Cs=null,kh=!1),w=yb(p,null,M,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(yu(),M===T){p=Fo(h,p,w);break e}ir(h,p,M,w)}p=p.child}return p;case 5:return _b(p),h===null&&Y1(p),M=p.type,T=p.pendingProps,I=h!==null?h.memoizedProps:null,ee=T.children,ne(M,T)?ee=null:I!==null&&ne(M,I)&&(p.flags|=32),Kb(h,p),ir(h,p,ee,w),p.child;case 6:return h===null&&Y1(p),null;case 13:return $b(h,p,w);case 4:return Q1(p,p.stateNode.containerInfo),M=p.pendingProps,h===null?p.child=_u(p,null,M,w):ir(h,p,M,w),p.child;case 11:return M=p.type,T=p.pendingProps,T=p.elementType===M?T:Fi(M,T),jb(h,p,M,T,w);case 7:return ir(h,p,p.pendingProps,w),p.child;case 8:return ir(h,p,p.pendingProps.children,w),p.child;case 12:return ir(h,p,p.pendingProps.children,w),p.child;case 10:e:{if(M=p.type._context,T=p.pendingProps,I=p.memoizedProps,ee=T.value,Hm(p,M,ee),I!==null)if(Rr(I.value,ee)){if(I.children===T.children&&!Wn.current){p=Fo(h,p,w);break e}}else for(I=p.child,I!==null&&(I.return=p);I!==null;){var fe=I.dependencies;if(fe!==null){ee=I.child;for(var Pe=fe.firstContext;Pe!==null;){if(Pe.context===M){if(I.tag===1){Pe=Do(-1,w&-w),Pe.tag=2;var je=I.updateQueue;if(je!==null){je=je.shared;var rt=je.pending;rt===null?Pe.next=Pe:(Pe.next=rt.next,rt.next=Pe),je.pending=Pe}}I.lanes|=w,Pe=I.alternate,Pe!==null&&(Pe.lanes|=w),qn(I.return,w,p),fe.lanes|=w;break}Pe=Pe.next}}else if(I.tag===10)ee=I.type===p.type?null:I.child;else if(I.tag===18){if(ee=I.return,ee===null)throw Error(o(341));ee.lanes|=w,fe=ee.alternate,fe!==null&&(fe.lanes|=w),qn(ee,w,p),ee=I.sibling}else ee=I.child;if(ee!==null)ee.return=I;else for(ee=I;ee!==null;){if(ee===p){ee=null;break}if(I=ee.sibling,I!==null){I.return=ee.return,ee=I;break}ee=ee.return}I=ee}ir(h,p,T.children,w),p=p.child}return p;case 9:return T=p.type,M=p.pendingProps.children,_i(p,w),T=un(T),M=M(T),p.flags|=1,ir(h,p,M,w),p.child;case 14:return M=p.type,T=Fi(M,p.pendingProps),T=Fi(M.type,T),Jb(h,p,M,T,w);case 15:return Xb(h,p,p.type,p.pendingProps,w);case 17:return M=p.type,T=p.pendingProps,T=p.elementType===M?T:Fi(M,T),h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,jn(M)?(h=!0,qs(p)):h=!1,_i(p,w),ub(p,M,T),W1(p,M,T,w),c_(null,p,M,!0,h,w);case 19:return i2(h,p,w);case 22:return Yb(h,p,w)}throw Error(o(156,p.tag))};function b2(h,p){return Bo(h,p)}function O4(h,p,w,M){this.tag=h,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(h,p,w,M){return new O4(h,p,w,M)}function I_(h){return h=h.prototype,!(!h||!h.isReactComponent)}function k4(h){if(typeof h=="function")return I_(h)?1:0;if(h!=null){if(h=h.$$typeof,h===v)return 11;if(h===y)return 14}return 2}function Ba(h,p){var w=h.alternate;return w===null?(w=is(h.tag,p,h.key,h.mode),w.elementType=h.elementType,w.type=h.type,w.stateNode=h.stateNode,w.alternate=h,h.alternate=w):(w.pendingProps=p,w.type=h.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=h.flags&14680064,w.childLanes=h.childLanes,w.lanes=h.lanes,w.child=h.child,w.memoizedProps=h.memoizedProps,w.memoizedState=h.memoizedState,w.updateQueue=h.updateQueue,p=h.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=h.sibling,w.index=h.index,w.ref=h.ref,w}function Cg(h,p,w,M,T,I){var ee=2;if(M=h,typeof h=="function")I_(h)&&(ee=1);else if(typeof h=="string")ee=5;else e:switch(h){case u:return jl(w.children,T,I,p);case f:ee=8,T|=8;break;case d:return h=is(12,w,p,T|2),h.elementType=d,h.lanes=I,h;case _:return h=is(13,w,p,T),h.elementType=_,h.lanes=I,h;case x:return h=is(19,w,p,T),h.elementType=x,h.lanes=I,h;case A:return Eg(w,T,I,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case m:ee=10;break e;case g:ee=9;break e;case v:ee=11;break e;case y:ee=14;break e;case S:ee=16,M=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return p=is(ee,w,p,T),p.elementType=h,p.type=M,p.lanes=I,p}function jl(h,p,w,M){return h=is(7,h,M,p),h.lanes=w,h}function Eg(h,p,w,M){return h=is(22,h,M,p),h.elementType=A,h.lanes=w,h.stateNode={},h}function B_(h,p,w){return h=is(6,h,null,p),h.lanes=w,h}function D_(h,p,w){return p=is(4,h.children!==null?h.children:[],h.key,p),p.lanes=w,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function F4(h,p,w,M,T){this.tag=p,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ye,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fu(0),this.expirationTimes=fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.identifierPrefix=M,this.onRecoverableError=T,ce&&(this.mutableSourceEagerHydrationData=null)}function T2(h,p,w,M,T,I,ee,fe,Pe){return h=new F4(h,p,w,fe,Pe),p===1?(p=1,I===!0&&(p|=8)):p=0,I=is(3,null,null,p),h.current=I,I.stateNode=h,I.memoizedState={element:M,isDehydrated:w,cache:null,transitions:null},H1(I),h}function P2(h){if(!h)return $i;h=h._reactInternals;e:{if(R(h)!==h||h.tag!==1)throw Error(o(170));var p=h;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(jn(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(h.tag===1){var w=h.type;if(jn(w))return cu(h,w,p)}return p}function R2(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=G(p),h===null?null:h.stateNode}function I2(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var w=h.retryLane;h.retryLane=w!==0&&w<p?w:p}}function L_(h,p){I2(h,p),(h=h.alternate)&&I2(h,p)}function U4(h){return h=G(h),h===null?null:h.stateNode}function N4(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var p=rr();ns(h,134217728,p),L_(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=rr(),w=Ra(h);ns(h,w,p),L_(h,w)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var p=h.stateNode;if(p.current.memoizedState.isDehydrated){var w=Ro(p.pendingLanes);w!==0&&(eo(p,w|1),mr(p,En()),!(Lt&6)&&(Cu(),dr()))}break;case 13:var M=rr();_2(function(){return ns(h,1,M)}),L_(h,1)}},t.batchedUpdates=function(h,p){var w=Lt;Lt|=1;try{return h(p)}finally{Lt=w,Lt===0&&(Cu(),to&&dr())}},t.createComponentSelector=function(h){return{$$typeof:fg,value:h}},t.createContainer=function(h,p,w,M,T,I,ee){return T2(h,p,!1,null,w,M,T,I,ee)},t.createHasPseudoClassSelector=function(h){return{$$typeof:hg,value:h}},t.createHydrationContainer=function(h,p,w,M,T,I,ee,fe,Pe){return h=T2(w,M,!0,h,T,I,ee,fe,Pe),h.context=P2(null),w=h.current,M=rr(),T=Ra(w),I=Do(M,T),I.callback=p??null,ba(w,I),h.current.lanes=T,$s(h,T,M),mr(h,M),h},t.createPortal=function(h,p,w){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:M==null?null:""+M,children:h,containerInfo:p,implementation:w}},t.createRoleSelector=function(h){return{$$typeof:dg,value:h}},t.createTestNameSelector=function(h){return{$$typeof:pg,value:h}},t.createTextSelector=function(h){return{$$typeof:mg,value:h}},t.deferredUpdates=function(h){var p=Ft,w=Jn.transition;try{return Jn.transition=null,Ft=16,h()}finally{Ft=p,Jn.transition=w}},t.discreteUpdates=function(h,p,w,M,T){var I=Ft,ee=Jn.transition;try{return Jn.transition=null,Ft=1,h(p,w,M,T)}finally{Ft=I,Jn.transition=ee,Lt===0&&Cu()}},t.findAllNodes=x_,t.findBoundingRects=function(h,p){if(!Le)throw Error(o(363));p=x_(h,p),h=[];for(var w=0;w<p.length;w++)h.push(F(p[w]));for(p=h.length-1;0<p;p--){w=h[p];for(var M=w.x,T=M+w.width,I=w.y,ee=I+w.height,fe=p-1;0<=fe;fe--)if(p!==fe){var Pe=h[fe],je=Pe.x,rt=je+Pe.width,Ct=Pe.y,ft=Ct+Pe.height;if(M>=je&&I>=Ct&&T<=rt&&ee<=ft){h.splice(p,1);break}else if(M!==je||w.width!==Pe.width||ft<I||Ct>ee){if(!(I!==Ct||w.height!==Pe.height||rt<M||je>T)){je>M&&(Pe.width+=je-M,Pe.x=M),rt<T&&(Pe.width=T-je),h.splice(p,1);break}}else{Ct>I&&(Pe.height+=Ct-I,Pe.y=I),ft<ee&&(Pe.height=ee-Ct),h.splice(p,1);break}}}return h},t.findHostInstance=R2,t.findHostInstanceWithNoPortals=function(h){return h=O(h),h=h!==null?k(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return R2(h)},t.flushControlled=function(h){var p=Lt;Lt|=1;var w=Jn.transition,M=Ft;try{Jn.transition=null,Ft=1,h()}finally{Ft=M,Jn.transition=w,Lt=p,Lt===0&&(Cu(),dr())}},t.flushPassiveEffects=Wl,t.flushSync=_2,t.focusWithin=function(h,p){if(!Le)throw Error(o(363));for(h=v_(h),p=g2(h,p),p=Array.from(p),h=0;h<p.length;){var w=p[h++];if(!$(w)){if(w.tag===5&&Se(w.stateNode))return!0;for(w=w.child;w!==null;)p.push(w),w=w.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ft},t.getFindAllNodesFailureDescription=function(h,p){if(!Le)throw Error(o(363));var w=0,M=[];h=[v_(h),0];for(var T=0;T<h.length;){var I=h[T++],ee=h[T++],fe=p[ee];if((I.tag!==5||!$(I))&&(y_(I,fe)&&(M.push(__(fe)),ee++,ee>w&&(w=ee)),ee<p.length))for(I=I.child;I!==null;)h.push(I,ee),I=I.sibling}if(w<p.length){for(h=[];w<p.length;w++)h.push(__(p[w]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return te(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:U4,findFiberByHostInstance:h.findFiberByHostInstance||N4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{Ca=p.inject(h),Pr=p}catch{}h=!!p.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,p,w,M){if(!Le)throw Error(o(363));h=x_(h,p);var T=Te(h,w,M).disconnect;return{disconnect:function(){T()}}},t.registerMutableSourceForHydration=function(h,p){var w=p._getVersion;w=w(p._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[p,w]:h.mutableSourceEagerHydrationData.push(p,w)},t.runWithPriority=function(h,p){var w=Ft;try{return Ft=h,p()}finally{Ft=w}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,p,w,M){var T=p.current,I=rr(),ee=Ra(T);return w=P2(w),p.context===null?p.context=w:p.pendingContext=w,p=Do(I,ee),p.payload={element:h},M=M===void 0?null:M,M!==null&&(p.callback=M),ba(T,p),h=ns(T,ee,I),h!==null&&Vm(h,T,ee),ee},t};hk.exports=mj;var gj=hk.exports;const vj=Zc(gj);function mk(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}const Yo=[];function gk(n,e,t=!1,i={}){for(const s of Yo)if(mk(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,promise:n(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=Yo.indexOf(r);s!==-1&&Yo.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(Yo.push(r),!t)throw r.promise}const iE=(n,e,t)=>gk(n,e,!1,t),vk=(n,e,t)=>void gk(n,e,!0,t),yk=n=>{if(n===void 0||n.length===0)Yo.splice(0,Yo.length);else{const e=Yo.find(t=>mk(n,t.keys,t.equal));if(e){const t=Yo.indexOf(e);t!==-1&&Yo.splice(t,1)}}},rE={},Mm=n=>void Object.assign(rE,n);function yj(n,e){function t(u,{args:f=[],attach:d,...m},g){let v=`${u[0].toUpperCase()}${u.slice(1)}`,_;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=m.object;_=ef(x,{type:u,root:g,attach:d,primitive:!0})}else{const x=rE[v];if(!x)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");_=ef(new x(...f),{type:u,root:g,attach:d,memoizedProps:{args:f}})}return _.__r3f.attach===void 0&&(_ instanceof Mt?_.__r3f.attach="geometry":_ instanceof si&&(_.__r3f.attach="material")),v!=="inject"&&Wx(_,m),_}function i(u,f){let d=!1;if(f){var m,g;(m=f.__r3f)!=null&&m.attach?Vx(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),d=!0),d||(g=u.__r3f)==null||g.objects.push(f),f.__r3f||ef(f,{}),f.__r3f.parent=u,mA(f),tf(f)}}function r(u,f,d){let m=!1;if(f){var g,v;if((g=f.__r3f)!=null&&g.attach)Vx(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"});const _=u.children.filter(y=>y!==f),x=_.indexOf(d);u.children=[..._.slice(0,x),f,..._.slice(x)],m=!0}m||(v=u.__r3f)==null||v.objects.push(f),f.__r3f||ef(f,{}),f.__r3f.parent=u,mA(f),tf(f)}}function s(u,f,d=!1){u&&[...u].forEach(m=>o(f,m,d))}function o(u,f,d){if(f){var m,g,v;if(f.__r3f&&(f.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(A=>A!==f)),(g=f.__r3f)!=null&&g.attach)SP(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var _;u.remove(f),(_=f.__r3f)!=null&&_.root&&Cj(f.__r3f.root,f)}const y=(v=f.__r3f)==null?void 0:v.primitive,S=d===void 0?f.dispose!==null&&!y:d;if(!y){var x;s((x=f.__r3f)==null?void 0:x.objects,f,S),s(f.children,f,S)}f.__r3f&&(delete f.__r3f.root,delete f.__r3f.objects,delete f.__r3f.handlers,delete f.__r3f.memoizedProps,y||delete f.__r3f),S&&f.dispose&&f.type!=="Scene"&&dA.unstable_scheduleCallback(dA.unstable_IdlePriority,()=>{try{f.dispose()}catch{}}),tf(u)}}function a(u,f,d,m){var g;const v=(g=u.__r3f)==null?void 0:g.parent;if(!v)return;const _=t(f,d,u.__r3f.root);if(u.children){for(const x of u.children)x.__r3f&&i(_,x);u.children=u.children.filter(x=>!x.__r3f)}u.__r3f.objects.forEach(x=>i(_,x)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(v,u),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(v,_),_.raycast&&_.__r3f.eventCount&&_.__r3f.root.getState().internal.interaction.push(_),[m,m.alternate].forEach(x=>{x!==null&&(x.stateNode=_,x.ref&&(typeof x.ref=="function"?x.ref(_):x.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:vj({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const d=u.getState().scene;d.__r3f&&(d.__r3f.root=u,i(d,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,d)=>{if(!f||!d)return;const m=u.getState().scene;m.__r3f&&r(m,f,d)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,d,m){if(u.__r3f.primitive&&m.object&&m.object!==u)return[!0];{const{args:g=[],children:v,..._}=m,{args:x=[],children:y,...S}=d;if(!Array.isArray(g))throw new Error("R3F: the args prop must be an array!");if(g.some((C,b)=>C!==x[b]))return[!0];const A=Ck(u,_,S,!0);return A.changes.length?[!1,A]:null}},commitUpdate(u,[f,d],m,g,v,_){f?a(u,m,v,_):Wx(u,d)},commitMount(u,f,d,m){var g;const v=(g=u.__r3f)!=null?g:{};u.raycast&&v.handlers&&v.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>ef(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:d,parent:m}=(f=u.__r3f)!=null?f:{};d&&m&&SP(m,u,d),u.isObject3D&&(u.visible=!1),tf(u)},unhideInstance(u,f){var d;const{attach:m,parent:g}=(d=u.__r3f)!=null?d:{};m&&g&&Vx(g,u,m),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),tf(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():_f.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Sn.fun(performance.now)?performance.now:Sn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Sn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Sn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Wx}}var vP,yP;const Hx=n=>"colorSpace"in n||"outputColorSpace"in n,_k=()=>{var n;return(n=rE.ColorManagement)!=null?n:null},xk=n=>n&&n.isOrthographicCamera,_j=n=>n&&n.hasOwnProperty("current"),Cm=typeof window<"u"&&((vP=window.document)!=null&&vP.createElement||((yP=window.navigator)==null?void 0:yP.product)==="ReactNative")?L.useLayoutEffect:L.useEffect;function Sk(n){const e=L.useRef(n);return Cm(()=>void(e.current=n),[n]),e}function xj({set:n}){return Cm(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class wk extends L.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}wk.getDerivedStateFromError=()=>({error:!0});const Ak="__default",_P=new Map,Sj=n=>n&&!!n.memoized&&!!n.changes;function Mk(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const _d=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Sn={obj:n=>n===Object(n)&&!Sn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Sn.str(n)||Sn.num(n))return n===e;const s=Sn.obj(n);if(s&&i==="reference")return n===e;const o=Sn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!Sn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(Sn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function wj(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function Aj(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function ef(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function pA(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const xP=/-\d+$/;function Vx(n,e,t){if(Sn.str(t)){if(xP.test(t)){const s=t.replace(xP,""),{target:o,key:a}=pA(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=pA(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function SP(n,e,t){var i,r;if(Sn.str(t)){const{target:s,key:o}=pA(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function Ck(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){var u;const f=(u=n==null?void 0:n.__r3f)!=null?u:{},d=Object.entries(r),m=[];if(c){const v=Object.keys(l);for(let _=0;_<v.length;_++)r.hasOwnProperty(v[_])||d.unshift([v[_],Ak+"remove"])}d.forEach(([v,_])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&v==="object"||Sn.equ(_,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return m.push([v,_,!0,[]]);let y=[];v.includes("-")&&(y=v.split("-")),m.push([v,_,!1,y]);for(const S in r){const A=r[S];S.startsWith(`${v}-`)&&m.push([S,A,!1,S.split("-")])}});const g={...r};return f.memoizedProps&&f.memoizedProps.args&&(g.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(g.attach=f.memoizedProps.attach),{memoized:g,changes:m}}function Wx(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:c}=Sj(e)?e:Ck(n,e),u=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let d=0;d<c.length;d++){let[m,g,v,_]=c[d];if(Hx(n)){const A="srgb",C="srgb-linear";m==="encoding"?(m="colorSpace",g=g===3001?A:C):m==="outputEncoding"&&(m="outputColorSpace",g=g===3001?A:C)}let x=n,y=x[m];if(_.length&&(y=_.reduce((S,A)=>S[A],n),!(y&&y.set))){const[S,...A]=_.reverse();x=A.reverse().reduce((C,b)=>C[b],n),m=S}if(g===Ak+"remove")if(x.constructor){let S=_P.get(x.constructor);S||(S=new x.constructor,_P.set(x.constructor,S)),g=S[m]}else g=0;if(v)g?s.handlers[m]=g:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(y&&y.set&&(y.copy||y instanceof Rc)){if(Array.isArray(g))y.fromArray?y.fromArray(g):y.set(...g);else if(y.copy&&g&&g.constructor&&y.constructor===g.constructor)y.copy(g);else if(g!==void 0){const S=y instanceof Je;!S&&y.setScalar?y.setScalar(g):y instanceof Rc&&g instanceof Rc?y.mask=g.mask:y.set(g),!_k()&&!a.linear&&S&&y.convertSRGBToLinear()}}else if(x[m]=g,x[m]instanceof Cn&&x[m].format===_r&&x[m].type===ua){const S=x[m];Hx(S)&&Hx(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}tf(n)}if(s.parent&&a.internal&&n.raycast&&u!==s.eventCount){const d=a.internal.interaction.indexOf(n);d>-1&&a.internal.interaction.splice(d,1),s.eventCount&&a.internal.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(r=n.__r3f)!=null&&r.parent&&mA(n),n}function tf(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function mA(n){n.onUpdate==null||n.onUpdate(n)}function Ek(n,e){n.manual||(xk(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function P0(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Mj(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return _f.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return _f.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return _f.ContinuousEventPriority;default:return _f.DefaultEventPriority}}function bk(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Cj(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{bk(t.capturedMap,e,i,r)})}function Ej(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),f=new Set,d=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let x=0;x<m.length;x++){const y=_d(m[x]);y&&(y.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(x){const y=_d(x);if(!y||!y.events.enabled||y.raycaster.camera===null)return[];if(y.raycaster.camera===void 0){var S;y.events.compute==null||y.events.compute(l,y,(S=y.previousRoot)==null?void 0:S.getState()),y.raycaster.camera===void 0&&(y.raycaster.camera=null)}return y.raycaster.camera?y.raycaster.intersectObject(x,!0):[]}let v=m.flatMap(g).sort((x,y)=>{const S=_d(x.object),A=_d(y.object);return!S||!A?x.distance-y.distance:A.events.priority-S.events.priority||x.distance-y.distance}).filter(x=>{const y=P0(x);return f.has(y)?!1:(f.add(y),!0)});u.events.filter&&(v=u.events.filter(v,u));for(const x of v){let y=x.object;for(;y;){var _;(_=y.__r3f)!=null&&_.eventCount&&d.push({...x,eventObject:y}),y=y.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let x of u.internal.capturedMap.get(l.pointerId).values())f.has(P0(x.intersection))||d.push(x.intersection);return d}function r(l,c,u,f){const d=n.getState();if(l.length){const m={stopped:!1};for(const g of l){const v=_d(g.object)||d,{raycaster:_,pointer:x,camera:y,internal:S}=v,A=new j(x.x,x.y,0).unproject(y),C=B=>{var O,G;return(O=(G=S.capturedMap.get(B))==null?void 0:G.has(g.eventObject))!=null?O:!1},b=B=>{const O={intersection:g,target:c.target};S.capturedMap.has(B)?S.capturedMap.get(B).set(g.eventObject,O):S.capturedMap.set(B,new Map([[g.eventObject,O]])),c.target.setPointerCapture(B)},P=B=>{const O=S.capturedMap.get(B);O&&bk(S.capturedMap,g.eventObject,O,B)};let E={};for(let B in c){let O=c[B];typeof O!="function"&&(E[B]=O)}let R={...g,...E,pointer:x,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:A,ray:_.ray,camera:y,stopPropagation(){const B="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!B||B.has(g.eventObject))&&(R.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(O=>O.eventObject===g.eventObject))){const O=l.slice(0,l.indexOf(g));s([...O,g])}},target:{hasPointerCapture:C,setPointerCapture:b,releasePointerCapture:P},currentTarget:{hasPointerCapture:C,setPointerCapture:b,releasePointerCapture:P},nativeEvent:c};if(f(R),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const d=u.eventObject.__r3f,m=d==null?void 0:d.handlers;if(c.hovered.delete(P0(u)),d!=null&&d.eventCount){const g={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:d}=n.getState();d.lastEvent.current=u;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(u,m?t:void 0),x=g?e(u):0;l==="onPointerDown"&&(d.initialClick=[u.offsetX,u.offsetY],d.initialHits=_.map(S=>S.eventObject)),g&&!_.length&&x<=2&&(o(u,d.interaction),f&&f(u)),m&&s(_);function y(S){const A=S.eventObject,C=A.__r3f,b=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(m){if(b.onPointerOver||b.onPointerEnter||b.onPointerOut||b.onPointerLeave){const P=P0(S),E=d.hovered.get(P);E?E.stopped&&S.stopPropagation():(d.hovered.set(P,S),b.onPointerOver==null||b.onPointerOver(S),b.onPointerEnter==null||b.onPointerEnter(S))}b.onPointerMove==null||b.onPointerMove(S)}else{const P=b[l];P?(!g||d.initialHits.includes(A))&&(o(u,d.interaction.filter(E=>!d.initialHits.includes(E))),P(S)):g&&d.initialHits.includes(A)&&o(u,d.interaction.filter(E=>!d.initialHits.includes(E)))}}r(_,u,x,y)}}return{handlePointer:a}}const bj=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Tk=n=>!!(n!=null&&n.render),sE=L.createContext(null),Tj=(n,e)=>{const t=fk((a,l)=>{const c=new j,u=new j,f=new j;function d(x=l().camera,y=u,S=l().size){const{width:A,height:C,top:b,left:P}=S,E=A/C;y instanceof j?f.copy(y):f.set(...y);const R=x.getWorldPosition(c).distanceTo(f);if(xk(x))return{width:A/x.zoom,height:C/x.zoom,top:b,left:P,factor:1,distance:R,aspect:E};{const B=x.fov*Math.PI/180,O=2*Math.tan(B/2)*R,G=O*(A/C);return{width:G,height:O,top:b,left:P,factor:A/G,distance:R,aspect:E}}}let m;const g=x=>a(y=>({performance:{...y.performance,current:x}})),v=new Ne;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(x=1)=>n(l(),x),advance:(x,y)=>e(x,y,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new ZC,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=l();m&&clearTimeout(m),x.performance.current!==x.performance.min&&g(x.performance.min),m=setTimeout(()=>g(l().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:x=>a(y=>({...y,events:{...y.events,...x}})),setSize:(x,y,S,A,C)=>{const b=l().camera,P={width:x,height:y,top:A||0,left:C||0,updateStyle:S};a(E=>({size:P,viewport:{...E.viewport,...d(b,u,P)}}))},setDpr:x=>a(y=>{const S=Mk(x);return{viewport:{...y.viewport,dpr:S,initialDpr:y.viewport.initialDpr||S}}}),setFrameloop:(x="always")=>{const y=l().clock;y.stop(),y.elapsedTime=0,x!=="never"&&(y.start(),y.elapsedTime=0),a(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:L.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,y,S)=>{const A=l().internal;return A.priority=A.priority+(y>0?1:0),A.subscribers.push({ref:x,priority:y,store:S}),A.subscribers=A.subscribers.sort((C,b)=>C.priority-b.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(y>0?1:0),C.subscribers=C.subscribers.filter(b=>b.ref!==x))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=t.getState();if(l!==r||c.dpr!==s){var d;r=l,s=c.dpr,Ek(a,l),u.setPixelRatio(c.dpr);const m=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function Pj(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let R0,Pk=new Set,Rj=new Set,Ij=new Set;const Bj=n=>Pj(n,Pk);function jx(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function xd(n,e){switch(n){case"before":return jx(Pk,e);case"after":return jx(Rj,e);case"tail":return jx(Ij,e)}}let Jx,Xx;function Yx(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Jx=e.internal.subscribers,R0=0;R0<Jx.length;R0++)Xx=Jx[R0],Xx.ref.current(Xx.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Dj(n){let e=!1,t,i,r;function s(l){i=requestAnimationFrame(s),e=!0,t=0,xd("before",l);for(const u of n.values()){var c;r=u.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((c=r.gl.xr)!=null&&c.isPresenting)&&(t+=Yx(l,r))}if(xd("after",l),t===0)return xd("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,c=1){var u;if(!l)return n.forEach(f=>o(f.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,f){if(c&&xd("before",l),u)Yx(l,u,f);else for(const d of n.values())Yx(l,d.store.getState());c&&xd("after",l)}return{loop:s,invalidate:o,advance:a}}function oE(){const n=L.useContext(sE);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Yn(n=t=>t,e){return oE()(n,e)}function Yr(n,e=0){const t=oE(),i=t.getState().internal.subscribe,r=Sk(n);return Cm(()=>i(r,e,t),[e,i,t]),null}function Rk(n,e){return function(t,...i){const r=new t;return n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,wj(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function Mh(n,e,t,i){const r=Array.isArray(e)?e:[e],s=iE(Rk(t,i),[n,...r],{equal:Sn.equ});return Array.isArray(e)?s:s[0]}Mh.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return vk(Rk(t),[n,...i])};Mh.clear=function(n,e){const t=Array.isArray(e)?e:[e];return yk([n,...t])};const th=new Map,{invalidate:wP,advance:AP}=Dj(th),{reconciler:jp,applyProps:cc}=yj(th,Mj),ju={objects:"shallow",strict:!1},Lj=(n,e)=>{const t=typeof n=="function"?n(e):n;return Tk(t)?t:new CC({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Oj(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function kj(n){const e=th.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||Tj(wP,AP),o=t||jp.createContainer(s,_f.ConcurrentRoot,null,!1,null,"",r,null);e||th.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:d,scene:m,events:g,onCreated:v,shadows:_=!1,linear:x=!1,flat:y=!1,legacy:S=!1,orthographic:A=!1,frameloop:C="always",dpr:b=[1,2],performance:P,raycaster:E,camera:R,onPointerMissed:B}=u,O=s.getState(),G=O.gl;O.gl||O.set({gl:G=Lj(f,n)});let N=O.raycaster;N||O.set({raycaster:N=new tE});const{params:k,...X}=E||{};if(Sn.equ(X,N,ju)||cc(N,{...X}),Sn.equ(k,N.params,ju)||cc(N,{params:{...N.params,...k}}),!O.camera||O.camera===c&&!Sn.equ(c,R,ju)){c=R;const U=R instanceof um,V=U?R:A?new gh(0,0,0,0,.1,1e3):new fi(75,0,.1,1e3);U||(V.position.z=5,R&&cc(V,R),!O.camera&&!(R!=null&&R.rotation)&&V.lookAt(0,0,0)),O.set({camera:V})}if(!O.scene){let U;m instanceof Np?U=m:(U=new Np,m&&cc(U,m)),O.set({scene:ef(U)})}if(!O.xr){const U=(K,ne)=>{const z=s.getState();z.frameloop!=="never"&&AP(K,!0,z,ne)},V=()=>{const K=s.getState();K.gl.xr.enabled=K.gl.xr.isPresenting,K.gl.xr.setAnimationLoop(K.gl.xr.isPresenting?U:null),K.gl.xr.isPresenting||wP(K)},Z={connect(){const K=s.getState().gl;K.xr.addEventListener("sessionstart",V),K.xr.addEventListener("sessionend",V)},disconnect(){const K=s.getState().gl;K.xr.removeEventListener("sessionstart",V),K.xr.removeEventListener("sessionend",V)}};G.xr&&Z.connect(),O.set({xr:Z})}if(G.shadowMap){const U=G.shadowMap.enabled,V=G.shadowMap.type;if(G.shadowMap.enabled=!!_,Sn.boo(_))G.shadowMap.type=ip;else if(Sn.str(_)){var te;const Z={basic:xL,percentage:Vy,soft:ip,variance:yc};G.shadowMap.type=(te=Z[_])!=null?te:ip}else Sn.obj(_)&&Object.assign(G.shadowMap,_);(U!==G.shadowMap.enabled||V!==G.shadowMap.type)&&(G.shadowMap.needsUpdate=!0)}const oe=_k();oe&&("enabled"in oe?oe.enabled=!S:"legacyMode"in oe&&(oe.legacyMode=S)),cc(G,{outputEncoding:x?3e3:3001,toneMapping:y?Vs:pC}),O.legacy!==S&&O.set(()=>({legacy:S})),O.linear!==x&&O.set(()=>({linear:x})),O.flat!==y&&O.set(()=>({flat:y})),f&&!Sn.fun(f)&&!Tk(f)&&!Sn.equ(f,G,ju)&&cc(G,f),g&&!O.events.handlers&&O.set({events:g(s)});const Q=Oj(n,d);return Sn.equ(Q,O.size,ju)||O.setSize(Q.width,Q.height,Q.updateStyle,Q.top,Q.left),b&&O.viewport.dpr!==Mk(b)&&O.setDpr(b),O.frameloop!==C&&O.setFrameloop(C),O.onPointerMissed||O.set({onPointerMissed:B}),P&&!Sn.equ(P,O.performance,ju)&&O.set(U=>({performance:{...U.performance,...P}})),a=v,l=!0,this},render(u){return l||this.configure(),jp.updateContainer(L.createElement(Fj,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){Ik(n)}}}function Fj({store:n,children:e,onCreated:t,rootElement:i}){return Cm(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),L.createElement(sE.Provider,{value:n},e)}function Ik(n,e){const t=th.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),jp.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),Aj(r),th.delete(n),e&&e(n)}catch{}},500)})}}function Uj(n,e,t){return L.createElement(Nj,{key:e.uuid,children:n,container:e,state:t})}function Nj({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=oE(),[a]=L.useState(()=>new tE),[l]=L.useState(()=>new Ne),c=L.useCallback((f,d)=>{const m={...f};Object.keys(f).forEach(v=>{(bj.includes(v)||f[v]!==d[v]&&d[v])&&delete m[v]});let g;if(d&&r){const v=d.camera;g=f.viewport.getCurrentViewport(v,new j,r),v!==f.camera&&Ek(v,r)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...d==null?void 0:d.events,...i},size:{...f.size,...r},viewport:{...f.viewport,...g},...s}},[n]),[u]=L.useState(()=>{const f=o.getState();return fk((m,g)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...i},size:{...f.size,...r},...s,set:m,get:g,setEvents:v=>m(_=>({..._,events:{..._.events,...v}}))}))});return L.useEffect(()=>{const f=o.subscribe(d=>u.setState(m=>c(d,m)));return()=>{f(),u.destroy()}},[]),L.useEffect(()=>{u.setState(f=>c(o.getState(),f))},[c]),L.createElement(L.Fragment,null,jp.createPortal(L.createElement(sE.Provider,{value:u},e),u,null))}jp.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:L.version});function gA(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?i=setTimeout(l,e-u):(i=null,t||(a=n.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var u=t&&!i;return i||(i=setTimeout(l,e)),u&&(a=n.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}gA.debounce=gA;var zj=gA;const MP=Zc(zj);function Gj(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=L.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=L.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,f=L.useRef(!1);L.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,m,g]=L.useMemo(()=>{const y=()=>{if(!l.current.element)return;const{left:S,top:A,width:C,height:b,bottom:P,right:E,x:R,y:B}=l.current.element.getBoundingClientRect(),O={left:S,top:A,width:C,height:b,bottom:P,right:E,x:R,y:B};l.current.element instanceof HTMLElement&&r&&(O.height=l.current.element.offsetHeight,O.width=l.current.element.offsetWidth),Object.freeze(O),f.current&&!jj(l.current.lastBounds,O)&&a(l.current.lastBounds=O)};return[y,u?MP(y,u):y,c?MP(y,c):y]},[a,r,c,u]);function v(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new s(g),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(y=>y.addEventListener("scroll",g,{capture:!0,passive:!0})))}const x=y=>{!y||y===l.current.element||(v(),l.current.element=y,l.current.scrollContainers=Bk(y),_())};return Vj(g,!!t),Hj(m),L.useEffect(()=>{v(),_()},[t,g,m]),L.useEffect(()=>v,[]),[x,o,d]}function Hj(n){L.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Vj(n,e){L.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Bk(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...Bk(n.parentElement)]}const Wj=["x","y","top","bottom","left","right","width","height"],jj=(n,e)=>Wj.every(t=>n[t]===e[t]);var Jj=Object.defineProperty,Xj=Object.defineProperties,Yj=Object.getOwnPropertyDescriptors,CP=Object.getOwnPropertySymbols,Kj=Object.prototype.hasOwnProperty,Qj=Object.prototype.propertyIsEnumerable,EP=(n,e,t)=>e in n?Jj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bP=(n,e)=>{for(var t in e||(e={}))Kj.call(e,t)&&EP(n,t,e[t]);if(CP)for(var t of CP(e))Qj.call(e,t)&&EP(n,t,e[t]);return n},Zj=(n,e)=>Xj(n,Yj(e));function Dk(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=Dk(i,e,t);if(r)return r;i=e?null:i.sibling}}function Lk(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const aE=Lk(L.createContext(null));class Ok extends L.Component{render(){return L.createElement(aE.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:TP,ReactCurrentDispatcher:PP}=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function qj(){const n=L.useContext(aE);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=L.useId();return L.useMemo(()=>{for(const i of[TP==null?void 0:TP.current,n,n==null?void 0:n.alternate]){if(!i)continue;const r=Dk(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function $j(){var n,e;const t=qj(),[i]=L.useState(()=>new Map);i.clear();let r=t;for(;r;){const s=(n=r.type)==null?void 0:n._context;s&&s!==aE&&!i.has(s)&&i.set(s,(e=PP==null?void 0:PP.current)==null?void 0:e.readContext(Lk(s))),r=r.return}return i}function eJ(){const n=$j();return L.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>L.createElement(e,null,L.createElement(t.Provider,Zj(bP({},i),{value:n.get(t)}))),e=>L.createElement(Ok,bP({},e))),[n])}const Kx={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function tJ(n){const{handlePointer:e}=Ej(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Kx).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=Kx[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=Kx[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const nJ=L.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=tJ,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:d,orthographic:m,frameloop:g,dpr:v,performance:_,raycaster:x,camera:y,onPointerMissed:S,onCreated:A,...C},b){L.useMemo(()=>Mm(nE),[]);const P=eJ(),[E,R]=Gj({scroll:!0,debounce:{scroll:50,resize:0},...i}),B=L.useRef(null),O=L.useRef(null);L.useImperativeHandle(b,()=>B.current);const G=Sk(S),[N,k]=L.useState(!1),[X,te]=L.useState(!1);if(N)throw N;if(X)throw X;const oe=L.useRef(null);Cm(()=>{const J=B.current;R.width>0&&R.height>0&&J&&(oe.current||(oe.current=kj(J)),oe.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:d,orthographic:m,frameloop:g,dpr:v,performance:_,raycaster:x,camera:y,size:R,onPointerMissed:(...Q)=>G.current==null?void 0:G.current(...Q),onCreated:Q=>{Q.events.connect==null||Q.events.connect(a?_j(a)?a.current:a:O.current),l&&Q.setEvents({compute:(U,V)=>{const Z=U[l+"X"],K=U[l+"Y"];V.pointer.set(Z/V.size.width*2-1,-(K/V.size.height)*2+1),V.raycaster.setFromCamera(V.pointer,V.camera)}}),A==null||A(Q)}}),oe.current.render(L.createElement(P,null,L.createElement(wk,{set:te},L.createElement(L.Suspense,{fallback:L.createElement(xj,{set:k})},e)))))}),L.useEffect(()=>{const J=B.current;if(J)return()=>Ik(J)},[]);const H=a?"none":"auto";return L.createElement("div",js({ref:O,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:H,...r}},C),L.createElement("div",{ref:E,style:{width:"100%",height:"100%"}},L.createElement("canvas",{ref:B,style:{display:"block"}},t)))}),kk=L.forwardRef(function(e,t){return L.createElement(Ok,null,L.createElement(nJ,js({},e,{ref:t})))});let lE=bm();const At=n=>Em(n,lE);let cE=bm();At.write=n=>Em(n,cE);let l1=bm();At.onStart=n=>Em(n,l1);let uE=bm();At.onFrame=n=>Em(n,uE);let fE=bm();At.onFinish=n=>Em(n,fE);let Lf=[];At.setTimeout=(n,e)=>{let t=At.now()+e,i=()=>{let s=Lf.findIndex(o=>o.cancel==i);~s&&Lf.splice(s,1),tl-=~s?1:0},r={time:t,handler:n,cancel:i};return Lf.splice(Fk(t),0,r),tl+=1,Uk(),r};let Fk=n=>~(~Lf.findIndex(e=>e.time>n)||~Lf.length);At.cancel=n=>{l1.delete(n),uE.delete(n),fE.delete(n),lE.delete(n),cE.delete(n)};At.sync=n=>{vA=!0,At.batchedUpdates(n),vA=!1};At.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,At.onStart(t)}return i.handler=n,i.cancel=()=>{l1.delete(t),e=null},i};let hE=typeof window<"u"?window.requestAnimationFrame:()=>{};At.use=n=>hE=n;At.now=typeof performance<"u"?()=>performance.now():Date.now;At.batchedUpdates=n=>n();At.catch=console.error;At.frameLoop="always";At.advance=()=>{At.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):zk()};let el=-1,tl=0,vA=!1;function Em(n,e){vA?(e.delete(n),n(0)):(e.add(n),Uk())}function Uk(){el<0&&(el=0,At.frameLoop!=="demand"&&hE(Nk))}function iJ(){el=-1}function Nk(){~el&&(hE(Nk),At.batchedUpdates(zk))}function zk(){let n=el;el=At.now();let e=Fk(el);if(e&&(Gk(Lf.splice(0,e),t=>t.handler()),tl-=e),!tl){iJ();return}l1.flush(),lE.flush(n?Math.min(64,el-n):16.667),uE.flush(),cE.flush(),fE.flush()}function bm(){let n=new Set,e=n;return{add(t){tl+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return tl-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,tl-=e.size,Gk(e,i=>i(t)&&n.add(i)),tl+=n.size,e=n)}}}function Gk(n,e){n.forEach(t=>{try{e(t)}catch(i){At.catch(i)}})}function yA(){}const rJ=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Qe={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function jo(n,e){if(Qe.arr(n)){if(!Qe.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}const sn=(n,e)=>n.forEach(e);function da(n,e,t){if(Qe.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}const vs=n=>Qe.und(n)?[]:Qe.arr(n)?n:[n];function ap(n,e){if(n.size){const t=Array.from(n);n.clear(),sn(t,e)}}const Hd=(n,...e)=>ap(n,t=>t(...e)),dE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let pE,Hk,hl=null,Vk=!1,mE=yA;const sJ=n=>{n.to&&(Hk=n.to),n.now&&(At.now=n.now),n.colors!==void 0&&(hl=n.colors),n.skipAnimation!=null&&(Vk=n.skipAnimation),n.createStringInterpolator&&(pE=n.createStringInterpolator),n.requestAnimationFrame&&At.use(n.requestAnimationFrame),n.batchedUpdates&&(At.batchedUpdates=n.batchedUpdates),n.willAdvance&&(mE=n.willAdvance),n.frameLoop&&(At.frameLoop=n.frameLoop)};var Mo=Object.freeze({__proto__:null,get createStringInterpolator(){return pE},get to(){return Hk},get colors(){return hl},get skipAnimation(){return Vk},get willAdvance(){return mE},assign:sJ});const lp=new Set;let ps=[],Qx=[],ly=0;const c1={get idle(){return!lp.size&&!ps.length},start(n){ly>n.priority?(lp.add(n),At.onStart(oJ)):(Wk(n),At(_A))},advance:_A,sort(n){if(ly)At.onFrame(()=>c1.sort(n));else{const e=ps.indexOf(n);~e&&(ps.splice(e,1),jk(n))}},clear(){ps=[],lp.clear()}};function oJ(){lp.forEach(Wk),lp.clear(),At(_A)}function Wk(n){ps.includes(n)||jk(n)}function jk(n){ps.splice(aJ(ps,e=>e.priority>n.priority),0,n)}function _A(n){const e=Qx;for(let t=0;t<ps.length;t++){const i=ps[t];ly=i.priority,i.idle||(mE(i),i.advance(n),i.idle||e.push(i))}return ly=0,Qx=ps,Qx.length=0,ps=e,ps.length>0}function aJ(n,e){const t=n.findIndex(e);return t<0?n.length:t}const lJ=(n,e,t)=>Math.min(Math.max(t,n),e),cJ={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ns="[-+]?\\d*\\.?\\d+",cy=Ns+"%";function u1(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}const uJ=new RegExp("rgb"+u1(Ns,Ns,Ns)),fJ=new RegExp("rgba"+u1(Ns,Ns,Ns,Ns)),hJ=new RegExp("hsl"+u1(Ns,cy,cy)),dJ=new RegExp("hsla"+u1(Ns,cy,cy,Ns)),pJ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,mJ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,gJ=/^#([0-9a-fA-F]{6})$/,vJ=/^#([0-9a-fA-F]{8})$/;function yJ(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=gJ.exec(n))?parseInt(e[1]+"ff",16)>>>0:hl&&hl[n]!==void 0?hl[n]:(e=uJ.exec(n))?(Ju(e[1])<<24|Ju(e[2])<<16|Ju(e[3])<<8|255)>>>0:(e=fJ.exec(n))?(Ju(e[1])<<24|Ju(e[2])<<16|Ju(e[3])<<8|BP(e[4]))>>>0:(e=pJ.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=vJ.exec(n))?parseInt(e[1],16)>>>0:(e=mJ.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=hJ.exec(n))?(RP(IP(e[1]),I0(e[2]),I0(e[3]))|255)>>>0:(e=dJ.exec(n))?(RP(IP(e[1]),I0(e[2]),I0(e[3]))|BP(e[4]))>>>0:null}function Zx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function RP(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=Zx(r,i,n+1/3),o=Zx(r,i,n),a=Zx(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Ju(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function IP(n){return(parseFloat(n)%360+360)%360/360}function BP(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function I0(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function DP(n){let e=yJ(n);if(e===null)return n;e=e||0;let t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}const Jp=(n,e,t)=>{if(Qe.fun(n))return n;if(Qe.arr(n))return Jp({range:n,output:e,extrapolate:t});if(Qe.str(n.output[0]))return pE(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=xJ(c,s);return _J(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function _J(n,e,t,i,r,s,o,a,l){let c=l?l(n):n;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>t){if(a==="identity")return c;a==="clamp"&&(c=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?c=-c:t===1/0?c=c-e:c=(c-e)/(t-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function xJ(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}const SJ=(n,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const i=t*n,r=e==="end"?Math.floor(i):Math.ceil(i);return lJ(0,1,r/n)},uy=1.70158,B0=uy*1.525,LP=uy+1,OP=2*Math.PI/3,kP=2*Math.PI/4.5,D0=n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,wJ={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>1-(1-n)*(1-n),easeInOutQuad:n=>n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2,easeInCubic:n=>n*n*n,easeOutCubic:n=>1-Math.pow(1-n,3),easeInOutCubic:n=>n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1-Math.pow(1-n,4),easeInOutQuart:n=>n<.5?8*n*n*n*n:1-Math.pow(-2*n+2,4)/2,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1-Math.pow(1-n,5),easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1-Math.pow(-2*n+2,5)/2,easeInSine:n=>1-Math.cos(n*Math.PI/2),easeOutSine:n=>Math.sin(n*Math.PI/2),easeInOutSine:n=>-(Math.cos(Math.PI*n)-1)/2,easeInExpo:n=>n===0?0:Math.pow(2,10*n-10),easeOutExpo:n=>n===1?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>n===0?0:n===1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2,easeInCirc:n=>1-Math.sqrt(1-Math.pow(n,2)),easeOutCirc:n=>Math.sqrt(1-Math.pow(n-1,2)),easeInOutCirc:n=>n<.5?(1-Math.sqrt(1-Math.pow(2*n,2)))/2:(Math.sqrt(1-Math.pow(-2*n+2,2))+1)/2,easeInBack:n=>LP*n*n*n-uy*n*n,easeOutBack:n=>1+LP*Math.pow(n-1,3)+uy*Math.pow(n-1,2),easeInOutBack:n=>n<.5?Math.pow(2*n,2)*((B0+1)*2*n-B0)/2:(Math.pow(2*n-2,2)*((B0+1)*(n*2-2)+B0)+2)/2,easeInElastic:n=>n===0?0:n===1?1:-Math.pow(2,10*n-10)*Math.sin((n*10-10.75)*OP),easeOutElastic:n=>n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n*10-.75)*OP)+1,easeInOutElastic:n=>n===0?0:n===1?1:n<.5?-(Math.pow(2,20*n-10)*Math.sin((20*n-11.125)*kP))/2:Math.pow(2,-20*n+10)*Math.sin((20*n-11.125)*kP)/2+1,easeInBounce:n=>1-D0(1-n),easeOutBounce:D0,easeInOutBounce:n=>n<.5?(1-D0(1-2*n))/2:(1+D0(2*n-1))/2,steps:SJ};function xA(){return xA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xA.apply(this,arguments)}const nh=Symbol.for("FluidValue.get"),Xc=Symbol.for("FluidValue.observers"),fo=n=>!!(n&&n[nh]),cs=n=>n&&n[nh]?n[nh]():n,FP=n=>n[Xc]||null;function AJ(n,e){n.eventObserved?n.eventObserved(e):n(e)}function fy(n,e){let t=n[Xc];t&&t.forEach(i=>{AJ(i,e)})}class MJ{constructor(e){if(this[nh]=void 0,this[Xc]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");CJ(this,e)}}const CJ=(n,e)=>Jk(n,nh,e);function Tm(n,e){if(n[nh]){let t=n[Xc];t||Jk(n,Xc,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function hy(n,e){let t=n[Xc];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[Xc]=null,n.observerRemoved&&n.observerRemoved(i,e)}}const Jk=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),_v=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,EJ=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,UP=new RegExp(`(${_v.source})(%|[a-z]+)`,"i"),bJ=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,f1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Xk=n=>{const[e,t]=TJ(n);if(!e||dE())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&f1.test(t))return Xk(t);if(t)return t}return n},TJ=n=>{const e=f1.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]};let qx;const PJ=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,Yk=n=>{qx||(qx=hl?new RegExp(`(${Object.keys(hl).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>cs(s).replace(f1,Xk).replace(EJ,DP).replace(qx,DP)),t=e.map(s=>s.match(_v).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Jp(xA({},n,{output:s})));return s=>{var o;const a=!UP.test(e[0])&&((o=e.find(c=>UP.test(c)))==null?void 0:o.replace(_v,""));let l=0;return e[0].replace(_v,()=>`${r[l++](s)}${a||""}`).replace(bJ,PJ)}},gE="react-spring: ",Kk=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${gE}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},RJ=Kk(console.warn);function IJ(){RJ(`${gE}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const BJ=Kk(console.warn);function DJ(){BJ(`${gE}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function h1(n){return Qe.str(n)&&(n[0]=="#"||/\d/.test(n)||!dE()&&f1.test(n)||n in(hl||{}))}const vE=dE()?L.useEffect:L.useLayoutEffect,LJ=()=>{const n=L.useRef(!1);return vE(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function Qk(){const n=L.useState()[1],e=LJ();return()=>{e.current&&n(Math.random())}}function OJ(n,e){const[t]=L.useState(()=>({inputs:e,result:n()})),i=L.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&kJ(e,s.inputs)||(s={inputs:e,result:n()}):s=t,L.useEffect(()=>{i.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function kJ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}const Zk=n=>L.useEffect(n,FJ),FJ=[];function NP(n){const e=L.useRef();return L.useEffect(()=>{e.current=n}),e.current}const Xp=Symbol.for("Animated:node"),UJ=n=>!!n&&n[Xp]===n,uo=n=>n&&n[Xp],yE=(n,e)=>rJ(n,Xp,e),d1=n=>n&&n[Xp]&&n[Xp].getPayload();class qk{constructor(){this.payload=void 0,yE(this,this)}getPayload(){return this.payload||[]}}class Ch extends qk{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,Qe.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Ch(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Qe.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Qe.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class ih extends Ch{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=Jp({output:[e,e]})}static create(e){return new ih(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Qe.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Jp({output:[this.getValue(),e]})),this._value=0,super.reset()}}const dy={dependencies:null};class _E extends qk{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return da(this.source,(i,r)=>{UJ(i)?t[r]=i.getValue(e):fo(i)?t[r]=cs(i):e||(t[r]=i)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&sn(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return da(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){dy.dependencies&&fo(e)&&dy.dependencies.add(e);const t=d1(e);t&&sn(t,i=>this.add(i))}}class xE extends _E{constructor(e){super(e)}static create(e){return new xE(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(NJ)),!0)}}function NJ(n){return(h1(n)?ih:Ch).create(n)}function SA(n){const e=uo(n);return e?e.constructor:Qe.arr(n)?xE:h1(n)?ih:Ch}function py(){return py=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},py.apply(this,arguments)}const zP=(n,e)=>{const t=!Qe.fun(n)||n.prototype&&n.prototype.isReactComponent;return L.forwardRef((i,r)=>{const s=L.useRef(null),o=t&&L.useCallback(g=>{s.current=HJ(r,g)},[r]),[a,l]=GJ(i,e),c=Qk(),u=()=>{const g=s.current;if(t&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&c()},f=new zJ(u,l),d=L.useRef();vE(()=>(d.current=f,sn(l,g=>Tm(g,f)),()=>{d.current&&(sn(d.current.deps,g=>hy(g,d.current)),At.cancel(d.current.update))})),L.useEffect(u,[]),Zk(()=>()=>{const g=d.current;sn(g.deps,v=>hy(v,g))});const m=e.getComponentProps(a.getValue());return L.createElement(n,py({},m,{ref:o}))})};class zJ{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&At.write(this.update)}}function GJ(n,e){const t=new Set;return dy.dependencies=t,n.style&&(n=py({},n,{style:e.createAnimatedStyle(n.style)})),n=new _E(n),dy.dependencies=null,[n,t]}function HJ(n,e){return n&&(Qe.fun(n)?n(e):n.current=e),e}const GP=Symbol.for("AnimatedComponent"),VJ=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new _E(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=o=>{const a=HP(o)||"Anonymous";return Qe.str(o)?o=s[o]||(s[o]=zP(o,r)):o=o[GP]||(o[GP]=zP(o,r)),o.displayName=`Animated(${a})`,o};return da(n,(o,a)=>{Qe.arr(n)&&(a=HP(o)),s[a]=s(o)}),{animated:s}},HP=n=>Qe.str(n)?n:n&&Qe.str(n.displayName)?n.displayName:Qe.fun(n)&&n.name||null;function Mi(){return Mi=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Mi.apply(this,arguments)}function hc(n,...e){return Qe.fun(n)?n(...e):n}const cp=(n,e)=>n===!0||!!(e&&n&&(Qe.fun(n)?n(e):vs(n).includes(e))),$k=(n,e)=>Qe.obj(n)?e&&n[e]:n,eF=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,WJ=n=>n,SE=(n,e=WJ)=>{let t=jJ;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);Qe.und(s)||(i[r]=s)}return i},jJ=["config","onProps","onStart","onChange","onPause","onResume","onRest"],JJ={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function XJ(n){const e={};let t=0;if(da(n,(i,r)=>{JJ[r]||(e[r]=i,t++)}),t)return e}function tF(n){const e=XJ(n);if(e){const t={to:e};return da(n,(i,r)=>r in e||(t[r]=i)),t}return Mi({},n)}function Yp(n){return n=cs(n),Qe.arr(n)?n.map(Yp):h1(n)?Mo.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function YJ(n){for(const e in n)return!0;return!1}function wA(n){return Qe.fun(n)||Qe.arr(n)&&Qe.obj(n[0])}function KJ(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function QJ(n,e){if(e&&n.ref!==e){var t;(t=n.ref)==null||t.delete(n),e.add(n),n.ref=e}}const ZJ={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},AA=Mi({},ZJ.default,{mass:1,damping:1,easing:wJ.linear,clamp:!1});class qJ{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,AA)}}function $J(n,e,t){t&&(t=Mi({},t),VP(t,e),e=Mi({},t,e)),VP(n,e),Object.assign(n,e);for(const o in AA)n[o]==null&&(n[o]=AA[o]);let{mass:i,frequency:r,damping:s}=n;return Qe.und(r)||(r<.01&&(r=.01),s<0&&(s=0),n.tension=Math.pow(2*Math.PI/r,2)*i,n.friction=4*Math.PI*s*i/r),n}function VP(n,e){if(!Qe.und(e.decay))n.duration=void 0;else{const t=!Qe.und(e.tension)||!Qe.und(e.friction);(t||!Qe.und(e.frequency)||!Qe.und(e.damping)||!Qe.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}const WP=[];class eX{constructor(){this.changed=!1,this.values=WP,this.toValues=null,this.fromValues=WP,this.to=void 0,this.from=void 0,this.config=new qJ,this.immediate=!1}}function nF(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{var l;let c,u,f=cp((l=t.cancel)!=null?l:i==null?void 0:i.cancel,e);if(f)g();else{Qe.und(t.pause)||(r.paused=cp(t.pause,e));let v=i==null?void 0:i.pause;v!==!0&&(v=r.paused||cp(v,e)),c=hc(t.delay||0,e),v?(r.resumeQueue.add(m),s.pause()):(s.resume(),m())}function d(){r.resumeQueue.add(m),r.timeouts.delete(u),u.cancel(),c=u.time-At.now()}function m(){c>0&&!Mo.skipAnimation?(r.delayed=!0,u=At.setTimeout(g,c),r.pauseQueue.add(d),r.timeouts.add(u)):g()}function g(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),n<=(r.cancelId||0)&&(f=!0);try{s.start(Mi({},t,{callId:n,cancel:f}),o)}catch(v){a(v)}}})}const wE=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?Of(n.get()):e.every(t=>t.noop)?iF(n.get()):ks(n.get(),e.every(t=>t.finished)),iF=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),ks=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),Of=n=>({value:n,cancelled:!0,finished:!1});function rF(n,e,t,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=t;return!s&&n===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const c=SE(e,(_,x)=>x==="onRest"?void 0:_);let u,f;const d=new Promise((_,x)=>(u=_,f=x)),m=_=>{const x=r<=(t.cancelId||0)&&Of(i)||r!==t.asyncId&&ks(i,!1);if(x)throw _.result=x,f(_),_},g=(_,x)=>{const y=new jP,S=new JP;return(async()=>{if(Mo.skipAnimation)throw Kp(t),S.result=ks(i,!1),f(S),S;m(y);const A=Qe.obj(_)?Mi({},_):Mi({},x,{to:_});A.parentId=r,da(c,(b,P)=>{Qe.und(A[P])&&(A[P]=b)});const C=await i.start(A);return m(y),t.paused&&await new Promise(b=>{t.resumeQueue.add(b)}),C})()};let v;if(Mo.skipAnimation)return Kp(t),ks(i,!1);try{let _;Qe.arr(n)?_=(async x=>{for(const y of x)await g(y)})(n):_=Promise.resolve(n(g,i.stop.bind(i))),await Promise.all([_.then(u),d]),v=ks(i.get(),!0,!1)}catch(_){if(_ instanceof jP)v=_.result;else if(_ instanceof JP)v=_.result;else throw _}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?l:void 0)}return Qe.fun(o)&&At.batchedUpdates(()=>{o(v,i,i.item)}),v})()}function Kp(n,e){ap(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}class jP extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class JP extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const MA=n=>n instanceof AE;let tX=1;class AE extends MJ{constructor(...e){super(...e),this.id=tX++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=uo(this);return e&&e.getValue()}to(...e){return Mo.to(this,e)}interpolate(...e){return IJ(),Mo.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){fy(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||c1.sort(this),fy(this,{type:"priority",parent:this,priority:e})}}const Yc=Symbol.for("SpringPhase"),sF=1,CA=2,EA=4,$x=n=>(n[Yc]&sF)>0,za=n=>(n[Yc]&CA)>0,Sd=n=>(n[Yc]&EA)>0,XP=(n,e)=>e?n[Yc]|=CA|sF:n[Yc]&=~CA,YP=(n,e)=>e?n[Yc]|=EA:n[Yc]&=~EA;class nX extends AE{constructor(e,t){if(super(),this.key=void 0,this.animation=new eX,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Qe.und(e)||!Qe.und(t)){const i=Qe.obj(e)?Mi({},e):Mi({},t,{from:e});Qe.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(za(this)||this._state.asyncTo)||Sd(this)}get goal(){return cs(this.animation.to)}get velocity(){const e=uo(this);return e instanceof Ch?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return $x(this)}get isAnimating(){return za(this)}get isPaused(){return Sd(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,i=!1;const r=this.animation;let{config:s,toValues:o}=r;const a=d1(r.to);!a&&fo(r.to)&&(o=vs(cs(r.to))),r.values.forEach((u,f)=>{if(u.done)return;const d=u.constructor==ih?1:a?a[f].lastPosition:o[f];let m=r.immediate,g=d;if(!m){if(g=u.lastPosition,s.tension<=0){u.done=!0;return}let v=u.elapsedTime+=e;const _=r.fromValues[f],x=u.v0!=null?u.v0:u.v0=Qe.arr(s.velocity)?s.velocity[f]:s.velocity;let y;const S=s.precision||(_==d?.005:Math.min(1,Math.abs(d-_)*.001));if(Qe.und(s.duration))if(s.decay){const A=s.decay===!0?.998:s.decay,C=Math.exp(-(1-A)*v);g=_+x/(1-A)*(1-C),m=Math.abs(u.lastPosition-g)<=S,y=x*C}else{y=u.lastVelocity==null?x:u.lastVelocity;const A=s.restVelocity||S/10,C=s.clamp?0:s.bounce,b=!Qe.und(C),P=_==d?u.v0>0:_<d;let E,R=!1;const B=1,O=Math.ceil(e/B);for(let G=0;G<O&&(E=Math.abs(y)>A,!(!E&&(m=Math.abs(d-g)<=S,m)));++G){b&&(R=g==d||g>d==P,R&&(y=-y*C,g=d));const N=-s.tension*1e-6*(g-d),k=-s.friction*.001*y,X=(N+k)/s.mass;y=y+X*B,g=g+y*B}}else{let A=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,v=u.elapsedTime+=e)),A=(s.progress||0)+v/this._memoizedDuration,A=A>1?1:A<0?0:A,u.durationProgress=A),g=_+s.easing(A)*(d-_),y=(g-u.lastPosition)/e,m=A==1}u.lastVelocity=y,Number.isNaN(g)&&(console.warn("Got NaN while animating:",this),m=!0)}a&&!a[f].done&&(m=!1),m?u.done=!0:t=!1,u.setValue(g,s.round)&&(i=!0)});const l=uo(this),c=l.getValue();if(t){const u=cs(r.to);(c!==u||i)&&!s.decay?(l.setValue(u),this._onChange(u)):i&&s.decay&&this._onChange(c),this._stop()}else i&&this._onChange(c)}set(e){return At.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(za(this)){const{to:e,config:t}=this.animation;At.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let i;return Qe.und(e)?(i=this.queue||[],this.queue=[]):i=[Qe.obj(e)?e:Mi({},t,{to:e})],Promise.all(i.map(r=>this._update(r))).then(r=>wE(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Kp(this._state,e&&this._lastCallId),At.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:i,from:r}=e;i=Qe.obj(i)?i[t]:i,(i==null||wA(i))&&(i=void 0),r=Qe.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:i,from:r};return $x(this)||(e.reverse&&([i,r]=[r,i]),r=cs(r),Qe.und(r)?uo(this)||this._set(i):this._set(r)),s}_update(e,t){let i=Mi({},e);const{key:r,defaultProps:s}=this;i.default&&Object.assign(s,SE(i,(l,c)=>/^on/.test(c)?$k(l,r):l)),QP(this,i,"onProps"),Ad(this,"onProps",i,this);const o=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return nF(++this._lastCallId,{key:r,props:i,defaultProps:s,state:a,actions:{pause:()=>{Sd(this)||(YP(this,!0),Hd(a.pauseQueue),Ad(this,"onPause",ks(this,wd(this,this.animation.to)),this))},resume:()=>{Sd(this)&&(YP(this,!1),za(this)&&this._resume(),Hd(a.resumeQueue),Ad(this,"onResume",ks(this,wd(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(i.loop&&l.finished&&!(t&&l.noop)){const c=oF(i);if(c)return this._update(c,!0)}return l})}_merge(e,t,i){if(t.cancel)return this.stop(!0),i(Of(this));const r=!Qe.und(e.to),s=!Qe.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i(Of(this));const{key:o,defaultProps:a,animation:l}=this,{to:c,from:u}=l;let{to:f=c,from:d=u}=e;s&&!r&&(!t.default||Qe.und(f))&&(f=d),t.reverse&&([f,d]=[d,f]);const m=!jo(d,u);m&&(l.from=d),d=cs(d);const g=!jo(f,c);g&&this._focus(f);const v=wA(t.to),{config:_}=l,{decay:x,velocity:y}=_;(r||s)&&(_.velocity=0),t.config&&!v&&$J(_,hc(t.config,o),t.config!==a.config?hc(a.config,o):void 0);let S=uo(this);if(!S||Qe.und(f))return i(ks(this,!0));const A=Qe.und(t.reset)?s&&!t.default:!Qe.und(d)&&cp(t.reset,o),C=A?d:this.get(),b=Yp(f),P=Qe.num(b)||Qe.arr(b)||h1(b),E=!v&&(!P||cp(a.immediate||t.immediate,o));if(g){const G=SA(f);if(G!==S.constructor)if(E)S=this._set(b);else throw Error(`Cannot animate between ${S.constructor.name} and ${G.name}, as the "to" prop suggests`)}const R=S.constructor;let B=fo(f),O=!1;if(!B){const G=A||!$x(this)&&m;(g||G)&&(O=jo(Yp(C),b),B=!O),(!jo(l.immediate,E)&&!E||!jo(_.decay,x)||!jo(_.velocity,y))&&(B=!0)}if(O&&za(this)&&(l.changed&&!A?B=!0:B||this._stop(c)),!v&&((B||fo(c))&&(l.values=S.getPayload(),l.toValues=fo(f)?null:R==ih?[1]:vs(b)),l.immediate!=E&&(l.immediate=E,!E&&!A&&this._set(c)),B)){const{onRest:G}=l;sn(rX,k=>QP(this,t,k));const N=ks(this,wd(this,c));Hd(this._pendingCalls,N),this._pendingCalls.add(i),l.changed&&At.batchedUpdates(()=>{l.changed=!A,G==null||G(N,this),A?hc(a.onRest,N):l.onStart==null||l.onStart(N,this)})}A&&this._set(C),v?i(rF(t.to,t,this._state,this)):B?this._start():za(this)&&!g?this._pendingCalls.add(i):i(iF(C))}_focus(e){const t=this.animation;e!==t.to&&(FP(this)&&this._detach(),t.to=e,FP(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;fo(t)&&(Tm(t,this),MA(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;fo(e)&&hy(e,this)}_set(e,t=!0){const i=cs(e);if(!Qe.und(i)){const r=uo(this);if(!r||!jo(i,r.getValue())){const s=SA(i);!r||r.constructor!=s?yE(this,s.create(i)):r.setValue(i),r&&At.batchedUpdates(()=>{this._onChange(i,t)})}}return uo(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Ad(this,"onStart",ks(this,wd(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),hc(this.animation.onChange,e,this)),hc(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;uo(this).reset(cs(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),za(this)||(XP(this,!0),Sd(this)||this._resume())}_resume(){Mo.skipAnimation?this.finish():c1.start(this)}_stop(e,t){if(za(this)){XP(this,!1);const i=this.animation;sn(i.values,s=>{s.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),fy(this,{type:"idle",parent:this});const r=t?Of(this.get()):ks(this.get(),wd(this,e??i.to));Hd(this._pendingCalls,r),i.changed&&(i.changed=!1,Ad(this,"onRest",r,this))}}}function wd(n,e){const t=Yp(e),i=Yp(n.get());return jo(i,t)}function oF(n,e=n.loop,t=n.to){let i=hc(e);if(i){const r=i!==!0&&tF(i),s=(r||n).reverse,o=!r||r.reset;return Qp(Mi({},n,{loop:e,default:!1,pause:void 0,to:!s||wA(t)?t:void 0,from:o?n.from:void 0,reset:o},r))}}function Qp(n){const{to:e,from:t}=n=tF(n),i=new Set;return Qe.obj(e)&&KP(e,i),Qe.obj(t)&&KP(t,i),n.keys=i.size?Array.from(i):null,n}function iX(n){const e=Qp(n);return Qe.und(e.default)&&(e.default=SE(e)),e}function KP(n,e){da(n,(t,i)=>t!=null&&e.add(i))}const rX=["onStart","onRest","onChange","onPause","onResume"];function QP(n,e,t){n.animation[t]=e[t]!==eF(e,t)?$k(e[t],n.key):void 0}function Ad(n,e,...t){var i,r,s,o;(i=(r=n.animation)[e])==null||i.call(r,...t),(s=(o=n.defaultProps)[e])==null||s.call(o,...t)}const sX=["onStart","onChange","onRest"];let oX=1,aX=class{constructor(e,t){this.id=oX++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(Mi({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,i)=>e[i]=t.get()),e}set(e){for(const t in e){const i=e[t];Qe.und(i)||this.springs[t].set(i)}}update(e){return e&&this.queue.push(Qp(e)),this}start(e){let{queue:t}=this;return e?t=vs(e).map(Qp):this.queue=[],this._flush?this._flush(this,t):(fF(this,t),bA(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const i=this.springs;sn(vs(t),r=>i[r].stop(!!e))}else Kp(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if(Qe.und(e))this.start({pause:!0});else{const t=this.springs;sn(vs(e),i=>t[i].pause())}return this}resume(e){if(Qe.und(e))this.start({pause:!1});else{const t=this.springs;sn(vs(e),i=>t[i].resume())}return this}each(e){da(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:i}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,ap(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const o=!r&&this._started,a=s||o&&i.size?this.get():null;s&&t.size&&ap(t,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,ap(i,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;At.onFrame(this._onFrame)}};function bA(n,e){return Promise.all(e.map(t=>aF(n,t))).then(t=>wE(n,t))}async function aF(n,e,t){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=Qe.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=Qe.arr(r)||Qe.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):sn(sX,v=>{const _=e[v];if(Qe.fun(_)){const x=n._events[v];e[v]=({finished:y,cancelled:S})=>{const A=x.get(_);A?(y||(A.finished=!1),S&&(A.cancelled=!0)):x.set(_,{value:null,finished:y||!1,cancelled:S||!1})},c&&(c[v]=e[v])}});const f=n._state;e.pause===!f.paused?(f.paused=e.pause,Hd(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);const d=(i||Object.keys(n.springs)).map(v=>n.springs[v].start(e)),m=e.cancel===!0||eF(e,"cancel")===!0;(u||m&&f.asyncId)&&d.push(nF(++n._lastAsyncId,{props:e,state:f,actions:{pause:yA,resume:yA,start(v,_){m?(Kp(f,n._lastAsyncId),_(Of(n))):(v.onRest=a,_(rF(u,v,f,n)))}}})),f.paused&&await new Promise(v=>{f.resumeQueue.add(v)});const g=wE(n,await Promise.all(d));if(o&&g.finished&&!(t&&g.noop)){const v=oF(e,o,r);if(v)return fF(n,[v]),aF(n,v,!0)}return l&&At.batchedUpdates(()=>l(g,n,n.item)),g}function ZP(n,e){const t=Mi({},n.springs);return e&&sn(vs(e),i=>{Qe.und(i.keys)&&(i=Qp(i)),Qe.obj(i.to)||(i=Mi({},i,{to:void 0})),uF(t,i,r=>cF(r))}),lF(n,t),t}function lF(n,e){da(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,Tm(t,n))})}function cF(n,e){const t=new nX;return t.key=n,e&&Tm(t,e),t}function uF(n,e,t){e.keys&&sn(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function fF(n,e){sn(e,t=>{uF(n.springs,t,i=>cF(i,n))})}function lX(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}const cX=["children"],p1=n=>{let{children:e}=n,t=lX(n,cX);const i=L.useContext(my),r=t.pause||!!i.pause,s=t.immediate||!!i.immediate;t=OJ(()=>({pause:r,immediate:s}),[r,s]);const{Provider:o}=my;return L.createElement(o,{value:t},e)},my=uX(p1,{});p1.Provider=my.Provider;p1.Consumer=my.Consumer;function uX(n,e){return Object.assign(n,L.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}const fX=()=>{const n=[],e=function(r){DJ();const s=[];return sn(n,(o,a)=>{if(Qe.und(r))s.push(o.start());else{const l=t(r,o,a);l&&s.push(o.start(l))}}),s};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return sn(n,i=>i.pause(...arguments)),this},e.resume=function(){return sn(n,i=>i.resume(...arguments)),this},e.set=function(i){sn(n,r=>r.set(i))},e.start=function(i){const r=[];return sn(n,(s,o)=>{if(Qe.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return sn(n,i=>i.stop(...arguments)),this},e.update=function(i){return sn(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(r,s,o){return Qe.fun(r)?r(o,s):r};return e._getProps=t,e};function hX(n,e,t){const i=Qe.fun(e)&&e;i&&!t&&(t=[]);const r=L.useMemo(()=>i||arguments.length==3?fX():void 0,[]),s=L.useRef(0),o=Qk(),a=L.useMemo(()=>({ctrls:[],queue:[],flush(x,y){const S=ZP(x,y);return s.current>0&&!a.queue.length&&!Object.keys(S).some(C=>!x.springs[C])?bA(x,y):new Promise(C=>{lF(x,S),a.queue.push(()=>{C(bA(x,y))}),o()})}}),[]),l=L.useRef([...a.ctrls]),c=[],u=NP(n)||0;L.useMemo(()=>{sn(l.current.slice(n,u),x=>{KJ(x,r),x.stop(!0)}),l.current.length=n,f(u,n)},[n]),L.useMemo(()=>{f(0,Math.min(u,n))},t);function f(x,y){for(let S=x;S<y;S++){const A=l.current[S]||(l.current[S]=new aX(null,a.flush)),C=i?i(S,A):e[S];C&&(c[S]=iX(C))}}const d=l.current.map((x,y)=>ZP(x,c[y])),m=L.useContext(p1),g=NP(m),v=m!==g&&YJ(m);vE(()=>{s.current++,a.ctrls=l.current;const{queue:x}=a;x.length&&(a.queue=[],sn(x,y=>y())),sn(l.current,(y,S)=>{r==null||r.add(y),v&&y.start({default:m});const A=c[S];A&&(QJ(y,A.ref),y.ref?y.queue.push(A):y.start(A))})}),Zk(()=>()=>{sn(a.ctrls,x=>x.stop(!0))});const _=d.map(x=>Mi({},x));return r?[_,r]:_}function dX(n,e){const t=Qe.fun(n),[[i],r]=hX(1,t?n:[n],t?e||[]:e);return t||arguments.length==2?[i,r]:i}let qP;(function(n){n.MOUNT="mount",n.ENTER="enter",n.UPDATE="update",n.LEAVE="leave"})(qP||(qP={}));class pX extends AE{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=Jp(...t);const i=this._get(),r=SA(i);yE(this,r.create(i))}advance(e){const t=this._get(),i=this.get();jo(t,i)||(uo(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&$P(this._active)&&eS(this)}_get(){const e=Qe.arr(this.source)?this.source.map(cs):vs(cs(this.source));return this.calc(...e)}_start(){this.idle&&!$P(this._active)&&(this.idle=!1,sn(d1(this),e=>{e.done=!1}),Mo.skipAnimation?(At.batchedUpdates(()=>this.advance()),eS(this)):c1.start(this))}_attach(){let e=1;sn(vs(this.source),t=>{fo(t)&&Tm(t,this),MA(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){sn(vs(this.source),e=>{fo(e)&&hy(e,this)}),this._active.clear(),eS(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=vs(this.source).reduce((t,i)=>Math.max(t,(MA(i)?i.priority:0)+1),0))}}function mX(n){return n.idle!==!1}function $P(n){return!n.size||Array.from(n).every(mX)}function eS(n){n.idle||(n.idle=!0,sn(d1(n),e=>{e.done=!0}),fy(n,{type:"idle",parent:n}))}Mo.assign({createStringInterpolator:Yk,to:(n,e)=>new pX(n,e)});const gX=["primitive"].concat(Object.keys(nE).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));Mo.assign({createStringInterpolator:Yk,colors:cJ,frameLoop:"demand"});Bj(()=>{At.advance()});const vX=VJ(gX,{applyAnimatedValues:cc}),yX=vX.animated;function _X(n,e,t){return Math.max(e,Math.min(n,t))}const Mn={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function eR(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function tR(n,e,t,i=.15){return i===0?_X(n,e,t):n<e?-eR(e-n,t-e,i)+e:n>t?+eR(n-t,t-e,i)+t:n}function xX(n,[e,t],[i,r]){const[[s,o],[a,l]]=n;return[tR(e,s,o,i),tR(t,a,l,r)]}function SX(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function wX(n){var e=SX(n,"string");return typeof e=="symbol"?e:String(e)}function ni(n,e,t){return e=wX(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function On(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nR(Object(t),!0).forEach(function(i){ni(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nR(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const hF={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function iR(n){return n?n[0].toUpperCase()+n.slice(1):""}const AX=["enter","leave"];function MX(n=!1,e){return n&&!AX.includes(e)}function CX(n,e="",t=!1){const i=hF[n],r=i&&i[e]||e;return"on"+iR(n)+iR(r)+(MX(t,r)?"Capture":"")}const EX=["gotpointercapture","lostpointercapture"];function bX(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=EX.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function TX(n,e=""){const t=hF[n],i=t&&t[e]||e;return n+i}function m1(n){return"touches"in n}function dF(n){return m1(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function PX(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function RX(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function pF(n){return m1(n)?RX(n)[0]:n}function TA(n,e){try{const t=e.clientX-n.clientX,i=e.clientY-n.clientY,r=(e.clientX+n.clientX)/2,s=(e.clientY+n.clientY)/2,o=Math.hypot(t,i);return{angle:-(Math.atan2(t,i)*180)/Math.PI,distance:o,origin:[r,s]}}catch{}return null}function IX(n){return PX(n).map(e=>e.identifier)}function rR(n,e){const[t,i]=Array.from(n.touches).filter(r=>e.includes(r.identifier));return TA(t,i)}function tS(n){const e=pF(n);return m1(n)?e.identifier:e.pointerId}function rh(n){const e=pF(n);return[e.clientX,e.clientY]}const sR=40,oR=800;function mF(n){let{deltaX:e,deltaY:t,deltaMode:i}=n;return i===1?(e*=sR,t*=sR):i===2&&(e*=oR,t*=oR),[e,t]}function BX(n){var e,t;const{scrollX:i,scrollY:r,scrollLeft:s,scrollTop:o}=n.currentTarget;return[(e=i??s)!==null&&e!==void 0?e:0,(t=r??o)!==null&&t!==void 0?t:0]}function DX(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function gy(n,...e){return typeof n=="function"?n(...e):n}function LX(){}function OX(...n){return n.length===0?LX:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function aR(n,e){return Object.assign({},e,n||{})}const kX=32;class gF{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?gy(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,DX(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const b=t._delta.map(Math.abs);Mn.addTo(t._distance,b)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=i.threshold,{_step:u,values:f}=t;if(i.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&f[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&f[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const d=[0,0];if(i.hasCustomTransform){const[b,P]=f;d[0]=u[0]!==!1?b-u[0]:0,d[1]=u[1]!==!1?P-u[1]:0}else d[0]=u[0]!==!1?o-u[0]:0,d[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(d);const m=t.offset,g=t._active&&!t._blocked||t.active;g&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=gy(i.bounds,t)),this.setup&&this.setup()),t.movement=d,this.computeOffset()));const[v,_]=t.offset,[[x,y],[S,A]]=t._bounds;t.overflow=[v<x?-1:v>y?1:0,_<S?-1:_>A?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const C=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=xX(t._bounds,t.offset,C),t.delta=Mn.sub(t.offset,m),this.computeMovement(),g&&(!t.last||s>kX)){t.delta=Mn.sub(t.offset,m);const b=t.delta.map(Math.abs);Mn.addTo(t.distance,b),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[b[0]/s,b[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(On(On(On({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function FX([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class Pm extends gF{constructor(...e){super(...e),ni(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Mn.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Mn.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[dF(e)]:i.axisThreshold;t.axis=FX(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const UX=n=>n,lR=.15,vF={enabled(n=!0){return n},eventOptions(n,e,t){return On(On({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[lR,lR];case!1:return[0,0];default:return Mn.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Mn.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||UX},threshold(n){return Mn.toVector(n,0)}},NX=0,ou=On(On({},vF),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=NX){return n},bounds(n={}){if(typeof n=="function")return s=>ou.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),cR={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class zX extends Pm{constructor(...e){super(...e),ni(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=ou.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=tS(e),i._pointerActive=!0,this.computeValues(rh(e)),this.computeInitial(),t.preventScrollAxis&&dF(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=tS(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=rh(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Mn.sub(s,t._values),this.computeValues(s)),Mn.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=tS(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,u]=t._movement,[f,d]=i.swipe.velocity,[m,g]=i.swipe.distance,v=i.swipe.duration;if(t.elapsedTime<v){const _=Math.abs(a/t.timeDelta),x=Math.abs(l/t.timeDelta);_>f&&Math.abs(c)>m&&(t.swipe[0]=Math.sign(a)),x>d&&Math.abs(u)>g&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,GX(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=cR[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,Mn.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in cR&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function GX(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Rm=typeof window<"u"&&window.document&&window.document.createElement;function yF(){return Rm&&"ontouchstart"in window}function HX(){return yF()||Rm&&window.navigator.maxTouchPoints>1}function VX(){return Rm&&"onpointerdown"in window}function WX(){return Rm&&"exitPointerLock"in window.document}function jX(){try{return"constructor"in GestureEvent}catch{return!1}}const hs={isBrowser:Rm,gesture:jX(),touch:yF(),touchscreen:HX(),pointer:VX(),pointerLock:WX()},JX=250,XX=180,YX=.5,KX=50,QX=250,ZX=10,uR={mouse:0,touch:0,pen:8},qX=On(On({},ou),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&hs.pointerLock,hs.touch&&t?"touch":this.pointerLock?"mouse":hs.pointer&&!r?"pointer":hs.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?JX:void 0,!(!hs.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=Mn.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=YX,distance:e=KX,duration:t=QX}={}){return{velocity:this.transform(Mn.toVector(n)),distance:this.transform(Mn.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return XX;case!1:return 0;default:return n}},axisThreshold(n){return n?On(On({},uR),n):uR},keyboardDisplacement(n=ZX){return n}});function _F(n){const[e,t]=n.overflow,[i,r]=n._delta,[s,o]=n._direction;(e<0&&i>0&&s<0||e>0&&i<0&&s>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&r>0&&o<0||t>0&&r<0&&o>0)&&(n._movement[1]=n._movementBound[1])}const $X=30,eY=100;class tY extends gF{constructor(...e){super(...e),ni(this,"ingKey","pinching"),ni(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:i}=this.state;e==="wheel"?this.state.offset=Mn.add(t,i):this.state.offset=[(1+t[0])*i[0],t[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,i]=e._movement;if(!e.axis){const r=Math.abs(t)*$X-Math.abs(i);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,i=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>i.has(s))||i.size<2)return;this.start(e),t._touchIds=Array.from(i).slice(0,2);const r=rR(e,t._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,i=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(i.keys()).every(o=>r.has(o))||(i.size<2&&i.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=TA(...Array.from(i.values()));s&&this.pinchStart(e,s)}pinchStart(e,t){const i=this.state;i.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=rR(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const i=TA(...Array.from(t.values()));i&&this.pinchMove(e,i)}pinchMove(e,t){const i=this.state,r=i._values[1],s=t.angle-r;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*o]),i.origin=t.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const i=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=Mn.sub(t._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(i=>e[i]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-mF(e)[1]/eY*i.offset[0],0],Mn.addTo(i._movement,i._delta),_F(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const nY=On(On({},vF),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!hs.touch&&hs.gesture)return"gesture";if(hs.touch&&i)return"touch";if(hs.touchscreen){if(hs.pointer)return"pointer";if(hs.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=o=>{const a=aR(gy(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=aR(gy(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Mn.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class iY extends Pm{constructor(...e){super(...e),ni(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(rh(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=rh(e),i=this.state;i._delta=Mn.sub(t,i._values),Mn.addTo(i._movement,i._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const rY=On(On({},ou),{},{mouseOnly:(n=!0)=>n});class sY extends Pm{constructor(...e){super(...e),ni(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,i=BX(e);t._delta=Mn.sub(i,t._values),Mn.addTo(t._movement,t._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const oY=ou;class aY extends Pm{constructor(...e){super(...e),ni(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=mF(e),Mn.addTo(t._movement,t._delta),_F(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const lY=ou;class cY extends Pm{constructor(...e){super(...e),ni(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(rh(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const i=rh(e);t._movement=t._delta=Mn.sub(i,t._values),this.computeValues(i),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const uY=On(On({},ou),{},{mouseOnly:(n=!0)=>n}),ME=new Map,PA=new Map;function fY(n){ME.set(n.key,n.engine),PA.set(n.key,n.resolver)}const xF={key:"drag",engine:zX,resolver:qX},hY={key:"hover",engine:cY,resolver:uY},dY={key:"move",engine:iY,resolver:rY},pY={key:"pinch",engine:tY,resolver:nY},mY={key:"scroll",engine:sY,resolver:oY},gY={key:"wheel",engine:aY,resolver:lY};function vY(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function yY(n,e){if(n==null)return{};var t=vY(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const _Y={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=hs.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},xY=["target","eventOptions","window","enabled","transform"];function xv(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=xv(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function SY(n,e,t={}){const i=n,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,c=yY(i,xY);if(t.shared=xv({target:r,eventOptions:s,window:o,enabled:a,transform:l},_Y),e){const u=PA.get(e);t[e]=xv(On({shared:t.shared},c),u)}else for(const u in c){const f=PA.get(u);f&&(t[u]=xv(On({shared:t.shared},c[u]),f))}return t}class SF{constructor(e,t){ni(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const o=this._listeners,a=TX(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=On(On({},l),s);e.addEventListener(a,r,c);const u=()=>{e.removeEventListener(a,r,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class wY{constructor(){ni(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class AY{constructor(e){ni(this,"gestures",new Set),ni(this,"_targetEventStore",new SF(this)),ni(this,"gestureEventStores",{}),ni(this,"gestureTimeoutStores",{}),ni(this,"handlers",{}),ni(this,"config",{}),ni(this,"pointerIds",new Set),ni(this,"touchIds",new Set),ni(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),MY(this,e)}setEventIds(e){if(m1(e))return this.touchIds=new Set(IX(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=SY(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=fR(i,a.eventOptions,!!r);if(a.enabled){const c=ME.get(o);new c(this,e,o).bind(l)}}const s=fR(i,t.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](On(On({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=OX(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=bX(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}}function Xu(n,e){n.gestures.add(e),n.gestureEventStores[e]=new SF(n,e),n.gestureTimeoutStores[e]=new wY}function MY(n,e){e.drag&&Xu(n,"drag"),e.wheel&&Xu(n,"wheel"),e.scroll&&Xu(n,"scroll"),e.move&&Xu(n,"move"),e.pinch&&Xu(n,"pinch"),e.hover&&Xu(n,"hover")}const fR=(n,e,t)=>(i,r,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let d=a?i:CX(i,r,u);t&&f&&(d+="Passive"),n[d]=n[d]||[],n[d].push(s)},CY=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function EY(n){const e={},t={},i=new Set;for(let r in n)CY.test(r)?(i.add(RegExp.lastMatch),t[r]=n[r]):e[r]=n[r];return[t,e,i]}function Yu(n,e,t,i,r,s){if(!n.has(t)||!ME.has(i))return;const o=t+"Start",a=t+"End",l=c=>{let u;return c.first&&o in e&&e[o](c),t in e&&(u=e[t](c)),c.last&&a in e&&e[a](c),u};r[i]=l,s[i]=s[i]||{}}function bY(n,e){const[t,i,r]=EY(n),s={};return Yu(r,t,"onDrag","drag",s,e),Yu(r,t,"onWheel","wheel",s,e),Yu(r,t,"onScroll","scroll",s,e),Yu(r,t,"onPinch","pinch",s,e),Yu(r,t,"onMove","move",s,e),Yu(r,t,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:i}}function TY(n,e={},t,i){const r=Bn.useMemo(()=>new AY(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),Bn.useEffect(r.effect.bind(r)),Bn.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function wF(n){return n.forEach(fY),function(t,i){const{handlers:r,nativeHandlers:s,config:o}=bY(t,i||{});return TY(r,o,void 0,s)}}function AF(n,e){return wF([xF,pY,mY,gY,dY,hY])(n,e||{})}function hR({enabled:n=!0,snap:e,global:t,domElement:i,cursor:r=!0,children:s,speed:o=1,rotation:a=[0,0,0],zoom:l=1,polar:c=[0,Math.PI/2],azimuth:u=[-1/0,1/0],config:f={mass:1,tension:170,friction:26}}){const d=Yn(b=>b.events),m=Yn(b=>b.gl),g=i||d.connected||m.domElement,{size:v}=Yn(),_=L.useMemo(()=>[a[0]+c[0],a[0]+c[1]],[a[0],c[0],c[1]]),x=L.useMemo(()=>[a[1]+u[0],a[1]+u[1]],[a[1],u[0],u[1]]),y=L.useMemo(()=>[Sc.clamp(a[0],..._),Sc.clamp(a[1],...x),a[2]],[a[0],a[1],a[2],_,x]),[S,A]=dX(()=>({scale:1,rotation:y,config:f}));L.useEffect(()=>void A.start({scale:1,rotation:y,config:f}),[y]),L.useEffect(()=>{if(t&&r&&n)return g.style.cursor="grab",m.domElement.style.cursor="",()=>{g.style.cursor="default",m.domElement.style.cursor="default"}},[t,r,g,n]);const C=AF({onHover:({last:b})=>{r&&!t&&n&&(g.style.cursor=b?"auto":"grab")},onDrag:({down:b,delta:[P,E],memo:[R,B]=S.rotation.animation.to||y})=>{if(!n)return[E,P];r&&(g.style.cursor=b?"grabbing":"grab"),P=Sc.clamp(B+P/v.width*Math.PI*o,...x),E=Sc.clamp(R+E/v.height*Math.PI*o,..._);const O=e&&!b&&typeof e!="boolean"?e:f;return A.start({scale:b&&E>_[1]/2?l:1,rotation:e&&!b?y:[E,P,0],config:G=>G==="scale"?{...O,friction:O.friction*3}:O}),[E,P]}},{target:t?g:void 0});return L.createElement(yX.group,js({},C==null?void 0:C(),S),s)}function PY(n,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},i=n.getIndex(),r=n.getAttribute("position"),s=i?i.count:r.count;let o=0;const a=Object.keys(n.attributes),l={},c={},u=[],f=["getX","getY","getZ","getW"];for(let v=0,_=a.length;v<_;v++){const x=a[v];l[x]=[];const y=n.morphAttributes[x];y&&(c[x]=new Array(y.length).fill(0).map(()=>[]))}const d=Math.log10(1/e),m=Math.pow(10,d);for(let v=0;v<s;v++){const _=i?i.getX(v):v;let x="";for(let y=0,S=a.length;y<S;y++){const A=a[y],C=n.getAttribute(A),b=C.itemSize;for(let P=0;P<b;P++)x+=`${~~(C[f[P]](_)*m)},`}if(x in t)u.push(t[x]);else{for(let y=0,S=a.length;y<S;y++){const A=a[y],C=n.getAttribute(A),b=n.morphAttributes[A],P=C.itemSize,E=l[A],R=c[A];for(let B=0;B<P;B++){const O=f[B];if(E.push(C[O](_)),b)for(let G=0,N=b.length;G<N;G++)R[G].push(b[G][O](_))}}t[x]=o,u.push(o),o++}}const g=n.clone();for(let v=0,_=a.length;v<_;v++){const x=a[v],y=n.getAttribute(x),S=new y.array.constructor(l[x]),A=new Kt(S,y.itemSize,y.normalized);if(g.setAttribute(x,A),x in c)for(let C=0;C<c[x].length;C++){const b=n.morphAttributes[x][C],P=new b.array.constructor(c[x][C]),E=new Kt(P,b.itemSize,b.normalized);g.morphAttributes[x][C]=E}}return g.setIndex(u),g}function dR(n,e){if(e===uO)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===sy||e===vC){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===sy)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const RY=n=>n&&n.isCubeTexture;class IY extends Ln{constructor(e,t){var i,r;const s=RY(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),f=4*c,d=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,g=d.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,v={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},_=new xh(1,16),x=new Cr({uniforms:v,fragmentShader:g,vertexShader:m,side:va});super(_,x)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class CE extends Zi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new kY(t)}),this.register(function(t){return new WY(t)}),this.register(function(t){return new jY(t)}),this.register(function(t){return new JY(t)}),this.register(function(t){return new UY(t)}),this.register(function(t){return new NY(t)}),this.register(function(t){return new zY(t)}),this.register(function(t){return new GY(t)}),this.register(function(t){return new OY(t)}),this.register(function(t){return new HY(t)}),this.register(function(t){return new FY(t)}),this.register(function(t){return new VY(t)}),this.register(function(t){return new DY(t)}),this.register(function(t){return new XY(t)}),this.register(function(t){return new YY(t)})}load(e,t,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=So.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Er(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(So.decodeText(new Uint8Array(e.slice(0,4)))===MF){try{o[Jt.KHR_BINARY_GLTF]=new KY(e)}catch(u){r&&r(u);return}s=JSON.parse(o[Jt.KHR_BINARY_GLTF].content)}else s=JSON.parse(So.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new lK(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(u){case Jt.KHR_MATERIALS_UNLIT:o[u]=new LY;break;case Jt.KHR_DRACO_MESH_COMPRESSION:o[u]=new QY(s,this.dracoLoader);break;case Jt.KHR_TEXTURE_TRANSFORM:o[u]=new ZY;break;case Jt.KHR_MESH_QUANTIZATION:o[u]=new qY;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function BY(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Jt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class DY{constructor(e){this.parser=e,this.name=Jt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Je(16777215);l.color!==void 0&&u.fromArray(l.color);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new YC(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new XC(u),c.distance=f;break;case"spot":c=new JC(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Xa(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class LY{constructor(){this.name=Jt.KHR_MATERIALS_UNLIT}getMaterialType(){return nn}extendParams(e,t,i){const r=[];e.color=new Je(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(r)}}class OY{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class kY{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ne(a,a)}return Promise.all(s)}}class FY{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class UY{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Je(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class NY{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class zY{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Je(a[0],a[1],a[2]),Promise.all(s)}}class GY{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class HY{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Je(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class VY{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class WY{constructor(e){this.parser=e,this.name=Jt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class jY{constructor(e){this.parser=e,this.name=Jt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class JY{constructor(e){this.parser=e,this.name=Jt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class XY{constructor(e){this.name=Jt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,f=r.byteStride,d=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,d,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(m),u,f,d,r.mode,r.filter),m})})}else return null}}class YY{constructor(e){this.name=Jt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==as.TRIANGLES&&c.mode!==as.TRIANGLE_STRIP&&c.mode!==as.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],d=c[0].count,m=[];for(const g of f){const v=new dt,_=new j,x=new Li,y=new j(1,1,1),S=new TC(g.geometry,g.material,d);for(let A=0;A<d;A++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,A),l.ROTATION&&x.fromBufferAttribute(l.ROTATION,A),l.SCALE&&y.fromBufferAttribute(l.SCALE,A),S.setMatrixAt(A,v.compose(_,x,y));for(const A in l)A!=="TRANSLATION"&&A!=="ROTATION"&&A!=="SCALE"&&g.geometry.setAttribute(A,l[A]);Ut.prototype.copy.call(S,g),this.parser.assignFinalMaterial(S),m.push(S)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const MF="glTF",Md=12,pR={JSON:1313821514,BIN:5130562};class KY{constructor(e){this.name=Jt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Md);if(this.header={magic:So.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==MF)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Md,r=new DataView(e,Md);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===pR.JSON){const l=new Uint8Array(e,Md+s,o);this.content=So.decodeText(l)}else if(a===pR.BIN){const l=Md+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class QY{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Jt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const f=RA[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=RA[u]||u.toLowerCase();if(o[u]!==void 0){const d=i.accessors[e.attributes[u]],m=kf[d.componentType];c[f]=m.name,l[f]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f){r.decodeDracoFile(u,function(d){for(const m in d.attributes){const g=d.attributes[m],v=l[m];v!==void 0&&(g.normalized=v)}f(d)},a,c)})})}}class ZY{constructor(){this.name=Jt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class qY{constructor(){this.name=Jt.KHR_MESH_QUANTIZATION}}class CF extends Ah{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=r-t,f=(i-t)/u,d=f*f,m=d*f,g=e*c,v=g-c,_=-2*m+3*d,x=m-d,y=1-_,S=x-d+f;for(let A=0;A!==a;A++){const C=o[v+A+a],b=o[v+A+l]*u,P=o[g+A+a],E=o[g+A]*u;s[A]=y*C+S*b+_*P+x*E}return s}}const $Y=new Li;class eK extends CF{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return $Y.fromArray(s).normalize().toArray(s),s}}const as={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},kf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},mR={9728:Hn,9729:gn,9984:Lp,9985:jy,9986:Bf,9987:Ao},gR={33071:Bi,33648:Yf,10497:xl},nS={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},RA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...om.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ga={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},tK={CUBICSPLINE:void 0,LINEAR:Vc,STEP:Kf},iS={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function nK(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Xr({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:wo})),n.DefaultMaterial}function ec(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Xa(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function iK(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(i){const d=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(d)}if(r){const d=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(d)}if(s){const d=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],d=c[2];return i&&(n.morphAttributes.position=u),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=d),n.morphTargetsRelative=!0,n})}function rK(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function sK(n){let e;const t=n.extensions&&n.extensions[Jt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+rS(t.attributes):e=n.indices+":"+rS(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+rS(n.targets[i]);return e}function rS(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function IA(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function oK(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const aK=new dt;class lK{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new BY,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new $O(this.options.manager):this.textureLoader=new sk(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Er(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};ec(s,a,r),Xa(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Jt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(So.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=nS[r.type],a=kf[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new Kt(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=nS[r.type],c=kf[r.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,d=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,g=r.normalized===!0;let v,_;if(m&&m!==f){const x=Math.floor(d/m),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+x+":"+r.count;let S=t.cache.get(y);S||(v=new c(a,x*m,r.count*m/u),S=new hm(v,m/u),t.cache.add(y,S)),_=new Sl(S,l,d%m/u,g)}else a===null?v=new c(r.count*l):v=new c(a,d,r.count*l),_=new Kt(v,l,g);if(r.sparse!==void 0){const x=nS.SCALAR,y=kf[r.sparse.indices.componentType],S=r.sparse.indices.byteOffset||0,A=r.sparse.values.byteOffset||0,C=new y(o[1],S,r.sparse.count*x),b=new c(o[2],A,r.sparse.count*l);a!==null&&(_=new Kt(_.array.slice(),_.itemSize,_.normalized));for(let P=0,E=C.length;P<E;P++){const R=C[P];if(_.setX(R,b[P*l]),l>=2&&_.setY(R,b[P*l+1]),l>=3&&_.setZ(R,b[P*l+2]),l>=4&&_.setW(R,b[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const d=(s.samplers||{})[o.sampler]||{};return u.magFilter=mR[d.magFilter]||gn,u.minFilter=mR[d.minFilter]||Ao,u.wrapS=gR[d.wrapS]||xl,u.wrapT=gR[d.wrapT]||xl,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const d=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(d,m){let g=d;t.isImageBitmapLoader===!0&&(g=function(v){const _=new Cn(v);_.needsUpdate=!0,d(_)}),t.load(So.resolveURL(f,s.path),g,void 0,m)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),f.userData.mimeType=o.mimeType||oK(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Jt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Jt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Jt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&("colorSpace"in o?o.colorSpace=r===3001?"srgb":"srgb-linear":o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new n1,si.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Qi,si.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Xr}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Jt.KHR_MATERIALS_UNLIT]){const f=r[Jt.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Je(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const d=f.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,3001)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=va);const u=s.alphaMode||iS.OPAQUE;if(u===iS.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===iS.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==nn&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ne(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return s.occlusionTexture!==void 0&&o!==nn&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==nn&&(a.emissive=new Je().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==nn&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),Xa(f,s),t.associations.set(f,{materials:e}),s.extensions&&ec(r,f,s),f})}createUniqueName(e){const t=Yt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Jt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return vR(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=sK(c),f=r[u];if(f)o.push(f.promise);else{let d;c.extensions&&c.extensions[Jt.KHR_DRACO_MESH_COMPRESSION]?d=s(c):d=vR(new Mt,c,t),r[u]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?nK(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let m=0,g=u.length;m<g;m++){const v=u[m],_=o[m];let x;const y=c[m];if(_.mode===as.TRIANGLES||_.mode===as.TRIANGLE_STRIP||_.mode===as.TRIANGLE_FAN||_.mode===void 0)x=s.isSkinnedMesh===!0?new bC(v,y):new Ln(v,y),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),_.mode===as.TRIANGLE_STRIP?x.geometry=dR(x.geometry,vC):_.mode===as.TRIANGLE_FAN&&(x.geometry=dR(x.geometry,sy));else if(_.mode===as.LINES)x=new Xs(v,y);else if(_.mode===as.LINE_STRIP)x=new ha(v,y);else if(_.mode===as.LINE_LOOP)x=new PC(v,y);else if(_.mode===as.POINTS)x=new RC(v,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(x.geometry.morphAttributes).length>0&&rK(x,s),x.name=t.createUniqueName(s.name||"mesh_"+e),Xa(x,s),_.extensions&&ec(r,x,_),t.assignFinalMaterial(x),f.push(x)}for(let m=0,g=f.length;m<g;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&ec(r,f[0],s),f[0];const d=new $o;s.extensions&&ec(r,d,s),t.associations.set(d,{meshes:e});for(let m=0,g=f.length;m<g;m++)d.add(f[m]);return d})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new fi(Sc.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new gh(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Xa(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const f=o[c];if(f){a.push(f);const d=new dt;s!==null&&d.fromArray(s.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new dm(a,l)})}loadAnimation(e){const i=this.json.animations[e],r=i.name?i.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let u=0,f=i.channels.length;u<f;u++){const d=i.channels[u],m=i.samplers[d.sampler],g=d.target,v=g.node,_=i.parameters!==void 0?i.parameters[m.input]:m.input,x=i.parameters!==void 0?i.parameters[m.output]:m.output;g.node!==void 0&&(s.push(this.getDependency("node",v)),o.push(this.getDependency("accessor",_)),a.push(this.getDependency("accessor",x)),l.push(m),c.push(g))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(u){const f=u[0],d=u[1],m=u[2],g=u[3],v=u[4],_=[];for(let x=0,y=f.length;x<y;x++){const S=f[x],A=d[x],C=m[x],b=g[x],P=v[x];if(S===void 0)continue;S.updateMatrix();let E;switch(Ga[P.path]){case Ga.weights:E=qf;break;case Ga.rotation:E=wl;break;case Ga.position:case Ga.scale:default:E=$f;break}const R=S.name?S.name:S.uuid,B=b.interpolation!==void 0?tK[b.interpolation]:Vc,O=[];Ga[P.path]===Ga.weights?S.traverse(function(N){N.morphTargetInfluences&&O.push(N.name?N.name:N.uuid)}):O.push(R);let G=C.array;if(C.normalized){const N=IA(G.constructor),k=new Float32Array(G.length);for(let X=0,te=G.length;X<te;X++)k[X]=G[X]*N;G=k}for(let N=0,k=O.length;N<k;N++){const X=new E(O[N]+"."+Ga[P.path],A.array,G,B);b.interpolation==="CUBICSPLINE"&&(X.createInterpolant=function(oe){const H=this instanceof wl?eK:CF;return new H(this.times,this.values,this.getValueSize()/3,oe)},X.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push(X)}}return new eh(r,void 0,_)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],f=c[1],d=c[2];d!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(d,aK)});for(let m=0,g=f.length;m<g;m++)u.add(f[m]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new t1:c.length>1?u=new $o:c.length===1?u=c[0]:u=new Ut,u!==c[0])for(let f=0,d=c.length;f<d;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=o),Xa(u,s),s.extensions&&ec(i,u,s),s.matrix!==void 0){const f=new dt;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new $o;i.name&&(s.name=r.createUniqueName(i.name)),Xa(s,i),i.extensions&&ec(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[d,m]of r.associations)(d instanceof si||d instanceof Cn)&&f.set(d,m);return u.traverse(d=>{const m=r.associations.get(d);m!=null&&f.set(d,m)}),f};return r.associations=c(s),s})}}function cK(n,e,t){const i=e.attributes,r=new _a;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new j(l[0],l[1],l[2]),new j(c[0],c[1],c[2])),a.normalized){const u=IA(kf[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new j,l=new j;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const d=t.json.accessors[f.POSITION],m=d.min,g=d.max;if(m!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),d.normalized){const v=IA(kf[d.componentType]);l.multiplyScalar(v)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new xa;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function vR(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=RA[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Xa(n,e),cK(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?iK(n,e.targets,t):n})}class uK extends _h{constructor(e,t={}){const{bevelEnabled:i=!1,bevelSize:r=8,bevelThickness:s=10,font:o,height:a=50,size:l=100,lineHeight:c=1,letterSpacing:u=0,...f}=t;if(o===void 0)super();else{const d=o.generateShapes(e,l,{lineHeight:c,letterSpacing:u});super(d,{...f,bevelEnabled:i,bevelSize:r,bevelThickness:s,depth:a})}this.type="TextGeometry"}}var fK=Object.defineProperty,hK=(n,e,t)=>e in n?fK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,EE=(n,e,t)=>(hK(n,typeof e!="symbol"?e+"":e,t),t);class dK extends Zi{constructor(e){super(e)}load(e,t,i,r){const s=new Er(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{if(typeof o!="string")throw new Error("unsupported data type");const a=JSON.parse(o),l=this.parse(a);t&&t(l)},i,r)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new bE(e)}}class bE{constructor(e){EE(this,"data"),this.data=e}generateShapes(e,t=100,i){const r=[],s={letterSpacing:0,lineHeight:1,...i},o=pK(e,t,this.data,s);for(let a=0,l=o.length;a<l;a++)Array.prototype.push.apply(r,o[a].toShapes(!1));return r}}EE(bE,"isFont");EE(bE,"type");function pK(n,e,t,i){const r=Array.from(n),s=e/t.resolution,o=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*s,a=[];let l=0,c=0;for(let u=0;u<r.length;u++){const f=r[u];if(f===`
`)l=0,c-=o*i.lineHeight;else{const d=mK(f,s,l,c,t);d&&(l+=d.offsetX+i.letterSpacing,a.push(d.path))}}return a}function mK(n,e,t,i,r){const s=r.glyphs[n]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");return}const o=new ck;let a,l,c,u,f,d,m,g;if(s.o){const v=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let _=0,x=v.length;_<x;)switch(v[_++]){case"m":a=parseInt(v[_++])*e+t,l=parseInt(v[_++])*e+i,o.moveTo(a,l);break;case"l":a=parseInt(v[_++])*e+t,l=parseInt(v[_++])*e+i,o.lineTo(a,l);break;case"q":c=parseInt(v[_++])*e+t,u=parseInt(v[_++])*e+i,f=parseInt(v[_++])*e+t,d=parseInt(v[_++])*e+i,o.quadraticCurveTo(f,d,c,u);break;case"b":c=parseInt(v[_++])*e+t,u=parseInt(v[_++])*e+i,f=parseInt(v[_++])*e+t,d=parseInt(v[_++])*e+i,m=parseInt(v[_++])*e+t,g=parseInt(v[_++])*e+i,o.bezierCurveTo(f,d,m,g,c,u);break}}return{offsetX:s.ha*e,path:o}}class gK extends qO{constructor(e){super(e),this.type=Us}parse(e){const a=function(S,A){switch(S){case 1:console.error("THREE.RGBELoader Read Error: "+(A||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(A||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(A||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(A||""))}return-1},f=`
`,d=function(S,A,C){A=A||1024;let P=S.pos,E=-1,R=0,B="",O=String.fromCharCode.apply(null,new Uint16Array(S.subarray(P,P+128)));for(;0>(E=O.indexOf(f))&&R<A&&P<S.byteLength;)B+=O,R+=O.length,P+=128,O+=String.fromCharCode.apply(null,new Uint16Array(S.subarray(P,P+128)));return-1<E?(C!==!1&&(S.pos+=R+E+1),B+O.slice(0,E)):!1},m=function(S){const A=/^#\?(\S+)/,C=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,b=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,P=/^\s*FORMAT=(\S+)\s*$/,E=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,R={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let B,O;if(S.pos>=S.byteLength||!(B=d(S)))return a(1,"no header found");if(!(O=B.match(A)))return a(3,"bad initial token");for(R.valid|=1,R.programtype=O[1],R.string+=B+`
`;B=d(S),B!==!1;){if(R.string+=B+`
`,B.charAt(0)==="#"){R.comments+=B+`
`;continue}if((O=B.match(C))&&(R.gamma=parseFloat(O[1])),(O=B.match(b))&&(R.exposure=parseFloat(O[1])),(O=B.match(P))&&(R.valid|=2,R.format=O[1]),(O=B.match(E))&&(R.valid|=4,R.height=parseInt(O[1],10),R.width=parseInt(O[2],10)),R.valid&2&&R.valid&4)break}return R.valid&2?R.valid&4?R:a(3,"missing image size specifier"):a(3,"missing format specifier")},g=function(S,A,C){const b=A;if(b<8||b>32767||S[0]!==2||S[1]!==2||S[2]&128)return new Uint8Array(S);if(b!==(S[2]<<8|S[3]))return a(3,"wrong scanline width");const P=new Uint8Array(4*A*C);if(!P.length)return a(4,"unable to allocate buffer space");let E=0,R=0;const B=4*b,O=new Uint8Array(4),G=new Uint8Array(B);let N=C;for(;N>0&&R<S.byteLength;){if(R+4>S.byteLength)return a(1);if(O[0]=S[R++],O[1]=S[R++],O[2]=S[R++],O[3]=S[R++],O[0]!=2||O[1]!=2||(O[2]<<8|O[3])!=b)return a(3,"bad rgbe scanline format");let k=0,X;for(;k<B&&R<S.byteLength;){X=S[R++];const oe=X>128;if(oe&&(X-=128),X===0||k+X>B)return a(3,"bad scanline data");if(oe){const H=S[R++];for(let J=0;J<X;J++)G[k++]=H}else G.set(S.subarray(R,R+X),k),k+=X,R+=X}const te=b;for(let oe=0;oe<te;oe++){let H=0;P[E]=G[oe+H],H+=b,P[E+1]=G[oe+H],H+=b,P[E+2]=G[oe+H],H+=b,P[E+3]=G[oe+H],E+=4}N--}return P},v=function(S,A,C,b){const P=S[A+3],E=Math.pow(2,P-128)/255;C[b+0]=S[A+0]*E,C[b+1]=S[A+1]*E,C[b+2]=S[A+2]*E,C[b+3]=1},_=function(S,A,C,b){const P=S[A+3],E=Math.pow(2,P-128)/255;C[b+0]=Gd.toHalfFloat(Math.min(S[A+0]*E,65504)),C[b+1]=Gd.toHalfFloat(Math.min(S[A+1]*E,65504)),C[b+2]=Gd.toHalfFloat(Math.min(S[A+2]*E,65504)),C[b+3]=Gd.toHalfFloat(1)},x=new Uint8Array(e);x.pos=0;const y=m(x);if(y!==-1){const S=y.width,A=y.height,C=g(x.subarray(x.pos),S,A);if(C!==-1){let b,P,E;switch(this.type){case gs:E=C.length/4;const R=new Float32Array(E*4);for(let O=0;O<E;O++)v(C,O*4,R,O*4);b=R,P=gs;break;case Us:E=C.length/4;const B=new Uint16Array(E*4);for(let O=0;O<E;O++)_(C,O*4,B,O*4);b=B,P=Us;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:S,height:A,data:b,header:y.string,gamma:y.gamma,exposure:y.exposure,type:P}}}return null}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case gs:case Us:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=gn,o.magFilter=gn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const sS=new WeakMap;class vK extends Zi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new Er(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(sS.has(e)){const l=sS.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),sS.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new Mt;e.index&&t.setIndex(new Kt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new Kt(o,a))}return t}_loadLibrary(e,t){const i=new Er(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=yK.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function yK(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const f=u.draco,d=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const g=t(f,d,m,c),v=g.attributes.map(_=>_.array.buffer);g.index&&v.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},v)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{f.destroy(m),f.destroy(d)}});break}};function t(o,a,l,c){const u=c.attributeIDs,f=c.attributeTypes;let d,m;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)d=new o.Mesh,m=a.DecodeBufferToMesh(l,d);else if(g===o.POINT_CLOUD)d=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const v={index:null,attributes:[]};for(const _ in u){const x=self[f[_]];let y,S;if(c.useUniqueIDs)S=u[_],y=a.GetAttributeByUniqueId(d,S);else{if(S=a.GetAttributeId(d,o[u[_]]),S===-1)continue;y=a.GetAttribute(d,S)}v.attributes.push(r(o,a,d,_,x,y))}return g===o.TRIANGULAR_MESH&&(v.index=i(o,a,d)),o.destroy(d),v}function i(o,a,l){const u=l.num_faces()*3,f=u*4,d=o._malloc(f);a.GetTrianglesUInt32Array(l,f,d);const m=new Uint32Array(o.HEAPF32.buffer,d,u).slice();return o._free(d),{array:m,itemSize:1}}function r(o,a,l,c,u,f){const d=f.num_components(),g=l.num_points()*d,v=g*u.BYTES_PER_ELEMENT,_=s(o,u),x=o._malloc(v);a.GetAttributeDataArrayForAllPoints(l,f,_,v,x);const y=new u(o.HEAPF32.buffer,x,g).slice();return o._free(x),{name:c,array:y,itemSize:d}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let L0;const oS=()=>{if(L0)return L0;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const d=new Uint8Array(f.length);for(let g=0;g<f.length;++g){const v=f.charCodeAt(g);d[g]=v>96?v-71:v>64?v-65:v>47?v+4:v>46?63:62}let m=0;for(let g=0;g<f.length;++g)d[m++]=d[g]<60?i[d[g]]:(d[g]-60)*64+d[++g];return d.buffer.slice(0,m)}function l(f,d,m,g,v,_){const x=s.exports.sbrk,y=m+3&-4,S=x(y*g),A=x(v.length),C=new Uint8Array(s.exports.memory.buffer);C.set(v,A);const b=f(S,m,g,A,v.length);if(b===0&&_&&_(S,y,g),d.set(C.subarray(S,S+m*g)),x(S-x(0)),b!==0)throw new Error(`Malformed buffer data: ${b}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return L0={ready:o,supported:!0,decodeVertexBuffer(f,d,m,g,v){l(s.exports.meshopt_decodeVertexBuffer,f,d,m,g,s.exports[c[v]])},decodeIndexBuffer(f,d,m,g){l(s.exports.meshopt_decodeIndexBuffer,f,d,m,g)},decodeIndexSequence(f,d,m,g){l(s.exports.meshopt_decodeIndexSequence,f,d,m,g)},decodeGltfBuffer(f,d,m,g,v,_){l(s.exports[u[v]],f,d,m,g,s.exports[c[_]])}},L0};function _K(){var n=Object.create(null);function e(r,s){var o=r.id,a=r.name,l=r.dependencies;l===void 0&&(l=[]);var c=r.init;c===void 0&&(c=function(){});var u=r.getTransferables;if(u===void 0&&(u=null),!n[o])try{l=l.map(function(d){return d&&d.isWorkerModule&&(e(d,function(m){if(m instanceof Error)throw m}),d=n[d.id].value),d}),c=i("<"+a+">.init",c),u&&(u=i("<"+a+">.getTransferables",u));var f=null;typeof c=="function"?f=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:f,getTransferables:u},s(f)}catch(d){d&&d.noLog||console.error(d),s(d)}}function t(r,s){var o,a=r.id,l=r.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=n[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(f){return s(f instanceof Error?f:new Error(""+f))}):u(c)}catch(f){s(f)}function u(f){try{var d=n[a].getTransferables&&n[a].getTransferables(f);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),s(f,d)}catch(m){console.error(m),s(m)}}}function i(r,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(r){var s=r.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&t(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function xK(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var r=Promise.all(t).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var EF=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return EF=function(){return n},n},SK=0,wK=0,aS=!1,up=Object.create(null),fp=Object.create(null),BA=Object.create(null);function Im(n){if((!n||typeof n.init!="function")&&!aS)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,r=n.workerId;if(!EF())return xK(n);r==null&&(r="#default");var s="workerModule"+ ++SK,o=n.name||s,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(aS=!0,c=Im({workerId:r,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+Sv(c)+`
)}`}),aS=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!a){a=yR(r,"registerModule",l.workerModuleData);var f=function(){a=null,fp[r].delete(f)};(fp[r]||(fp[r]=new Set)).add(f)}return a.then(function(d){var m=d.isCallable;if(m)return yR(r,"callModule",{id:s,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:Sv(t),getTransferables:i&&Sv(i)},l}function AK(n){fp[n]&&fp[n].forEach(function(e){e()}),up[n]&&(up[n].terminate(),delete up[n])}function Sv(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function MK(n){var e=up[n];if(!e){var t=Sv(_K);e=up[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,o=BA[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete BA[s],o(r)}}return e}function yR(n,e,t){return new Promise(function(i,r){var s=++wK;BA[s]=function(o){o.success?i(o.result):r(new Error("Error in worker "+e+" call: "+o.error))},MK(n).postMessage({messageId:s,action:e,data:t})})}function bF(){var n=function(e){function t(J,Q,U,V,Z,K,ne,z){var ae=1-ne;z.x=ae*ae*J+2*ae*ne*U+ne*ne*Z,z.y=ae*ae*Q+2*ae*ne*V+ne*ne*K}function i(J,Q,U,V,Z,K,ne,z,ae,ie){var ye=1-ae;ie.x=ye*ye*ye*J+3*ye*ye*ae*U+3*ye*ae*ae*Z+ae*ae*ae*ne,ie.y=ye*ye*ye*Q+3*ye*ye*ae*V+3*ye*ae*ae*K+ae*ae*ae*z}function r(J,Q){for(var U=/([MLQCZ])([^MLQCZ]*)/g,V,Z,K,ne,z;V=U.exec(J);){var ae=V[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(ie){return parseFloat(ie)});switch(V[1]){case"M":ne=Z=ae[0],z=K=ae[1];break;case"L":(ae[0]!==ne||ae[1]!==z)&&Q("L",ne,z,ne=ae[0],z=ae[1]);break;case"Q":{Q("Q",ne,z,ne=ae[2],z=ae[3],ae[0],ae[1]);break}case"C":{Q("C",ne,z,ne=ae[4],z=ae[5],ae[0],ae[1],ae[2],ae[3]);break}case"Z":(ne!==Z||z!==K)&&Q("L",ne,z,Z,K);break}}}function s(J,Q,U){U===void 0&&(U=16);var V={x:0,y:0};r(J,function(Z,K,ne,z,ae,ie,ye,re,he){switch(Z){case"L":Q(K,ne,z,ae);break;case"Q":{for(var q=K,ce=ne,Ce=1;Ce<U;Ce++)t(K,ne,ie,ye,z,ae,Ce/(U-1),V),Q(q,ce,V.x,V.y),q=V.x,ce=V.y;break}case"C":{for(var ge=K,Ae=ne,ke=1;ke<U;ke++)i(K,ne,ie,ye,re,he,z,ae,ke/(U-1),V),Q(ge,Ae,V.x,V.y),ge=V.x,Ae=V.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(J,Q){var U=J.getContext?J.getContext("webgl",c):J,V=l.get(U);if(!V){let ge=function(we){var F=K[we];if(!F&&(F=K[we]=U.getExtension(we),!F))throw new Error(we+" not supported");return F},Ae=function(we,F){var D=U.createShader(F);return U.shaderSource(D,we),U.compileShader(D),D},ke=function(we,F,D,$){if(!ne[we]){var le={},Se={},Te=U.createProgram();U.attachShader(Te,Ae(F,U.VERTEX_SHADER)),U.attachShader(Te,Ae(D,U.FRAGMENT_SHADER)),U.linkProgram(Te),ne[we]={program:Te,transaction:function(Be){U.useProgram(Te),Be({setUniform:function(Xe,Ie){for(var Ve=[],He=arguments.length-2;He-- >0;)Ve[He]=arguments[He+2];var Fe=Se[Ie]||(Se[Ie]=U.getUniformLocation(Te,Ie));U["uniform"+Xe].apply(U,[Fe].concat(Ve))},setAttribute:function(Xe,Ie,Ve,He,Fe){var Ze=le[Xe];Ze||(Ze=le[Xe]={buf:U.createBuffer(),loc:U.getAttribLocation(Te,Xe),data:null}),U.bindBuffer(U.ARRAY_BUFFER,Ze.buf),U.vertexAttribPointer(Ze.loc,Ie,U.FLOAT,!1,0,0),U.enableVertexAttribArray(Ze.loc),Z?U.vertexAttribDivisor(Ze.loc,He):ge("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Ze.loc,He),Fe!==Ze.data&&(U.bufferData(U.ARRAY_BUFFER,Fe,Ve),Ze.data=Fe)}})}}}ne[we].transaction($)},ve=function(we,F){ae++;try{U.activeTexture(U.TEXTURE0+ae);var D=z[we];D||(D=z[we]=U.createTexture(),U.bindTexture(U.TEXTURE_2D,D),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,U.NEAREST),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,U.NEAREST)),U.bindTexture(U.TEXTURE_2D,D),F(D,ae)}finally{ae--}},De=function(we,F,D){var $=U.createFramebuffer();ie.push($),U.bindFramebuffer(U.FRAMEBUFFER,$),U.activeTexture(U.TEXTURE0+F),U.bindTexture(U.TEXTURE_2D,we),U.framebufferTexture2D(U.FRAMEBUFFER,U.COLOR_ATTACHMENT0,U.TEXTURE_2D,we,0);try{D($)}finally{U.deleteFramebuffer($),U.bindFramebuffer(U.FRAMEBUFFER,ie[--ie.length-1]||null)}},Le=function(){K={},ne={},z={},ae=-1,ie.length=0};var ye=ge,re=Ae,he=ke,q=ve,ce=De,Ce=Le,Z=typeof WebGL2RenderingContext<"u"&&U instanceof WebGL2RenderingContext,K={},ne={},z={},ae=-1,ie=[];U.canvas.addEventListener("webglcontextlost",function(we){Le(),we.preventDefault()},!1),l.set(U,V={gl:U,isWebGL2:Z,getExtension:ge,withProgram:ke,withTexture:ve,withTextureFramebuffer:De,handleContextLoss:Le})}Q(V)}function f(J,Q,U,V,Z,K,ne,z){ne===void 0&&(ne=15),z===void 0&&(z=null),u(J,function(ae){var ie=ae.gl,ye=ae.withProgram,re=ae.withTexture;re("copy",function(he,q){ie.texImage2D(ie.TEXTURE_2D,0,ie.RGBA,Z,K,0,ie.RGBA,ie.UNSIGNED_BYTE,Q),ye("copy",o,a,function(ce){var Ce=ce.setUniform,ge=ce.setAttribute;ge("aUV",2,ie.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Ce("1i","image",q),ie.bindFramebuffer(ie.FRAMEBUFFER,z||null),ie.disable(ie.BLEND),ie.colorMask(ne&8,ne&4,ne&2,ne&1),ie.viewport(U,V,Z,K),ie.scissor(U,V,Z,K),ie.drawArrays(ie.TRIANGLES,0,3)})})})}function d(J,Q,U){var V=J.width,Z=J.height;u(J,function(K){var ne=K.gl,z=new Uint8Array(V*Z*4);ne.readPixels(0,0,V,Z,ne.RGBA,ne.UNSIGNED_BYTE,z),J.width=Q,J.height=U,f(ne,z,0,0,V,Z)})}var m=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:f,resizeWebGLCanvasWithoutClearing:d});function g(J,Q,U,V,Z,K){K===void 0&&(K=1);var ne=new Uint8Array(J*Q),z=V[2]-V[0],ae=V[3]-V[1],ie=[];s(U,function(ge,Ae,ke,ve){ie.push({x1:ge,y1:Ae,x2:ke,y2:ve,minX:Math.min(ge,ke),minY:Math.min(Ae,ve),maxX:Math.max(ge,ke),maxY:Math.max(Ae,ve)})}),ie.sort(function(ge,Ae){return ge.maxX-Ae.maxX});for(var ye=0;ye<J;ye++)for(var re=0;re<Q;re++){var he=ce(V[0]+z*(ye+.5)/J,V[1]+ae*(re+.5)/Q),q=Math.pow(1-Math.abs(he)/Z,K)/2;he<0&&(q=1-q),q=Math.max(0,Math.min(255,Math.round(q*255))),ne[re*J+ye]=q}return ne;function ce(ge,Ae){for(var ke=1/0,ve=1/0,De=ie.length;De--;){var Le=ie[De];if(Le.maxX+ve<=ge)break;if(ge+ve>Le.minX&&Ae-ve<Le.maxY&&Ae+ve>Le.minY){var we=x(ge,Ae,Le.x1,Le.y1,Le.x2,Le.y2);we<ke&&(ke=we,ve=Math.sqrt(ke))}}return Ce(ge,Ae)&&(ve=-ve),ve}function Ce(ge,Ae){for(var ke=0,ve=ie.length;ve--;){var De=ie[ve];if(De.maxX<=ge)break;var Le=De.y1>Ae!=De.y2>Ae&&ge<(De.x2-De.x1)*(Ae-De.y1)/(De.y2-De.y1)+De.x1;Le&&(ke+=De.y1<De.y2?1:-1)}return ke!==0}}function v(J,Q,U,V,Z,K,ne,z,ae,ie){K===void 0&&(K=1),z===void 0&&(z=0),ae===void 0&&(ae=0),ie===void 0&&(ie=0),_(J,Q,U,V,Z,K,ne,null,z,ae,ie)}function _(J,Q,U,V,Z,K,ne,z,ae,ie,ye){K===void 0&&(K=1),ae===void 0&&(ae=0),ie===void 0&&(ie=0),ye===void 0&&(ye=0);for(var re=g(J,Q,U,V,Z,K),he=new Uint8Array(re.length*4),q=0;q<re.length;q++)he[q*4+ye]=re[q];f(ne,he,ae,ie,J,Q,1<<3-ye,z)}function x(J,Q,U,V,Z,K){var ne=Z-U,z=K-V,ae=ne*ne+z*z,ie=ae?Math.max(0,Math.min(1,((J-U)*ne+(Q-V)*z)/ae)):0,ye=J-(U+ie*ne),re=Q-(V+ie*z);return ye*ye+re*re}var y=Object.freeze({__proto__:null,generate:g,generateIntoCanvas:v,generateIntoFramebuffer:_}),S="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",A="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",C="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",b=new Float32Array([0,0,2,0,0,2]),P=null,E=!1,R={},B=new WeakMap;function O(J){if(!E&&!X(J))throw new Error("WebGL generation not supported")}function G(J,Q,U,V,Z,K,ne){if(K===void 0&&(K=1),ne===void 0&&(ne=null),!ne&&(ne=P,!ne)){var z=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!z)throw new Error("OffscreenCanvas or DOM canvas not supported");ne=P=z.getContext("webgl",{depth:!1})}O(ne);var ae=new Uint8Array(J*Q*4);u(ne,function(he){var q=he.gl,ce=he.withTexture,Ce=he.withTextureFramebuffer;ce("readable",function(ge,Ae){q.texImage2D(q.TEXTURE_2D,0,q.RGBA,J,Q,0,q.RGBA,q.UNSIGNED_BYTE,null),Ce(ge,Ae,function(ke){k(J,Q,U,V,Z,K,q,ke,0,0,0),q.readPixels(0,0,J,Q,q.RGBA,q.UNSIGNED_BYTE,ae)})})});for(var ie=new Uint8Array(J*Q),ye=0,re=0;ye<ae.length;ye+=4)ie[re++]=ae[ye];return ie}function N(J,Q,U,V,Z,K,ne,z,ae,ie){K===void 0&&(K=1),z===void 0&&(z=0),ae===void 0&&(ae=0),ie===void 0&&(ie=0),k(J,Q,U,V,Z,K,ne,null,z,ae,ie)}function k(J,Q,U,V,Z,K,ne,z,ae,ie,ye){K===void 0&&(K=1),ae===void 0&&(ae=0),ie===void 0&&(ie=0),ye===void 0&&(ye=0),O(ne);var re=[];s(U,function(he,q,ce,Ce){re.push(he,q,ce,Ce)}),re=new Float32Array(re),u(ne,function(he){var q=he.gl,ce=he.isWebGL2,Ce=he.getExtension,ge=he.withProgram,Ae=he.withTexture,ke=he.withTextureFramebuffer,ve=he.handleContextLoss;if(Ae("rawDistances",function(De,Le){(J!==De._lastWidth||Q!==De._lastHeight)&&q.texImage2D(q.TEXTURE_2D,0,q.RGBA,De._lastWidth=J,De._lastHeight=Q,0,q.RGBA,q.UNSIGNED_BYTE,null),ge("main",S,A,function(we){var F=we.setAttribute,D=we.setUniform,$=!ce&&Ce("ANGLE_instanced_arrays"),le=!ce&&Ce("EXT_blend_minmax");F("aUV",2,q.STATIC_DRAW,0,b),F("aLineSegment",4,q.DYNAMIC_DRAW,1,re),D.apply(void 0,["4f","uGlyphBounds"].concat(V)),D("1f","uMaxDistance",Z),D("1f","uExponent",K),ke(De,Le,function(Se){q.enable(q.BLEND),q.colorMask(!0,!0,!0,!0),q.viewport(0,0,J,Q),q.scissor(0,0,J,Q),q.blendFunc(q.ONE,q.ONE),q.blendEquationSeparate(q.FUNC_ADD,ce?q.MAX:le.MAX_EXT),q.clear(q.COLOR_BUFFER_BIT),ce?q.drawArraysInstanced(q.TRIANGLES,0,3,re.length/4):$.drawArraysInstancedANGLE(q.TRIANGLES,0,3,re.length/4)})}),ge("post",o,C,function(we){we.setAttribute("aUV",2,q.STATIC_DRAW,0,b),we.setUniform("1i","tex",Le),q.bindFramebuffer(q.FRAMEBUFFER,z),q.disable(q.BLEND),q.colorMask(ye===0,ye===1,ye===2,ye===3),q.viewport(ae,ie,J,Q),q.scissor(ae,ie,J,Q),q.drawArrays(q.TRIANGLES,0,3)})}),q.isContextLost())throw ve(),new Error("webgl context lost")})}function X(J){var Q=!J||J===P?R:J.canvas||J,U=B.get(Q);if(U===void 0){E=!0;var V=null;try{var Z=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],K=G(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,J);U=K&&Z.length===K.length&&K.every(function(ne,z){return ne===Z[z]}),U||(V="bad trial run results",console.info(Z,K))}catch(ne){U=!1,V=ne.message}V&&console.warn("WebGL SDF generation not supported:",V),E=!1,B.set(Q,U)}return U}var te=Object.freeze({__proto__:null,generate:G,generateIntoCanvas:N,generateIntoFramebuffer:k,isSupported:X});function oe(J,Q,U,V,Z,K){Z===void 0&&(Z=Math.max(V[2]-V[0],V[3]-V[1])/2),K===void 0&&(K=1);try{return G.apply(te,arguments)}catch(ne){return console.info("WebGL SDF generation failed, falling back to JS",ne),g.apply(y,arguments)}}function H(J,Q,U,V,Z,K,ne,z,ae,ie){Z===void 0&&(Z=Math.max(V[2]-V[0],V[3]-V[1])/2),K===void 0&&(K=1),z===void 0&&(z=0),ae===void 0&&(ae=0),ie===void 0&&(ie=0);try{return N.apply(te,arguments)}catch(ye){return console.info("WebGL SDF generation failed, falling back to JS",ye),v.apply(y,arguments)}}return e.forEachPathCommand=r,e.generate=oe,e.generateIntoCanvas=H,e.javascript=y,e.pathToLineSegments=s,e.webgl=te,e.webglUtils=m,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function CK(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(t).forEach(function(ve,De){i[ve]=1<<De+1,r[i[ve]]=ve}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,a=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,c=i.S|i.WS|i.B|s|i.PDI|l,u=null;function f(){if(!u){u=new Map;var ve=function(Le){if(t.hasOwnProperty(Le)){var we=0;t[Le].split(",").forEach(function(F){var D=F.split("+"),$=D[0],le=D[1];$=parseInt($,36),le=le?parseInt(le,36):0,u.set(we+=$,i[Le]);for(var Se=0;Se<le;Se++)u.set(++we,i[Le])})}};for(var De in t)ve(De)}}function d(ve){return f(),u.get(ve.codePointAt(0))||i.L}function m(ve){return r[d(ve)]}var g={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function v(ve,De){var Le=36,we=0,F=new Map,D=De&&new Map,$;return ve.split(",").forEach(function le(Se){if(Se.indexOf("+")!==-1)for(var Te=+Se;Te--;)le($);else{$=Se;var Oe=Se.split(">"),Be=Oe[0],Me=Oe[1];Be=String.fromCodePoint(we+=parseInt(Be,Le)),Me=String.fromCodePoint(we+=parseInt(Me,Le)),F.set(Be,Me),De&&D.set(Me,Be)}}),{map:F,reverseMap:D}}var _,x,y;function S(){if(!_){var ve=v(g.pairs,!0),De=ve.map,Le=ve.reverseMap;_=De,x=Le,y=v(g.canonical,!1).map}}function A(ve){return S(),_.get(ve)||null}function C(ve){return S(),x.get(ve)||null}function b(ve){return S(),y.get(ve)||null}var P=i.L,E=i.R,R=i.EN,B=i.ES,O=i.ET,G=i.AN,N=i.CS,k=i.B,X=i.S,te=i.ON,oe=i.BN,H=i.NSM,J=i.AL,Q=i.LRO,U=i.RLO,V=i.LRE,Z=i.RLE,K=i.PDF,ne=i.LRI,z=i.RLI,ae=i.FSI,ie=i.PDI;function ye(ve,De){for(var Le=125,we=new Uint32Array(ve.length),F=0;F<ve.length;F++)we[F]=d(ve[F]);var D=new Map;function $(qn,_i){var un=we[qn];we[qn]=_i,D.set(un,D.get(un)-1),un&a&&D.set(a,D.get(a)-1),D.set(_i,(D.get(_i)||0)+1),_i&a&&D.set(a,(D.get(a)||0)+1)}for(var le=new Uint8Array(ve.length),Se=new Map,Te=[],Oe=null,Be=0;Be<ve.length;Be++)Oe||Te.push(Oe={start:Be,end:ve.length-1,level:De==="rtl"?1:De==="ltr"?0:mu(Be,!1)}),we[Be]&k&&(Oe.end=Be,Oe=null);for(var Me=Z|V|U|Q|s|ie|K|k,Xe=function(qn){return qn+(qn&1?1:2)},Ie=function(qn){return qn+(qn&1?2:1)},Ve=0;Ve<Te.length;Ve++){Oe=Te[Ve];var He=[{_level:Oe.level,_override:0,_isolate:0}],Fe=void 0,Ze=0,lt=0,yt=0;D.clear();for(var se=Oe.start;se<=Oe.end;se++){var xe=we[se];if(Fe=He[He.length-1],D.set(xe,(D.get(xe)||0)+1),xe&a&&D.set(a,(D.get(a)||0)+1),xe&Me)if(xe&(Z|V)){le[se]=Fe._level;var ze=(xe===Z?Ie:Xe)(Fe._level);ze<=Le&&!Ze&&!lt?He.push({_level:ze,_override:0,_isolate:0}):Ze||lt++}else if(xe&(U|Q)){le[se]=Fe._level;var Ye=(xe===U?Ie:Xe)(Fe._level);Ye<=Le&&!Ze&&!lt?He.push({_level:Ye,_override:xe&U?E:P,_isolate:0}):Ze||lt++}else if(xe&s){xe&ae&&(xe=mu(se+1,!0)===1?z:ne),le[se]=Fe._level,Fe._override&&$(se,Fe._override);var nt=(xe===z?Ie:Xe)(Fe._level);nt<=Le&&Ze===0&&lt===0?(yt++,He.push({_level:nt,_override:0,_isolate:1,_isolInitIndex:se})):Ze++}else if(xe&ie){if(Ze>0)Ze--;else if(yt>0){for(lt=0;!He[He.length-1]._isolate;)He.pop();var xt=He[He.length-1]._isolInitIndex;xt!=null&&(Se.set(xt,se),Se.set(se,xt)),He.pop(),yt--}Fe=He[He.length-1],le[se]=Fe._level,Fe._override&&$(se,Fe._override)}else xe&K?(Ze===0&&(lt>0?lt--:!Fe._isolate&&He.length>1&&(He.pop(),Fe=He[He.length-1])),le[se]=Fe._level):xe&k&&(le[se]=Oe.level);else le[se]=Fe._level,Fe._override&&xe!==oe&&$(se,Fe._override)}for(var Nt=[],jt=null,zt=Oe.start;zt<=Oe.end;zt++){var Gt=we[zt];if(!(Gt&l)){var Ht=le[zt],Pt=Gt&s,vi=Gt===ie;jt&&Ht===jt._level?(jt._end=zt,jt._endsWithIsolInit=Pt):Nt.push(jt={_start:zt,_end:zt,_level:Ht,_startsWithPDI:vi,_endsWithIsolInit:Pt})}}for(var oi=[],Vt=0;Vt<Nt.length;Vt++){var yn=Nt[Vt];if(!yn._startsWithPDI||yn._startsWithPDI&&!Se.has(yn._start)){for(var Y=[jt=yn],pe=void 0;jt&&jt._endsWithIsolInit&&(pe=Se.get(jt._end))!=null;)for(var me=Vt+1;me<Nt.length;me++)if(Nt[me]._start===pe){Y.push(jt=Nt[me]);break}for(var ue=[],be=0;be<Y.length;be++)for(var tt=Y[be],ut=tt._start;ut<=tt._end;ut++)ue.push(ut);for(var gt=le[ue[0]],bt=Oe.level,Rt=ue[0]-1;Rt>=0;Rt--)if(!(we[Rt]&l)){bt=le[Rt];break}var It=ue[ue.length-1],kt=le[It],_n=Oe.level;if(!(we[It]&s)){for(var Zn=It+1;Zn<=Oe.end;Zn++)if(!(we[Zn]&l)){_n=le[Zn];break}}oi.push({_seqIndices:ue,_sosType:Math.max(bt,gt)%2?E:P,_eosType:Math.max(_n,kt)%2?E:P})}}for(var qi=0;qi<oi.length;qi++){var br=oi[qi],Ke=br._seqIndices,vt=br._sosType,bo=br._eosType;if(D.get(H))for(var cn=0;cn<Ke.length;cn++){var Qr=Ke[cn];if(we[Qr]&H){for(var Zs=vt,bi=cn-1;bi>=0;bi--)if(!(we[Ke[bi]]&l)){Zs=we[Ke[bi]];break}$(Qr,Zs&(s|ie)?te:Zs)}}if(D.get(R))for(var Ti=0;Ti<Ke.length;Ti++){var St=Ke[Ti];if(we[St]&R)for(var Dt=Ti-1;Dt>=-1;Dt--){var $i=Dt===-1?vt:we[Ke[Dt]];if($i&o){$i===J&&$(St,G);break}}}if(D.get(J))for(var Xt=0;Xt<Ke.length;Xt++){var Wn=Ke[Xt];we[Wn]&J&&$(Wn,E)}if(D.get(B)||D.get(N))for(var er=1;er<Ke.length-1;er++){var Tr=Ke[er];if(we[Tr]&(B|N)){for(var jn=0,wa=0,lu=er-1;lu>=0&&(jn=we[Ke[lu]],!!(jn&l));lu--);for(var cu=er+1;cu<Ke.length&&(wa=we[Ke[cu]],!!(wa&l));cu++);jn===wa&&(we[Tr]===B?jn===R:jn&(R|G))&&$(Tr,jn)}}if(D.get(R))for(var qs=0;qs<Ke.length;qs++){var Fm=Ke[qs];if(we[Fm]&R){for(var ki=qs-1;ki>=0&&we[Ke[ki]]&(O|l);ki--)$(Ke[ki],R);for(var uu=qs+1;uu<Ke.length&&we[Ke[uu]]&(O|l);uu++)$(Ke[uu],R)}}if(D.get(O)||D.get(B)||D.get(N))for(var Bl=0;Bl<Ke.length;Bl++){var Um=Ke[Bl];if(we[Um]&(O|B|N)){$(Um,te);for(var To=Bl-1;To>=0&&we[Ke[To]]&l;To--)$(Ke[To],te);for(var Po=Bl+1;Po<Ke.length&&we[Ke[Po]]&l;Po++)$(Ke[Po],te)}}if(D.get(R))for(var Ro=0,Dl=vt;Ro<Ke.length;Ro++){var Nm=Ke[Ro],Ph=we[Nm];Ph&R?Dl===P&&$(Nm,P):Ph&o&&(Dl=Ph)}if(D.get(a)){var Io=E|R|G,fu=Io|P,$s=[];{for(var Aa=[],eo=0;eo<Ke.length;eo++)if(we[Ke[eo]]&a){var Ft=ve[Ke[eo]],Rh=void 0;if(A(Ft)!==null)if(Aa.length<63)Aa.push({char:Ft,seqIndex:eo});else break;else if((Rh=C(Ft))!==null)for(var Bo=Aa.length-1;Bo>=0;Bo--){var hu=Aa[Bo].char;if(hu===Rh||hu===C(b(Ft))||A(b(hu))===Ft){$s.push([Aa[Bo].seqIndex,eo]),Aa.length=Bo;break}}}$s.sort(function(qn,_i){return qn[0]-_i[0]})}for(var Ih=0;Ih<$s.length;Ih++){for(var zm=$s[Ih],En=zm[0],Ma=zm[1],Gm=!1,tr=0,Bh=En+1;Bh<Ma;Bh++){var Ca=Ke[Bh];if(we[Ca]&fu){Gm=!0;var Pr=we[Ca]&Io?E:P;if(Pr===no(Ca)){tr=Pr;break}}}if(Gm&&!tr){tr=vt;for(var Dh=En-1;Dh>=0;Dh--){var du=Ke[Dh];if(we[du]&fu){var Rr=we[du]&Io?E:P;Rr!==no(du)?tr=Rr:tr=no(du);break}}}if(tr){if(we[Ke[En]]=we[Ke[Ma]]=tr,tr!==no(Ke[En])){for(var nr=En+1;nr<Ke.length;nr++)if(!(we[Ke[nr]]&l)){d(ve[Ke[nr]])&H&&(we[Ke[nr]]=tr);break}}if(tr!==no(Ke[Ma])){for(var to=Ma+1;to<Ke.length;to++)if(!(we[Ke[to]]&l)){d(ve[Ke[to]])&H&&(we[Ke[to]]=tr);break}}}}for(var Zr=0;Zr<Ke.length;Zr++)if(we[Ke[Zr]]&a){for(var Lh=Zr,Oh=Zr,dr=vt,Ll=Zr-1;Ll>=0;Ll--)if(we[Ke[Ll]]&l)Lh=Ll;else{dr=we[Ke[Ll]]&Io?E:P;break}for(var Ol=bo,kl=Zr+1;kl<Ke.length;kl++)if(we[Ke[kl]]&(a|l))Oh=kl;else{Ol=we[Ke[kl]]&Io?E:P;break}for(var Fi=Lh;Fi<=Oh;Fi++)we[Ke[Fi]]=dr===Ol?dr:no(Ke[Fi]);Zr=Oh}}}for(var yi=Oe.start;yi<=Oe.end;yi++){var pu=le[yi],As=we[yi];if(pu&1?As&(P|R|G)&&le[yi]++:As&E?le[yi]++:As&(G|R)&&(le[yi]+=2),As&l&&(le[yi]=yi===0?Oe.level:le[yi-1]),yi===Oe.end||d(ve[yi])&(X|k))for(var Ea=yi;Ea>=0&&d(ve[Ea])&c;Ea--)le[Ea]=Oe.level}}return{levels:le,paragraphs:Te};function mu(qn,_i){for(var un=qn;un<ve.length;un++){var ai=we[un];if(ai&(E|J))return 1;if(ai&(k|P)||_i&&ai===ie)return 0;if(ai&s){var Ms=Hm(un);un=Ms===-1?ve.length:Ms}}return 0}function Hm(qn){for(var _i=1,un=qn+1;un<ve.length;un++){var ai=we[un];if(ai&k)break;if(ai&ie){if(--_i===0)return un}else ai&s&&_i++}return-1}function no(qn){return le[qn]&1?E:P}}var re="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",he;function q(){if(!he){var ve=v(re,!0),De=ve.map,Le=ve.reverseMap;Le.forEach(function(we,F){De.set(F,we)}),he=De}}function ce(ve){return q(),he.get(ve)||null}function Ce(ve,De,Le,we){var F=ve.length;Le=Math.max(0,Le==null?0:+Le),we=Math.min(F-1,we==null?F-1:+we);for(var D=new Map,$=Le;$<=we;$++)if(De[$]&1){var le=ce(ve[$]);le!==null&&D.set($,le)}return D}function ge(ve,De,Le,we){var F=ve.length;Le=Math.max(0,Le==null?0:+Le),we=Math.min(F-1,we==null?F-1:+we);var D=[];return De.paragraphs.forEach(function($){var le=Math.max(Le,$.start),Se=Math.min(we,$.end);if(le<Se){for(var Te=De.levels.slice(le,Se+1),Oe=Se;Oe>=le&&d(ve[Oe])&c;Oe--)Te[Oe]=$.level;for(var Be=$.level,Me=1/0,Xe=0;Xe<Te.length;Xe++){var Ie=Te[Xe];Ie>Be&&(Be=Ie),Ie<Me&&(Me=Ie|1)}for(var Ve=Be;Ve>=Me;Ve--)for(var He=0;He<Te.length;He++)if(Te[He]>=Ve){for(var Fe=He;He+1<Te.length&&Te[He+1]>=Ve;)He++;He>Fe&&D.push([Fe+Le,He+Le])}}}),D}function Ae(ve,De,Le,we){var F=ke(ve,De,Le,we),D=[].concat(ve);return F.forEach(function($,le){D[le]=(De.levels[$]&1?ce(ve[$]):null)||ve[$]}),D.join("")}function ke(ve,De,Le,we){for(var F=ge(ve,De,Le,we),D=[],$=0;$<ve.length;$++)D[$]=$;return F.forEach(function(le){for(var Se=le[0],Te=le[1],Oe=D.slice(Se,Te+1),Be=Oe.length;Be--;)D[Te-Be]=Oe[Be]}),D}return e.closingToOpeningBracket=C,e.getBidiCharType=d,e.getBidiCharTypeName=m,e.getCanonicalBracket=b,e.getEmbeddingLevels=ye,e.getMirroredCharacter=ce,e.getMirroredCharactersMap=Ce,e.getReorderSegments=ge,e.getReorderedIndices=ke,e.getReorderedString=Ae,e.openingToClosingBracket=A,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const TF=/\bvoid\s+main\s*\(\s*\)\s*{/g;function DA(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,r){let s=Tt[r];return s?DA(s):i}return n.replace(e,t)}const Ri=[];for(let n=0;n<256;n++)Ri[n]=(n<16?"0":"")+n.toString(16);function EK(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ri[n&255]+Ri[n>>8&255]+Ri[n>>16&255]+Ri[n>>24&255]+"-"+Ri[e&255]+Ri[e>>8&255]+"-"+Ri[e>>16&15|64]+Ri[e>>24&255]+"-"+Ri[t&63|128]+Ri[t>>8&255]+"-"+Ri[t>>16&255]+Ri[t>>24&255]+Ri[i&255]+Ri[i>>8&255]+Ri[i>>16&255]+Ri[i>>24&255]).toUpperCase()}const tc=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},bK=Date.now(),_R=new WeakMap,xR=new Map;let TK=1e10;function LA(n,e){const t=BK(e);let i=_R.get(n);if(i||_R.set(n,i=Object.create(null)),i[t])return new i[t];const r=`_onBeforeCompile${t}`,s=function(c,u){n.onBeforeCompile.call(this,c,u);const f=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let d=xR[f];if(!d){const m=PK(this,c,e,t);d=xR[f]=m}c.vertexShader=d.vertexShader,c.fragmentShader=d.fragmentShader,tc(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-bK}}),this[r]&&this[r](c)},o=function(){return a(e.chained?n:n.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:n}),Object.defineProperty(u,"id",{value:TK++}),u.uuid=EK(),u.uniforms=tc({},c.uniforms,e.uniforms),u.defines=tc({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",u.extensions=tc({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(c){this[r]=c}},copy:{writable:!0,configurable:!0,value:function(c){return n.copy.call(this,c),!n.isShaderMaterial&&!n.isDerivedMaterial&&(tc(this.extensions,c.extensions),tc(this.defines,c.defines),tc(this.uniforms,Yy.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new n.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=LA(n.isDerivedMaterial?n.getDepthMaterial():new Zy({depthPacking:yC}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=LA(n.isDerivedMaterial?n.getDistanceMaterial():new qy,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),n.dispose.call(this)}}};return i[t]=o,new o}function PK(n,{vertexShader:e,fragmentShader:t},i,r){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:f,fragmentColorTransform:d,customRewriter:m,timeUniform:g}=i;if(s=s||"",o=o||"",a=a||"",c=c||"",u=u||"",f=f||"",(l||m)&&(e=DA(e)),(d||m)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=DA(t)),m){let v=m({vertexShader:e,fragmentShader:t});e=v.vertexShader,t=v.fragmentShader}if(d){let v=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,_=>(v.push(_),"")),f=`${d}
${v.join(`
`)}
${f}`}if(g){const v=`
uniform float ${g};
`;s=v+s,c=v+c}return l&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(v,_,x,y)=>/\battribute\s+vec[23]\s+$/.test(y.substr(0,x))?_:`troika_${_}_${r}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=SR(e,r,s,o,a),t=SR(t,r,c,u,f),{vertexShader:e,fragmentShader:t}}function SR(n,e,t,i,r){return(i||r||t)&&(n=n.replace(TF,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),n}function RK(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let IK=0;const wR=new Map;function BK(n){const e=JSON.stringify(n,RK);let t=wR.get(e);return t==null&&wR.set(e,t=++IK),t}function DK(n,e,t){const{defaultFontURL:i}=t,r=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",l=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function c(y,S){function A(){const C=b=>{console.error(`Failure loading font ${y}${y===i?"":"; trying fallback"}`,b),y!==i&&(y=i,A())};try{const b=new XMLHttpRequest;b.open("get",y,!0),b.responseType="arraybuffer",b.onload=function(){if(b.status>=400)C(new Error(b.statusText));else if(b.status>0)try{const P=n(b.response);S(P)}catch(P){C(P)}},b.onerror=C,b.send()}catch(b){C(b)}}A()}function u(y,S){y||(y=i);let A=r[y];A?A.pending?A.pending.push(S):S(A):(r[y]={pending:[S]},c(y,C=>{let b=r[y].pending;r[y]=C,b.forEach(P=>P(C))}))}function f({text:y="",font:S=i,sdfGlyphSize:A=64,fontSize:C=1,letterSpacing:b=0,lineHeight:P="normal",maxWidth:E=s,direction:R,textAlign:B="left",textIndent:O=0,whiteSpace:G="normal",overflowWrap:N="normal",anchorX:k=0,anchorY:X=0,includeCaretPositions:te=!1,chunkedBoundsSize:oe=8192,colorRanges:H=null},J,Q=!1){const U=v(),V={fontLoad:0,typesetting:0};y.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),y=y.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),C=+C,b=+b,E=+E,P=P||"normal",O=+O,u(S,Z=>{const K=isFinite(E);let ne=null,z=null,ae=null,ie=null,ye=null,re=null,he=null,q=0,ce=0,Ce=G!=="nowrap";const{ascender:ge,descender:Ae,unitsPerEm:ke,lineGap:ve,capHeight:De,xHeight:Le}=Z;V.fontLoad=v()-U;const we=v(),F=C/ke;P==="normal"&&(P=(ge-Ae+ve)/ke),P=P*C;const D=(P-(ge-Ae)*F)/2,$=-(ge*F+D),le=Math.min(P,(ge-Ae)*F),Se=(ge+Ae)/2*F-le/2;let Te=O,Oe=new _;const Be=[Oe];Z.forEachGlyph(y,C,b,(Ie,Ve,He)=>{const Fe=y.charAt(He),Ze=Ie.advanceWidth*F,lt=Oe.count;let yt;if("isEmpty"in Ie||(Ie.isWhitespace=!!Fe&&new RegExp(a).test(Fe),Ie.canBreakAfter=!!Fe&&l.test(Fe),Ie.isEmpty=Ie.xMin===Ie.xMax||Ie.yMin===Ie.yMax||o.test(Fe)),!Ie.isWhitespace&&!Ie.isEmpty&&ce++,Ce&&K&&!Ie.isWhitespace&&Ve+Ze+Te>E&&lt){if(Oe.glyphAt(lt-1).glyphObj.canBreakAfter)yt=new _,Te=-Ve;else for(let xe=lt;xe--;)if(xe===0&&N==="break-word"){yt=new _,Te=-Ve;break}else if(Oe.glyphAt(xe).glyphObj.canBreakAfter){yt=Oe.splitAt(xe+1);const ze=yt.glyphAt(0).x;Te-=ze;for(let Ye=yt.count;Ye--;)yt.glyphAt(Ye).x-=ze;break}yt&&(Oe.isSoftWrapped=!0,Oe=yt,Be.push(Oe),q=E)}let se=Oe.glyphAt(Oe.count);se.glyphObj=Ie,se.x=Ve+Te,se.width=Ze,se.charIndex=He,Fe===`
`&&(Oe=new _,Be.push(Oe),Te=-(Ve+Ze+b*C)+O)}),Be.forEach(Ie=>{for(let Ve=Ie.count;Ve--;){let{glyphObj:He,x:Fe,width:Ze}=Ie.glyphAt(Ve);if(!He.isWhitespace){Ie.width=Fe+Ze,Ie.width>q&&(q=Ie.width);return}}});let Me=0,Xe=0;if(k&&(typeof k=="number"?Me=-k:typeof k=="string"&&(Me=-q*(k==="left"?0:k==="center"?.5:k==="right"?1:m(k)))),X){if(typeof X=="number")Xe=-X;else if(typeof X=="string"){let Ie=Be.length*P;Xe=X==="top"?0:X==="top-baseline"?-$:X==="top-cap"?-$-De*F:X==="top-ex"?-$-Le*F:X==="middle"?Ie/2:X==="bottom"?Ie:X==="bottom-baseline"?Ie-D+Ae*F:m(X)*Ie}}if(!Q){const Ie=e.getEmbeddingLevels(y,R);ne=new Uint16Array(ce),z=new Float32Array(ce*2),ae={},re=[s,s,-s,-s],he=[];let Ve=$;te&&(ye=new Float32Array(y.length*3)),H&&(ie=new Uint8Array(ce*3));let He=0,Fe=-1,Ze=-1,lt,yt;if(Be.forEach((se,xe)=>{let{count:ze,width:Ye}=se;if(ze>0){let nt=0;for(let Ht=ze;Ht--&&se.glyphAt(Ht).glyphObj.isWhitespace;)nt++;let xt=0,Nt=0;if(B==="center")xt=(q-Ye)/2;else if(B==="right")xt=q-Ye;else if(B==="justify"&&se.isSoftWrapped){let Ht=0;for(let Pt=ze-nt;Pt--;)se.glyphAt(Pt).glyphObj.isWhitespace&&Ht++;Nt=(q-Ye)/Ht}if(Nt||xt){let Ht=0;for(let Pt=0;Pt<ze;Pt++){let vi=se.glyphAt(Pt);const oi=vi.glyphObj;vi.x+=xt+Ht,Nt!==0&&oi.isWhitespace&&Pt<ze-nt&&(Ht+=Nt,vi.width+=Nt)}}const jt=e.getReorderSegments(y,Ie,se.glyphAt(0).charIndex,se.glyphAt(se.count-1).charIndex);for(let Ht=0;Ht<jt.length;Ht++){const[Pt,vi]=jt[Ht];let oi=1/0,Vt=-1/0;for(let yn=0;yn<ze;yn++)if(se.glyphAt(yn).charIndex>=Pt){let Y=yn,pe=yn;for(;pe<ze;pe++){let me=se.glyphAt(pe);if(me.charIndex>vi)break;pe<ze-nt&&(oi=Math.min(oi,me.x),Vt=Math.max(Vt,me.x+me.width))}for(let me=Y;me<pe;me++){const ue=se.glyphAt(me);ue.x=Vt-(ue.x+ue.width-oi)}break}}let zt;const Gt=Ht=>zt=Ht;for(let Ht=0;Ht<ze;Ht++){let Pt=se.glyphAt(Ht);zt=Pt.glyphObj;const vi=zt.index,oi=Ie.levels[Pt.charIndex]&1;if(oi){const Vt=e.getMirroredCharacter(y[Pt.charIndex]);Vt&&Z.forEachGlyph(Vt,0,0,Gt)}if(te){const{charIndex:Vt}=Pt,yn=Pt.x+Me,Y=Pt.x+Pt.width+Me;ye[Vt*3]=oi?Y:yn,ye[Vt*3+1]=oi?yn:Y,ye[Vt*3+2]=Ve+Se+Xe;const pe=Vt-Fe;pe>1&&g(ye,Fe,pe),Fe=Vt}if(H){const{charIndex:Vt}=Pt;for(;Vt>Ze;)Ze++,H.hasOwnProperty(Ze)&&(yt=H[Ze])}if(!zt.isWhitespace&&!zt.isEmpty){const Vt=He++;ae[vi]||(ae[vi]={path:zt.path,pathBounds:[zt.xMin,zt.yMin,zt.xMax,zt.yMax]});const yn=Pt.x+Me,Y=Ve+Xe;z[Vt*2]=yn,z[Vt*2+1]=Y;const pe=yn+zt.xMin*F,me=Y+zt.yMin*F,ue=yn+zt.xMax*F,be=Y+zt.yMax*F;pe<re[0]&&(re[0]=pe),me<re[1]&&(re[1]=me),ue>re[2]&&(re[2]=ue),be>re[3]&&(re[3]=be),Vt%oe===0&&(lt={start:Vt,end:Vt,rect:[s,s,-s,-s]},he.push(lt)),lt.end++;const tt=lt.rect;if(pe<tt[0]&&(tt[0]=pe),me<tt[1]&&(tt[1]=me),ue>tt[2]&&(tt[2]=ue),be>tt[3]&&(tt[3]=be),ne[Vt]=vi,H){const ut=Vt*3;ie[ut]=yt>>16&255,ie[ut+1]=yt>>8&255,ie[ut+2]=yt&255}}}}Ve-=P}),ye){const se=y.length-Fe;se>1&&g(ye,Fe,se)}}V.typesetting=v()-we,J({glyphIds:ne,glyphPositions:z,glyphData:ae,caretPositions:ye,caretHeight:le,glyphColors:ie,chunkedBounds:he,fontSize:C,unitsPerEm:ke,ascender:ge*F,descender:Ae*F,capHeight:De*F,xHeight:Le*F,lineHeight:P,topBaseline:$,blockBounds:[Me,Xe-Be.length*P,Me+q,Xe],visibleBounds:re,timings:V})})}function d(y,S){f(y,A=>{const[C,b,P,E]=A.blockBounds;S({width:P-C,height:E-b})},{metricsOnly:!0})}function m(y){let S=y.match(/^([\d.]+)%$/),A=S?parseFloat(S[1]):NaN;return isNaN(A)?0:A/100}function g(y,S,A){const C=y[S*3],b=y[S*3+1],P=y[S*3+2],E=(b-C)/A;for(let R=0;R<A;R++){const B=(S+R)*3;y[B]=C+E*R,y[B+1]=C+E*(R+1),y[B+2]=P}}function v(){return(self.performance||Date).now()}function _(){this.data=[]}const x=["glyphObj","x","width","charIndex"];return _.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/x.length)},glyphAt(y){let S=_.flyweight;return S.data=this.data,S.index=y,S},splitAt(y){let S=new _;return S.data=this.data.splice(y*x.length),S}},_.flyweight=x.reduce((y,S,A,C)=>(Object.defineProperty(y,S,{get(){return this.data[this.index*x.length+A]},set(b){this.data[this.index*x.length+A]=b}}),y),{data:null,index:0}),{typeset:f,measure:d,loadFont:u}}const Bc=()=>(self.performance||Date).now(),g1=bF();let AR;function LK(n,e,t,i,r,s,o,a,l,c,u=!0){return u?kK(n,e,t,i,r,s,o,a,l,c).then(null,f=>(AR||(console.warn("WebGL SDF generation failed, falling back to JS",f),AR=!0),CR(n,e,t,i,r,s,o,a,l,c))):CR(n,e,t,i,r,s,o,a,l,c)}const wv=[],OK=5;let OA=0;function PF(){const n=Bc();for(;wv.length&&Bc()-n<OK;)wv.shift()();OA=wv.length?setTimeout(PF,0):0}const kK=(...n)=>new Promise((e,t)=>{wv.push(()=>{const i=Bc();try{g1.webgl.generateIntoCanvas(...n),e({timing:Bc()-i})}catch(r){t(r)}}),OA||(OA=setTimeout(PF,0))}),FK=4,UK=2e3,MR={};let NK=0;function CR(n,e,t,i,r,s,o,a,l,c){const u="TroikaTextSDFGenerator_JS_"+NK++%FK;let f=MR[u];return f||(f=MR[u]={workerModule:Im({name:u,workerId:u,dependencies:[bF,Bc],init(d,m){const g=d().javascript.generate;return function(...v){const _=m();return{textureData:g(...v),timing:m()-_}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(n,e,t,i,r,s).then(({textureData:d,timing:m})=>{const g=Bc(),v=new Uint8Array(d.length*4);for(let _=0;_<d.length;_++)v[_*4+c]=d[_];return g1.webglUtils.renderImageData(o,v,a,l,n,e,1<<3-c),m+=Bc()-g,--f.requests===0&&(f.idleTimer=setTimeout(()=>{AK(u)},UK)),{timing:m}})}function zK(n){n._warm||(g1.webgl.isSupported(n),n._warm=!0)}const GK=g1.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function HK(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(r){var s=e._bin,o=new Uint8Array(r);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var f=s.readUint(o,a);a+=4,c.push(e._readFont(o,f))}return c}return[e._readFont(o,0)]},_readFont:function(r,s){var o=e._bin,a=s;o.readFixed(r,s),s+=4;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],u={_data:r,_offset:a},f={},d=0;d<l;d++){var m=o.readASCII(r,s,4);s+=4,o.readUint(r,s),s+=4;var g=o.readUint(r,s);s+=4;var v=o.readUint(r,s);s+=4,f[m]={offset:g,length:v}}for(d=0;d<c.length;d++){var _=c[d];f[_]&&(u[_.trim()]=e[_.trim()].parse(r,f[_].offset,f[_].length,u))}return u},_tabOffset:function(r,s,o){for(var a=e._bin,l=a.readUshort(r,o+4),c=o+12,u=0;u<l;u++){var f=a.readASCII(r,c,4);c+=4,a.readUint(r,c),c+=4;var d=a.readUint(r,c);if(c+=4,a.readUint(r,c),c+=4,f==s)return d}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(r,s+2*l));return a},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(r[s+l]);return a},readUnicode:function(r,s,o){for(var a="",l=0;l<o;l++){var c=r[s++]<<8|r[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,o){var a=e._bin._tdec;return a&&s==0&&o==r.length?a.decode(r):e._bin.readASCII(r,s,o)},readBytes:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(r[s+l]);return a},readASCIIArray:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(r[s+l]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,o,a,l){var c=e._bin,u={},f=s;c.readFixed(r,s),s+=4;var d=c.readUshort(r,s);s+=2;var m=c.readUshort(r,s);s+=2;var g=c.readUshort(r,s);return s+=2,u.scriptList=e._lctf.readScriptList(r,f+d),u.featureList=e._lctf.readFeatureList(r,f+m),u.lookupList=e._lctf.readLookupList(r,f+g,l),u},e._lctf.readLookupList=function(r,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var d=a.readUshort(r,s);s+=2;var m=e._lctf.readLookupTable(r,l+d,o);c.push(m)}return c},e._lctf.readLookupTable=function(r,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(r,s),s+=2,c.flag=a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2;for(var f=c.ltype,d=0;d<u;d++){var m=a.readUshort(r,s);s+=2;var g=o(r,f,l+m,c);c.tabs.push(g)}return c},e._lctf.numOfOnes=function(r){for(var s=0,o=0;o<32;o++)r>>>o&1&&s++;return s},e._lctf.readClassDef=function(r,s){var o=e._bin,a=[],l=o.readUshort(r,s);if(s+=2,l==1){var c=o.readUshort(r,s);s+=2;var u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++)a.push(c+f),a.push(c+f),a.push(o.readUshort(r,s)),s+=2}if(l==2){var d=o.readUshort(r,s);for(s+=2,f=0;f<d;f++)a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2}return a},e._lctf.getInterval=function(r,s){for(var o=0;o<r.length;o+=3){var a=r[o],l=r[o+1];if(r[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(r,s){var o=e._bin,a={};a.fmt=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(r,s,l)),a.fmt==2&&(a.tab=o.readUshorts(r,s,3*l)),a},e._lctf.coverageIndex=function(r,s){var o=r.tab;if(r.fmt==1)return o.indexOf(s);if(r.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(r,s,4);s+=4;var d=o.readUshort(r,s);s+=2;var m=e._lctf.readFeatureTable(r,a+d);m.tag=f.trim(),l.push(m)}return l},e._lctf.readFeatureTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(r,s);s+=2,l.tab=[];for(var f=0;f<u;f++)l.tab.push(o.readUshort(r,s+2*f));return l},e._lctf.readScriptList=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(r,s,4);s+=4;var d=o.readUshort(r,s);s+=2,l[f.trim()]=e._lctf.readScriptTable(r,a+d)}return l},e._lctf.readScriptTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,l.default=e._lctf.readLangSysTable(r,a+c);var u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var d=o.readASCII(r,s,4);s+=4;var m=o.readUshort(r,s);s+=2,l[d.trim()]=e._lctf.readLangSysTable(r,a+m)}return l},e._lctf.readLangSysTable=function(r,s){var o=e._bin,a={};o.readUshort(r,s),s+=2,a.reqFeature=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.features=o.readUshorts(r,s,l),a},e.CFF={},e.CFF.parse=function(r,s,o){var a=e._bin;(r=new Uint8Array(r.buffer,s,o))[s=0],r[++s],r[++s],r[++s],s++;var l=[];s=e.CFF.readIndex(r,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(r,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var f=[];s=e.CFF.readIndex(r,s,f);var d=[];for(u=0;u<f.length-1;u++)d.push(e.CFF.readDict(r,s+f[u],s+f[u+1]));s+=f[f.length-1];var m=d[0],g=[];s=e.CFF.readIndex(r,s,g);var v=[];for(u=0;u<g.length-1;u++)v.push(a.readASCII(r,s+g[u],g[u+1]-g[u]));if(s+=g[g.length-1],e.CFF.readSubrs(r,s,m),m.CharStrings){s=m.CharStrings,g=[],s=e.CFF.readIndex(r,s,g);var _=[];for(u=0;u<g.length-1;u++)_.push(a.readBytes(r,s+g[u],g[u+1]-g[u]));m.CharStrings=_}if(m.ROS){s=m.FDArray;var x=[];for(s=e.CFF.readIndex(r,s,x),m.FDArray=[],u=0;u<x.length-1;u++){var y=e.CFF.readDict(r,s+x[u],s+x[u+1]);e.CFF._readFDict(r,y,v),m.FDArray.push(y)}s+=x[x.length-1],s=m.FDSelect,m.FDSelect=[];var S=r[s];if(s++,S!=3)throw S;var A=a.readUshort(r,s);for(s+=2,u=0;u<A+1;u++)m.FDSelect.push(a.readUshort(r,s),r[s+2]),s+=3}return m.Encoding&&(m.Encoding=e.CFF.readEncoding(r,m.Encoding,m.CharStrings.length)),m.charset&&(m.charset=e.CFF.readCharset(r,m.charset,m.CharStrings.length)),e.CFF._readFDict(r,m,v),m},e.CFF._readFDict=function(r,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(r,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(r,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(r,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var f=0;f<l.length-1;f++)o.Subrs.push(a.readBytes(r,s+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,o){e._bin;var a=[".notdef"],l=r[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=r[s];s++;for(var u=0;u<c;u++)a.push(r[s+u]);return a},e.CFF.readCharset=function(r,s,o){var a=e._bin,l=[".notdef"],c=r[s];if(s++,c==0)for(var u=0;u<o;u++){var f=a.readUshort(r,s);s+=2,l.push(f)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){f=a.readUshort(r,s),s+=2;var d=0;for(c==1?(d=r[s],s++):(d=a.readUshort(r,s),s+=2),u=0;u<=d;u++)l.push(f),f++}}return l},e.CFF.readIndex=function(r,s,o){var a=e._bin,l=a.readUshort(r,s)+1,c=r[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(r[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(r,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(r,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(r,s,o){var a=e._bin,l=r[s],c=r[s+1];r[s+2],r[s+3],r[s+4];var u=1,f=null,d=null;l<=20&&(f=l,u=1),l==12&&(f=100*l+c,u=2),21<=l&&l<=27&&(f=l,u=1),l==28&&(d=a.readShort(r,s+1),u=3),29<=l&&l<=31&&(f=l,u=1),32<=l&&l<=246&&(d=l-139,u=1),247<=l&&l<=250&&(d=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(d=256*-(l-251)-c-108,u=2),l==255&&(d=a.readInt(r,s+1)/65535,u=5),o.val=d??"o"+f,o.size=u},e.CFF.readCharString=function(r,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=r[s],f=r[s+1];r[s+2],r[s+3],r[s+4];var d=1,m=null,g=null;u<=20&&(m=u,d=1),u==12&&(m=100*u+f,d=2),u!=19&&u!=20||(m=u,d=2),21<=u&&u<=27&&(m=u,d=1),u==28&&(g=l.readShort(r,s+1),d=3),29<=u&&u<=31&&(m=u,d=1),32<=u&&u<=246&&(g=u-139,d=1),247<=u&&u<=250&&(g=256*(u-247)+f+108,d=2),251<=u&&u<=254&&(g=256*-(u-251)-f-108,d=2),u==255&&(g=l.readInt(r,s+1)/65535,d=5),c.push(g??"o"+m),s+=d}return c},e.CFF.readDict=function(r,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=r[s],f=r[s+1];r[s+2],r[s+3],r[s+4];var d=1,m=null,g=null;if(u==28&&(g=a.readShort(r,s+1),d=3),u==29&&(g=a.readInt(r,s+1),d=5),32<=u&&u<=246&&(g=u-139,d=1),247<=u&&u<=250&&(g=256*(u-247)+f+108,d=2),251<=u&&u<=254&&(g=256*-(u-251)-f-108,d=2),u==255)throw g=a.readInt(r,s+1)/65535,d=5,"unknown number";if(u==30){var v=[];for(d=1;;){var _=r[s+d];d++;var x=_>>4,y=15&_;if(x!=15&&v.push(x),y!=15&&v.push(y),y==15)break}for(var S="",A=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],C=0;C<v.length;C++)S+=A[v[C]];g=parseFloat(S)}u<=21&&(m=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],d=1,u==12&&(m=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],d=2)),m!=null?(l[m]=c.length==1?c[0]:c,c=[]):c.push(g),s+=d}return l},e.cmap={},e.cmap.parse=function(r,s,o){r=new Uint8Array(r.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2;var u=[];l.tables=[];for(var f=0;f<c;f++){var d=a.readUshort(r,s);s+=2;var m=a.readUshort(r,s);s+=2;var g=a.readUint(r,s);s+=4;var v="p"+d+"e"+m,_=u.indexOf(g);if(_==-1){var x;_=l.tables.length,u.push(g);var y=a.readUshort(r,g);y==0?x=e.cmap.parse0(r,g):y==4?x=e.cmap.parse4(r,g):y==6?x=e.cmap.parse6(r,g):y==12?x=e.cmap.parse12(r,g):console.debug("unknown format: "+y,d,m,g),l.tables.push(x)}if(l[v]!=null)throw"multiple tables for one platform+encoding";l[v]=_}return l},e.cmap.parse0=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(r[s+c]);return a},e.cmap.parse4=function(r,s){var o=e._bin,a=s,l={};l.format=o.readUshort(r,s),s+=2;var c=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2;var u=o.readUshort(r,s);s+=2;var f=u/2;l.searchRange=o.readUshort(r,s),s+=2,l.entrySelector=o.readUshort(r,s),s+=2,l.rangeShift=o.readUshort(r,s),s+=2,l.endCount=o.readUshorts(r,s,f),s+=2*f,s+=2,l.startCount=o.readUshorts(r,s,f),s+=2*f,l.idDelta=[];for(var d=0;d<f;d++)l.idDelta.push(o.readShort(r,s)),s+=2;for(l.idRangeOffset=o.readUshorts(r,s,f),s+=2*f,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(r,s)),s+=2;return l},e.cmap.parse6=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,a.firstCode=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(r,s)),s+=2;return a},e.cmap.parse12=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,s+=2,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4;var l=o.readUint(r,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,f=o.readUint(r,u+0),d=o.readUint(r,u+4),m=o.readUint(r,u+8);a.groups.push([f,d,m])}return a},e.glyf={},e.glyf.parse=function(r,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(r,s){var o=e._bin,a=r._data,l=e._tabOffset(a,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var f=o.readUshort(a,l);if(l+=2,a.length-l<f)return null;c.instructions=o.readBytes(a,l,f),l+=f;var d=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<d;u++){var m=a[l];if(l++,c.flags.push(m),(8&m)!=0){var g=a[l];l++;for(var v=0;v<g;v++)c.flags.push(m),u++}}for(c.xs=[],u=0;u<d;u++){var _=(2&c.flags[u])!=0,x=(16&c.flags[u])!=0;_?(c.xs.push(x?a[l]:-a[l]),l++):x?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<d;u++)_=(4&c.flags[u])!=0,x=(32&c.flags[u])!=0,_?(c.ys.push(x?a[l]:-a[l]),l++):x?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var y=0,S=0;for(u=0;u<d;u++)y+=c.xs[u],S+=c.ys[u],c.xs[u]=y,c.ys[u]=S}else{var A;c.parts=[];do{A=o.readUshort(a,l),l+=2;var C={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(C),C.glyphIndex=o.readUshort(a,l),l+=2,1&A){var b=o.readShort(a,l);l+=2;var P=o.readShort(a,l);l+=2}else b=o.readInt8(a,l),l++,P=o.readInt8(a,l),l++;2&A?(C.m.tx=b,C.m.ty=P):(C.p1=b,C.p2=P),8&A?(C.m.a=C.m.d=o.readF2dot14(a,l),l+=2):64&A?(C.m.a=o.readF2dot14(a,l),l+=2,C.m.d=o.readF2dot14(a,l),l+=2):128&A&&(C.m.a=o.readF2dot14(a,l),l+=2,C.m.b=o.readF2dot14(a,l),l+=2,C.m.c=o.readF2dot14(a,l),l+=2,C.m.d=o.readF2dot14(a,l),l+=2)}while(32&A);if(256&A){var E=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<E;u++)c.instr.push(a[l]),l++}}return c},e.GPOS={},e.GPOS.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var f=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,f+c)}if(s==1&&u.fmt==1){var d=l.readUshort(r,o);o+=2;var m=e._lctf.numOfOnes(d);d!=0&&(u.pos=e.GPOS.readValueRecord(r,o,d))}else if(s==2&&u.fmt>=1&&u.fmt<=2){d=l.readUshort(r,o),o+=2;var g=l.readUshort(r,o);o+=2,m=e._lctf.numOfOnes(d);var v=e._lctf.numOfOnes(g);if(u.fmt==1){u.pairsets=[];var _=l.readUshort(r,o);o+=2;for(var x=0;x<_;x++){var y=c+l.readUshort(r,o);o+=2;var S=l.readUshort(r,y);y+=2;for(var A=[],C=0;C<S;C++){var b=l.readUshort(r,y);y+=2,d!=0&&(G=e.GPOS.readValueRecord(r,y,d),y+=2*m),g!=0&&(N=e.GPOS.readValueRecord(r,y,g),y+=2*v),A.push({gid2:b,val1:G,val2:N})}u.pairsets.push(A)}}if(u.fmt==2){var P=l.readUshort(r,o);o+=2;var E=l.readUshort(r,o);o+=2;var R=l.readUshort(r,o);o+=2;var B=l.readUshort(r,o);for(o+=2,u.classDef1=e._lctf.readClassDef(r,c+P),u.classDef2=e._lctf.readClassDef(r,c+E),u.matrix=[],x=0;x<R;x++){var O=[];for(C=0;C<B;C++){var G=null,N=null;d!=0&&(G=e.GPOS.readValueRecord(r,o,d),o+=2*m),g!=0&&(N=e.GPOS.readValueRecord(r,o,g),o+=2*v),O.push({val1:G,val2:N})}u.matrix.push(O)}}}else{if(s==9&&u.fmt==1){var k=l.readUshort(r,o);o+=2;var X=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=k;else if(a.ltype!=k)throw"invalid extension substitution";return e.GPOS.subt(r,a.ltype,c+X)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(r,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(r,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(r,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(r,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(r,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var f=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,c+f)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(r,o),o+=2;else if(u.fmt==2){var d=l.readUshort(r,o);o+=2,u.newg=l.readUshorts(r,o,d),o+=2*u.newg.length}}else if(s==4){u.vals=[],d=l.readUshort(r,o),o+=2;for(var m=0;m<d;m++){var g=l.readUshort(r,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(r,c+g))}}else if(s==5&&u.fmt==2){if(u.fmt==2){var v=l.readUshort(r,o);o+=2,u.cDef=e._lctf.readClassDef(r,c+v),u.scset=[];var _=l.readUshort(r,o);for(o+=2,m=0;m<_;m++){var x=l.readUshort(r,o);o+=2,u.scset.push(x==0?null:e.GSUB.readSubClassSet(r,c+x))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(m=0;m<3;m++){d=l.readUshort(r,o),o+=2;for(var y=[],S=0;S<d;S++)y.push(e._lctf.readCoverage(r,c+l.readUshort(r,o+2*S)));o+=2*d,m==0&&(u.backCvg=y),m==1&&(u.inptCvg=y),m==2&&(u.ahedCvg=y)}d=l.readUshort(r,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(r,o,d)}}else{if(s==7&&u.fmt==1){var A=l.readUshort(r,o);o+=2;var C=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=A;else if(a.ltype!=A)throw"invalid extension substitution";return e.GSUB.subt(r,a.ltype,c+C)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(r,s){var o=e._bin.readUshort,a=s,l=[],c=o(r,s);s+=2;for(var u=0;u<c;u++){var f=o(r,s);s+=2,l.push(e.GSUB.readSubClassRule(r,a+f))}return l},e.GSUB.readSubClassRule=function(r,s){var o=e._bin.readUshort,a={},l=o(r,s),c=o(r,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(r,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,c),a},e.GSUB.readSubstLookupRecords=function(r,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(r,s),a(r,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(r,s);s+=2,l.push(e.GSUB.readChainSubClassRule(r,a+f))}return l},e.GSUB.readChainSubClassRule=function(r,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(r,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(r,s,u),s+=2*a[l[c]].length}return u=o.readUshort(r,s),s+=2,a.subst=o.readUshorts(r,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(r,s);s+=2,l.push(e.GSUB.readLigature(r,a+f))}return l},e.GSUB.readLigature=function(r,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(r,s)),s+=2;return a},e.head={},e.head.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.fontRevision=a.readFixed(r,s),s+=4,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4,l.flags=a.readUshort(r,s),s+=2,l.unitsPerEm=a.readUshort(r,s),s+=2,l.created=a.readUint64(r,s),s+=8,l.modified=a.readUint64(r,s),s+=8,l.xMin=a.readShort(r,s),s+=2,l.yMin=a.readShort(r,s),s+=2,l.xMax=a.readShort(r,s),s+=2,l.yMax=a.readShort(r,s),s+=2,l.macStyle=a.readUshort(r,s),s+=2,l.lowestRecPPEM=a.readUshort(r,s),s+=2,l.fontDirectionHint=a.readShort(r,s),s+=2,l.indexToLocFormat=a.readShort(r,s),s+=2,l.glyphDataFormat=a.readShort(r,s),s+=2,l},e.hhea={},e.hhea.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.ascender=a.readShort(r,s),s+=2,l.descender=a.readShort(r,s),s+=2,l.lineGap=a.readShort(r,s),s+=2,l.advanceWidthMax=a.readUshort(r,s),s+=2,l.minLeftSideBearing=a.readShort(r,s),s+=2,l.minRightSideBearing=a.readShort(r,s),s+=2,l.xMaxExtent=a.readShort(r,s),s+=2,l.caretSlopeRise=a.readShort(r,s),s+=2,l.caretSlopeRun=a.readShort(r,s),s+=2,l.caretOffset=a.readShort(r,s),s+=2,s+=8,l.metricDataFormat=a.readShort(r,s),s+=2,l.numberOfHMetrics=a.readUshort(r,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(r,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,f=0,d=0;d<a.maxp.numGlyphs;d++)d<a.hhea.numberOfHMetrics&&(u=l.readUshort(r,s),s+=2,f=l.readShort(r,s),s+=2),c.aWidth.push(u),c.lsBearing.push(f);return c},e.kern={},e.kern.parse=function(r,s,o,a){var l=e._bin,c=l.readUshort(r,s);if(s+=2,c==1)return e.kern.parseV1(r,s-2,o,a);var u=l.readUshort(r,s);s+=2;for(var f={glyph1:[],rval:[]},d=0;d<u;d++){s+=2,o=l.readUshort(r,s),s+=2;var m=l.readUshort(r,s);s+=2;var g=m>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;s=e.kern.readFormat0(r,s,f)}return f},e.kern.parseV1=function(r,s,o,a){var l=e._bin;l.readFixed(r,s),s+=4;var c=l.readUint(r,s);s+=4;for(var u={glyph1:[],rval:[]},f=0;f<c;f++){l.readUint(r,s),s+=4;var d=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2;var m=d>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;s=e.kern.readFormat0(r,s,u)}return u},e.kern.readFormat0=function(r,s,o){var a=e._bin,l=-1,c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var u=0;u<c;u++){var f=a.readUshort(r,s);s+=2;var d=a.readUshort(r,s);s+=2;var m=a.readShort(r,s);s+=2,f!=l&&(o.glyph1.push(f),o.rval.push({glyph2:[],vals:[]}));var g=o.rval[o.rval.length-1];g.glyph2.push(d),g.vals.push(m),l=f}return s},e.loca={},e.loca.parse=function(r,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,f=a.maxp.numGlyphs+1;if(u==0)for(var d=0;d<f;d++)c.push(l.readUshort(r,s+(d<<1))<<1);if(u==1)for(d=0;d<f;d++)c.push(l.readUint(r,s+(d<<2)));return c},e.maxp={},e.maxp.parse=function(r,s,o){var a=e._bin,l={},c=a.readUint(r,s);return s+=4,l.numGlyphs=a.readUshort(r,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(r,s),s+=2,l.maxContours=a.readUshort(r,s),s+=2,l.maxCompositePoints=a.readUshort(r,s),s+=2,l.maxCompositeContours=a.readUshort(r,s),s+=2,l.maxZones=a.readUshort(r,s),s+=2,l.maxTwilightPoints=a.readUshort(r,s),s+=2,l.maxStorage=a.readUshort(r,s),s+=2,l.maxFunctionDefs=a.readUshort(r,s),s+=2,l.maxInstructionDefs=a.readUshort(r,s),s+=2,l.maxStackElements=a.readUshort(r,s),s+=2,l.maxSizeOfInstructions=a.readUshort(r,s),s+=2,l.maxComponentElements=a.readUshort(r,s),s+=2,l.maxComponentDepth=a.readUshort(r,s),s+=2),l},e.name={},e.name.parse=function(r,s,o){var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s);for(var u,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=s+=2,m=0;m<c;m++){var g=a.readUshort(r,s);s+=2;var v=a.readUshort(r,s);s+=2;var _=a.readUshort(r,s);s+=2;var x=a.readUshort(r,s);s+=2;var y=a.readUshort(r,s);s+=2;var S=a.readUshort(r,s);s+=2;var A,C=f[x],b=d+12*c+S;if(g==0)A=a.readUnicode(r,b,y/2);else if(g==3&&v==0)A=a.readUnicode(r,b,y/2);else if(v==0)A=a.readASCII(r,b,y);else if(v==1)A=a.readUnicode(r,b,y/2);else if(v==3)A=a.readUnicode(r,b,y/2);else{if(g!=1)throw"unknown encoding "+v+", platformID: "+g;A=a.readASCII(r,b,y),console.debug("reading unknown MAC encoding "+v+" as ASCII")}var P="p"+g+","+_.toString(16);l[P]==null&&(l[P]={}),l[P][C!==void 0?C:x]=A,l[P]._lang=_}for(var E in l)if(l[E].postScriptName!=null&&l[E]._lang==1033)return l[E];for(var E in l)if(l[E].postScriptName!=null&&l[E]._lang==0)return l[E];for(var E in l)if(l[E].postScriptName!=null&&l[E]._lang==3084)return l[E];for(var E in l)if(l[E].postScriptName!=null)return l[E];for(var E in l){u=E;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(r,s,o){var a=e._bin.readUshort(r,s);s+=2;var l={};if(a==0)e["OS/2"].version0(r,s,l);else if(a==1)e["OS/2"].version1(r,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(r,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(r,s,l)}return l},e["OS/2"].version0=function(r,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(r,s),s+=2,o.usWeightClass=a.readUshort(r,s),s+=2,o.usWidthClass=a.readUshort(r,s),s+=2,o.fsType=a.readUshort(r,s),s+=2,o.ySubscriptXSize=a.readShort(r,s),s+=2,o.ySubscriptYSize=a.readShort(r,s),s+=2,o.ySubscriptXOffset=a.readShort(r,s),s+=2,o.ySubscriptYOffset=a.readShort(r,s),s+=2,o.ySuperscriptXSize=a.readShort(r,s),s+=2,o.ySuperscriptYSize=a.readShort(r,s),s+=2,o.ySuperscriptXOffset=a.readShort(r,s),s+=2,o.ySuperscriptYOffset=a.readShort(r,s),s+=2,o.yStrikeoutSize=a.readShort(r,s),s+=2,o.yStrikeoutPosition=a.readShort(r,s),s+=2,o.sFamilyClass=a.readShort(r,s),s+=2,o.panose=a.readBytes(r,s,10),s+=10,o.ulUnicodeRange1=a.readUint(r,s),s+=4,o.ulUnicodeRange2=a.readUint(r,s),s+=4,o.ulUnicodeRange3=a.readUint(r,s),s+=4,o.ulUnicodeRange4=a.readUint(r,s),s+=4,o.achVendID=[a.readInt8(r,s),a.readInt8(r,s+1),a.readInt8(r,s+2),a.readInt8(r,s+3)],s+=4,o.fsSelection=a.readUshort(r,s),s+=2,o.usFirstCharIndex=a.readUshort(r,s),s+=2,o.usLastCharIndex=a.readUshort(r,s),s+=2,o.sTypoAscender=a.readShort(r,s),s+=2,o.sTypoDescender=a.readShort(r,s),s+=2,o.sTypoLineGap=a.readShort(r,s),s+=2,o.usWinAscent=a.readUshort(r,s),s+=2,o.usWinDescent=a.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,o){var a=e._bin;return s=e["OS/2"].version0(r,s,o),o.ulCodePageRange1=a.readUint(r,s),s+=4,o.ulCodePageRange2=a.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,o){var a=e._bin;return s=e["OS/2"].version1(r,s,o),o.sxHeight=a.readShort(r,s),s+=2,o.sCapHeight=a.readShort(r,s),s+=2,o.usDefault=a.readUshort(r,s),s+=2,o.usBreak=a.readUshort(r,s),s+=2,o.usMaxContext=a.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,o){var a=e._bin;return s=e["OS/2"].version2(r,s,o),o.usLowerOpticalPointSize=a.readUshort(r,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,o){var a=e._bin,l={};return l.version=a.readFixed(r,s),s+=4,l.italicAngle=a.readFixed(r,s),s+=4,l.underlinePosition=a.readShort(r,s),s+=2,l.underlineThickness=a.readShort(r,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var o=r.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var f=l.groups[u];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,s){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var a=r.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),r.SVG.entries[s]=a),a)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},c=r.CFF,u=r.CFF.Private;if(c.ROS){for(var f=0;c.FDSelect[f+2]<=s;)f+=2;u=c.FDArray[c.FDSelect[f+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],l,c,u,o)}else r.glyf&&e.U._drawGlyf(s,r,o);return o},e.U._drawGlyf=function(r,s,o){var a=s.glyf[r];a==null&&(a=s.glyf[r]=e.glyf._parseGlyf(s,r)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(r,s){for(var o=0;o<r.noc;o++){for(var a=o==0?0:r.endPts[o-1]+1,l=r.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,f=c==l?a:c+1,d=1&r.flags[c],m=1&r.flags[u],g=1&r.flags[f],v=r.xs[c],_=r.ys[c];if(c==a)if(d){if(!m){e.U.P.moveTo(s,v,_);continue}e.U.P.moveTo(s,r.xs[u],r.ys[u])}else m?e.U.P.moveTo(s,r.xs[u],r.ys[u]):e.U.P.moveTo(s,(r.xs[u]+v)/2,(r.ys[u]+_)/2);d?m&&e.U.P.lineTo(s,v,_):g?e.U.P.qcurveTo(s,v,_,r.xs[f],r.ys[f]):e.U.P.qcurveTo(s,v,_,(v+r.xs[f])/2,(_+r.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,o){for(var a=0;a<r.parts.length;a++){var l={cmds:[],crds:[]},c=r.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,f=0;f<l.crds.length;f+=2){var d=l.crds[f],m=l.crds[f+1];o.crds.push(d*u.a+m*u.b+u.tx),o.crds.push(d*u.c+m*u.d+u.ty)}for(f=0;f<l.cmds.length;f++)o.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(r,s){var o=e._lctf.getInterval(s,r);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(r,s,o){var a=!1;if(r.GPOS)for(var l=r.GPOS,c=l.lookupList,u=l.featureList,f=[],d=0;d<u.length;d++){var m=u[d];if(m.tag=="kern"){a=!0;for(var g=0;g<m.tab.length;g++)if(!f[m.tab[g]]){f[m.tab[g]]=!0;for(var v=c[m.tab[g]],_=0;_<v.tabs.length;_++)if(v.tabs[_]!=null){var x,y=v.tabs[_];if((!y.coverage||(x=e._lctf.coverageIndex(y.coverage,s))!=-1)&&v.ltype!=1){if(v.ltype==2){var S=null;if(y.fmt==1){var A=y.pairsets[x];for(d=0;d<A.length;d++)A[d].gid2==o&&(S=A[d])}else if(y.fmt==2){var C=e.U._getGlyphClass(s,y.classDef1),b=e.U._getGlyphClass(o,y.classDef2);S=y.matrix[C][b]}if(S){var P=0;return S.val1&&S.val1[2]&&(P+=S.val1[2]),S.val2&&S.val2[0]&&(P+=S.val2[0]),P}}}}}}}if(r.kern&&!a){var E=r.kern.glyph1.indexOf(s);if(E!=-1){var R=r.kern.rval[E].glyph2.indexOf(o);if(R!=-1)return r.kern.rval[E].vals[R]}}return 0},e.U._applySubs=function(r,s,o,a){for(var l=r.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,f=o.tabs[c];if(!f.coverage||(u=e._lctf.coverageIndex(f.coverage,r[s]))!=-1){if(o.ltype==1)r[s],f.fmt==1?r[s]=r[s]+f.delta:r[s]=f.newg[u];else if(o.ltype==4)for(var d=f.vals[u],m=0;m<d.length;m++){var g=d[m],v=g.chain.length;if(!(v>l)){for(var _=!0,x=0,y=0;y<v;y++){for(;r[s+x+(1+y)]==-1;)x++;g.chain[y]!=r[s+x+(1+y)]&&(_=!1)}if(_){for(r[s]=g.nglyph,y=0;y<v+x;y++)r[s+y+1]=-1;break}}}else if(o.ltype==5&&f.fmt==2)for(var S=e._lctf.getInterval(f.cDef,r[s]),A=f.cDef[S+2],C=f.scset[A],b=0;b<C.length;b++){var P=C[b],E=P.input;if(!(E.length>l)){for(_=!0,y=0;y<E.length;y++){var R=e._lctf.getInterval(f.cDef,r[s+1+y]);if(S==-1&&f.cDef[R+2]!=E[y]){_=!1;break}}if(_){var B=P.substLookupRecords;for(m=0;m<B.length;m+=2)B[m],B[m+1]}}}else if(o.ltype==6&&f.fmt==3){if(!e.U._glsCovered(r,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(r,f.inptCvg,s)||!e.U._glsCovered(r,f.ahedCvg,s+f.inptCvg.length))continue;var O=f.lookupRec;for(b=0;b<O.length;b+=2){S=O[b];var G=a[O[b+1]];e.U._applySubs(r,s+S,G,a)}}}}},e.U._glsCovered=function(r,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],r[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var f=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,d=e.U.glyphToPath(r,u),m=0;m<d.crds.length;m+=2)a.crds.push(d.crds[m]+l),a.crds.push(d.crds[m+1]);for(o&&a.cmds.push(o),m=0;m<d.cmds.length;m++)a.cmds.push(d.cmds[m]);o&&a.cmds.push("X"),l+=r.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(r,u,f))}}return a},e.U.P={},e.U.P.moveTo=function(r,s,o){r.cmds.push("M"),r.crds.push(s,o)},e.U.P.lineTo=function(r,s,o){r.cmds.push("L"),r.crds.push(s,o)},e.U.P.curveTo=function(r,s,o,a,l,c,u){r.cmds.push("C"),r.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(r,s,o,a,l){r.cmds.push("Q"),r.crds.push(s,o,a,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,o,a,l){for(var c=s.stack,u=s.nStems,f=s.haveWidth,d=s.width,m=s.open,g=0,v=s.x,_=s.y,x=0,y=0,S=0,A=0,C=0,b=0,P=0,E=0,R=0,B=0,O={val:0,size:0};g<r.length;){e.CFF.getCharString(r,g,O);var G=O.val;if(g+=O.size,G=="o1"||G=="o18")c.length%2!=0&&!f&&(d=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(G=="o3"||G=="o23")c.length%2!=0&&!f&&(d=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(G=="o4")c.length>1&&!f&&(d=c.shift()+a.nominalWidthX,f=!0),m&&e.U.P.closePath(l),_+=c.pop(),e.U.P.moveTo(l,v,_),m=!0;else if(G=="o5")for(;c.length>0;)v+=c.shift(),_+=c.shift(),e.U.P.lineTo(l,v,_);else if(G=="o6"||G=="o7")for(var N=c.length,k=G=="o6",X=0;X<N;X++){var te=c.shift();k?v+=te:_+=te,k=!k,e.U.P.lineTo(l,v,_)}else if(G=="o8"||G=="o24"){N=c.length;for(var oe=0;oe+6<=N;)x=v+c.shift(),y=_+c.shift(),S=x+c.shift(),A=y+c.shift(),v=S+c.shift(),_=A+c.shift(),e.U.P.curveTo(l,x,y,S,A,v,_),oe+=6;G=="o24"&&(v+=c.shift(),_+=c.shift(),e.U.P.lineTo(l,v,_))}else{if(G=="o11")break;if(G=="o1234"||G=="o1235"||G=="o1236"||G=="o1237")G=="o1234"&&(y=_,S=(x=v+c.shift())+c.shift(),B=A=y+c.shift(),b=A,E=_,v=(P=(C=(R=S+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,x,y,S,A,R,B),e.U.P.curveTo(l,C,b,P,E,v,_)),G=="o1235"&&(x=v+c.shift(),y=_+c.shift(),S=x+c.shift(),A=y+c.shift(),R=S+c.shift(),B=A+c.shift(),C=R+c.shift(),b=B+c.shift(),P=C+c.shift(),E=b+c.shift(),v=P+c.shift(),_=E+c.shift(),c.shift(),e.U.P.curveTo(l,x,y,S,A,R,B),e.U.P.curveTo(l,C,b,P,E,v,_)),G=="o1236"&&(x=v+c.shift(),y=_+c.shift(),S=x+c.shift(),B=A=y+c.shift(),b=A,P=(C=(R=S+c.shift())+c.shift())+c.shift(),E=b+c.shift(),v=P+c.shift(),e.U.P.curveTo(l,x,y,S,A,R,B),e.U.P.curveTo(l,C,b,P,E,v,_)),G=="o1237"&&(x=v+c.shift(),y=_+c.shift(),S=x+c.shift(),A=y+c.shift(),R=S+c.shift(),B=A+c.shift(),C=R+c.shift(),b=B+c.shift(),P=C+c.shift(),E=b+c.shift(),Math.abs(P-v)>Math.abs(E-_)?v=P+c.shift():_=E+c.shift(),e.U.P.curveTo(l,x,y,S,A,R,B),e.U.P.curveTo(l,C,b,P,E,v,_));else if(G=="o14"){if(c.length>0&&!f&&(d=c.shift()+o.nominalWidthX,f=!0),c.length==4){var H=c.shift(),J=c.shift(),Q=c.shift(),U=c.shift(),V=e.CFF.glyphBySE(o,Q),Z=e.CFF.glyphBySE(o,U);e.U._drawCFF(o.CharStrings[V],s,o,a,l),s.x=H,s.y=J,e.U._drawCFF(o.CharStrings[Z],s,o,a,l)}m&&(e.U.P.closePath(l),m=!1)}else if(G=="o19"||G=="o20")c.length%2!=0&&!f&&(d=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0,g+=u+7>>3;else if(G=="o21")c.length>2&&!f&&(d=c.shift()+a.nominalWidthX,f=!0),_+=c.pop(),v+=c.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,v,_),m=!0;else if(G=="o22")c.length>1&&!f&&(d=c.shift()+a.nominalWidthX,f=!0),v+=c.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,v,_),m=!0;else if(G=="o25"){for(;c.length>6;)v+=c.shift(),_+=c.shift(),e.U.P.lineTo(l,v,_);x=v+c.shift(),y=_+c.shift(),S=x+c.shift(),A=y+c.shift(),v=S+c.shift(),_=A+c.shift(),e.U.P.curveTo(l,x,y,S,A,v,_)}else if(G=="o26")for(c.length%2&&(v+=c.shift());c.length>0;)x=v,y=_+c.shift(),v=S=x+c.shift(),_=(A=y+c.shift())+c.shift(),e.U.P.curveTo(l,x,y,S,A,v,_);else if(G=="o27")for(c.length%2&&(_+=c.shift());c.length>0;)y=_,S=(x=v+c.shift())+c.shift(),A=y+c.shift(),v=S+c.shift(),_=A,e.U.P.curveTo(l,x,y,S,A,v,_);else if(G=="o10"||G=="o29"){var K=G=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var ne=c.pop(),z=K.Subrs[ne+K.Bias];s.x=v,s.y=_,s.nStems=u,s.haveWidth=f,s.width=d,s.open=m,e.U._drawCFF(z,s,o,a,l),v=s.x,_=s.y,u=s.nStems,f=s.haveWidth,d=s.width,m=s.open}}else if(G=="o30"||G=="o31"){var ae=c.length,ie=(oe=0,G=="o31");for(oe+=ae-(N=-3&ae);oe<N;)ie?(y=_,S=(x=v+c.shift())+c.shift(),_=(A=y+c.shift())+c.shift(),N-oe==5?(v=S+c.shift(),oe++):v=S,ie=!1):(x=v,y=_+c.shift(),S=x+c.shift(),A=y+c.shift(),v=S+c.shift(),N-oe==5?(_=A+c.shift(),oe++):_=A,ie=!0),e.U.P.curveTo(l,x,y,S,A,v,_),oe+=4}else{if((G+"").charAt(0)=="o")throw console.debug("Unknown operation: "+G,r),G;c.push(G)}}}s.x=v,s.y=_,s.nStems=u,s.haveWidth=f,s.width=d,s.open=m};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function VK(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(G,N){for(var k=new t(31),X=0;X<31;++X)k[X]=N+=1<<G[X-1];var te=new i(k[30]);for(X=1;X<30;++X)for(var oe=k[X];oe<k[X+1];++oe)te[oe]=oe-k[X]<<5|X;return[k,te]},l=a(r,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var f=a(s,0)[0],d=new t(32768),m=0;m<32768;++m){var g=(43690&m)>>>1|(21845&m)<<1;g=(61680&(g=(52428&g)>>>2|(13107&g)<<2))>>>4|(3855&g)<<4,d[m]=((65280&g)>>>8|(255&g)<<8)>>>1}var v=function(G,N,k){for(var X=G.length,te=0,oe=new t(N);te<X;++te)++oe[G[te]-1];var H,J=new t(N);for(te=0;te<N;++te)J[te]=J[te-1]+oe[te-1]<<1;if(k){H=new t(1<<N);var Q=15-N;for(te=0;te<X;++te)if(G[te])for(var U=te<<4|G[te],V=N-G[te],Z=J[G[te]-1]++<<V,K=Z|(1<<V)-1;Z<=K;++Z)H[d[Z]>>>Q]=U}else for(H=new t(X),te=0;te<X;++te)G[te]&&(H[te]=d[J[G[te]-1]++]>>>15-G[te]);return H},_=new e(288);for(m=0;m<144;++m)_[m]=8;for(m=144;m<256;++m)_[m]=9;for(m=256;m<280;++m)_[m]=7;for(m=280;m<288;++m)_[m]=8;var x=new e(32);for(m=0;m<32;++m)x[m]=5;var y=v(_,9,1),S=v(x,5,1),A=function(G){for(var N=G[0],k=1;k<G.length;++k)G[k]>N&&(N=G[k]);return N},C=function(G,N,k){var X=N/8|0;return(G[X]|G[X+1]<<8)>>(7&N)&k},b=function(G,N){var k=N/8|0;return(G[k]|G[k+1]<<8|G[k+2]<<16)>>(7&N)},P=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(G,N,k){var X=new Error(N||P[G]);if(X.code=G,Error.captureStackTrace&&Error.captureStackTrace(X,E),!k)throw X;return X},R=function(G,N,k){var X=G.length;if(!X||k&&!k.l&&X<5)return N||new e(0);var te=!N||k,oe=!k||k.i;k||(k={}),N||(N=new e(3*X));var H,J=function(Fe){var Ze=N.length;if(Fe>Ze){var lt=new e(Math.max(2*Ze,Fe));lt.set(N),N=lt}},Q=k.f||0,U=k.p||0,V=k.b||0,Z=k.l,K=k.d,ne=k.m,z=k.n,ae=8*X;do{if(!Z){k.f=Q=C(G,U,1);var ie=C(G,U+1,3);if(U+=3,!ie){var ye=G[(Le=((H=U)/8|0)+(7&H&&1)+4)-4]|G[Le-3]<<8,re=Le+ye;if(re>X){oe&&E(0);break}te&&J(V+ye),N.set(G.subarray(Le,re),V),k.b=V+=ye,k.p=U=8*re;continue}if(ie==1)Z=y,K=S,ne=9,z=5;else if(ie==2){var he=C(G,U,31)+257,q=C(G,U+10,15)+4,ce=he+C(G,U+5,31)+1;U+=14;for(var Ce=new e(ce),ge=new e(19),Ae=0;Ae<q;++Ae)ge[o[Ae]]=C(G,U+3*Ae,7);U+=3*q;var ke=A(ge),ve=(1<<ke)-1,De=v(ge,ke,1);for(Ae=0;Ae<ce;){var Le,we=De[C(G,U,ve)];if(U+=15&we,(Le=we>>>4)<16)Ce[Ae++]=Le;else{var F=0,D=0;for(Le==16?(D=3+C(G,U,3),U+=2,F=Ce[Ae-1]):Le==17?(D=3+C(G,U,7),U+=3):Le==18&&(D=11+C(G,U,127),U+=7);D--;)Ce[Ae++]=F}}var $=Ce.subarray(0,he),le=Ce.subarray(he);ne=A($),z=A(le),Z=v($,ne,1),K=v(le,z,1)}else E(1);if(U>ae){oe&&E(0);break}}te&&J(V+131072);for(var Se=(1<<ne)-1,Te=(1<<z)-1,Oe=U;;Oe=U){var Be=(F=Z[b(G,U)&Se])>>>4;if((U+=15&F)>ae){oe&&E(0);break}if(F||E(2),Be<256)N[V++]=Be;else{if(Be==256){Oe=U,Z=null;break}var Me=Be-254;if(Be>264){var Xe=r[Ae=Be-257];Me=C(G,U,(1<<Xe)-1)+c[Ae],U+=Xe}var Ie=K[b(G,U)&Te],Ve=Ie>>>4;if(Ie||E(3),U+=15&Ie,le=f[Ve],Ve>3&&(Xe=s[Ve],le+=b(G,U)&(1<<Xe)-1,U+=Xe),U>ae){oe&&E(0);break}te&&J(V+131072);for(var He=V+Me;V<He;V+=4)N[V]=N[V-le],N[V+1]=N[V+1-le],N[V+2]=N[V+2-le],N[V+3]=N[V+3-le];V=He}}k.l=Z,k.p=Oe,k.b=V,Z&&(Q=1,k.m=ne,k.d=K,k.n=z)}while(!Q);return V==N.length?N:function(Fe,Ze,lt){(Ze==null||Ze<0)&&(Ze=0),(lt==null||lt>Fe.length)&&(lt=Fe.length);var yt=new(Fe instanceof t?t:Fe instanceof i?i:e)(lt-Ze);return yt.set(Fe.subarray(Ze,lt)),yt}(N,0,V)},B=new e(0),O=typeof TextDecoder<"u"&&new TextDecoder;try{O.decode(B,{stream:!0})}catch{}return n.convert_streams=function(G){var N=new DataView(G),k=0;function X(){var he=N.getUint16(k);return k+=2,he}function te(){var he=N.getUint32(k);return k+=4,he}function oe(he){ye.setUint16(re,he),re+=2}function H(he){ye.setUint32(re,he),re+=4}for(var J={signature:te(),flavor:te(),length:te(),numTables:X(),reserved:X(),totalSfntSize:te(),majorVersion:X(),minorVersion:X(),metaOffset:te(),metaLength:te(),metaOrigLength:te(),privOffset:te(),privLength:te()},Q=0;Math.pow(2,Q)<=J.numTables;)Q++;Q--;for(var U=16*Math.pow(2,Q),V=16*J.numTables-U,Z=12,K=[],ne=0;ne<J.numTables;ne++)K.push({tag:te(),offset:te(),compLength:te(),origLength:te(),origChecksum:te()}),Z+=16;var z,ae=new Uint8Array(12+16*K.length+K.reduce(function(he,q){return he+q.origLength+4},0)),ie=ae.buffer,ye=new DataView(ie),re=0;return H(J.flavor),oe(J.numTables),oe(U),oe(Q),oe(V),K.forEach(function(he){H(he.tag),H(he.origChecksum),H(Z),H(he.origLength),he.outOffset=Z,(Z+=he.origLength)%4!=0&&(Z+=4-Z%4)}),K.forEach(function(he){var q,ce=G.slice(he.offset,he.offset+he.compLength);if(he.compLength!=he.origLength){var Ce=new Uint8Array(he.origLength);q=new Uint8Array(ce,2),R(q,Ce)}else Ce=new Uint8Array(ce);ae.set(Ce,he.outOffset);var ge=0;(Z=he.outOffset+he.origLength)%4!=0&&(ge=4-Z%4),ae.set(new Uint8Array(ge).buffer,he.outOffset+he.origLength),z=Z+ge}),ie.slice(0,z)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function WK(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,o=4,a=8,l=16,c=32;let u;function f(C){if(!u){const b={R:s,L:r,D:o,C:l,U:c,T:a};u=new Map;for(let P in i){let E=0;i[P].split(",").forEach(R=>{let[B,O]=R.split("+");B=parseInt(B,36),O=O?parseInt(O,36):0,u.set(E+=B,b[P]);for(let G=O;G--;)u.set(++E,b[P])})}}return u.get(C)||c}const d=1,m=2,g=3,v=4,_=[null,"isol","init","fina","medi"];function x(C){const b=new Uint8Array(C.length);let P=c,E=d,R=-1;for(let B=0;B<C.length;B++){const O=C.codePointAt(B);let G=f(O)|0,N=d;G&a||(P&(r|o|l)?G&(s|o|l)?(N=g,(E===d||E===g)&&b[R]++):G&(r|c)&&(E===m||E===v)&&b[R]--:P&(s|c)&&(E===m||E===v)&&b[R]--,E=b[B]=N,P=G,R=B,O>65535&&B++)}return b}function y(C,b){const P=[];for(let R=0;R<b.length;R++){const B=b.codePointAt(R);B>65535&&R++,P.push(n.U.codeToGlyph(C,B))}const E=C.GSUB;if(E){const{lookupList:R,featureList:B}=E;let O;const G=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,N=[];B.forEach(k=>{if(G.test(k.tag))for(let X=0;X<k.tab.length;X++){if(N[k.tab[X]])continue;N[k.tab[X]]=!0;const te=R[k.tab[X]],oe=/^(isol|init|fina|medi)$/.test(k.tag);oe&&!O&&(O=x(b));for(let H=0;H<P.length;H++)(!O||!oe||_[O[H]]===k.tag)&&n.U._applySubs(P,H,te,R)}})}return P}function S(...C){for(let b=0;b<C.length;b++)if(typeof C[b]=="number")return C[b]}function A(C){const b=Object.create(null),P=C["OS/2"],E=C.hhea,R=C.head.unitsPerEm,B=S(P&&P.sTypoAscender,E&&E.ascender,R),O={unitsPerEm:R,ascender:B,descender:S(P&&P.sTypoDescender,E&&E.descender,0),capHeight:S(P&&P.sCapHeight,B),xHeight:S(P&&P.sxHeight,B),lineGap:S(P&&P.sTypoLineGap,E&&E.lineGap),forEachGlyph(G,N,k,X){let te=0;const oe=1/O.unitsPerEm*N,H=y(C,G);let J=0,Q=-1;return H.forEach((U,V)=>{if(U!==-1){let Z=b[U];if(!Z){const{cmds:K,crds:ne}=n.U.glyphToPath(C,U);let z="",ae=0;for(let q=0,ce=K.length;q<ce;q++){const Ce=t[K[q]];z+=K[q];for(let ge=1;ge<=Ce;ge++)z+=(ge>1?",":"")+ne[ae++]}let ie,ye,re,he;if(ne.length){ie=ye=1/0,re=he=-1/0;for(let q=0,ce=ne.length;q<ce;q+=2){let Ce=ne[q],ge=ne[q+1];Ce<ie&&(ie=Ce),ge<ye&&(ye=ge),Ce>re&&(re=Ce),ge>he&&(he=ge)}}else ie=re=ye=he=0;Z=b[U]={index:U,advanceWidth:C.hmtx.aWidth[U],xMin:ie,yMin:ye,xMax:re,yMax:he,path:z,pathCommandCount:K.length}}Q!==-1&&(te+=n.U.getPairAdjustment(C,Q,U)*oe),X.call(null,Z,te,J),Z.advanceWidth&&(te+=Z.advanceWidth*oe),k&&(te+=k*N),Q=U}J+=G.codePointAt(J)>65535?2:1}),te}};return O}return function(b){const P=new Uint8Array(b,0,4),E=n._bin.readASCII(P,0,4);if(E==="wOFF")b=e(b);else if(E==="wOF2")throw new Error("woff2 fonts not supported");return A(n.parse(b)[0])}}const jK=Im({name:"Typr Font Parser",dependencies:[HK,VK,WK],init(n,e,t){const i=n(),r=e();return t(i,r)}}),xf={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},JK=new Je;function Ku(){return(self.performance||Date).now()}const ER=Object.create(null);function RF(n,e){n=KK({},n);const t=Ku();if(n.font=QK(n.font||xf.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||xf.sdfGlyphSize,n.colorRanges!=null){let f={};for(let d in n.colorRanges)if(n.colorRanges.hasOwnProperty(d)){let m=n.colorRanges[d];typeof m!="number"&&(m=JK.set(m).getHex()),f[d]=m}n.colorRanges=f}Object.freeze(n);const{textureWidth:i,sdfExponent:r}=xf,{sdfGlyphSize:s}=n,o=i/s*4;let a=ER[s];if(!a){const f=document.createElement("canvas");f.width=i,f.height=s*256/o,a=ER[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:f,sdfTexture:new Cn(f,void 0,void 0,void 0,gn,gn),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,XK(a)}const{sdfTexture:l,sdfCanvas:c}=a;let u=a.glyphsByFont.get(n.font);u||a.glyphsByFont.set(n.font,u=new Map),qK(n).then(f=>{const{glyphIds:d,glyphPositions:m,fontSize:g,unitsPerEm:v,timings:_}=f,x=[],y=new Float32Array(d.length*4),S=g/v;let A=0,C=0;const b=Ku();d.forEach((O,G)=>{let N=u.get(O);if(!N){const{path:oe,pathBounds:H}=f.glyphData[O],J=Math.max(H[2]-H[0],H[3]-H[1])/s*(xf.sdfMargin*s+.5),Q=a.glyphCount++,U=[H[0]-J,H[1]-J,H[2]+J,H[3]+J];u.set(O,N={path:oe,atlasIndex:Q,sdfViewBox:U}),x.push(N)}const{sdfViewBox:k}=N,X=m[C++],te=m[C++];y[A++]=X+k[0]*S,y[A++]=te+k[1]*S,y[A++]=X+k[2]*S,y[A++]=te+k[3]*S,d[G]=N.atlasIndex}),_.quads=(_.quads||0)+(Ku()-b);const P=Ku();_.sdf={};const E=c.height,R=Math.ceil(a.glyphCount/o),B=Math.pow(2,Math.ceil(Math.log2(R*s)));B>E&&(console.info(`Increasing SDF texture size ${E}->${B}`),GK(c,i,B),l.dispose()),Promise.all(x.map(O=>IF(O,a,n.gpuAccelerateSDF).then(({timing:G})=>{_.sdf[O.atlasIndex]=G}))).then(()=>{x.length&&!a.contextLost&&(BF(a),l.needsUpdate=!0),_.sdfTotal=Ku()-P,_.total=Ku()-t,e(Object.freeze({parameters:n,sdfTexture:l,sdfGlyphSize:s,sdfExponent:r,glyphBounds:y,glyphAtlasIndices:d,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{a.contextLost||zK(c)})}function IF({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=xf,c=Math.max(t[2]-t[0],t[3]-t[1]),u=Math.floor(e/4),f=u%(a/i)*i,d=Math.floor(u/(a/i))*i,m=e%4;return LK(i,i,n,t,c,l,r,f,d,m,o)}function XK(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(IF(s,n,!0))})}),Promise.all(i).then(()=>{BF(n),n.sdfTexture.needsUpdate=!0})})}function YK({font:n,characters:e,sdfGlyphSize:t},i){let r=Array.isArray(e)?e.join(`
`):""+e;RF({font:n,sdfGlyphSize:t,text:r},i)}function KK(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let O0;function QK(n){return O0||(O0=typeof document>"u"?{}:document.createElement("a")),O0.href=n,O0.href}function BF(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:r}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==i*r*4)&&(o=new Uint8Array(i*r*4),t.image={width:i,height:r,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,o)}}const ZK=Im({name:"Typesetter",dependencies:[xf,jK,DK,CK],init(n,e,t,i){const{defaultFontURL:r}=n;return t(e,i(),{defaultFontURL:r})}}),qK=Im({name:"Typesetter",dependencies:[ZK],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),bR={};function $K(n){let e=bR[n];if(!e){const t=new Js(1,1,n,n),i=t.clone(),r=t.attributes,s=i.attributes,o=new Mt,a=r.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new ot([...r[l].array,...s[l].array],r[l].itemSize))}),o.setIndex([...t.index.array,...i.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=bR[n]=o}return e}const eQ="aTroikaGlyphBounds",TR="aTroikaGlyphIndex",tQ="aTroikaGlyphColor";class nQ extends KC{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new xa,this.boundingBox=new _a}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===ur?t/2:0,e===va?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=$K(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,r,s){lS(this,eQ,e,4),lS(this,TR,t,1),lS(this,tQ,s,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:r,floor:s,min:o,max:a,sin:l,cos:c}=Math,u=r/2,f=r*2,d=Math.abs(t),m=e[0]/d,g=e[2]/d,v=s((m+u)/f)!==s((g+u)/f)?-d:o(l(m)*d,l(g)*d),_=s((m-u)/f)!==s((g-u)/f)?d:a(l(m)*d,l(g)*d),x=s((m+r)/f)!==s((g+r)/f)?d*2:a(d-c(m)*d,d-c(g)*d);i.min.set(v,e[1],t<0?-x:0),i.max.set(_,e[3],t<0?0:x)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(TR).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){t=i[r].end;let s=i[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}}function lS(n,e,t,i){const r=n.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(n.setAttribute(e,new Wc(t,i)),delete n._maxInstanceCount,n.dispose()):r&&n.deleteAttribute(e)}const iQ=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,rQ=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,sQ=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,oQ=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function aQ(n){const e=LA(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ne},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new tn(0,0,0,0)},uTroikaClipRect:{value:new tn(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ne},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Je},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Xi},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:iQ,vertexTransform:rQ,fragmentDefs:sQ,fragmentColorTransform:oQ,customRewriter({vertexShader:t,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(TF,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const TE=new nn({color:16777215,side:va,transparent:!0}),PR=8421504,RR=new dt,k0=new j,cS=new j,Cd=[],lQ=new j,uS="+x+y";function IR(n){return Array.isArray(n)?n[0]:n}let DF=()=>{const n=new Ln(new Js(1,1),TE);return DF=()=>n,n},LF=()=>{const n=new Ln(new Js(1,1,32,1),TE);return LF=()=>n,n};const cQ={type:"syncstart"},uQ={type:"synccomplete"},OF=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],fQ=OF.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let kF=class extends Ln{constructor(){const e=new nQ;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=PR,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=uS,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(cQ),RF({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(uQ),e&&e()})))}onBeforeRender(e,t,i,r,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=wo}onAfterRender(e,t,i,r,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=TE.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=aQ(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return IR(this.material).getDepthMaterial()}get customDistanceMaterial(){return IR(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:a,blockBounds:l}=r;i.uTroikaSDFTexture.value=a,i.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(l),i.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let c=0,u=0,f=0,d,m,g,v=0,_=0;if(t){let{outlineWidth:y,outlineOffsetX:S,outlineOffsetY:A,outlineBlur:C,outlineOpacity:b}=this;c=this._parsePercent(y)||0,u=Math.max(0,this._parsePercent(C)||0),d=b,v=this._parsePercent(S)||0,_=this._parsePercent(A)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(g=this.strokeColor,i.uTroikaStrokeColor.value.set(g??PR),m=this.strokeOpacity,m==null&&(m=1)),d=this.fillOpacity;i.uTroikaDistanceOffset.value=c,i.uTroikaPositionOffset.value.set(v,_),i.uTroikaBlurRadius.value=u,i.uTroikaStrokeWidth.value=f,i.uTroikaStrokeOpacity.value=m,i.uTroikaFillOpacity.value=d??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let x=this.clipRect;if(x&&Array.isArray(x)&&x.length===4)i.uTroikaClipRect.value.fromArray(x);else{const y=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(l[0]-y,l[1]-y,l[2]+y,l[3]+y)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new Je;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||uS;if(o!==e._orientation){let a=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==uS&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,f,d]=l;k0.set(0,0,0)[u]=c==="-"?1:-1,cS.set(0,0,0)[d]=f==="-"?-1:1,RR.lookAt(lQ,k0.cross(cS),cS),a.setFromMatrix4(RR)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Ne){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new Ne){return k0.copy(e),this.localPositionToTextCoords(this.worldToLocal(k0),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,o=r?LF():DF(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let u=0;u<c.count;u++){let f=s[0]+c.getX(u)*(s[2]-s[0]);const d=s[1]+c.getY(u)*(s[3]-s[1]);let m=0;r&&(m=r-Math.cos(f/r)*r,f=Math.sin(f/r)*r),l.setXYZ(u,f,d,m)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Cd.length=0,o.raycast(e,Cd);for(let u=0;u<Cd.length;u++)Cd[u].object=this,t.push(Cd[u])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,fQ.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};OF.forEach(n=>{const e="_private_"+n;Object.defineProperty(kF.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const BR=L.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:i,fontSize:r=1,children:s,characters:o,onSync:a,...l},c)=>{const u=Yn(({invalidate:g})=>g),[f]=L.useState(()=>new kF),[d,m]=L.useMemo(()=>{const g=[];let v="";return L.Children.forEach(s,_=>{typeof _=="string"||typeof _=="number"?v+=_:g.push(_)}),[g,v]},[s]);return iE(()=>new Promise(g=>YK({font:i,characters:o},g)),["troika-text",i,o]),L.useLayoutEffect(()=>void f.sync(()=>{u(),a&&a(f)})),L.useEffect(()=>()=>f.dispose(),[f]),L.createElement("primitive",js({object:f,ref:c,font:i,text:m,anchorX:e,anchorY:t,fontSize:r,sdfGlyphSize:n},l),d)});let fS=null;async function FF(n){fS||(fS=new dK);let e=typeof n=="string"?await(await fetch(n)).json():n;return fS.parse(e)}function PE(n){return iE(FF,[n])}PE.preload=n=>vk(FF,[n]);PE.clear=n=>yk([n]);const hQ=["string","number"],dQ=n=>{let e="";const t=[];return L.Children.forEach(n,i=>{hQ.includes(typeof i)?e+=i+"":t.push(i)}),[e,...t]},Sf=L.forwardRef(({font:n,letterSpacing:e=0,lineHeight:t=1,size:i=1,height:r=.2,bevelThickness:s=.1,bevelSize:o=.01,bevelEnabled:a=!1,bevelOffset:l=0,bevelSegments:c=4,curveSegments:u=8,smooth:f,children:d,...m},g)=>{L.useMemo(()=>Mm({RenamedTextGeometry:uK}),[]);const v=L.useRef(null),_=PE(n),x=L.useMemo(()=>({font:_,size:i,height:r,bevelThickness:s,bevelSize:o,bevelEnabled:a,bevelSegments:c,bevelOffset:l,curveSegments:u,letterSpacing:e,lineHeight:t}),[_,i,r,s,o,a,c,l,u,e,t]),[y,...S]=L.useMemo(()=>dQ(d),[d]),A=L.useMemo(()=>[y,x],[y,x]);return L.useLayoutEffect(()=>{f&&(v.current.geometry=PY(v.current.geometry,f),v.current.geometry.computeVertexNormals())},[A,f]),L.useImperativeHandle(g,()=>v.current,[]),L.createElement("mesh",js({},m,{ref:v}),L.createElement("renamedTextGeometry",{args:A}),S)});function pQ(n,e,t,i){const r=class extends Cr{constructor(o={}){const a=Object.entries(n);super({uniforms:a.reduce((l,[c,u])=>{const f=Yy.clone({[c]:{value:u}});return{...l,...f}},{}),vertexShader:e,fragmentShader:t}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c})),Object.assign(this,o),i&&i(this)}};return r.key=Sc.generateUUID(),r}let F0=null;function UF(n,e,t){return i=>{t&&t(i),n&&(F0||(F0=new vK),F0.setDecoderPath(typeof n=="string"?n:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),i.setDRACOLoader(F0)),e&&i.setMeshoptDecoder(typeof oS=="function"?oS():oS)}}function Ki(n,e=!0,t=!0,i){return Mh(CE,n,UF(e,t,i))}Ki.preload=(n,e=!0,t=!0,i)=>Mh.preload(CE,n,UF(e,t,i));Ki.clear=n=>Mh.clear(CE,n);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const pt={LEFT:1,RIGHT:2,MIDDLE:4},Re=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768});function nc(n){return n.isPerspectiveCamera}function Va(n){return n.isOrthographicCamera}const Qu=Math.PI*2,DR=Math.PI/2,NF=1e-5,Ed=Math.PI/180;function nf(n,e,t){return Math.max(e,Math.min(t,n))}function dn(n,e=NF){return Math.abs(n)<e}function hn(n,e,t=NF){return dn(n-e,t)}function LR(n,e){return Math.round(n/e)*e}function bd(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Td(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function Pd(n,e,t,i,r=1/0,s){i=Math.max(1e-4,i);const o=2/i,a=o*s,l=1/(1+a+.48*a*a+.235*a*a*a);let c=n-e;const u=e,f=r*i;c=nf(c,-f,f),e=n-c;const d=(t.value+o*c)*s;t.value=(t.value-o*d)*l;let m=e+(c+d)*l;return u-n>0==m>u&&(m=u,t.value=(m-u)/s),m}function OR(n,e,t,i,r=1/0,s,o){i=Math.max(1e-4,i);const a=2/i,l=a*s,c=1/(1+l+.48*l*l+.235*l*l*l);let u=e.x,f=e.y,d=e.z,m=n.x-u,g=n.y-f,v=n.z-d;const _=u,x=f,y=d,S=r*i,A=S*S,C=m*m+g*g+v*v;if(C>A){const X=Math.sqrt(C);m=m/X*S,g=g/X*S,v=v/X*S}u=n.x-m,f=n.y-g,d=n.z-v;const b=(t.x+a*m)*s,P=(t.y+a*g)*s,E=(t.z+a*v)*s;t.x=(t.x-a*b)*c,t.y=(t.y-a*P)*c,t.z=(t.z-a*E)*c,o.x=u+(m+b)*c,o.y=f+(g+P)*c,o.z=d+(v+E)*c;const R=_-n.x,B=x-n.y,O=y-n.z,G=o.x-_,N=o.y-x,k=o.z-y;return R*G+B*N+O*k>0&&(o.x=_,o.y=x,o.z=y,t.x=(o.x-_)/s,t.y=(o.y-x)/s,t.z=(o.z-y)/s),o}function hS(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function dS(n,e){return Va(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class mQ{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e)}}}const gQ="2.3.8",U0=1/8,zF=typeof window<"u",vQ=zF&&/Mac/.test(navigator.platform),yQ=!(zF&&"PointerEvent"in window);let mt,kR,N0,pS,vr,wt,rn,ic,ao,lo,rc,FR,UR,os,Rd,Zu,NR,mS,zR,gS,vS,z0,yS=class kA extends mQ{static install(e){mt=e.THREE,kR=Object.freeze(new mt.Vector3(0,0,0)),N0=Object.freeze(new mt.Vector3(0,1,0)),pS=Object.freeze(new mt.Vector3(0,0,1)),vr=new mt.Vector2,wt=new mt.Vector3,rn=new mt.Vector3,ic=new mt.Vector3,ao=new mt.Vector3,lo=new mt.Vector3,rc=new mt.Vector3,FR=new mt.Vector3,UR=new mt.Vector3,os=new mt.Spherical,Rd=new mt.Spherical,Zu=new mt.Box3,NR=new mt.Box3,mS=new mt.Sphere,zR=new mt.Quaternion,gS=new mt.Quaternion,vS=new mt.Matrix4,z0=new mt.Raycaster}static get ACTION(){return Re}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Re.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._activePointers=[],this._lockedPointer=null,this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new mt.Vector3,this._focalOffsetVelocity=new mt.Vector3,this._zoomVelocity={value:0},this._truckInternal=(A,C,b)=>{let P,E;if(nc(this._camera)){const R=wt.copy(this._camera.position).sub(this._target),B=this._camera.getEffectiveFOV()*Ed,O=R.length()*Math.tan(B*.5);P=this.truckSpeed*A*O/this._elementRect.height,E=this.truckSpeed*C*O/this._elementRect.height}else if(Va(this._camera)){const R=this._camera;P=A*(R.right-R.left)/R.zoom/this._elementRect.width,E=C*(R.top-R.bottom)/R.zoom/this._elementRect.height}else return;this.verticalDragToForward?(b?this.setFocalOffset(this._focalOffsetEnd.x+P,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(P,0,!0),this.forward(-E,!0)):b?this.setFocalOffset(this._focalOffsetEnd.x+P,this._focalOffsetEnd.y+E,this._focalOffsetEnd.z,!0):this.truck(P,E,!0)},this._rotateInternal=(A,C)=>{const b=Qu*this.azimuthRotateSpeed*A/this._elementRect.height,P=Qu*this.polarRotateSpeed*C/this._elementRect.height;this.rotate(b,P,!0)},this._dollyInternal=(A,C,b)=>{const P=Math.pow(.95,-A*this.dollySpeed),E=this._sphericalEnd.radius,R=this._sphericalEnd.radius*P,B=mt.MathUtils.clamp(R,this.minDistance,this.maxDistance);if(this.dollyTo(R,!0),this.dollyToCursor&&(this._changedDolly+=B-E,this._dollyControlCoord.set(C,b)),this.infinityDolly&&(R<this.minDistance||this.maxDistance<R)){const O=B-R;this._camera.getWorldDirection(wt),this._targetEnd.add(wt.normalize().multiplyScalar(O))}},this._zoomInternal=(A,C,b)=>{const P=Math.pow(.95,A*this.dollySpeed),E=this._zoom,R=this._zoom*P;this.zoomTo(R),this.dollyToCursor&&(this._changedZoom+=R-E,this._dollyControlCoord.set(C,b))},typeof mt>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new mt.Quaternion().setFromUnitVectors(this._camera.up,N0),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Re.NONE,this._target=new mt.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new mt.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new mt.Spherical().setFromVector3(wt.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new mt.Vector3,new mt.Vector3,new mt.Vector3,new mt.Vector3],this._updateNearPlaneCorners(),this._boundary=new mt.Box3(new mt.Vector3(-1/0,-1/0,-1/0),new mt.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new mt.Vector2,this.mouseButtons={left:Re.ROTATE,middle:Re.DOLLY,right:Re.TRUCK,wheel:nc(this._camera)?Re.DOLLY:Va(this._camera)?Re.ZOOM:Re.NONE},this.touches={one:Re.TOUCH_ROTATE,two:nc(this._camera)?Re.TOUCH_DOLLY_TRUCK:Va(this._camera)?Re.TOUCH_ZOOM_TRUCK:Re.NONE,three:Re.TOUCH_TRUCK};const i=new mt.Vector2,r=new mt.Vector2,s=new mt.Vector2,o=A=>{if(!this._enabled||!this._domElement)return;const C=A.pointerType!=="mouse"?null:(A.buttons&pt.LEFT)===pt.LEFT?pt.LEFT:(A.buttons&pt.MIDDLE)===pt.MIDDLE?pt.MIDDLE:(A.buttons&pt.RIGHT)===pt.RIGHT?pt.RIGHT:null;if(C!==null){const P=this._findPointerByMouseButton(C);P&&this._disposePointer(P)}if((A.buttons&pt.LEFT)===pt.LEFT&&this._lockedPointer)return;const b={pointerId:A.pointerId,clientX:A.clientX,clientY:A.clientY,deltaX:0,deltaY:0,mouseButton:C};this._activePointers.push(b),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,v(A)},a=A=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;const C=(A.buttons&pt.LEFT)===pt.LEFT?pt.LEFT:(A.buttons&pt.MIDDLE)===pt.MIDDLE?pt.MIDDLE:(A.buttons&pt.RIGHT)===pt.RIGHT?pt.RIGHT:null;if(C!==null){const P=this._findPointerByMouseButton(C);P&&this._disposePointer(P)}const b={pointerId:1,clientX:A.clientX,clientY:A.clientY,deltaX:0,deltaY:0,mouseButton:(A.buttons&pt.LEFT)===pt.LEFT?pt.LEFT:(A.buttons&pt.MIDDLE)===pt.LEFT?pt.MIDDLE:(A.buttons&pt.RIGHT)===pt.LEFT?pt.RIGHT:null};this._activePointers.push(b),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",f),this._domElement.ownerDocument.addEventListener("mousemove",c),this._domElement.ownerDocument.addEventListener("mouseup",f),this._isDragging=!0,v(A)},l=A=>{A.cancelable&&A.preventDefault();const C=A.pointerId,b=this._lockedPointer||this._findPointerById(C);if(b){if(b.clientX=A.clientX,b.clientY=A.clientY,b.deltaX=A.movementX,b.deltaY=A.movementY,this._state=0,A.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(A.buttons&pt.LEFT)===pt.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(A.buttons&pt.MIDDLE)===pt.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(A.buttons&pt.RIGHT)===pt.RIGHT&&(this._state=this._state|this.mouseButtons.right);_()}},c=A=>{const C=this._lockedPointer||this._findPointerById(1);C&&(C.clientX=A.clientX,C.clientY=A.clientY,C.deltaX=A.movementX,C.deltaY=A.movementY,this._state=0,(this._lockedPointer||(A.buttons&pt.LEFT)===pt.LEFT)&&(this._state=this._state|this.mouseButtons.left),(A.buttons&pt.MIDDLE)===pt.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(A.buttons&pt.RIGHT)===pt.RIGHT&&(this._state=this._state|this.mouseButtons.right),_())},u=A=>{const C=this._findPointerById(A.pointerId);if(!(C&&C===this._lockedPointer)){if(C&&this._disposePointer(C),A.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=Re.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Re.NONE;x()}},f=()=>{const A=this._findPointerById(1);A&&A===this._lockedPointer||(A&&this._disposePointer(A),this._state=Re.NONE,x())};let d=-1;const m=A=>{if(!this._enabled||this.mouseButtons.wheel===Re.NONE)return;if(A.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Re.ROTATE||this.mouseButtons.wheel===Re.TRUCK){const R=performance.now();d-R<1e3&&this._getClientRect(this._elementRect),d=R}const C=vQ?-1:-3,b=A.deltaMode===1?A.deltaY/C:A.deltaY/(C*10),P=this.dollyToCursor?(A.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,E=this.dollyToCursor?(A.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Re.ROTATE:{this._rotateInternal(A.deltaX,A.deltaY),this._isUserControllingRotate=!0;break}case Re.TRUCK:{this._truckInternal(A.deltaX,A.deltaY,!1),this._isUserControllingTruck=!0;break}case Re.OFFSET:{this._truckInternal(A.deltaX,A.deltaY,!0),this._isUserControllingOffset=!0;break}case Re.DOLLY:{this._dollyInternal(-b,P,E),this._isUserControllingDolly=!0;break}case Re.ZOOM:{this._zoomInternal(-b,P,E),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},g=A=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===kA.ACTION.NONE){const C=A instanceof PointerEvent?A.pointerId:(A instanceof MouseEvent,0),b=this._findPointerById(C);b&&this._disposePointer(b),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",f);return}A.preventDefault()}},v=A=>{if(!this._enabled)return;if(hS(this._activePointers,vr),this._getClientRect(this._elementRect),i.copy(vr),r.copy(vr),this._activePointers.length>=2){const b=vr.x-this._activePointers[1].clientX,P=vr.y-this._activePointers[1].clientY,E=Math.sqrt(b*b+P*P);s.set(0,E);const R=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,B=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(R,B)}if(this._state=0,!A)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in A&&A.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(A.buttons&pt.LEFT)===pt.LEFT&&(this._state=this._state|this.mouseButtons.left),(A.buttons&pt.MIDDLE)===pt.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(A.buttons&pt.RIGHT)===pt.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&Re.ROTATE)===Re.ROTATE||(this._state&Re.TOUCH_ROTATE)===Re.TOUCH_ROTATE||(this._state&Re.TOUCH_DOLLY_ROTATE)===Re.TOUCH_DOLLY_ROTATE||(this._state&Re.TOUCH_ZOOM_ROTATE)===Re.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&Re.TRUCK)===Re.TRUCK||(this._state&Re.TOUCH_TRUCK)===Re.TOUCH_TRUCK||(this._state&Re.TOUCH_DOLLY_TRUCK)===Re.TOUCH_DOLLY_TRUCK||(this._state&Re.TOUCH_ZOOM_TRUCK)===Re.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&Re.DOLLY)===Re.DOLLY||(this._state&Re.TOUCH_DOLLY)===Re.TOUCH_DOLLY||(this._state&Re.TOUCH_DOLLY_TRUCK)===Re.TOUCH_DOLLY_TRUCK||(this._state&Re.TOUCH_DOLLY_OFFSET)===Re.TOUCH_DOLLY_OFFSET||(this._state&Re.TOUCH_DOLLY_ROTATE)===Re.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&Re.ZOOM)===Re.ZOOM||(this._state&Re.TOUCH_ZOOM)===Re.TOUCH_ZOOM||(this._state&Re.TOUCH_ZOOM_TRUCK)===Re.TOUCH_ZOOM_TRUCK||(this._state&Re.TOUCH_ZOOM_OFFSET)===Re.TOUCH_ZOOM_OFFSET||(this._state&Re.TOUCH_ZOOM_ROTATE)===Re.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&Re.OFFSET)===Re.OFFSET||(this._state&Re.TOUCH_OFFSET)===Re.TOUCH_OFFSET||(this._state&Re.TOUCH_DOLLY_OFFSET)===Re.TOUCH_DOLLY_OFFSET||(this._state&Re.TOUCH_ZOOM_OFFSET)===Re.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},_=()=>{if(!this._enabled)return;hS(this._activePointers,vr);const C=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,b=C?-C.deltaX:r.x-vr.x,P=C?-C.deltaY:r.y-vr.y;if(r.copy(vr),((this._state&Re.ROTATE)===Re.ROTATE||(this._state&Re.TOUCH_ROTATE)===Re.TOUCH_ROTATE||(this._state&Re.TOUCH_DOLLY_ROTATE)===Re.TOUCH_DOLLY_ROTATE||(this._state&Re.TOUCH_ZOOM_ROTATE)===Re.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(b,P),this._isUserControllingRotate=!0),(this._state&Re.DOLLY)===Re.DOLLY||(this._state&Re.ZOOM)===Re.ZOOM){const E=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,R=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,B=this.dollyDragInverted?-1:1;(this._state&Re.DOLLY)===Re.DOLLY?(this._dollyInternal(B*P*U0,E,R),this._isUserControllingDolly=!0):(this._zoomInternal(B*P*U0,E,R),this._isUserControllingZoom=!0)}if((this._state&Re.TOUCH_DOLLY)===Re.TOUCH_DOLLY||(this._state&Re.TOUCH_ZOOM)===Re.TOUCH_ZOOM||(this._state&Re.TOUCH_DOLLY_TRUCK)===Re.TOUCH_DOLLY_TRUCK||(this._state&Re.TOUCH_ZOOM_TRUCK)===Re.TOUCH_ZOOM_TRUCK||(this._state&Re.TOUCH_DOLLY_OFFSET)===Re.TOUCH_DOLLY_OFFSET||(this._state&Re.TOUCH_ZOOM_OFFSET)===Re.TOUCH_ZOOM_OFFSET||(this._state&Re.TOUCH_DOLLY_ROTATE)===Re.TOUCH_DOLLY_ROTATE||(this._state&Re.TOUCH_ZOOM_ROTATE)===Re.TOUCH_ZOOM_ROTATE){const E=vr.x-this._activePointers[1].clientX,R=vr.y-this._activePointers[1].clientY,B=Math.sqrt(E*E+R*R),O=s.y-B;s.set(0,B);const G=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,N=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Re.TOUCH_DOLLY)===Re.TOUCH_DOLLY||(this._state&Re.TOUCH_DOLLY_ROTATE)===Re.TOUCH_DOLLY_ROTATE||(this._state&Re.TOUCH_DOLLY_TRUCK)===Re.TOUCH_DOLLY_TRUCK||(this._state&Re.TOUCH_DOLLY_OFFSET)===Re.TOUCH_DOLLY_OFFSET?(this._dollyInternal(O*U0,G,N),this._isUserControllingDolly=!0):(this._zoomInternal(O*U0,G,N),this._isUserControllingZoom=!0)}((this._state&Re.TRUCK)===Re.TRUCK||(this._state&Re.TOUCH_TRUCK)===Re.TOUCH_TRUCK||(this._state&Re.TOUCH_DOLLY_TRUCK)===Re.TOUCH_DOLLY_TRUCK||(this._state&Re.TOUCH_ZOOM_TRUCK)===Re.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(b,P,!1),this._isUserControllingTruck=!0),((this._state&Re.OFFSET)===Re.OFFSET||(this._state&Re.TOUCH_OFFSET)===Re.TOUCH_OFFSET||(this._state&Re.TOUCH_DOLLY_OFFSET)===Re.TOUCH_DOLLY_OFFSET||(this._state&Re.TOUCH_ZOOM_OFFSET)===Re.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(b,P,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},x=()=>{hS(this._activePointers,vr),r.copy(vr),(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",f),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",y),this._domElement.ownerDocument.addEventListener("pointerlockerror",S),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),v())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",y),this._domElement.ownerDocument.removeEventListener("pointerlockerror",S))};const y=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},S=()=>{this.unlockPointer()};this._addAllEventListeners=A=>{this._domElement=A,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),yQ&&this._domElement.addEventListener("mousedown",a),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",m,{passive:!1}),this._domElement.addEventListener("contextmenu",g)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("mousedown",a),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",m,{passive:!1}),this._domElement.removeEventListener("contextmenu",g),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",f),this._domElement.ownerDocument.removeEventListener("pointerlockchange",y),this._domElement.ownerDocument.removeEventListener("pointerlockerror",S))},this.cancel=()=>{this._state!==Re.NONE&&(this._state=Re.NONE,this._activePointers.length=0,x())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;const r=nf(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=nf(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!i||hn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&hn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){this._isUserControllingDolly=!1;const i=this._sphericalEnd.radius,r=nf(e,this.minDistance,this.maxDistance);if(this.colliderMeshes.length>=1){const a=this._collisionTest(),l=hn(a,this._spherical.radius);if(!(i>r)&&l)return Promise.resolve();this._sphericalEnd.radius=Math.min(r,a)}else this._sphericalEnd.radius=r;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const o=!t||hn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(o)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=nf(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const i=!t||hn(this._zoom,this._zoomEnd,this.restThreshold);return this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),ao.setFromMatrixColumn(this._camera.matrix,0),lo.setFromMatrixColumn(this._camera.matrix,1),ao.multiplyScalar(e),lo.multiplyScalar(-t);const r=wt.copy(ao).add(lo),s=rn.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(e,t=!1){wt.setFromMatrixColumn(this._camera.matrix,0),wt.crossVectors(this._camera.up,wt),wt.multiplyScalar(e);const i=rn.copy(this._targetEnd).add(wt);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return wt.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+wt.x,this._targetEnd.y+wt.y,this._targetEnd.z+wt.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;const s=wt.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||hn(this._target.x,this._targetEnd.x,this.restThreshold)&&hn(this._target.y,this._targetEnd.y,this.restThreshold)&&hn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,i,r=!1){const a=wt.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(a.x,a.y,a.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],c=e.isBox3?Zu.copy(e):Zu.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=LR(this._sphericalEnd.theta,DR),f=LR(this._sphericalEnd.phi,DR);l.push(this.rotateTo(u,f,t));const d=wt.setFromSpherical(this._sphericalEnd).normalize(),m=zR.setFromUnitVectors(d,pS),g=hn(Math.abs(d.y),1);g&&m.multiply(gS.setFromAxisAngle(N0,u)),m.multiply(this._yAxisUpSpaceInverse);const v=NR.makeEmpty();rn.copy(c.min).applyQuaternion(m),v.expandByPoint(rn),rn.copy(c.min).setX(c.max.x).applyQuaternion(m),v.expandByPoint(rn),rn.copy(c.min).setY(c.max.y).applyQuaternion(m),v.expandByPoint(rn),rn.copy(c.max).setZ(c.min.z).applyQuaternion(m),v.expandByPoint(rn),rn.copy(c.min).setZ(c.max.z).applyQuaternion(m),v.expandByPoint(rn),rn.copy(c.max).setY(c.min.y).applyQuaternion(m),v.expandByPoint(rn),rn.copy(c.max).setX(c.min.x).applyQuaternion(m),v.expandByPoint(rn),rn.copy(c.max).applyQuaternion(m),v.expandByPoint(rn),v.min.x-=r,v.min.y-=o,v.max.x+=s,v.max.y+=a,m.setFromUnitVectors(pS,d),g&&m.premultiply(gS.invert()),m.premultiply(this._yAxisUpSpace);const _=v.getSize(wt),x=v.getCenter(rn).applyQuaternion(m);if(nc(this._camera)){const y=this.getDistanceToFitBox(_.x,_.y,_.z,i);l.push(this.moveTo(x.x,x.y,x.z,t)),l.push(this.dollyTo(y,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(Va(this._camera)){const y=this._camera,S=y.right-y.left,A=y.top-y.bottom,C=i?Math.max(S/_.x,A/_.y):Math.min(S/_.x,A/_.y);l.push(this.moveTo(x.x,x.y,x.z,t)),l.push(this.zoomTo(C,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const i=[],s=e instanceof mt.Sphere?mS.copy(e):kA.createBoundingSphere(e,mS);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),nc(this._camera)){const o=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(o,t))}else if(Va(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,l=2*s.radius,c=Math.min(o/l,a/l);i.push(this.zoomTo(c,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,s,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1;const l=rn.set(r,s,o),c=wt.set(e,t,i);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!a||hn(this._target.x,this._targetEnd.x,this.restThreshold)&&hn(this._target.y,this._targetEnd.y,this.restThreshold)&&hn(this._target.z,this._targetEnd.z,this.restThreshold)&&hn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&hn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&hn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,t,i,r,s,o,a,l,c,u,f,d,m,g=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1;const v=wt.set(r,s,o),_=rn.set(e,t,i);os.setFromVector3(_.sub(v).applyQuaternion(this._yAxisUpSpace));const x=ic.set(u,f,d),y=rn.set(a,l,c);Rd.setFromVector3(y.sub(x).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(v.lerp(x,m));const S=Rd.theta-os.theta,A=Rd.phi-os.phi,C=Rd.radius-os.radius;this._sphericalEnd.set(os.radius+C*m,os.phi+A*m,os.theta+S*m),this.normalizeRotations(),this._needsUpdate=!0,g||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const b=!g||hn(this._target.x,this._targetEnd.x,this.restThreshold)&&hn(this._target.y,this._targetEnd.y,this.restThreshold)&&hn(this._target.z,this._targetEnd.z,this.restThreshold)&&hn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&hn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&hn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(b)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){const s=this.getPosition(wt),o=this.setLookAt(s.x,s.y,s.z,e,t,i,r);return this._sphericalEnd.phi=nf(this.polarAngle,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||hn(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&hn(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&hn(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),ao.setFromMatrixColumn(this._camera.matrixWorldInverse,0),lo.setFromMatrixColumn(this._camera.matrixWorldInverse,1),rc.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=wt.set(e,t,i),s=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);ao.multiplyScalar(o.x),lo.multiplyScalar(o.y),rc.multiplyScalar(o.z),wt.copy(ao).add(lo).add(rc),wt.z=wt.z+s,this.dollyTo(s,!1),this.setFocalOffset(-wt.x,wt.y,-wt.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new mt.Vector4,typeof e=="number"?this._viewport.set(e,t,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if(dS(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*Ed,a=this._camera.aspect;return((r?s>a:s<a)?t:e/a)*.5/Math.tan(o*.5)+i*.5}getDistanceToFitSphere(e){if(dS(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Ed,i=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:i;return e/Math.sin(r*.5)}getTarget(e){return(e&&e.isVector3?e:new mt.Vector3).copy(this._targetEnd)}getPosition(e){return(e&&e.isVector3?e:new mt.Vector3).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)}getFocalOffset(e){return(e&&e.isVector3?e:new mt.Vector3).copy(this._focalOffsetEnd)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Qu,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Qu),this._spherical.theta+=Qu*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Qu)}reset(e=!1){if(!hn(this._camera.up.x,this._cameraUp0.x)||!hn(this._camera.up.y,this._cameraUp0.y)||!hn(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(wt);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,N0),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=wt.subVectors(this._target,this._camera.position).normalize(),t=rn.crossVectors(e,this._camera.up).normalize();this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(wt);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=FR.subVectors(this._targetEnd,this._target),o=UR.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(dn(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Pd(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,f,1/0,e),this._needsUpdate=!0}if(dn(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Pd(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,f,1/0,e),this._needsUpdate=!0}if(dn(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const f=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Pd(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,f,this.maxSpeed,e),this._needsUpdate=!0}if(dn(s.x)&&dn(s.y)&&dn(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const f=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;OR(this._target,this._targetEnd,this._targetVelocity,f,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(dn(o.x)&&dn(o.y)&&dn(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const f=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;OR(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,f,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(dn(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const f=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Pd(this._zoom,this._zoomEnd,this._zoomVelocity,f,1/0,e)}if(this.dollyToCursor){if(nc(this._camera)&&this._changedDolly!==0){const f=this._spherical.radius-this._lastDistance;this._changedDolly-=f;const d=this._camera,m=wt.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),g=rn.copy(m).cross(d.up).normalize();g.lengthSq()===0&&(g.x=1);const v=ic.crossVectors(g,m),_=this._sphericalEnd.radius*Math.tan(d.getEffectiveFOV()*Ed*.5),y=(this._sphericalEnd.radius-f-this._sphericalEnd.radius)/this._sphericalEnd.radius,S=wt.copy(this._targetEnd).add(g.multiplyScalar(this._dollyControlCoord.x*_*d.aspect)).add(v.multiplyScalar(this._dollyControlCoord.y*_)),A=rn.copy(this._targetEnd).lerp(S,y),C=ic.subVectors(A,this._targetEnd);this._targetEnd.copy(A),this._target.add(C),this._boundary.clampPoint(this._targetEnd,this._targetEnd),dn(this._changedDolly)&&(this._changedDolly=0)}else if(Va(this._camera)&&this._changedZoom!==0){const f=this._zoom-this._lastZoom;this._changedZoom-=f;const d=this._camera,m=wt.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(d.near+d.far)/(d.near-d.far)).unproject(d),g=rn.set(0,0,-1).applyQuaternion(d.quaternion),v=ic.copy(m).add(g.multiplyScalar(-m.dot(d.up))),x=-(this._zoom-f-this._zoomEnd)/this._zoom,y=wt.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),S=this._targetEnd.dot(y);this._targetEnd.lerp(v,x);const A=this._targetEnd.dot(y),C=y.multiplyScalar(A-S);this._targetEnd.sub(C),this._target.copy(this._targetEnd),this._boundary.clampPoint(this._targetEnd,this._targetEnd),dn(this._changedZoom)&&(this._changedZoom=0)}}if(dn(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const f=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Pd(this._zoom,this._zoomEnd,this._zoomVelocity,f,1/0,e)}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!dn(this._focalOffset.x)||!dn(this._focalOffset.y)||!dn(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),ao.setFromMatrixColumn(this._camera.matrix,0),lo.setFromMatrixColumn(this._camera.matrix,1),rc.setFromMatrixColumn(this._camera.matrix,2),ao.multiplyScalar(this._focalOffset.x),lo.multiplyScalar(-this._focalOffset.y),rc.multiplyScalar(this._focalOffset.z),wt.copy(ao).add(lo).add(rc),this._camera.position.add(wt)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),wt.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),dn(t,this.restThreshold)&&dn(i,this.restThreshold)&&dn(r,this.restThreshold)&&dn(s.x,this.restThreshold)&&dn(s.y,this.restThreshold)&&dn(s.z,this.restThreshold)&&dn(o.x,this.restThreshold)&&dn(o.y,this.restThreshold)&&dn(o.z,this.restThreshold)&&dn(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:bd(this.maxDistance),minZoom:this.minZoom,maxZoom:bd(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:bd(this.maxPolarAngle),minAzimuthAngle:bd(this.minAzimuthAngle),maxAzimuthAngle:bd(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:wt.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=Td(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=Td(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=Td(i.maxPolarAngle),this.minAzimuthAngle=Td(i.minAzimuthAngle),this.maxAzimuthAngle=Td(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this.verticalDragToForward=i.verticalDragToForward,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),os.setFromVector3(wt.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(os.theta,os.phi,t),this.dollyTo(os.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",gQ),this._addAllEventListeners(e)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){const r=t.lengthSq();if(r===0)return e;const s=rn.copy(t).add(e),a=this._boundary.clampPoint(s,ic).sub(s),l=a.lengthSq();if(l===0)return e.add(t);if(l===r)return e;if(i===0)return e.add(t).add(a);{const c=1+i*l/t.dot(a);return e.add(rn.copy(t).multiplyScalar(c)).add(a.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(nc(this._camera)){const e=this._camera,t=e.near,i=e.getEffectiveFOV()*Ed,r=Math.tan(i*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(Va(this._camera)){const e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(i,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||dS(this._camera,"_collisionTest"))return e;const i=wt.setFromSpherical(this._spherical).divideScalar(this._spherical.radius);vS.lookAt(kR,i,this._camera.up);for(let r=0;r<4;r++){const s=rn.copy(this._nearPlaneCorners[r]);s.applyMatrix4(vS);const o=ic.addVectors(this._target,s);z0.set(o,i),z0.far=this._spherical.radius+1;const a=z0.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const i=()=>{this.removeEventListener("rest",i),t()};this.addEventListener("rest",i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new mt.Sphere){const i=t,r=i.center;Zu.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&Zu.expandByObject(o)}),Zu.getCenter(r);let s=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const u=l.attributes.position;for(let f=0,d=u.count;f<d;f++)wt.fromBufferAttribute(u,f),s=Math.max(s,r.distanceToSquared(wt))}),i.radius=Math.sqrt(s),i}};const _Q=L.forwardRef((n,e)=>{L.useMemo(()=>{yS.install({THREE:nE}),Mm({CameraControlsImpl:yS})},[]);const{camera:t,domElement:i,makeDefault:r,onStart:s,onEnd:o,onChange:a,regress:l,...c}=n,u=Yn(C=>C.camera),f=Yn(C=>C.gl),d=Yn(C=>C.invalidate),m=Yn(C=>C.events),g=Yn(C=>C.setEvents),v=Yn(C=>C.set),_=Yn(C=>C.get),x=Yn(C=>C.performance),y=t||u,S=i||m.connected||f.domElement,A=L.useMemo(()=>new yS(y),[y]);return Yr((C,b)=>{A.enabled&&A.update(b)},-1),L.useEffect(()=>(A.connect(S),()=>void A.disconnect()),[S,A]),L.useEffect(()=>{const C=E=>{d(),l&&x.regress(),a&&a(E)},b=E=>{s&&s(E)},P=E=>{o&&o(E)};return A.addEventListener("update",C),A.addEventListener("controlstart",b),A.addEventListener("controlend",P),A.addEventListener("control",C),A.addEventListener("transitionstart",C),A.addEventListener("wake",C),()=>{A.removeEventListener("update",C),A.removeEventListener("controlstart",b),A.removeEventListener("controlend",P),A.removeEventListener("control",C),A.removeEventListener("transitionstart",C),A.removeEventListener("wake",C)}},[A,s,o,d,g,l,a]),L.useEffect(()=>{if(r){const C=_().controls;return v({controls:A}),()=>v({controls:C})}},[r,A]),L.createElement("primitive",js({ref:e,object:A},c))}),xQ=pQ({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,cellThickness:.5,sectionThickness:1,cellColor:new Je,sectionColor:new Je,infiniteGrid:!1,followCamera:!1},`
    varying vec3 worldPosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      worldPosition = position.xzy;
      if (infiniteGrid) worldPosition *= 1.0 + fadeDistance;
      if (followCamera) worldPosition.xz +=cameraPosition.xz;

      gl_Position = projectionMatrix * modelViewMatrix * vec4(worldPosition, 1.0);
    }
  `,`
    varying vec3 worldPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = worldPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1. - thickness;
      return 1.0 - min(line, 1.);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      float d = 1.0 - min(distance(cameraPosition.xz, worldPosition.xz) / fadeDistance, 1.);
      vec3 color = mix(cellColor, sectionColor, min(1.,sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d,fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <encodings_fragment>
    }
  `),SQ=L.forwardRef(({args:n,cellColor:e="#000000",sectionColor:t="#2080ff",cellSize:i=.5,sectionSize:r=1,followCamera:s=!1,infiniteGrid:o=!1,fadeDistance:a=100,fadeStrength:l=1,cellThickness:c=.5,sectionThickness:u=1,side:f=ur,...d},m)=>{Mm({GridMaterial:xQ});const g={cellSize:i,sectionSize:r,cellColor:e,sectionColor:t,cellThickness:c,sectionThickness:u},v={fadeDistance:a,fadeStrength:l,infiniteGrid:o,followCamera:s};return L.createElement("mesh",js({ref:m,frustumCulled:!1},d),L.createElement("gridMaterial",js({transparent:!0,"extensions-derivatives":!0,side:f},g,v)),L.createElement("planeGeometry",{args:n}))}),_S={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},wQ="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/";function GF({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}={}){if(t){if(!(t in _S))throw new Error("Preset must be one of: "+Object.keys(_S).join(", "));n=_S[t],e=wQ}const s=Array.isArray(n),a=Mh(s?ZO:gK,s?[n]:n,c=>{c.setPath(e),r&&r(c)}),l=s?a[0]:a;return l.mapping=s?ca:Xf,l.encoding=i??s?pn:fa,l}const AQ=n=>n.current&&n.current.isScene,MQ=n=>AQ(n)?n.current:n;function RE(n,e,t,i,r=0){const s=MQ(e||t),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return n!=="only"&&(s.environment=i),n&&(s.background=i),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=r),()=>{n!=="only"&&(s.environment=a),n&&(s.background=o),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function IE({scene:n,background:e=!1,blur:t,map:i}){const r=Yn(s=>s.scene);return L.useLayoutEffect(()=>{if(i)return RE(e,n,r,i,t)},[r,n,i,e,t]),null}function HF({background:n=!1,scene:e,blur:t,...i}){const r=GF(i),s=Yn(o=>o.scene);return L.useLayoutEffect(()=>RE(n,e,s,r,t),[r,n,e,s,t]),null}function CQ({children:n,near:e=1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,scene:l,files:c,path:u,preset:f=void 0,extensions:d}){const m=Yn(S=>S.gl),g=Yn(S=>S.scene),v=L.useRef(null),[_]=L.useState(()=>new Np),x=L.useMemo(()=>{const S=new AC(i);return S.texture.type=Us,S},[i]);L.useLayoutEffect(()=>(r===1&&v.current.update(m,_),RE(o,l,g,x.texture,a)),[n,_,x.texture,l,g,o,r,m]);let y=1;return Yr(()=>{(r===1/0||y<r)&&(v.current.update(m,_),y++)}),L.createElement(L.Fragment,null,Uj(L.createElement(L.Fragment,null,n,L.createElement("cubeCamera",{ref:v,args:[e,t,x]}),c||f?L.createElement(HF,{background:!0,files:c,preset:f,path:u,extensions:d}):s?L.createElement(IE,{background:!0,map:s,extensions:d}):null),_))}function EQ(n){var e,t,i,r;const s=GF(n),o=n.map||s;L.useMemo(()=>Mm({GroundProjectedEnvImpl:IY}),[]);const a=L.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return L.createElement(L.Fragment,null,L.createElement(IE,js({},n,{map:o})),L.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function VF(n){return n.ground?L.createElement(EQ,n):n.map?L.createElement(IE,n):n.children?L.createElement(CQ,n):L.createElement(HF,n)}const GR=n=>{let e;const t=new Set,i=(l,c)=>{const u=typeof l=="function"?l(e):l;if(!Object.is(u,e)){const f=e;e=c??typeof u!="object"?u:Object.assign({},e,u),t.forEach(d=>d(e,f))}},r=()=>e,a={setState:i,getState:r,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>{({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return e=n(i,r,a),a},bQ=n=>n?GR(n):GR;var WF={exports:{}},jF={},JF={exports:{}},XF={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh=L;function TQ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var PQ=typeof Object.is=="function"?Object.is:TQ,RQ=sh.useState,IQ=sh.useEffect,BQ=sh.useLayoutEffect,DQ=sh.useDebugValue;function LQ(n,e){var t=e(),i=RQ({inst:{value:t,getSnapshot:e}}),r=i[0].inst,s=i[1];return BQ(function(){r.value=t,r.getSnapshot=e,xS(r)&&s({inst:r})},[n,t,e]),IQ(function(){return xS(r)&&s({inst:r}),n(function(){xS(r)&&s({inst:r})})},[n]),DQ(t),t}function xS(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!PQ(n,t)}catch{return!0}}function OQ(n,e){return e()}var kQ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?OQ:LQ;XF.useSyncExternalStore=sh.useSyncExternalStore!==void 0?sh.useSyncExternalStore:kQ;JF.exports=XF;var FQ=JF.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1=L,UQ=FQ;function NQ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var zQ=typeof Object.is=="function"?Object.is:NQ,GQ=UQ.useSyncExternalStore,HQ=v1.useRef,VQ=v1.useEffect,WQ=v1.useMemo,jQ=v1.useDebugValue;jF.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=HQ(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=WQ(function(){function l(m){if(!c){if(c=!0,u=m,m=i(m),r!==void 0&&o.hasValue){var g=o.value;if(r(g,m))return f=g}return f=m}if(g=f,zQ(u,m))return g;var v=i(m);return r!==void 0&&r(g,v)?g:(u=m,f=v)}var c=!1,u,f,d=t===void 0?null:t;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,t,i,r]);var a=GQ(n,s[0],s[1]);return VQ(function(){o.hasValue=!0,o.value=a},[a]),jQ(a),a};WF.exports=jF;var JQ=WF.exports;const XQ=Zc(JQ),{useSyncExternalStoreWithSelector:YQ}=XQ;function KQ(n,e=n.getState,t){const i=YQ(n.subscribe,n.getState,n.getServerState||n.getState,e,t);return L.useDebugValue(i),i}const HR=n=>{({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?bQ(n):n,t=(i,r)=>KQ(e,i,r);return Object.assign(t,e),t},QQ=n=>n?HR(n):HR;var ZQ=n=>(({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`."),QQ(n)),ln="colors",or="sizes",st="space",qQ={gap:st,gridGap:st,columnGap:st,gridColumnGap:st,rowGap:st,gridRowGap:st,inset:st,insetBlock:st,insetBlockEnd:st,insetBlockStart:st,insetInline:st,insetInlineEnd:st,insetInlineStart:st,margin:st,marginTop:st,marginRight:st,marginBottom:st,marginLeft:st,marginBlock:st,marginBlockEnd:st,marginBlockStart:st,marginInline:st,marginInlineEnd:st,marginInlineStart:st,padding:st,paddingTop:st,paddingRight:st,paddingBottom:st,paddingLeft:st,paddingBlock:st,paddingBlockEnd:st,paddingBlockStart:st,paddingInline:st,paddingInlineEnd:st,paddingInlineStart:st,top:st,right:st,bottom:st,left:st,scrollMargin:st,scrollMarginTop:st,scrollMarginRight:st,scrollMarginBottom:st,scrollMarginLeft:st,scrollMarginX:st,scrollMarginY:st,scrollMarginBlock:st,scrollMarginBlockEnd:st,scrollMarginBlockStart:st,scrollMarginInline:st,scrollMarginInlineEnd:st,scrollMarginInlineStart:st,scrollPadding:st,scrollPaddingTop:st,scrollPaddingRight:st,scrollPaddingBottom:st,scrollPaddingLeft:st,scrollPaddingX:st,scrollPaddingY:st,scrollPaddingBlock:st,scrollPaddingBlockEnd:st,scrollPaddingBlockStart:st,scrollPaddingInline:st,scrollPaddingInlineEnd:st,scrollPaddingInlineStart:st,fontSize:"fontSizes",background:ln,backgroundColor:ln,backgroundImage:ln,borderImage:ln,border:ln,borderBlock:ln,borderBlockEnd:ln,borderBlockStart:ln,borderBottom:ln,borderBottomColor:ln,borderColor:ln,borderInline:ln,borderInlineEnd:ln,borderInlineStart:ln,borderLeft:ln,borderLeftColor:ln,borderRight:ln,borderRightColor:ln,borderTop:ln,borderTopColor:ln,caretColor:ln,color:ln,columnRuleColor:ln,fill:ln,outline:ln,outlineColor:ln,stroke:ln,textDecorationColor:ln,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:or,minBlockSize:or,maxBlockSize:or,inlineSize:or,minInlineSize:or,maxInlineSize:or,width:or,minWidth:or,maxWidth:or,height:or,minHeight:or,maxHeight:or,flexBasis:or,gridTemplateColumns:or,gridTemplateRows:or,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},$Q=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Eh=()=>{const n=Object.create(null);return(e,t,...i)=>{const r=(s=>JSON.stringify(s,$Q))(e);return r in n?n[r]:n[r]=t(e,...i)}},Dc=Symbol.for("sxs.internal"),BE=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),VR=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:eZ}=Object.prototype,FA=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),tZ=/\s+(?![^()]*\))/,qu=n=>e=>n(...typeof e=="string"?String(e).split(tZ):[e]),WR={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:qu((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:qu((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:qu((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:qu((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:qu((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:qu((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},SS=/([\d.]+)([^]*)/,nZ=(n,e)=>n.length?n.reduce((t,i)=>(t.push(...e.map(r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(r)?`:is(${i})`:i):i+" "+r)),t),[]):e,iZ=(n,e)=>n in rZ&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,i,r,s)=>i+(r==="stretch"?`-moz-available${s};${FA(n)}:${i}-webkit-fill-available`:`-moz-fit-content${s};${FA(n)}:${i}fit-content`)+s):String(e),rZ={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},pa=n=>n?n+"-":"",YF=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(i,r,s,o,a)=>o=="$"==!!s?i:(r||o=="--"?"calc(":"")+"var(--"+(o==="$"?pa(e)+(a.includes("$")?"":pa(t))+a.replace(/\$/g,"-"):a)+")"+(r||o=="--"?"*"+(r||"")+(s||"1")+")":"")),sZ=/\s*,\s*(?![^()]*\))/,oZ=Object.prototype.toString,wf=(n,e,t,i,r)=>{let s,o,a;const l=(c,u,f)=>{let d,m;const g=v=>{for(d in v){const y=d.charCodeAt(0)===64,S=y&&Array.isArray(v[d])?v[d]:[v[d]];for(m of S){const A=/[A-Z]/.test(x=d)?x:x.replace(/-[^]/g,b=>b[1].toUpperCase()),C=typeof m=="object"&&m&&m.toString===oZ&&(!i.utils[A]||!u.length);if(A in i.utils&&!C){const b=i.utils[A];if(b!==o){o=b,g(b(m)),o=null;continue}}else if(A in WR){const b=WR[A];if(b!==a){a=b,g(b(m)),a=null;continue}}if(y&&(_=d.slice(1)in i.media?"@media "+i.media[d.slice(1)]:d,d=_.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(b,P,E,R,B,O)=>{const G=SS.test(P),N=.0625*(G?-1:1),[k,X]=G?[R,P]:[P,R];return"("+(E[0]==="="?"":E[0]===">"===G?"max-":"min-")+k+":"+(E[0]!=="="&&E.length===1?X.replace(SS,(te,oe,H)=>Number(oe)+N*(E===">"?1:-1)+H):X)+(B?") and ("+(B[0]===">"?"min-":"max-")+k+":"+(B.length===1?O.replace(SS,(te,oe,H)=>Number(oe)+N*(B===">"?-1:1)+H):O):"")+")"})),C){const b=y?f.concat(d):[...f],P=y?[...u]:nZ(u,d.split(sZ));s!==void 0&&r(jR(...s)),s=void 0,l(m,P,b)}else s===void 0&&(s=[[],u,f]),d=y||d.charCodeAt(0)!==36?d:`--${pa(i.prefix)}${d.slice(1).replace(/\$/g,"-")}`,m=C?m:typeof m=="number"?m&&A in aZ?String(m)+"px":String(m):YF(iZ(A,m??""),i.prefix,i.themeMap[A]),s[0].push(`${y?`${d} `:`${FA(d)}:`}${m}`)}}var _,x};g(c),s!==void 0&&r(jR(...s)),s=void 0};l(n,e,t)},jR=(n,e,t)=>`${t.map(i=>`${i}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,aZ={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},JR=n=>String.fromCharCode(n+(n>25?39:97)),Lc=n=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=JR(t%52)+i;return JR(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(n))>>>0),Vd=["themed","global","styled","onevar","resonevar","allvar","inline"],lZ=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},cZ=n=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(r[o-1]&&(l=r[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},i=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const r=Object(n).styleSheets||[];for(const a of r)if(lZ(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const f=Object(c[l+1]);if(f.type!==4)continue;++l;const{cssText:d}=u;if(!d.startsWith("--sxs"))continue;const m=d.slice(14,-3).trim().split(/\s+/),g=Vd[m[0]];g&&(e||(e={sheet:a,reset:i,rules:{},toString:t}),e.rules[g]={group:f,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,f){this.cssRules.splice(f,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:i,toString:t}}const{sheet:s,rules:o}=e;for(let a=Vd.length-1;a>=0;--a){const l=Vd[a];if(!o[l]){const c=Vd[a+1],u=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[l]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}uZ(o[l])}};return i(),e},uZ=n=>{const e=n.group;let t=e.cssRules.length;n.apply=i=>{try{e.insertRule(i,t),++t}catch{}}},Id=Symbol(),fZ=Eh(),XR=(n,e)=>fZ(n,()=>(...t)=>{let i={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[Dc]){i.type==null&&(i.type=r[Dc].type);for(const s of r[Dc].composers)i.composers.add(s)}else r.constructor!==Object||r.$$typeof?i.type==null&&(i.type=r):i.composers.add(hZ(r,n));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),dZ(n,i,e)}),hZ=({variants:n,compoundVariants:e,defaultVariants:t,...i},r)=>{const s=`${pa(r.prefix)}c-${Lc(i)}`,o=[],a=[],l=Object.create(null),c=[];for(const d in t)l[d]=String(t[d]);if(typeof n=="object"&&n)for(const d in n){u=l,f=d,eZ.call(u,f)||(l[d]="undefined");const m=n[d];for(const g in m){const v={[d]:String(g)};String(g)==="undefined"&&c.push(d);const _=m[g],x=[v,_,!VR(_)];o.push(x)}}var u,f;if(typeof e=="object"&&e)for(const d of e){let{css:m,...g}=d;m=typeof m=="object"&&m||{};for(const _ in g)g[_]=String(g[_]);const v=[g,m,!VR(m)];a.push(v)}return[s,i,o,a,l,c]},dZ=(n,e,t)=>{const[i,r,s,o]=pZ(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function d(){for(let m=0;m<d[Id].length;m++){const[g,v]=d[Id][m];f.rules[g].apply(v)}return d[Id]=[],null}return d[Id]=[],d.rules={},Vd.forEach(m=>d.rules[m]={apply:g=>d[Id].push([m,g])}),d})(t):null,l=(a||t).rules,c=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,u=f=>{f=typeof f=="object"&&f||mZ;const{css:d,...m}=f,g={};for(const x in s)if(delete m[x],x in f){let y=f[x];typeof y=="object"&&y?g[x]={"@initial":s[x],...y}:(y=String(y),g[x]=y!=="undefined"||o.has(x)?y:s[x])}else g[x]=s[x];const v=new Set([...r]);for(const[x,y,S,A]of e.composers){t.rules.styled.cache.has(x)||(t.rules.styled.cache.add(x),wf(y,[`.${x}`],[],n,P=>{l.styled.apply(P)}));const C=YR(S,g,n.media),b=YR(A,g,n.media,!0);for(const P of C)if(P!==void 0)for(const[E,R,B]of P){const O=`${x}-${Lc(R)}-${E}`;v.add(O);const G=(B?t.rules.resonevar:t.rules.onevar).cache,N=B?l.resonevar:l.onevar;G.has(O)||(G.add(O),wf(R,[`.${O}`],[],n,k=>{N.apply(k)}))}for(const P of b)if(P!==void 0)for(const[E,R]of P){const B=`${x}-${Lc(R)}-${E}`;v.add(B),t.rules.allvar.cache.has(B)||(t.rules.allvar.cache.add(B),wf(R,[`.${B}`],[],n,O=>{l.allvar.apply(O)}))}}if(typeof d=="object"&&d){const x=`${i}-i${Lc(d)}-css`;v.add(x),t.rules.inline.cache.has(x)||(t.rules.inline.cache.add(x),wf(d,[`.${x}`],[],n,y=>{l.inline.apply(y)}))}for(const x of String(f.className||"").trim().split(/\s+/))x&&v.add(x);const _=m.className=[...v].join(" ");return{type:e.type,className:_,selector:c,props:m,toString:()=>_,deferredInjector:a}};return BE(u,{className:i,selector:c,[Dc]:e,toString:()=>(t.rules.styled.cache.has(i)||u(),i)})},pZ=n=>{let e="";const t=[],i={},r=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),r.push(...a);for(const l in o){const c=o[l];(i[l]===void 0||c!=="undefined"||a.includes(c))&&(i[l]=c)}}return[e,t,i,new Set(r)]},YR=(n,e,t,i)=>{const r=[];e:for(let[s,o,a]of n){if(a)continue;let l,c=0,u=!1;for(l in s){const f=s[l];let d=e[l];if(d!==f){if(typeof d!="object"||!d)continue e;{let m,g,v=0;for(const _ in d){if(f===String(d[_])){if(_!=="@initial"){const x=_.slice(1);(g=g||[]).push(x in t?t[x]:_.replace(/^@media ?/,"")),u=!0}c+=v,m=!0}++v}if(g&&g.length&&(o={["@media "+g.join(", ")]:o}),!m)continue e}}}(r[c]=r[c]||[]).push([i?"cv":`${l}-${s[l]}`,o,u])}return r},mZ={},gZ=Eh(),vZ=(n,e)=>gZ(n,()=>(...t)=>{const i=()=>{for(let r of t){r=typeof r=="object"&&r||{};let s=Lc(r);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in r){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(r["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete r["@import"]}wf(r,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return BE(i,{toString:i})}),yZ=Eh(),_Z=(n,e)=>yZ(n,()=>t=>{const i=`${pa(n.prefix)}k-${Lc(t)}`,r=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const s=[];wf(t,[],[],n,a=>s.push(a));const o=`@keyframes ${i}{${s.join("")}}`;e.rules.global.apply(o)}return i};return BE(r,{get name(){return r()},toString:r})}),xZ=class{constructor(e,t,i,r){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=i==null?"":String(i),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+pa(this.prefix)+pa(this.scale)+this.token}toString(){return this.computedValue}},SZ=Eh(),wZ=(n,e)=>SZ(n,()=>(t,i)=>{i=typeof t=="object"&&t||Object(i);const r=`.${t=(t=typeof t=="string"?t:"")||`${pa(n.prefix)}t-${Lc(i)}`}`,s={},o=[];for(const l in i){s[l]={};for(const c in i[l]){const u=`--${pa(n.prefix)}${l}-${c}`,f=YF(String(i[l][c]),n.prefix,l);s[l][c]=new xZ(c,f,l,n.prefix),o.push(`${u}:${f}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${i===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:r,toString:a}}),AZ=Eh(),KR,MZ=Eh(),CZ=n=>{const e=(t=>{let i=!1;const r=AZ(t,s=>{i=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},u={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...qQ},utils:typeof s.utils=="object"&&s.utils||{}},f=cZ(l),d={css:XR(u,f),globalCss:vZ(u,f),keyframes:_Z(u,f),createTheme:wZ(u,f),reset(){f.reset(),d.theme.toString()},theme:{},sheet:f,config:u,prefix:o,getCssText:f.toString,toString:f.toString};return String(d.theme=d.createTheme(c)),d});return i||r.reset(),r})(n);return e.styled=(({config:t,sheet:i})=>MZ(t,()=>{const r=XR(t,i);return(...s)=>{const o=r(...s),a=o[Dc].type,l=Bn.forwardRef((c,u)=>{const f=c&&c.as||a,{props:d,deferredInjector:m}=o(c);return delete d.as,d.ref=u,m?Bn.createElement(Bn.Fragment,null,Bn.createElement(f,d),Bn.createElement(m,null)):Bn.createElement(f,d)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[Dc]=o[Dc],l}}))(e),e},EZ=()=>KR||(KR=CZ()),gi=(...n)=>EZ().styled(...n);function bZ(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function TZ(n){var e=bZ(n,"string");return typeof e=="symbol"?e:String(e)}function PZ(n,e,t){return e=TZ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ZR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QR(Object(t),!0).forEach(function(i){PZ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):QR(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}Ut.prototype.updateMatrixWorld;Ut.prototype.updateWorldMatrix;Ut.prototype.updateMatrix;let RZ={value:0},G0={value:0};const H0=ZQ(n=>({log:null,paused:!1,triggerProgramsUpdate:0,customData:0,fpsLimit:60,overclockingFps:!1,chart:{data:{fps:[],cpu:[],gpu:[],mem:[]},circularId:0},gl:void 0,objectWithMaterials:null,scene:void 0,programs:new Map,sceneLength:void 0,tab:"infos"}));gi("div",{position:"fixed",top:0,right:0,zIndex:9999,fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif`,backgroundColor:"rgba(36, 36, 36, .9)",color:"#fff",margin:0,minHeight:"100px",padding:"4px 0","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",userSelect:"none","&.top-left":{right:"initial",left:0},"&.bottom-left":{right:"initial",top:"initial",bottom:0,left:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.bottom-right":{top:"initial",bottom:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.minimal":{backgroundColor:"rgba(36, 36, 36, .75)"},"*":{margin:"0",padding:"0",border:"0",fontSize:"100%",lineHeight:"1",verticalAlign:"baseline"}});gi("small",{position:"absolute",right:0,fontSize:"10px"});gi("div",{display:"inline-flex",fontStyle:"normal",padding:0,lineHeight:"13px",fontSize:"14px",width:"62px",position:"relative",pointerEvents:"auto",cursor:"default",fontWeight:500,letterSpacing:"0px",textAlign:"left",height:"29px",whiteSpace:"nowrap",justifyContent:"space-evenly",fontVariantNumeric:"tabular-nums",small:{paddingLeft:"12px"},svg:{padding:0,color:"rgba(145, 145, 145, 0.3)",fontSize:"40px",position:"absolute",zIndex:1,maxHeight:"20px",left:" 50%",marginLeft:"-23px",top:"4px"}});gi("span",{verticalAlign:"bottom",position:"absolute",bottom:"5px",color:"rgba(101, 197, 188, 1)",textAlign:"right",letterSpacing:"1px",fontSize:"8px",fontWeight:"500",width:"60px"});gi("div",{display:"flex"});gi("div",{backgroundColor:"#404040",padding:"6px",display:"block",fontSize:"12px",marginBottom:"6px",cursor:"pointer","*":{cursor:"pointer !important"},"> span":{},small:{fontSize:"9px"},"> b":{marginRight:"4px",cursor:"pointer"}});gi("div",{height:"66px",overflow:"hidden",position:"absolute",pointerEvents:"none",display:"flex",top:"0px",justifyContent:"center",width:"100%",minWidth:"310px",margin:"0 auto",canvas:{background:"transparent !important",position:"absolute !important"}});gi("div",{textAlign:"center",fontWeight:700,fontSize:"12px",lineHeight:"12px",display:"flex",justifyContent:"center",alignItems:"center",verticalAlign:"middle",color:"#f1f1f1",padding:"7px",width:"100%",backgroundColor:"rgba(36, 36, 37, 0.8)",zIndex:1,position:"absolute",height:"100%"});gi("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}});gi("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",float:"right",backgroundColor:"rgb(41, 43, 45)",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}});gi("div",{padding:"4px 6px",fontSize:"12px",pointerEvents:"auto"});gi("span",{fontWeight:"bold",letterSpacing:"0.08em",maxWidth:"145px",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",verticalAlign:"middle",fontSize:"11px",marginRight:"10px"});gi("div",{maxHeight:"50vh",overflowY:"auto",marginTop:"38px"});gi("div",{marginTop:"0"});gi("div",{display:"flex",position:"relative",fontWeight:"bold",color:"#fff",lineHeight:"14px",svg:{marginRight:"4px",display:"inline-block"}});gi("ul",{display:"block",position:"relative",paddingLeft:"10px",margin:"6px 6px",img:{maxHeight:"60px",maxWidth:"100%",margin:"6px auto",display:"block"},"&:after":{content:"",position:"absolute",left:"0px",top:"0px",width:"1px",height:"100%",backgroundColor:"grey",transform:"translateX(-50%)",maxHeight:"50vh",overflowY:"auto"},li:{borderBottom:"1px solid #313131",display:"block",padding:"4px",margin:0,lineHeight:1,verticalAlign:"middle",height:"24px"},b:{fontWeight:"bold"},small:{textAlign:"revert",letterSpacing:"1px",fontSize:"10px",fontWeight:"500",marginLeft:"2px",color:"rgb(101, 197, 188)"}});gi("button",{fontWeight:"bold",letterSpacing:"0.02em",backgroundColor:"rgb(41, 43, 45)",color:"rgb(211, 211, 211)",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",display:"block",verticalAlign:"middle",fontSize:"11px",padding:"5px",margin:"4px auto"});gi("div",{display:"flex",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0 auto",color:"rgba(145, 145, 145, 1)",textAlign:"center",position:"absolute",right:0,bottom:" -20px",svg:{width:"12px",height:"12px",float:"left"}});gi("li",{display:"flex !important",height:"auto !important",span:{height:"40px",display:"block",position:"relative"},b:{paddingLeft:"12px"}});L.memo(({isPerf:n,color:e,colorBlind:t,customData:i,isMemory:r,isShadersInfo:s,metric:o,fontSize:a,offsetY:l=0,offsetX:c,round:u,hasInstance:f})=>{const{width:d,height:m}=Yn(_=>_.viewport),g=L.useRef(null),v=L.useRef(null);return Yr(function(){const x=H0.getState().gl,y=H0.getState().log;if(!y||!g.current||(i&&(g.current.text=H0.getState().customData),!o))return;let S=y[o];if(s){var A;S=(A=x.info.programs)===null||A===void 0?void 0:A.length}else o==="matriceCount"?S=G0.value:!n&&x.info.render&&(S=(r?x.info.memory:x.info.render)[o]);if(o==="fps"&&(g.current.color=H0.getState().overclockingFps?qR(t).overClock.toString():`rgb(${qR(t).fps.toString()})`),g.current.text=(Math.round(S*Math.pow(10,u))/Math.pow(10,u)).toFixed(u),f){const C=x.info.instance;if(typeof C>"u"&&o!=="matriceCount")return;let b;o==="matriceCount"?b=RZ.value:b=C[o],b>0?(g.current.fontSize=a/1.15,v.current.fontSize=S>0?a/1.4:a,g.current.position.y=m/2-l-a/1.9,v.current.text=" 	"+(Math.round(b*Math.pow(10,u))/Math.pow(10,u)).toFixed(u)):(g.current.position.y=m/2-l-a,g.current.fontSize=a)}G0.value-=1,g.current.updateMatrix(),g.current.matrixWorld.copy(g.current.matrix)}),Ge(L.Suspense,{fallback:null,children:[Ge(BR,{textAlign:"justify",matrixAutoUpdate:!1,ref:g,fontSize:a,position:[-d/2+c+a,m/2-l-a,0],color:e,characters:"0123456789",onUpdate:_=>{_.updateMatrix(),G0.value-=1,_.matrixWorld.copy(_.matrix)},children:[W("meshBasicMaterial",{blending:ia}),"0"]}),f&&W(BR,{textAlign:"justify",matrixAutoUpdate:!1,ref:v,fontSize:8,position:[-d/2+c+a,m/2-l-a*1.15,0],color:"lightgrey",characters:"0123456789",onUpdate:_=>{_.updateMatrix(),G0.value-=1,_.matrixWorld.copy(_.matrix)},children:W("meshBasicMaterial",{blending:ia})})]})});function IZ(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function BZ(n,e){if(n==null)return{};var t=IZ(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const DZ=["portal","className","children"];L.forwardRef((n,e)=>{let{portal:t,className:i,children:r}=n,s=BZ(n,DZ);const o=Yn(u=>u.gl),a=L.useRef(null),l=L.useRef(null),c=(t==null?void 0:t.current)!=null?t.current:o.domElement.parentNode;return L.useLayoutEffect(()=>{if(!a.current||!c)return;const u=document.createElement("div"),f=l.current=lL(u);return c.appendChild(u),()=>{f.unmount(),l.current=null,c.removeChild(u)}},[c]),L.useLayoutEffect(()=>{const u=l.current;u&&u.render(W("div",{ref:e,className:i,children:r}))}),W("group",ZR(ZR({},s),{},{ref:a}))});const qR=n=>({overClock:"#ff6eff",fps:n?"100, 143, 255":"238,38,110",cpu:n?"254, 254, 98":"66,226,46",gpu:n?"254,254,254":"253,151,31",custom:n?"86,180,233":"40,255,255"});new tu;new j;new Ut;new dt;new j;new j;function KF(n,e){return function(){return n.apply(e,arguments)}}const{toString:LZ}=Object.prototype,{getPrototypeOf:DE}=Object,y1=(n=>e=>{const t=LZ.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Co=n=>(n=n.toLowerCase(),e=>y1(e)===n),_1=n=>e=>typeof e===n,{isArray:bh}=Array,Zp=_1("undefined");function OZ(n){return n!==null&&!Zp(n)&&n.constructor!==null&&!Zp(n.constructor)&&_s(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const QF=Co("ArrayBuffer");function kZ(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&QF(n.buffer),e}const FZ=_1("string"),_s=_1("function"),ZF=_1("number"),x1=n=>n!==null&&typeof n=="object",UZ=n=>n===!0||n===!1,Av=n=>{if(y1(n)!=="object")return!1;const e=DE(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},NZ=Co("Date"),zZ=Co("File"),GZ=Co("Blob"),HZ=Co("FileList"),VZ=n=>x1(n)&&_s(n.pipe),WZ=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||_s(n.append)&&((e=y1(n))==="formdata"||e==="object"&&_s(n.toString)&&n.toString()==="[object FormData]"))},jZ=Co("URLSearchParams"),JZ=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bm(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),bh(n))for(i=0,r=n.length;i<r;i++)e.call(null,n[i],i,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(i=0;i<o;i++)a=s[i],e.call(null,n[a],a,n)}}function qF(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,r;for(;i-- >0;)if(r=t[i],e===r.toLowerCase())return r;return null}const $F=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),eU=n=>!Zp(n)&&n!==$F;function UA(){const{caseless:n}=eU(this)&&this||{},e={},t=(i,r)=>{const s=n&&qF(e,r)||r;Av(e[s])&&Av(i)?e[s]=UA(e[s],i):Av(i)?e[s]=UA({},i):bh(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Bm(arguments[i],t);return e}const XZ=(n,e,t,{allOwnKeys:i}={})=>(Bm(e,(r,s)=>{t&&_s(r)?n[s]=KF(r,t):n[s]=r},{allOwnKeys:i}),n),YZ=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),KZ=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},QZ=(n,e,t,i)=>{let r,s,o;const a={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),s=r.length;s-- >0;)o=r[s],(!i||i(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&DE(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},ZZ=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},qZ=n=>{if(!n)return null;if(bh(n))return n;let e=n.length;if(!ZF(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},$Z=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&DE(Uint8Array)),eq=(n,e)=>{const i=(n&&n[Symbol.iterator]).call(n);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(n,s[0],s[1])}},tq=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},nq=Co("HTMLFormElement"),iq=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,r){return i.toUpperCase()+r}),$R=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),rq=Co("RegExp"),tU=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Bm(t,(r,s)=>{e(r,s,n)!==!1&&(i[s]=r)}),Object.defineProperties(n,i)},sq=n=>{tU(n,(e,t)=>{if(_s(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(_s(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},oq=(n,e)=>{const t={},i=r=>{r.forEach(s=>{t[s]=!0})};return bh(n)?i(n):i(String(n).split(e)),t},aq=()=>{},lq=(n,e)=>(n=+n,Number.isFinite(n)?n:e),wS="abcdefghijklmnopqrstuvwxyz",eI="0123456789",nU={DIGIT:eI,ALPHA:wS,ALPHA_DIGIT:wS+wS.toUpperCase()+eI},cq=(n=16,e=nU.ALPHA_DIGIT)=>{let t="";const{length:i}=e;for(;n--;)t+=e[Math.random()*i|0];return t};function uq(n){return!!(n&&_s(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const fq=n=>{const e=new Array(10),t=(i,r)=>{if(x1(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const s=bh(i)?[]:{};return Bm(i,(o,a)=>{const l=t(o,r+1);!Zp(l)&&(s[a]=l)}),e[r]=void 0,s}}return i};return t(n,0)},hq=Co("AsyncFunction"),dq=n=>n&&(x1(n)||_s(n))&&_s(n.then)&&_s(n.catch),Ue={isArray:bh,isArrayBuffer:QF,isBuffer:OZ,isFormData:WZ,isArrayBufferView:kZ,isString:FZ,isNumber:ZF,isBoolean:UZ,isObject:x1,isPlainObject:Av,isUndefined:Zp,isDate:NZ,isFile:zZ,isBlob:GZ,isRegExp:rq,isFunction:_s,isStream:VZ,isURLSearchParams:jZ,isTypedArray:$Z,isFileList:HZ,forEach:Bm,merge:UA,extend:XZ,trim:JZ,stripBOM:YZ,inherits:KZ,toFlatObject:QZ,kindOf:y1,kindOfTest:Co,endsWith:ZZ,toArray:qZ,forEachEntry:eq,matchAll:tq,isHTMLForm:nq,hasOwnProperty:$R,hasOwnProp:$R,reduceDescriptors:tU,freezeMethods:sq,toObjectSet:oq,toCamelCase:iq,noop:aq,toFiniteNumber:lq,findKey:qF,global:$F,isContextDefined:eU,ALPHABET:nU,generateString:cq,isSpecCompliantForm:uq,toJSONObject:fq,isAsyncFn:hq,isThenable:dq};function Qt(n,e,t,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),r&&(this.response=r)}Ue.inherits(Qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ue.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const iU=Qt.prototype,rU={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{rU[n]={value:n}});Object.defineProperties(Qt,rU);Object.defineProperty(iU,"isAxiosError",{value:!0});Qt.from=(n,e,t,i,r,s)=>{const o=Object.create(iU);return Ue.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Qt.call(o,n.message,e,t,i,r),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const pq=null;function NA(n){return Ue.isPlainObject(n)||Ue.isArray(n)}function sU(n){return Ue.endsWith(n,"[]")?n.slice(0,-2):n}function tI(n,e,t){return n?n.concat(e).map(function(r,s){return r=sU(r),!t&&s?"["+r+"]":r}).join(t?".":""):e}function mq(n){return Ue.isArray(n)&&!n.some(NA)}const gq=Ue.toFlatObject(Ue,{},null,function(e){return/^is[A-Z]/.test(e)});function S1(n,e,t){if(!Ue.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Ue.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,_){return!Ue.isUndefined(_[v])});const i=t.metaTokens,r=t.visitor||u,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&Ue.isSpecCompliantForm(e);if(!Ue.isFunction(r))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(Ue.isDate(g))return g.toISOString();if(!l&&Ue.isBlob(g))throw new Qt("Blob is not supported. Use a Buffer instead.");return Ue.isArrayBuffer(g)||Ue.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,v,_){let x=g;if(g&&!_&&typeof g=="object"){if(Ue.endsWith(v,"{}"))v=i?v:v.slice(0,-2),g=JSON.stringify(g);else if(Ue.isArray(g)&&mq(g)||(Ue.isFileList(g)||Ue.endsWith(v,"[]"))&&(x=Ue.toArray(g)))return v=sU(v),x.forEach(function(S,A){!(Ue.isUndefined(S)||S===null)&&e.append(o===!0?tI([v],A,s):o===null?v:v+"[]",c(S))}),!1}return NA(g)?!0:(e.append(tI(_,v,s),c(g)),!1)}const f=[],d=Object.assign(gq,{defaultVisitor:u,convertValue:c,isVisitable:NA});function m(g,v){if(!Ue.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(g),Ue.forEach(g,function(x,y){(!(Ue.isUndefined(x)||x===null)&&r.call(e,x,Ue.isString(y)?y.trim():y,v,d))===!0&&m(x,v?v.concat(y):[y])}),f.pop()}}if(!Ue.isObject(n))throw new TypeError("data must be an object");return m(n),e}function nI(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function LE(n,e){this._pairs=[],n&&S1(n,this,e)}const oU=LE.prototype;oU.append=function(e,t){this._pairs.push([e,t])};oU.toString=function(e){const t=e?function(i){return e.call(this,i,nI)}:nI;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function vq(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function aU(n,e,t){if(!e)return n;const i=t&&t.encode||vq,r=t&&t.serialize;let s;if(r?s=r(e,t):s=Ue.isURLSearchParams(e)?e.toString():new LE(e,t).toString(i),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class yq{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ue.forEach(this.handlers,function(i){i!==null&&e(i)})}}const iI=yq,lU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_q=typeof URLSearchParams<"u"?URLSearchParams:LE,xq=typeof FormData<"u"?FormData:null,Sq=typeof Blob<"u"?Blob:null,wq=(()=>{let n;return typeof navigator<"u"&&((n=navigator.product)==="ReactNative"||n==="NativeScript"||n==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Aq=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),go={isBrowser:!0,classes:{URLSearchParams:_q,FormData:xq,Blob:Sq},isStandardBrowserEnv:wq,isStandardBrowserWebWorkerEnv:Aq,protocols:["http","https","file","blob","url","data"]};function Mq(n,e){return S1(n,new go.classes.URLSearchParams,Object.assign({visitor:function(t,i,r,s){return go.isNode&&Ue.isBuffer(t)?(this.append(i,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Cq(n){return Ue.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Eq(n){const e={},t=Object.keys(n);let i;const r=t.length;let s;for(i=0;i<r;i++)s=t[i],e[s]=n[s];return e}function cU(n){function e(t,i,r,s){let o=t[s++];const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&Ue.isArray(r)?r.length:o,l?(Ue.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!a):((!r[o]||!Ue.isObject(r[o]))&&(r[o]=[]),e(t,i,r[o],s)&&Ue.isArray(r[o])&&(r[o]=Eq(r[o])),!a)}if(Ue.isFormData(n)&&Ue.isFunction(n.entries)){const t={};return Ue.forEachEntry(n,(i,r)=>{e(Cq(i),r,t,0)}),t}return null}const bq={"Content-Type":void 0};function Tq(n,e,t){if(Ue.isString(n))try{return(e||JSON.parse)(n),Ue.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const w1={transitional:lU,adapter:["xhr","http"],transformRequest:[function(e,t){const i=t.getContentType()||"",r=i.indexOf("application/json")>-1,s=Ue.isObject(e);if(s&&Ue.isHTMLForm(e)&&(e=new FormData(e)),Ue.isFormData(e))return r&&r?JSON.stringify(cU(e)):e;if(Ue.isArrayBuffer(e)||Ue.isBuffer(e)||Ue.isStream(e)||Ue.isFile(e)||Ue.isBlob(e))return e;if(Ue.isArrayBufferView(e))return e.buffer;if(Ue.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Mq(e,this.formSerializer).toString();if((a=Ue.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return S1(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),Tq(e)):e}],transformResponse:[function(e){const t=this.transitional||w1.transitional,i=t&&t.forcedJSONParsing,r=this.responseType==="json";if(e&&Ue.isString(e)&&(i&&!this.responseType||r)){const o=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Qt.from(a,Qt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:go.classes.FormData,Blob:go.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ue.forEach(["delete","get","head"],function(e){w1.headers[e]={}});Ue.forEach(["post","put","patch"],function(e){w1.headers[e]=Ue.merge(bq)});const OE=w1,Pq=Ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Rq=n=>{const e={};let t,i,r;return n&&n.split(`
`).forEach(function(o){r=o.indexOf(":"),t=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!t||e[t]&&Pq[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},rI=Symbol("internals");function Bd(n){return n&&String(n).trim().toLowerCase()}function Mv(n){return n===!1||n==null?n:Ue.isArray(n)?n.map(Mv):String(n)}function Iq(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const Bq=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function AS(n,e,t,i,r){if(Ue.isFunction(i))return i.call(this,e,t);if(r&&(e=t),!!Ue.isString(e)){if(Ue.isString(i))return e.indexOf(i)!==-1;if(Ue.isRegExp(i))return i.test(e)}}function Dq(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function Lq(n,e){const t=Ue.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(r,s,o){return this[i].call(this,e,r,s,o)},configurable:!0})})}class A1{constructor(e){e&&this.set(e)}set(e,t,i){const r=this;function s(a,l,c){const u=Bd(l);if(!u)throw new Error("header name must be a non-empty string");const f=Ue.findKey(r,u);(!f||r[f]===void 0||c===!0||c===void 0&&r[f]!==!1)&&(r[f||l]=Mv(a))}const o=(a,l)=>Ue.forEach(a,(c,u)=>s(c,u,l));return Ue.isPlainObject(e)||e instanceof this.constructor?o(e,t):Ue.isString(e)&&(e=e.trim())&&!Bq(e)?o(Rq(e),t):e!=null&&s(t,e,i),this}get(e,t){if(e=Bd(e),e){const i=Ue.findKey(this,e);if(i){const r=this[i];if(!t)return r;if(t===!0)return Iq(r);if(Ue.isFunction(t))return t.call(this,r,i);if(Ue.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Bd(e),e){const i=Ue.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||AS(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let r=!1;function s(o){if(o=Bd(o),o){const a=Ue.findKey(i,o);a&&(!t||AS(i,i[a],a,t))&&(delete i[a],r=!0)}}return Ue.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let i=t.length,r=!1;for(;i--;){const s=t[i];(!e||AS(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const t=this,i={};return Ue.forEach(this,(r,s)=>{const o=Ue.findKey(i,s);if(o){t[o]=Mv(r),delete t[s];return}const a=e?Dq(s):String(s).trim();a!==s&&delete t[s],t[a]=Mv(r),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Ue.forEach(this,(i,r)=>{i!=null&&i!==!1&&(t[r]=e&&Ue.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[rI]=this[rI]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=Bd(o);i[a]||(Lq(r,o),i[a]=!0)}return Ue.isArray(e)?e.forEach(s):s(e),this}}A1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ue.freezeMethods(A1.prototype);Ue.freezeMethods(A1);const ra=A1;function MS(n,e){const t=this||OE,i=e||t,r=ra.from(i.headers);let s=i.data;return Ue.forEach(n,function(a){s=a.call(t,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function uU(n){return!!(n&&n.__CANCEL__)}function Dm(n,e,t){Qt.call(this,n??"canceled",Qt.ERR_CANCELED,e,t),this.name="CanceledError"}Ue.inherits(Dm,Qt,{__CANCEL__:!0});function Oq(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Qt("Request failed with status code "+t.status,[Qt.ERR_BAD_REQUEST,Qt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const kq=go.isStandardBrowserEnv?function(){return{write:function(t,i,r,s,o,a){const l=[];l.push(t+"="+encodeURIComponent(i)),Ue.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),Ue.isString(s)&&l.push("path="+s),Ue.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(t){const i=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Fq(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Uq(n,e){return e?n.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):n}function fU(n,e){return n&&!Fq(e)?Uq(n,e):e}const Nq=go.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let i;function r(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=r(window.location.href),function(o){const a=Ue.isString(o)?r(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function zq(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Gq(n,e){n=n||10;const t=new Array(n),i=new Array(n);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=i[s];o||(o=c),t[r]=l,i[r]=c;let f=s,d=0;for(;f!==r;)d+=t[f++],f=f%n;if(r=(r+1)%n,r===s&&(s=(s+1)%n),c-o<e)return;const m=u&&c-u;return m?Math.round(d*1e3/m):void 0}}function sI(n,e){let t=0;const i=Gq(50,250);return r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,a=s-t,l=i(a),c=s<=o;t=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:r};u[e?"download":"upload"]=!0,n(u)}}const Hq=typeof XMLHttpRequest<"u",Vq=Hq&&function(n){return new Promise(function(t,i){let r=n.data;const s=ra.from(n.headers).normalize(),o=n.responseType;let a;function l(){n.cancelToken&&n.cancelToken.unsubscribe(a),n.signal&&n.signal.removeEventListener("abort",a)}Ue.isFormData(r)&&(go.isStandardBrowserEnv||go.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(n.auth){const m=n.auth.username||"",g=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";s.set("Authorization","Basic "+btoa(m+":"+g))}const u=fU(n.baseURL,n.url);c.open(n.method.toUpperCase(),aU(u,n.params,n.paramsSerializer),!0),c.timeout=n.timeout;function f(){if(!c)return;const m=ra.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),v={data:!o||o==="text"||o==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:m,config:n,request:c};Oq(function(x){t(x),l()},function(x){i(x),l()},v),c=null}if("onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(f)},c.onabort=function(){c&&(i(new Qt("Request aborted",Qt.ECONNABORTED,n,c)),c=null)},c.onerror=function(){i(new Qt("Network Error",Qt.ERR_NETWORK,n,c)),c=null},c.ontimeout=function(){let g=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const v=n.transitional||lU;n.timeoutErrorMessage&&(g=n.timeoutErrorMessage),i(new Qt(g,v.clarifyTimeoutError?Qt.ETIMEDOUT:Qt.ECONNABORTED,n,c)),c=null},go.isStandardBrowserEnv){const m=(n.withCredentials||Nq(u))&&n.xsrfCookieName&&kq.read(n.xsrfCookieName);m&&s.set(n.xsrfHeaderName,m)}r===void 0&&s.setContentType(null),"setRequestHeader"in c&&Ue.forEach(s.toJSON(),function(g,v){c.setRequestHeader(v,g)}),Ue.isUndefined(n.withCredentials)||(c.withCredentials=!!n.withCredentials),o&&o!=="json"&&(c.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&c.addEventListener("progress",sI(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",sI(n.onUploadProgress)),(n.cancelToken||n.signal)&&(a=m=>{c&&(i(!m||m.type?new Dm(null,n,c):m),c.abort(),c=null)},n.cancelToken&&n.cancelToken.subscribe(a),n.signal&&(n.signal.aborted?a():n.signal.addEventListener("abort",a)));const d=zq(u);if(d&&go.protocols.indexOf(d)===-1){i(new Qt("Unsupported protocol "+d+":",Qt.ERR_BAD_REQUEST,n));return}c.send(r||null)})},Cv={http:pq,xhr:Vq};Ue.forEach(Cv,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Wq={getAdapter:n=>{n=Ue.isArray(n)?n:[n];const{length:e}=n;let t,i;for(let r=0;r<e&&(t=n[r],!(i=Ue.isString(t)?Cv[t.toLowerCase()]:t));r++);if(!i)throw i===!1?new Qt(`Adapter ${t} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Ue.hasOwnProp(Cv,t)?`Adapter '${t}' is not available in the build`:`Unknown adapter '${t}'`);if(!Ue.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:Cv};function CS(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Dm(null,n)}function oI(n){return CS(n),n.headers=ra.from(n.headers),n.data=MS.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Wq.getAdapter(n.adapter||OE.adapter)(n).then(function(i){return CS(n),i.data=MS.call(n,n.transformResponse,i),i.headers=ra.from(i.headers),i},function(i){return uU(i)||(CS(n),i&&i.response&&(i.response.data=MS.call(n,n.transformResponse,i.response),i.response.headers=ra.from(i.response.headers))),Promise.reject(i)})}const aI=n=>n instanceof ra?n.toJSON():n;function oh(n,e){e=e||{};const t={};function i(c,u,f){return Ue.isPlainObject(c)&&Ue.isPlainObject(u)?Ue.merge.call({caseless:f},c,u):Ue.isPlainObject(u)?Ue.merge({},u):Ue.isArray(u)?u.slice():u}function r(c,u,f){if(Ue.isUndefined(u)){if(!Ue.isUndefined(c))return i(void 0,c,f)}else return i(c,u,f)}function s(c,u){if(!Ue.isUndefined(u))return i(void 0,u)}function o(c,u){if(Ue.isUndefined(u)){if(!Ue.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function a(c,u,f){if(f in e)return i(c,u);if(f in n)return i(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>r(aI(c),aI(u),!0)};return Ue.forEach(Object.keys(Object.assign({},n,e)),function(u){const f=l[u]||r,d=f(n[u],e[u],u);Ue.isUndefined(d)&&f!==a||(t[u]=d)}),t}const hU="1.4.0",kE={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{kE[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const lI={};kE.transitional=function(e,t,i){function r(s,o){return"[Axios v"+hU+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(e===!1)throw new Qt(r(o," has been removed"+(t?" in "+t:"")),Qt.ERR_DEPRECATED);return t&&!lI[o]&&(lI[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function jq(n,e,t){if(typeof n!="object")throw new Qt("options must be an object",Qt.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const s=i[r],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new Qt("option "+s+" must be "+l,Qt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Qt("Unknown option "+s,Qt.ERR_BAD_OPTION)}}const zA={assertOptions:jq,validators:kE},Ha=zA.validators;class vy{constructor(e){this.defaults=e,this.interceptors={request:new iI,response:new iI}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=oh(this.defaults,t);const{transitional:i,paramsSerializer:r,headers:s}=t;i!==void 0&&zA.assertOptions(i,{silentJSONParsing:Ha.transitional(Ha.boolean),forcedJSONParsing:Ha.transitional(Ha.boolean),clarifyTimeoutError:Ha.transitional(Ha.boolean)},!1),r!=null&&(Ue.isFunction(r)?t.paramsSerializer={serialize:r}:zA.assertOptions(r,{encode:Ha.function,serialize:Ha.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o;o=s&&Ue.merge(s.common,s[t.method]),o&&Ue.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=ra.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,f=0,d;if(!l){const g=[oI.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),d=g.length,u=Promise.resolve(t);f<d;)u=u.then(g[f++],g[f++]);return u}d=a.length;let m=t;for(f=0;f<d;){const g=a[f++],v=a[f++];try{m=g(m)}catch(_){v.call(this,_);break}}try{u=oI.call(this,m)}catch(g){return Promise.reject(g)}for(f=0,d=c.length;f<d;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=oh(this.defaults,e);const t=fU(e.baseURL,e.url);return aU(t,e.params,e.paramsSerializer)}}Ue.forEach(["delete","get","head","options"],function(e){vy.prototype[e]=function(t,i){return this.request(oh(i||{},{method:e,url:t,data:(i||{}).data}))}});Ue.forEach(["post","put","patch"],function(e){function t(i){return function(s,o,a){return this.request(oh(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}vy.prototype[e]=t(),vy.prototype[e+"Form"]=t(!0)});const Ev=vy;class FE{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},e(function(s,o,a){i.reason||(i.reason=new Dm(s,o,a),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new FE(function(r){e=r}),cancel:e}}}const Jq=FE;function Xq(n){return function(t){return n.apply(null,t)}}function Yq(n){return Ue.isObject(n)&&n.isAxiosError===!0}const GA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(GA).forEach(([n,e])=>{GA[e]=n});const Kq=GA;function dU(n){const e=new Ev(n),t=KF(Ev.prototype.request,e);return Ue.extend(t,Ev.prototype,e,{allOwnKeys:!0}),Ue.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return dU(oh(n,r))},t}const mi=dU(OE);mi.Axios=Ev;mi.CanceledError=Dm;mi.CancelToken=Jq;mi.isCancel=uU;mi.VERSION=hU;mi.toFormData=S1;mi.AxiosError=Qt;mi.Cancel=mi.CanceledError;mi.all=function(e){return Promise.all(e)};mi.spread=Xq;mi.isAxiosError=Yq;mi.mergeConfig=oh;mi.AxiosHeaders=ra;mi.formToJSON=n=>cU(Ue.isHTMLForm(n)?new FormData(n):n);mi.HttpStatusCode=Kq;mi.default=mi;const M1=mi;let Qq=window.location.href;const C1=Qq.indexOf("kleinkunstig")!=-1?"https://100daysofdata.kleinkunstig.nl/api/":"http://local.kk-datavisuals-api:8888/";function pU(){const n=L.useRef();return W(wn,{children:W("directionalLight",{ref:n,castShadow:!0,position:[0,0,16],intensity:1.1,"shadow-mapSize":[1024,1024],"shadow-camera-near":1,"shadow-camera-far":20,"shadow-camera-top":20,"shadow-camera-right":20,"shadow-camera-bottom":-20,"shadow-camera-left":-20})})}function mU(){return W(SQ,{position:[0,-.01,0],args:[10.5,10.5],...{cellSize:.5,cellThickness:.5,cellColor:"#6f6f6f",sectionSize:3,sectionThickness:1,sectionColor:"#4c6a9e",fadeDistance:100,fadeStrength:1,followCamera:!1,infiniteGrid:!0}})}function Zq({focusObject:n,customSettings:e}){const t=L.useRef();Yn();const i={enabled:!0,verticalDragToForward:!1,minDistance:5,maxDistance:50,dollyToCursor:!1,infinityDolly:!1,initPosition:[-1.5,10.7,28.5]};if(e)for(let r in i)e.hasOwnProperty(r)&&(i[r]=e[r]);return L.useEffect(()=>{e?t.current.fitToBox(n.current):t.current.moveTo(-1.5,10.7,28.5,!0)},[]),W(_Q,{ref:t,minDistance:i.minDistance,maxDistance:i.maxDistance,enabled:i.enabled,verticalDragToForward:i.verticalDragToForward,dollyToCursor:i.dollyToCursor,infinityDolly:i.infinityDolly})}function E1(n,...e){const t=L.useRef(),i=L.useRef(),r=s=>{if(i.current!=null){const o=s-i.current;n(o,e)}i.current=s,t.current=requestAnimationFrame(r)};return L.useEffect(()=>(t.current=requestAnimationFrame(r),()=>cancelAnimationFrame(t.current)),[e]),t.current}const Ff={},en={};let Wd={};function qq(n){Wd=n}const $q=900,hp=window.innerWidth<$q,gU={sharing:!1},yy={};function e$(n){return yy.hasOwnProperty(n)?yy[n]:null}function t$(n,e){yy[n]=e}const ht={started:!1,day:0,speed:15,speedDefault:15,maxFrames:100};function n$({callback:n}){const[e,t]=L.useState(!1),[i,r]=L.useState("brightside"),[s,o]=L.useState(null),[a,l]=L.useState(null),c=new j,u={brightside:{position:[-1.5,12,12.5],q:[0,0,0,1]},darkside:{position:[-3.5,10.7,28.5],q:[0,1,0,0]}};hp&&(u.brightside.position[0]=0,u.darkside.position[0]=-3.4);const f=_=>{if(_.hasOwnProperty("moveTo")&&_.moveTo!=i){let x=u[_.moveTo].q,y=u[_.moveTo].position,S=new Li;S.x=x[0],S.y=x[1],S.z=x[2],S.w=x[3],r(_.moveTo),o(S),l(y),t(!0)}},d=Yn();L.useEffect(()=>{n(f,d)},[n]);const m=600;let g=0,v=1/m;return Yr(_=>(e&&(g+=v,g<1?(_.camera.position.lerp(c.set(a[0],a[1],a[2]),g),_.camera.quaternion.slerp(s,g)):t(!1)),null)),null}const Ko={hashtag:{name:"hashtag",visual_options:["DayBoxes","DayHeightMap","PopSocket","BigSingleShape","DiamondsRing"],variations:["hashtag100","hashtag"]},creator:{name:"creator",visual_options:["CreatorHeightmap","PopSocket","BigSingleShape","DiamondsRing"],variations:["creator100","creator","creatorgridindexed","creatormulti"]},categories:{name:"categories",grid_options:{100:"DiamondsGridMini",1e4:"DiamondsGrid"},variations:["categories","categorie","categories1000"]}},V0=6,vU=["top","bottom","left","right"],Dd={statsOptions:["day","minmax"],positions:vU},Sr={DayBoxes:{animated:!0,shape:"square",move:!0,dimensions:[10,10],scale:!0,scaleSettings:{min:10,max:100},scaleInit:[1.032,1.032,1.032],max:V0,txtSettings:Dd},DayHeightMap:{animated:!0,shape:"square",move:!0,dimensions:[12,12],scale:!0,scaleSettings:{min:10,max:100},scaleInit:[.87,.87,.87],max:V0,txtSettings:Dd},CreatorHeightmap:{animated:!0,shape:"square",move:!0,dimensions:[10.4,10.4],scale:!0,scaleSettings:{min:10,max:100},scaleInit:[1,1,1],max:V0,txtSettings:Dd},DiamondsGrid:{animated:!0,shape:"square",move:!0,dimensions:[27.5,43.5],scale:!0,scaleSettings:{min:10,max:100},scaleInit:[.375,.375,.375],max:V0,txtSettings:!1},DiamondsGridMini:{animated:!0,shape:"rectangle",move:!0,dimensions:[27.5,4],scale:!0,scaleSettings:{min:10,max:100},scaleInit:[.375,.375,.375],max:2,txtSettings:!1},DiamondsRing:{animated:!1,shape:"outside",move:!1,dimensions:[11.5,23.3],scale:!1,max:1,txtSettings:{statsOptions:["minmax"],positions:vU}},PopSocket:{animated:!0,shape:"single",move:!0,dimensions:[5,5],scale:!0,scaleSettings:{min:30,max:150},scaleInit:[1,1,1],max:1,txtSettings:Dd},BigSingleShape:{animated:!0,shape:"single",move:!0,dimensions:[5,5],scale:!0,scaleSettings:{min:30,max:150},scaleInit:[1,1,1],max:20,txtSettings:Dd}},_y={DayBoxes:["cube","piramid","capsule","diamond","emerald","heart"],DiamondsRing:["flower","diamond","heart"],PopSocket:["flower","diamond","heart","rose","skull"],BigSingleShape:["flower","diamond","heart","rose","skull"]};function UE(n){let e=n.visType;return e=="DiamondsGrid"&&(e=n.shapeType),e}function NE(n){return _y.hasOwnProperty(n)}function zE(n,e){let t=!1,i=_y.hasOwnProperty(n);return i?(e&&i&&_y[n].indexOf(e)!=-1&&(t=!0),t):!0}function i$(n){let e=!1;return n.hasOwnProperty("dataTag")&&Ko[n.dataType].hasOwnProperty("visual_options")&&(e=!0),e}function r$(n){let e=!1;return n.hasOwnProperty("dataType")&&Ko[n.dataType].hasOwnProperty("grid_options")&&(e=!0),e}const Kc={},Oc={},ji={adds:0,edits:0,deletes:0,info:0,visType_DayBoxes:0,visType_DayHeightMap:0,visType_CreatorHeightmap:0,visType_DiamondsRing:0,visType_PopSocket:0,visType_BigSingleShape:0,visType_DiamondsGrid:0,shapeType_cube:0,shapeType_piramid:0,shapeType_capsule:0,shapeType_diamond:0,shapeType_emerald:0,shapeType_heart:0,shapeType_flower:0,shapeType_rose:0,shapeType_skull:0,drags:0,creators:[],hashtags:[],searches:[],randomTags:0,categories:[],swatchesGenerated:0,color:{r:0,g:0,b:0}},bv="uac-visual";function Pn(n){const e=Date.now(),t=[];let i=!1;if(n.hasOwnProperty("AddedVisual")||n.hasOwnProperty("EditedVisual")){const r=n.hasOwnProperty("EditedVisual")?n.EditedVisual:n.AddedVisual;if(n.hasOwnProperty("EditedVisual")?(t.push("edits"),ji.edits++):(t.push("adds"),ji.adds++),i=!0,r.hasOwnProperty("visType")){let s=r.visType,o=!0;s.indexOf("DiamondsGrid")!=-1&&(s="DiamondsGrid",o=!1);let a="visType_"+s;if(ji[a]++,t.push(a),o&&r.shapeType&&zE(s,r.shapeType)){let l="shapeType_"+r.shapeType;ji[l]++,t.push(l)}}r.hasOwnProperty("displayColor")?(ji.color.r+=r.displayColor.r,ji.color.g+=r.displayColor.g,ji.color.b+=r.displayColor.b):console.log("no display color",r)}if(n.hasOwnProperty("DeletedVisual")&&(i=!0,ji.deletes++,t.push("deletes")),n.hasOwnProperty("visualEditBtnClick")&&n.visualEditBtnClick=="info"&&(i=!0,ji.info++,t.push("info")),n.hasOwnProperty("ColorOptions")&&n.ColorOptions=="generated_new_options"&&(i=!0,ji.swatchesGenerated++,t.push("swatchesGenerated")),n.hasOwnProperty("DataLoad")){i=!0;let r=n.DataLoad.mode,s=n.DataLoad.tag;r.indexOf("creator")!=-1?(ji.creators.push(s),t.push("creators")):r.indexOf("categor")!=-1?(ji.categories.push(s),t.push("categories")):(ji.hashtags.push(s),t.push("hashtags"))}n.hasOwnProperty("SearchResultClicked")&&(i=!0,ji.searches.push(n.SearchResultClicked),t.push("searches")),n.hasOwnProperty("phoneCover")&&n.phoneCover=="dragged"&&(i=!0,ji.drags++,t.push("drags")),n.hasOwnProperty("TagOptionsTab")&&n.TagOptionsTab=="getRandOption"&&(i=!0,ji.randomTags++,t.push("randomTags")),i!=""&&(Kc[e]=t)}function yU(n){L.useEffect(()=>{c()},[n.loadVal]);const e=n.mode?n.mode:"hashtag",t=["kingsday","valentinesday","ramadan","prank","travel","foryou"],[i,r]=L.useState(!1),[s,o]=L.useState(),a=d=>{r(d)},l=d=>{let m=d.target,g=m.dataset.mode,v=m.dataset.tag;c({mode:g,tag:v});let _=t.indexOf(v);o(_)},c=d=>{a(!1);let m=d?d.mode:e,g=d?d.tag:"nederland";n.loadVal&&(g=n.loadVal),m=="creator"&&(m="creatorgridindexed"),Pn({DataLoad:{mode:m,tag:g}});let v={method:"get",url:C1+"?req="+m+"/"+encodeURI(g),withCredentials:!1};M1(v).then(_=>{const x=_.data;n.dataLoaded(x),a(!0)})};if(L.useEffect(()=>{n.loadVal},[]),n.context&&n.context=="r3f")return W(wn,{});const u=n.wrapperClass?n.wrapperClass:"",f=n.extraButton?n.extraButton:null;return W("div",{id:"tag-select-wrap",className:u,children:Ge("header",{children:[W("h3",{children:"Select a Hashtag"}),t.map((d,m)=>W("button",{onClick:l,"data-mode":e,"data-tag":d,className:s===m?"btn-active":"",children:d},m)),f]})})}function Uf(n,e=2){const i=[{suffix:"T",threshold:1e12},{suffix:"B",threshold:1e9},{suffix:"M",threshold:1e6},{suffix:"K",threshold:1e3},{suffix:"",threshold:1}].find(r=>Math.abs(n)>=r.threshold);return i?(n/i.threshold).toFixed(e)+i.suffix:n}function s$(n,e){let t=[];if(e){let i=100;for(let r=0;r<i;r++){let s=n&&n.hasOwnProperty(r)?n[r]:0;t.push(s)}}else{let i=Object.keys(n);for(let r of i)t.push(n[r])}return t}function au(n,e){Array.isArray(n)||(n=s$(n,e));const t=Math.max(...n),i=Math.min(...n);return{gridArray:n,min:i,max:t}}const o$=(n,e,t)=>Math.min(Math.max(n,e),t);zn.legacyMode=!1;const a$=new nn({color:16777215,transparent:!0,opacity:0,wireframe:!0}),GE=new Xr({color:65280,flatShading:!0}),_U=new nn({transparent:!0,opacity:0}),xU=new Pl({color:16777215}),Tv=new nn({color:0});new NC({color:13421772});new nn({color:2960685});const l$=new Xr({color:2960685,flatShading:!0,metalness:.4,roughness:.9}),c$=new Xr({color:5066061,flatShading:!0,metalness:.4,roughness:.9});var HE={exports:{}};HE.exports;(function(n){(function(){var e,t=[].slice;e=function(){var i,r,s,o,a,l;for(a=Array.isArray||function(u){return{}.toString.call(u)==="[object Array]"},c.SCHEMES={},o="mono monochromatic contrast triade tetrade analogic".split(/\s+/),r=0,s=o.length;r<s;r++)l=o[r],c.SCHEMES[l]=!0;c.PRESETS={default:[-1,-1,1,-.7,.25,1,.5,1],pastel:[.5,-.9,.5,.5,.1,.9,.75,.75],soft:[.3,-.8,.3,.5,.1,.9,.5,.75],light:[.25,1,.5,.75,.1,1,.5,1],hard:[1,-1,1,-.6,.1,1,.6,1],pale:[.1,-.85,.1,.5,.1,1,.1,.75]},c.COLOR_WHEEL={0:[255,0,0,100],15:[255,51,0,100],30:[255,102,0,100],45:[255,128,0,100],60:[255,153,0,100],75:[255,178,0,100],90:[255,204,0,100],105:[255,229,0,100],120:[255,255,0,100],135:[204,255,0,100],150:[153,255,0,100],165:[51,255,0,100],180:[0,204,0,80],195:[0,178,102,70],210:[0,153,153,60],225:[0,102,178,70],240:[0,51,204,80],255:[25,25,178,70],270:[51,0,153,60],285:[64,0,153,60],300:[102,0,153,60],315:[153,0,153,60],330:[204,0,153,80],345:[229,0,102,90]};function c(){var u,f;for(u=[],f=1;f<=4;f++)u.push(new c.mutablecolor(60));this.col=u,this._scheme="mono",this._distance=.5,this._web_safe=!1,this._add_complement=!1}return c.prototype.colors=function(){var u,f,d,m,g,v,_,x,y;if(y=1,f=this.col[0].get_hue(),u={mono:function(S){return function(){}}(),contrast:function(S){return function(){return y=2,S.col[1].set_hue(f),S.col[1].rotate(180)}}(this),triade:function(S){return function(){var A;return y=3,A=60*S._distance,S.col[1].set_hue(f),S.col[1].rotate(180-A),S.col[2].set_hue(f),S.col[2].rotate(180+A)}}(this),tetrade:function(S){return function(){var A;return y=4,A=90*S._distance,S.col[1].set_hue(f),S.col[1].rotate(180),S.col[2].set_hue(f),S.col[2].rotate(180+A),S.col[3].set_hue(f),S.col[3].rotate(A)}}(this),analogic:function(S){return function(){var A;return y=S._add_complement?4:3,A=60*S._distance,S.col[1].set_hue(f),S.col[1].rotate(A),S.col[2].set_hue(f),S.col[2].rotate(360-A),S.col[3].set_hue(f),S.col[3].rotate(180)}}(this)},u.monochromatic=u.mono,u[this._scheme]!=null)u[this._scheme]();else throw"Unknown color scheme name: "+this._scheme;for(_=[],d=g=0,x=y-1;0<=x?g<=x:g>=x;d=0<=x?++g:--g)for(m=v=0;v<=3;m=++v)_[d*4+m]=this.col[d].get_hex(this._web_safe,m);return _},c.prototype.colorset=function(){var u,f;for(u=i(this.colors()),f=[];u.length>0;)f.push(u.splice(0,4));return f},c.prototype.from_hue=function(u){if(u==null)throw"from_hue needs an argument";return this.col[0].set_hue(u),this},c.prototype.rgb2ryb=function(){var u,f,d,m,g,v,_,x,y;return _=1<=arguments.length?t.call(arguments,0):[],_[0]!=null&&a(_[0])&&(_=_[0]),v=_[0],f=_[1],u=_[2],x=Math.min(v,f,u),v-=x,f-=x,u-=x,m=Math.max(v,f,u),y=Math.min(v,f),v-=y,f-=y,u>0&&f>0&&(u/=2,f/=2),y+=f,u+=f,g=Math.max(v,y,u),g>0&&(d=m/g,v*=d,y*=d,u*=d),v+=x,y+=x,u+=x,[Math.floor(v),Math.floor(y),Math.floor(u)]},c.prototype.rgb2hsv=function(){var u,f,d,m,g,v,_,x,y,S;if(x=1<=arguments.length?t.call(arguments,0):[],x[0]!=null&&a(x[0])&&(x=x[0]),_=x[0],d=x[1],u=x[2],_/=255,d/=255,u/=255,v=Math.min.apply(Math,[_,d,u]),g=Math.max.apply(Math,[_,d,u]),f=g-v,S=g,f>0)y=f/g;else return[0,0,S];return m=_===g?(d-u)/f:d===g?2+(u-_)/f:4+(_-d)/f,m*=60,m%=360,[m,y,S]},c.prototype.rgbToHsv=function(){var u,f,d,m,g,v,_,x,y,S;if(x=1<=arguments.length?t.call(arguments,0):[],x[0]!=null&&a(x[0])&&(x=x[0]),_=x[0],d=x[1],u=x[2],_/=255,d/=255,u/=255,g=Math.max(_,d,u),v=Math.min(_,d,u),m=void 0,y=void 0,S=g,f=g-v,y=g===0?0:f/g,g===v)m=0;else{switch(g){case _:m=(d-u)/f+(d<u?6:0);break;case d:m=(u-_)/f+2;break;case u:m=(_-d)/f+4}m/=6}return[m,y,S]},c.prototype.from_hex=function(u){var f,d,m,g,v,_,x,y,S,A,C;if(u==null)throw"from_hex needs an argument";if(!/^([0-9A-F]{2}){3}$/im.test(u))throw"from_hex("+u+") - argument must be in the form of RRGGBB";return S=/(..)(..)(..)/.exec(u).slice(1,4),x=function(){var b,P,E;for(E=[],P=0,b=S.length;P<b;P++)v=S[P],E.push(parseInt(v,16));return E}(),_=x[0],d=x[1],f=x[2],y=this.rgb2ryb([_,d,f]),_=y[0],d=y[1],f=y[2],g=this.rgbToHsv(_,d,f),g[0],m=null,A=null,C=null,m=g[0],A=g[1],C=g[2],this.from_hue(m*360),this._set_variant_preset([A,C,A,C*.7,A*.25,1,A*.5,1]),this},c.prototype.add_complement=function(u){if(u==null)throw"add_complement needs an argument";return this._add_complement=u,this},c.prototype.web_safe=function(u){if(u==null)throw"web_safe needs an argument";return this._web_safe=u,this},c.prototype.distance=function(u){if(u==null)throw"distance needs an argument";if(u<0)throw"distance("+u+") - argument must be >= 0";if(u>1)throw"distance("+u+") - argument must be <= 1";return this._distance=u,this},c.prototype.scheme=function(u){if(u==null)return this._scheme;if(c.SCHEMES[u]==null)throw"'"+u+"' isn't a valid scheme name";return this._scheme=u,this},c.prototype.variation=function(u){if(u==null)throw"variation needs an argument";if(c.PRESETS[u]==null)throw"'$v' isn't a valid variation name";return this._set_variant_preset(c.PRESETS[u]),this},c.prototype._set_variant_preset=function(u){var f,d,m;for(m=[],f=d=0;d<=3;f=++d)m.push(this.col[f].set_variant_preset(u));return m},i=function(u){var f,d,m;if(u==null||typeof u!="object")return u;if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp)return f="",u.global!=null&&(f+="g"),u.ignoreCase!=null&&(f+="i"),u.multiline!=null&&(f+="m"),u.sticky!=null&&(f+="y"),new RegExp(u.source,f);m=new u.constructor;for(d in u)m[d]=i(u[d]);return m},c.mutablecolor=function(){u.prototype.hue=0,u.prototype.saturation=[],u.prototype.value=[],u.prototype.base_red=0,u.prototype.base_green=0,u.prototype.base_saturation=0,u.prototype.base_value=0;function u(f){if(f==null)throw"No hue specified";this.saturation=[],this.value=[],this.base_red=0,this.base_green=0,this.base_blue=0,this.base_saturation=0,this.base_value=0,this.set_hue(f),this.set_variant_preset(c.PRESETS.default)}return u.prototype.get_hue=function(){return this.hue},u.prototype.set_hue=function(f){var d,m,g,v,_,x,y,S,A,C;d=function(b,P,E){return b+Math.round((P-b)*E)},this.hue=Math.round(f%360),_=this.hue%15+(this.hue-Math.floor(this.hue)),C=_/15,x=this.hue-Math.floor(_),y=(x+15)%360,x===360&&(x=0),y===360&&(y=0),g=c.COLOR_WHEEL[x],v=c.COLOR_WHEEL[y],S={red:0,green:1,blue:2,value:3};for(m in S)A=S[m],this["base_"+m]=d(g[A],v[A],C);return this.base_saturation=d(100,100,C)/100,this.base_value/=100},u.prototype.rotate=function(f){var d;return d=(this.hue+f)%360,this.set_hue(d)},u.prototype.get_saturation=function(f){var d,m;return m=this.saturation[f],d=m<0?-m*this.base_saturation:m,d>1&&(d=1),d<0&&(d=0),d},u.prototype.get_value=function(f){var d,m;return m=this.value[f],d=m<0?-m*this.base_value:m,d>1&&(d=1),d<0&&(d=0),d},u.prototype.set_variant=function(f,d,m){return this.saturation[f]=d,this.value[f]=m},u.prototype.set_variant_preset=function(f){var d,m,g;for(g=[],d=m=0;m<=3;d=++m)g.push(this.set_variant(d,f[2*d],f[2*d+1]));return g},u.prototype.get_hex=function(f,d){var m,g,v,_,x,y,S,A,C,b,P,E,R,B,O,G;for(C=Math.max.apply(Math,function(){var N,k,X,te;for(X=["red","green","blue"],te=[],k=0,N=X.length;k<N;k++)g=X[k],te.push(this["base_"+g]);return te}.call(this)),Math.min.apply(Math,function(){var N,k,X,te;for(X=["red","green","blue"],te=[],k=0,N=X.length;k<N;k++)g=X[k],te.push(this["base_"+g]);return te}.call(this)),G=(d<0?this.base_value:this.get_value(d))*255,B=d<0?this.base_saturation:this.get_saturation(d),x=C>0?G/C:0,E=[],P=["red","green","blue"],A=0,y=P.length;A<y;A++)g=P[A],R=Math.min.apply(Math,[255,Math.round(G-(G-this["base_"+g]*x)*B)]),E.push(R);for(f&&(E=function(){var N,k,X;for(X=[],k=0,N=E.length;k<N;k++)m=E[k],X.push(Math.round(m/51)*51);return X}()),v="",b=0,S=E.length;b<S;b++)_=E[b],O=_.toString(16),O.length<2&&(O="0"+O),v+=O;return v},u}(),c}(),n!==null&&n.exports!=null?n.exports=e:window.ColorScheme=e}).call(Ot)})(HE);var u$=HE.exports;const SU=Zc(u$);function HA(){let n=new Je,e=Math.random().toString(16).substr(-6);return n.setHex(`0x${e}`),n}function wU(n){var e=n;return e=parseInt(e,16),e=16777215^e,e=e.toString(16),e=("000000"+e).slice(-6),e="#"+e,e}new Pl({color:16711935,transparent:!0,opacity:.8});const ea={Comedy:{cat_id:1,name:"Comedy"},Entertainment:{cat_id:2,name:"Entertainment"},"Daily Life":{cat_id:3,name:"Daily Life"},Sports:{cat_id:4,name:"Sports"},Vehicle:{cat_id:5,name:"Vehicle"},Gaming:{cat_id:6,name:"Gaming"},Music:{cat_id:7,name:"Music"},"Fitness/Health":{cat_id:8,name:"Fitness/Health"},"Science/Education":{cat_id:9,name:"Science/Education"},"Beauty/Style":{cat_id:10,name:"Beauty/Style"},Food:{cat_id:11,name:"Food"},"Motivation/Advice":{cat_id:12,name:"Motivation/Advice"},Family:{cat_id:13,name:"Family"},Dance:{cat_id:14,name:"Dance"},Outdoors:{cat_id:15,name:"Outdoors"},Art:{cat_id:16,name:"Art"},"Home/Garden":{cat_id:17,name:"Home/Garden"},Satisfying:{cat_id:18,name:"Satisfying"},Travel:{cat_id:19,name:"Travel"},"Life Hacks":{cat_id:20,name:"Life Hacks"},Anime:{cat_id:21,name:"Anime"},DIY:{cat_id:22,name:"DIY"},Shopping:{cat_id:25,name:"Shopping"},Animals:{cat_id:26,name:"Animals"},Religion:{cat_id:27,name:"Religion"}},kc=["Comedy","Entertainment","Travel","Family","Motivation/Advice","Beauty/Style","Sports","Food","Daily Life","Gaming","Music","Science/Education","Fitness/Health","Animals","Shopping","Satisfying","Vehicle","Home/Garden","Anime","Art","Religion","Dance","Outdoors","DIY","Life Hacks"];function f$(n,e){let t=0;const i={};for(let r in n){const s=n[r].name;e.indexOf(s)!=-1&&(t+=n[r].amount,i[r]=n[r])}for(let r in i){let o=i[r].amount/t*100;i[r].percentage=o}return i}function h$(n){let e=n.dayFrame,t=n.grid[e];const i=n.ref2Set;let r=n.cats2Show,s=!1;r!="*"&&(r=r.split(","),s=!0),s&&(t=f$(t,r));const o={};let a={};for(let u in t)a[t[u].name]=u;let l=0;for(let u of kc){let f=a[u];if(t[f]){let d=t[f];if(d){let m=Math.round(n.diamondsPlaced*(d.percentage/100)),g=u;o[l]={numDiamonds:m,material:ea[g].material,name:ea[g].name}}}l++}let c=0;for(let u in o){let f=o[u],d=parseInt(f.numDiamonds);for(let m=c;m<c+d;m++){let g=i.current[m];g&&(g.children[0].material=f.material)}c+=d}}function d$(n){n||(n=HA()),Object.keys(ea).length;let e=cI(n.getHexString()),t=e[e.length-1];e.pop();let i=cI(t);const r=e.concat(i);let s=[1,6,21],o=0;for(let a in ea){const l=GE.clone();s.indexOf(o)!=-1&&o++,l.color=new Je("#"+r[o]),ea[a].material=l,o++}}function cI(n){var e=new SU;e.from_hex(n),e.variation("hard");var t=e.scheme("tetrade").distance(.9).colors();return t}function p$({grid:n,meshGeom:e,displayColor:t,shapeType:i,playBackSpeed:r,visualID:s,cats2Show:o,gridSize:a}){const l=L.useRef([]),c=25,u=a=="full"?40:4,f=.1,d=c*u,m=GE.clone();m.color=t;const g=L.useMemo(()=>{let C=[];for(let b=0;b<d;b++){let P=`diamond-in-grid--${b}`,E=b%c;E+=E*f;let R=Math.floor(b/c);R+=R*f;const B=W("group",{name:P,position:[E,R,0],ref:O=>l.current[b]=O,rotation:[Math.PI*-.5,0,0],children:W("mesh",{geometry:e,material:m,name:"diamondBase"})},P);C.push(B)}return d$(t),C},[t,a]);let v=-1,_=ht.day;Yr(C=>{C.clock.getElapsedTime(),v!=ht.day&&(v=ht.day,_=ht.day,h$({ref2Set:l,cats2Show:o,diamondsPlaced:d,grid:n,dayFrame:_,reset:!1}),Ff[s]=_,_++)});const x=-.1,y=27.5,S=a=="full"?43.5:4,A=new Vn(y,S,.001);return Ge("group",{position:[-.5,x,0],rotation:[Math.PI*.5,0,Math.PI],name:"vis_type_wrapper",children:[g,W("mesh",{geometry:A,position:[y/2,S/2,0],material:_U})]})}var VE={},AU={};const Lm=dM(uN);function ma(n){return Array.isArray?Array.isArray(n):EU(n)==="[object Array]"}const m$=1/0;function g$(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-m$?"-0":e}function v$(n){return n==null?"":g$(n)}function vo(n){return typeof n=="string"}function MU(n){return typeof n=="number"}function y$(n){return n===!0||n===!1||_$(n)&&EU(n)=="[object Boolean]"}function CU(n){return typeof n=="object"}function _$(n){return CU(n)&&n!==null}function Nr(n){return n!=null}function ES(n){return!n.trim().length}function EU(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const x$="Incorrect 'index' type",S$=n=>`Invalid value for key ${n}`,w$=n=>`Pattern length exceeds max of ${n}.`,A$=n=>`Missing ${n} property in key`,M$=n=>`Property 'weight' in key '${n}' must be a positive integer`,uI=Object.prototype.hasOwnProperty;class C${constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(i=>{let r=bU(i);t+=r.weight,this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(i=>{i.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function bU(n){let e=null,t=null,i=null,r=1,s=null;if(vo(n)||ma(n))i=n,e=fI(n),t=VA(n);else{if(!uI.call(n,"name"))throw new Error(A$("name"));const o=n.name;if(i=o,uI.call(n,"weight")&&(r=n.weight,r<=0))throw new Error(M$(o));e=fI(o),t=VA(o),s=n.getFn}return{path:e,id:t,weight:r,src:i,getFn:s}}function fI(n){return ma(n)?n:n.split(".")}function VA(n){return ma(n)?n.join("."):n}function E$(n,e){let t=[],i=!1;const r=(s,o,a)=>{if(Nr(s))if(!o[a])t.push(s);else{let l=o[a];const c=s[l];if(!Nr(c))return;if(a===o.length-1&&(vo(c)||MU(c)||y$(c)))t.push(v$(c));else if(ma(c)){i=!0;for(let u=0,f=c.length;u<f;u+=1)r(c[u],o,a+1)}else o.length&&r(c,o,a+1)}};return r(n,vo(e)?e.split("."):e,0),i?t:t[0]}const b$={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},T$={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},P$={location:0,threshold:.6,distance:100},R$={useExtendedSearch:!1,getFn:E$,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var _t={...T$,...b$,...P$,...R$};const I$=/[^ ]+/g;function B$(n=1,e=3){const t=new Map,i=Math.pow(10,e);return{get(r){const s=r.match(I$).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*n),a=parseFloat(Math.round(o*i)/i);return t.set(s,a),a},clear(){t.clear()}}}class WE{constructor({getFn:e=_t.getFn,fieldNormWeight:t=_t.fieldNormWeight}={}){this.norm=B$(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,i)=>{this._keysMap[t.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,vo(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();vo(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,i=this.size();t<i;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Nr(e)||ES(e))return;let i={v:e,i:t,n:this.norm.get(e)};this.records.push(i)}_addObject(e,t){let i={i:t,$:{}};this.keys.forEach((r,s)=>{let o=r.getFn?r.getFn(e):this.getFn(e,r.path);if(Nr(o)){if(ma(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:c,value:u}=l.pop();if(Nr(u))if(vo(u)&&!ES(u)){let f={v:u,i:c,n:this.norm.get(u)};a.push(f)}else ma(u)&&u.forEach((f,d)=>{l.push({nestedArrIndex:d,value:f})})}i.$[s]=a}else if(vo(o)&&!ES(o)){let a={v:o,n:this.norm.get(o)};i.$[s]=a}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function TU(n,e,{getFn:t=_t.getFn,fieldNormWeight:i=_t.fieldNormWeight}={}){const r=new WE({getFn:t,fieldNormWeight:i});return r.setKeys(n.map(bU)),r.setSources(e),r.create(),r}function D$(n,{getFn:e=_t.getFn,fieldNormWeight:t=_t.fieldNormWeight}={}){const{keys:i,records:r}=n,s=new WE({getFn:e,fieldNormWeight:t});return s.setKeys(i),s.setIndexRecords(r),s}function W0(n,{errors:e=0,currentLocation:t=0,expectedLocation:i=0,distance:r=_t.distance,ignoreLocation:s=_t.ignoreLocation}={}){const o=e/n.length;if(s)return o;const a=Math.abs(i-t);return r?o+a/r:a?1:o}function L$(n=[],e=_t.minMatchCharLength){let t=[],i=-1,r=-1,s=0;for(let o=n.length;s<o;s+=1){let a=n[s];a&&i===-1?i=s:!a&&i!==-1&&(r=s-1,r-i+1>=e&&t.push([i,r]),i=-1)}return n[s-1]&&s-i>=e&&t.push([i,s-1]),t}const dc=32;function O$(n,e,t,{location:i=_t.location,distance:r=_t.distance,threshold:s=_t.threshold,findAllMatches:o=_t.findAllMatches,minMatchCharLength:a=_t.minMatchCharLength,includeMatches:l=_t.includeMatches,ignoreLocation:c=_t.ignoreLocation}={}){if(e.length>dc)throw new Error(w$(dc));const u=e.length,f=n.length,d=Math.max(0,Math.min(i,f));let m=s,g=d;const v=a>1||l,_=v?Array(f):[];let x;for(;(x=n.indexOf(e,g))>-1;){let P=W0(e,{currentLocation:x,expectedLocation:d,distance:r,ignoreLocation:c});if(m=Math.min(P,m),g=x+u,v){let E=0;for(;E<u;)_[x+E]=1,E+=1}}g=-1;let y=[],S=1,A=u+f;const C=1<<u-1;for(let P=0;P<u;P+=1){let E=0,R=A;for(;E<R;)W0(e,{errors:P,currentLocation:d+R,expectedLocation:d,distance:r,ignoreLocation:c})<=m?E=R:A=R,R=Math.floor((A-E)/2+E);A=R;let B=Math.max(1,d-R+1),O=o?f:Math.min(d+R,f)+u,G=Array(O+2);G[O+1]=(1<<P)-1;for(let k=O;k>=B;k-=1){let X=k-1,te=t[n.charAt(X)];if(v&&(_[X]=+!!te),G[k]=(G[k+1]<<1|1)&te,P&&(G[k]|=(y[k+1]|y[k])<<1|1|y[k+1]),G[k]&C&&(S=W0(e,{errors:P,currentLocation:X,expectedLocation:d,distance:r,ignoreLocation:c}),S<=m)){if(m=S,g=X,g<=d)break;B=Math.max(1,2*d-g)}}if(W0(e,{errors:P+1,currentLocation:d,expectedLocation:d,distance:r,ignoreLocation:c})>m)break;y=G}const b={isMatch:g>=0,score:Math.max(.001,S)};if(v){const P=L$(_,a);P.length?l&&(b.indices=P):b.isMatch=!1}return b}function k$(n){let e={};for(let t=0,i=n.length;t<i;t+=1){const r=n.charAt(t);e[r]=(e[r]||0)|1<<i-t-1}return e}class PU{constructor(e,{location:t=_t.location,threshold:i=_t.threshold,distance:r=_t.distance,includeMatches:s=_t.includeMatches,findAllMatches:o=_t.findAllMatches,minMatchCharLength:a=_t.minMatchCharLength,isCaseSensitive:l=_t.isCaseSensitive,ignoreLocation:c=_t.ignoreLocation}={}){if(this.options={location:t,threshold:i,distance:r,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(d,m)=>{this.chunks.push({pattern:d,alphabet:k$(d),startIndex:m})},f=this.pattern.length;if(f>dc){let d=0;const m=f%dc,g=f-m;for(;d<g;)u(this.pattern.substr(d,dc),d),d+=dc;if(m){const v=f-dc;u(this.pattern.substr(v),v)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:i}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let g={isMatch:!0,score:0};return i&&(g.indices=[[0,e.length-1]]),g}const{location:r,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],f=0,d=!1;this.chunks.forEach(({pattern:g,alphabet:v,startIndex:_})=>{const{isMatch:x,score:y,indices:S}=O$(e,g,v,{location:r+_,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:i,ignoreLocation:c});x&&(d=!0),f+=y,x&&S&&(u=[...u,...S])});let m={isMatch:d,score:d?f/this.chunks.length:1};return d&&i&&(m.indices=u),m}}class Il{constructor(e){this.pattern=e}static isMultiMatch(e){return hI(e,this.multiRegex)}static isSingleMatch(e){return hI(e,this.singleRegex)}search(){}}function hI(n,e){const t=n.match(e);return t?t[1]:null}class F$ extends Il{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class U$ extends Il{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const i=e.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}}class N$ extends Il{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class z$ extends Il{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class G$ extends Il{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class H$ extends Il{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class RU extends Il{constructor(e,{location:t=_t.location,threshold:i=_t.threshold,distance:r=_t.distance,includeMatches:s=_t.includeMatches,findAllMatches:o=_t.findAllMatches,minMatchCharLength:a=_t.minMatchCharLength,isCaseSensitive:l=_t.isCaseSensitive,ignoreLocation:c=_t.ignoreLocation}={}){super(e),this._bitapSearch=new PU(e,{location:t,threshold:i,distance:r,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class IU extends Il{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,i;const r=[],s=this.pattern.length;for(;(i=e.indexOf(this.pattern,t))>-1;)t=i+s,r.push([i,t-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const WA=[F$,IU,N$,z$,H$,G$,U$,RU],dI=WA.length,V$=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,W$="|";function j$(n,e={}){return n.split(W$).map(t=>{let i=t.trim().split(V$).filter(s=>s&&!!s.trim()),r=[];for(let s=0,o=i.length;s<o;s+=1){const a=i[s];let l=!1,c=-1;for(;!l&&++c<dI;){const u=WA[c];let f=u.isMultiMatch(a);f&&(r.push(new u(f,e)),l=!0)}if(!l)for(c=-1;++c<dI;){const u=WA[c];let f=u.isSingleMatch(a);if(f){r.push(new u(f,e));break}}}return r})}const J$=new Set([RU.type,IU.type]);class X${constructor(e,{isCaseSensitive:t=_t.isCaseSensitive,includeMatches:i=_t.includeMatches,minMatchCharLength:r=_t.minMatchCharLength,ignoreLocation:s=_t.ignoreLocation,findAllMatches:o=_t.findAllMatches,location:a=_t.location,threshold:l=_t.threshold,distance:c=_t.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:i,minMatchCharLength:r,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=j$(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let s=0,o=[],a=0;for(let l=0,c=t.length;l<c;l+=1){const u=t[l];o.length=0,s=0;for(let f=0,d=u.length;f<d;f+=1){const m=u[f],{isMatch:g,indices:v,score:_}=m.search(e);if(g){if(s+=1,a+=_,i){const x=m.constructor.type;J$.has(x)?o=[...o,...v]:o.push(v)}}else{a=0,s=0,o.length=0;break}}if(s){let f={isMatch:!0,score:a/s};return i&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const jA=[];function Y$(...n){jA.push(...n)}function JA(n,e){for(let t=0,i=jA.length;t<i;t+=1){let r=jA[t];if(r.condition(n,e))return new r(n,e)}return new PU(n,e)}const xy={AND:"$and",OR:"$or"},XA={PATH:"$path",PATTERN:"$val"},YA=n=>!!(n[xy.AND]||n[xy.OR]),K$=n=>!!n[XA.PATH],Q$=n=>!ma(n)&&CU(n)&&!YA(n),pI=n=>({[xy.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function BU(n,e,{auto:t=!0}={}){const i=r=>{let s=Object.keys(r);const o=K$(r);if(!o&&s.length>1&&!YA(r))return i(pI(r));if(Q$(r)){const l=o?r[XA.PATH]:s[0],c=o?r[XA.PATTERN]:r[l];if(!vo(c))throw new Error(S$(l));const u={keyId:VA(l),pattern:c};return t&&(u.searcher=JA(c,e)),u}let a={children:[],operator:s[0]};return s.forEach(l=>{const c=r[l];ma(c)&&c.forEach(u=>{a.children.push(i(u))})}),a};return YA(n)||(n=pI(n)),i(n)}function Z$(n,{ignoreFieldNorm:e=_t.ignoreFieldNorm}){n.forEach(t=>{let i=1;t.matches.forEach(({key:r,norm:s,score:o})=>{const a=r?r.weight:null;i*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:s))}),t.score=i})}function q$(n,e){const t=n.matches;e.matches=[],Nr(t)&&t.forEach(i=>{if(!Nr(i.indices)||!i.indices.length)return;const{indices:r,value:s}=i;let o={indices:r,value:s};i.key&&(o.key=i.key.src),i.idx>-1&&(o.refIndex=i.idx),e.matches.push(o)})}function $$(n,e){e.score=n.score}function eee(n,e,{includeMatches:t=_t.includeMatches,includeScore:i=_t.includeScore}={}){const r=[];return t&&r.push(q$),i&&r.push($$),n.map(s=>{const{idx:o}=s,a={item:e[o],refIndex:o};return r.length&&r.forEach(l=>{l(s,a)}),a})}class Th{constructor(e,t={},i){this.options={..._t,...t},this.options.useExtendedSearch,this._keyStore=new C$(this.options.keys),this.setCollection(e,i)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof WE))throw new Error(x$);this._myIndex=t||TU(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Nr(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let i=0,r=this._docs.length;i<r;i+=1){const s=this._docs[i];e(s,i)&&(this.removeAt(i),i-=1,r-=1,t.push(s))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:i,includeScore:r,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=vo(e)?vo(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Z$(l,{ignoreFieldNorm:a}),s&&l.sort(o),MU(t)&&t>-1&&(l=l.slice(0,t)),eee(l,this._docs,{includeMatches:i,includeScore:r})}_searchStringList(e){const t=JA(e,this.options),{records:i}=this._myIndex,r=[];return i.forEach(({v:s,i:o,n:a})=>{if(!Nr(s))return;const{isMatch:l,score:c,indices:u}=t.searchIn(s);l&&r.push({item:s,idx:o,matches:[{score:c,value:s,norm:a,indices:u}]})}),r}_searchLogical(e){const t=BU(e,this.options),i=(a,l,c)=>{if(!a.children){const{keyId:f,searcher:d}=a,m=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:d});return m&&m.length?[{idx:c,item:l,matches:m}]:[]}const u=[];for(let f=0,d=a.children.length;f<d;f+=1){const m=a.children[f],g=i(m,l,c);if(g.length)u.push(...g);else if(a.operator===xy.AND)return[]}return u},r=this._myIndex.records,s={},o=[];return r.forEach(({$:a,i:l})=>{if(Nr(a)){let c=i(t,a,l);c.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),c.forEach(({matches:u})=>{s[l].matches.push(...u)}))}}),o}_searchObjectList(e){const t=JA(e,this.options),{keys:i,records:r}=this._myIndex,s=[];return r.forEach(({$:o,i:a})=>{if(!Nr(o))return;let l=[];i.forEach((c,u)=>{l.push(...this._findMatches({key:c,value:o[u],searcher:t}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:e,value:t,searcher:i}){if(!Nr(t))return[];let r=[];if(ma(t))t.forEach(({v:s,i:o,n:a})=>{if(!Nr(s))return;const{isMatch:l,score:c,indices:u}=i.searchIn(s);l&&r.push({score:c,key:e,value:s,idx:o,norm:a,indices:u})});else{const{v:s,n:o}=t,{isMatch:a,score:l,indices:c}=i.searchIn(s);a&&r.push({score:l,key:e,value:s,norm:o,indices:c})}return r}}Th.version="6.6.2";Th.createIndex=TU;Th.parseIndex=D$;Th.config=_t;Th.parseQuery=BU;Y$(X$);const tee=Object.freeze(Object.defineProperty({__proto__:null,default:Th},Symbol.toStringTag,{value:"Module"})),nee=dM(tee);var DU={exports:{}},an={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ei=typeof Symbol=="function"&&Symbol.for,jE=Ei?Symbol.for("react.element"):60103,JE=Ei?Symbol.for("react.portal"):60106,b1=Ei?Symbol.for("react.fragment"):60107,T1=Ei?Symbol.for("react.strict_mode"):60108,P1=Ei?Symbol.for("react.profiler"):60114,R1=Ei?Symbol.for("react.provider"):60109,I1=Ei?Symbol.for("react.context"):60110,XE=Ei?Symbol.for("react.async_mode"):60111,B1=Ei?Symbol.for("react.concurrent_mode"):60111,D1=Ei?Symbol.for("react.forward_ref"):60112,L1=Ei?Symbol.for("react.suspense"):60113,iee=Ei?Symbol.for("react.suspense_list"):60120,O1=Ei?Symbol.for("react.memo"):60115,k1=Ei?Symbol.for("react.lazy"):60116,ree=Ei?Symbol.for("react.block"):60121,see=Ei?Symbol.for("react.fundamental"):60117,oee=Ei?Symbol.for("react.responder"):60118,aee=Ei?Symbol.for("react.scope"):60119;function Kr(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case jE:switch(n=n.type,n){case XE:case B1:case b1:case P1:case T1:case L1:return n;default:switch(n=n&&n.$$typeof,n){case I1:case D1:case k1:case O1:case R1:return n;default:return e}}case JE:return e}}}function LU(n){return Kr(n)===B1}an.AsyncMode=XE;an.ConcurrentMode=B1;an.ContextConsumer=I1;an.ContextProvider=R1;an.Element=jE;an.ForwardRef=D1;an.Fragment=b1;an.Lazy=k1;an.Memo=O1;an.Portal=JE;an.Profiler=P1;an.StrictMode=T1;an.Suspense=L1;an.isAsyncMode=function(n){return LU(n)||Kr(n)===XE};an.isConcurrentMode=LU;an.isContextConsumer=function(n){return Kr(n)===I1};an.isContextProvider=function(n){return Kr(n)===R1};an.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===jE};an.isForwardRef=function(n){return Kr(n)===D1};an.isFragment=function(n){return Kr(n)===b1};an.isLazy=function(n){return Kr(n)===k1};an.isMemo=function(n){return Kr(n)===O1};an.isPortal=function(n){return Kr(n)===JE};an.isProfiler=function(n){return Kr(n)===P1};an.isStrictMode=function(n){return Kr(n)===T1};an.isSuspense=function(n){return Kr(n)===L1};an.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===b1||n===B1||n===P1||n===T1||n===L1||n===iee||typeof n=="object"&&n!==null&&(n.$$typeof===k1||n.$$typeof===O1||n.$$typeof===R1||n.$$typeof===I1||n.$$typeof===D1||n.$$typeof===see||n.$$typeof===oee||n.$$typeof===aee||n.$$typeof===ree)};an.typeOf=Kr;DU.exports=an;var YE=DU.exports,lee=function(e,t,i,r){var s=i?i.call(r,e,t):void 0;if(s!==void 0)return!!s;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var u=o[c];if(!l(u))return!1;var f=e[u],d=t[u];if(s=i?i.call(r,f,d,u):void 0,s===!1||s===void 0&&f!==d)return!1}return!0};const cee=Zc(lee);function uee(n){function e(V,Z,K,ne,z){for(var ae=0,ie=0,ye=0,re=0,he,q,ce=0,Ce=0,ge,Ae=ge=he=0,ke=0,ve=0,De=0,Le=0,we=K.length,F=we-1,D,$="",le="",Se="",Te="",Oe;ke<we;){if(q=K.charCodeAt(ke),ke===F&&ie+re+ye+ae!==0&&(ie!==0&&(q=ie===47?10:47),re=ye=ae=0,we++,F++),ie+re+ye+ae===0){if(ke===F&&(0<ve&&($=$.replace(d,"")),0<$.trim().length)){switch(q){case 32:case 9:case 59:case 13:case 10:break;default:$+=K.charAt(ke)}q=59}switch(q){case 123:for($=$.trim(),he=$.charCodeAt(0),ge=1,Le=++ke;ke<we;){switch(q=K.charCodeAt(ke)){case 123:ge++;break;case 125:ge--;break;case 47:switch(q=K.charCodeAt(ke+1)){case 42:case 47:e:{for(Ae=ke+1;Ae<F;++Ae)switch(K.charCodeAt(Ae)){case 47:if(q===42&&K.charCodeAt(Ae-1)===42&&ke+2!==Ae){ke=Ae+1;break e}break;case 10:if(q===47){ke=Ae+1;break e}}ke=Ae}}break;case 91:q++;case 40:q++;case 34:case 39:for(;ke++<F&&K.charCodeAt(ke)!==q;);}if(ge===0)break;ke++}switch(ge=K.substring(Le,ke),he===0&&(he=($=$.replace(f,"").trim()).charCodeAt(0)),he){case 64:switch(0<ve&&($=$.replace(d,"")),q=$.charCodeAt(1),q){case 100:case 109:case 115:case 45:ve=Z;break;default:ve=te}if(ge=e(Z,ve,ge,q,z+1),Le=ge.length,0<H&&(ve=t(te,$,De),Oe=a(3,ge,ve,Z,N,G,Le,q,z,ne),$=ve.join(""),Oe!==void 0&&(Le=(ge=Oe.trim()).length)===0&&(q=0,ge="")),0<Le)switch(q){case 115:$=$.replace(b,o);case 100:case 109:case 45:ge=$+"{"+ge+"}";break;case 107:$=$.replace(y,"$1 $2"),ge=$+"{"+ge+"}",ge=X===1||X===2&&s("@"+ge,3)?"@-webkit-"+ge+"@"+ge:"@"+ge;break;default:ge=$+ge,ne===112&&(ge=(le+=ge,""))}else ge="";break;default:ge=e(Z,t(Z,$,De),ge,ne,z+1)}Se+=ge,ge=De=ve=Ae=he=0,$="",q=K.charCodeAt(++ke);break;case 125:case 59:if($=(0<ve?$.replace(d,""):$).trim(),1<(Le=$.length))switch(Ae===0&&(he=$.charCodeAt(0),he===45||96<he&&123>he)&&(Le=($=$.replace(" ",":")).length),0<H&&(Oe=a(1,$,Z,V,N,G,le.length,ne,z,ne))!==void 0&&(Le=($=Oe.trim()).length)===0&&($="\0\0"),he=$.charCodeAt(0),q=$.charCodeAt(1),he){case 0:break;case 64:if(q===105||q===99){Te+=$+K.charAt(ke);break}default:$.charCodeAt(Le-1)!==58&&(le+=r($,he,q,$.charCodeAt(2)))}De=ve=Ae=he=0,$="",q=K.charCodeAt(++ke)}}switch(q){case 13:case 10:ie===47?ie=0:1+he===0&&ne!==107&&0<$.length&&(ve=1,$+="\0"),0<H*Q&&a(0,$,Z,V,N,G,le.length,ne,z,ne),G=1,N++;break;case 59:case 125:if(ie+re+ye+ae===0){G++;break}default:switch(G++,D=K.charAt(ke),q){case 9:case 32:if(re+ae+ie===0)switch(ce){case 44:case 58:case 9:case 32:D="";break;default:q!==32&&(D=" ")}break;case 0:D="\\0";break;case 12:D="\\f";break;case 11:D="\\v";break;case 38:re+ie+ae===0&&(ve=De=1,D="\f"+D);break;case 108:if(re+ie+ae+k===0&&0<Ae)switch(ke-Ae){case 2:ce===112&&K.charCodeAt(ke-3)===58&&(k=ce);case 8:Ce===111&&(k=Ce)}break;case 58:re+ie+ae===0&&(Ae=ke);break;case 44:ie+ye+re+ae===0&&(ve=1,D+="\r");break;case 34:case 39:ie===0&&(re=re===q?0:re===0?q:re);break;case 91:re+ie+ye===0&&ae++;break;case 93:re+ie+ye===0&&ae--;break;case 41:re+ie+ae===0&&ye--;break;case 40:if(re+ie+ae===0){if(he===0)switch(2*ce+3*Ce){case 533:break;default:he=1}ye++}break;case 64:ie+ye+re+ae+Ae+ge===0&&(ge=1);break;case 42:case 47:if(!(0<re+ae+ye))switch(ie){case 0:switch(2*q+3*K.charCodeAt(ke+1)){case 235:ie=47;break;case 220:Le=ke,ie=42}break;case 42:q===47&&ce===42&&Le+2!==ke&&(K.charCodeAt(Le+2)===33&&(le+=K.substring(Le,ke+1)),D="",ie=0)}}ie===0&&($+=D)}Ce=ce,ce=q,ke++}if(Le=le.length,0<Le){if(ve=Z,0<H&&(Oe=a(2,le,ve,V,N,G,Le,ne,z,ne),Oe!==void 0&&(le=Oe).length===0))return Te+le+Se;if(le=ve.join(",")+"{"+le+"}",X*k!==0){switch(X!==2||s(le,2)||(k=0),k){case 111:le=le.replace(A,":-moz-$1")+le;break;case 112:le=le.replace(S,"::-webkit-input-$1")+le.replace(S,"::-moz-$1")+le.replace(S,":-ms-input-$1")+le}k=0}}return Te+le+Se}function t(V,Z,K){var ne=Z.trim().split(_);Z=ne;var z=ne.length,ae=V.length;switch(ae){case 0:case 1:var ie=0;for(V=ae===0?"":V[0]+" ";ie<z;++ie)Z[ie]=i(V,Z[ie],K).trim();break;default:var ye=ie=0;for(Z=[];ie<z;++ie)for(var re=0;re<ae;++re)Z[ye++]=i(V[re]+" ",ne[ie],K).trim()}return Z}function i(V,Z,K){var ne=Z.charCodeAt(0);switch(33>ne&&(ne=(Z=Z.trim()).charCodeAt(0)),ne){case 38:return Z.replace(x,"$1"+V.trim());case 58:return V.trim()+Z.replace(x,"$1"+V.trim());default:if(0<1*K&&0<Z.indexOf("\f"))return Z.replace(x,(V.charCodeAt(0)===58?"":"$1")+V.trim())}return V+Z}function r(V,Z,K,ne){var z=V+";",ae=2*Z+3*K+4*ne;if(ae===944){V=z.indexOf(":",9)+1;var ie=z.substring(V,z.length-1).trim();return ie=z.substring(0,V).trim()+ie+";",X===1||X===2&&s(ie,1)?"-webkit-"+ie+ie:ie}if(X===0||X===2&&!s(z,1))return z;switch(ae){case 1015:return z.charCodeAt(10)===97?"-webkit-"+z+z:z;case 951:return z.charCodeAt(3)===116?"-webkit-"+z+z:z;case 963:return z.charCodeAt(5)===110?"-webkit-"+z+z:z;case 1009:if(z.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+z+z;case 978:return"-webkit-"+z+"-moz-"+z+z;case 1019:case 983:return"-webkit-"+z+"-moz-"+z+"-ms-"+z+z;case 883:if(z.charCodeAt(8)===45)return"-webkit-"+z+z;if(0<z.indexOf("image-set(",11))return z.replace(O,"$1-webkit-$2")+z;break;case 932:if(z.charCodeAt(4)===45)switch(z.charCodeAt(5)){case 103:return"-webkit-box-"+z.replace("-grow","")+"-webkit-"+z+"-ms-"+z.replace("grow","positive")+z;case 115:return"-webkit-"+z+"-ms-"+z.replace("shrink","negative")+z;case 98:return"-webkit-"+z+"-ms-"+z.replace("basis","preferred-size")+z}return"-webkit-"+z+"-ms-"+z+z;case 964:return"-webkit-"+z+"-ms-flex-"+z+z;case 1023:if(z.charCodeAt(8)!==99)break;return ie=z.substring(z.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+ie+"-webkit-"+z+"-ms-flex-pack"+ie+z;case 1005:return g.test(z)?z.replace(m,":-webkit-")+z.replace(m,":-moz-")+z:z;case 1e3:switch(ie=z.substring(13).trim(),Z=ie.indexOf("-")+1,ie.charCodeAt(0)+ie.charCodeAt(Z)){case 226:ie=z.replace(C,"tb");break;case 232:ie=z.replace(C,"tb-rl");break;case 220:ie=z.replace(C,"lr");break;default:return z}return"-webkit-"+z+"-ms-"+ie+z;case 1017:if(z.indexOf("sticky",9)===-1)break;case 975:switch(Z=(z=V).length-10,ie=(z.charCodeAt(Z)===33?z.substring(0,Z):z).substring(V.indexOf(":",7)+1).trim(),ae=ie.charCodeAt(0)+(ie.charCodeAt(7)|0)){case 203:if(111>ie.charCodeAt(8))break;case 115:z=z.replace(ie,"-webkit-"+ie)+";"+z;break;case 207:case 102:z=z.replace(ie,"-webkit-"+(102<ae?"inline-":"")+"box")+";"+z.replace(ie,"-webkit-"+ie)+";"+z.replace(ie,"-ms-"+ie+"box")+";"+z}return z+";";case 938:if(z.charCodeAt(5)===45)switch(z.charCodeAt(6)){case 105:return ie=z.replace("-items",""),"-webkit-"+z+"-webkit-box-"+ie+"-ms-flex-"+ie+z;case 115:return"-webkit-"+z+"-ms-flex-item-"+z.replace(E,"")+z;default:return"-webkit-"+z+"-ms-flex-line-pack"+z.replace("align-content","").replace(E,"")+z}break;case 973:case 989:if(z.charCodeAt(3)!==45||z.charCodeAt(4)===122)break;case 931:case 953:if(B.test(V)===!0)return(ie=V.substring(V.indexOf(":")+1)).charCodeAt(0)===115?r(V.replace("stretch","fill-available"),Z,K,ne).replace(":fill-available",":stretch"):z.replace(ie,"-webkit-"+ie)+z.replace(ie,"-moz-"+ie.replace("fill-",""))+z;break;case 962:if(z="-webkit-"+z+(z.charCodeAt(5)===102?"-ms-"+z:"")+z,K+ne===211&&z.charCodeAt(13)===105&&0<z.indexOf("transform",10))return z.substring(0,z.indexOf(";",27)+1).replace(v,"$1-webkit-$2")+z}return z}function s(V,Z){var K=V.indexOf(Z===1?":":"{"),ne=V.substring(0,Z!==3?K:10);return K=V.substring(K+1,V.length-1),J(Z!==2?ne:ne.replace(R,"$1"),K,Z)}function o(V,Z){var K=r(Z,Z.charCodeAt(0),Z.charCodeAt(1),Z.charCodeAt(2));return K!==Z+";"?K.replace(P," or ($1)").substring(4):"("+Z+")"}function a(V,Z,K,ne,z,ae,ie,ye,re,he){for(var q=0,ce=Z,Ce;q<H;++q)switch(Ce=oe[q].call(u,V,ce,K,ne,z,ae,ie,ye,re,he)){case void 0:case!1:case!0:case null:break;default:ce=Ce}if(ce!==Z)return ce}function l(V){switch(V){case void 0:case null:H=oe.length=0;break;default:if(typeof V=="function")oe[H++]=V;else if(typeof V=="object")for(var Z=0,K=V.length;Z<K;++Z)l(V[Z]);else Q=!!V|0}return l}function c(V){return V=V.prefix,V!==void 0&&(J=null,V?typeof V!="function"?X=1:(X=2,J=V):X=0),c}function u(V,Z){var K=V;if(33>K.charCodeAt(0)&&(K=K.trim()),U=K,K=[U],0<H){var ne=a(-1,Z,K,K,N,G,0,0,0,0);ne!==void 0&&typeof ne=="string"&&(Z=ne)}var z=e(te,K,Z,0,0);return 0<H&&(ne=a(-2,z,K,K,N,G,z.length,0,0,0),ne!==void 0&&(z=ne)),U="",k=0,G=N=1,z}var f=/^\0+/g,d=/[\0\r\f]/g,m=/: */g,g=/zoo|gra/,v=/([,: ])(transform)/g,_=/,\r+?/g,x=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,S=/::(place)/g,A=/:(read-only)/g,C=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,P=/([\s\S]*?);/g,E=/-self|flex-/g,R=/[^]*?(:[rp][el]a[\w-]+)[^]*/,B=/stretch|:\s*\w+\-(?:conte|avail)/,O=/([^-])(image-set\()/,G=1,N=1,k=0,X=1,te=[],oe=[],H=0,J=null,Q=0,U="";return u.use=l,u.set=c,n!==void 0&&c(n),u}var fee={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function hee(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var dee=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,mI=hee(function(n){return dee.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),KE=YE,pee={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},mee={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},gee={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},OU={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},QE={};QE[KE.ForwardRef]=gee;QE[KE.Memo]=OU;function gI(n){return KE.isMemo(n)?OU:QE[n.$$typeof]||pee}var vee=Object.defineProperty,yee=Object.getOwnPropertyNames,vI=Object.getOwnPropertySymbols,_ee=Object.getOwnPropertyDescriptor,xee=Object.getPrototypeOf,yI=Object.prototype;function kU(n,e,t){if(typeof e!="string"){if(yI){var i=xee(e);i&&i!==yI&&kU(n,i,t)}var r=yee(e);vI&&(r=r.concat(vI(e)));for(var s=gI(n),o=gI(e),a=0;a<r.length;++a){var l=r[a];if(!mee[l]&&!(t&&t[l])&&!(o&&o[l])&&!(s&&s[l])){var c=_ee(e,l);try{vee(n,l,c)}catch{}}}}return n}var See=kU;const FU=Zc(See);function Gr(){return(Gr=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}var _I=function(n,e){for(var t=[n[0]],i=0,r=e.length;i<r;i+=1)t.push(e[i],n[i+1]);return t},KA=function(n){return n!==null&&typeof n=="object"&&(n.toString?n.toString():Object.prototype.toString.call(n))==="[object Object]"&&!YE.typeOf(n)},Sy=Object.freeze([]),dl=Object.freeze({});function ah(n){return typeof n=="function"}function QA(n){return n.displayName||n.name||"Component"}function F1(n){return n&&typeof n.styledComponentId=="string"}var Al=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",wee="5.3.11",ZE=typeof window<"u"&&"HTMLElement"in window,Aee=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY)),Mee={};function zs(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];throw new Error("An error occurred. See https://git.io/JUIaE#"+n+" for more information."+(t.length>0?" Args: "+t.join(", "):""))}var Cee=function(){function n(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}var e=n.prototype;return e.indexOfGroup=function(t){for(var i=0,r=0;r<t;r++)i+=this.groupSizes[r];return i},e.insertRules=function(t,i){if(t>=this.groupSizes.length){for(var r=this.groupSizes,s=r.length,o=s;t>=o;)(o<<=1)<0&&zs(16,""+t);this.groupSizes=new Uint32Array(o),this.groupSizes.set(r),this.length=o;for(var a=s;a<o;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(t+1),c=0,u=i.length;c<u;c++)this.tag.insertRule(l,i[c])&&(this.groupSizes[t]++,l++)},e.clearGroup=function(t){if(t<this.length){var i=this.groupSizes[t],r=this.indexOfGroup(t),s=r+i;this.groupSizes[t]=0;for(var o=r;o<s;o++)this.tag.deleteRule(r)}},e.getGroup=function(t){var i="";if(t>=this.length||this.groupSizes[t]===0)return i;for(var r=this.groupSizes[t],s=this.indexOfGroup(t),o=s+r,a=s;a<o;a++)i+=this.tag.getRule(a)+`/*!sc*/
`;return i},n}(),Pv=new Map,wy=new Map,dp=1,j0=function(n){if(Pv.has(n))return Pv.get(n);for(;wy.has(dp);)dp++;var e=dp++;return Pv.set(n,e),wy.set(e,n),e},Eee=function(n){return wy.get(n)},bee=function(n,e){e>=dp&&(dp=e+1),Pv.set(n,e),wy.set(e,n)},Tee="style["+Al+'][data-styled-version="5.3.11"]',Pee=new RegExp("^"+Al+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),Ree=function(n,e,t){for(var i,r=t.split(","),s=0,o=r.length;s<o;s++)(i=r[s])&&n.registerName(e,i)},Iee=function(n,e){for(var t=(e.textContent||"").split(`/*!sc*/
`),i=[],r=0,s=t.length;r<s;r++){var o=t[r].trim();if(o){var a=o.match(Pee);if(a){var l=0|parseInt(a[1],10),c=a[2];l!==0&&(bee(c,l),Ree(n,c,a[3]),n.getTag().insertRules(l,i)),i.length=0}else i.push(o)}}},ZA=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},UU=function(n){var e=document.head,t=n||e,i=document.createElement("style"),r=function(a){for(var l=a.childNodes,c=l.length;c>=0;c--){var u=l[c];if(u&&u.nodeType===1&&u.hasAttribute(Al))return u}}(t),s=r!==void 0?r.nextSibling:null;i.setAttribute(Al,"active"),i.setAttribute("data-styled-version","5.3.11");var o=ZA();return o&&i.setAttribute("nonce",o),t.insertBefore(i,s),i},Bee=function(){function n(t){var i=this.element=UU(t);i.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,o=0,a=s.length;o<a;o++){var l=s[o];if(l.ownerNode===r)return l}zs(17)}(i),this.length=0}var e=n.prototype;return e.insertRule=function(t,i){try{return this.sheet.insertRule(i,t),this.length++,!0}catch{return!1}},e.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.getRule=function(t){var i=this.sheet.cssRules[t];return i!==void 0&&typeof i.cssText=="string"?i.cssText:""},n}(),Dee=function(){function n(t){var i=this.element=UU(t);this.nodes=i.childNodes,this.length=0}var e=n.prototype;return e.insertRule=function(t,i){if(t<=this.length&&t>=0){var r=document.createTextNode(i),s=this.nodes[t];return this.element.insertBefore(r,s||null),this.length++,!0}return!1},e.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},n}(),Lee=function(){function n(t){this.rules=[],this.length=0}var e=n.prototype;return e.insertRule=function(t,i){return t<=this.length&&(this.rules.splice(t,0,i),this.length++,!0)},e.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.getRule=function(t){return t<this.length?this.rules[t]:""},n}(),xI=ZE,Oee={isServer:!ZE,useCSSOMInjection:!Aee},lh=function(){function n(t,i,r){t===void 0&&(t=dl),i===void 0&&(i={}),this.options=Gr({},Oee,{},t),this.gs=i,this.names=new Map(r),this.server=!!t.isServer,!this.server&&ZE&&xI&&(xI=!1,function(s){for(var o=document.querySelectorAll(Tee),a=0,l=o.length;a<l;a++){var c=o[a];c&&c.getAttribute(Al)!=="active"&&(Iee(s,c),c.parentNode&&c.parentNode.removeChild(c))}}(this))}n.registerId=function(t){return j0(t)};var e=n.prototype;return e.reconstructWithOptions=function(t,i){return i===void 0&&(i=!0),new n(Gr({},this.options,{},t),this.gs,i&&this.names||void 0)},e.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.getTag=function(){return this.tag||(this.tag=(r=(i=this.options).isServer,s=i.useCSSOMInjection,o=i.target,t=r?new Lee(o):s?new Bee(o):new Dee(o),new Cee(t)));var t,i,r,s,o},e.hasNameForId=function(t,i){return this.names.has(t)&&this.names.get(t).has(i)},e.registerName=function(t,i){if(j0(t),this.names.has(t))this.names.get(t).add(i);else{var r=new Set;r.add(i),this.names.set(t,r)}},e.insertRules=function(t,i,r){this.registerName(t,i),this.getTag().insertRules(j0(t),r)},e.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.clearRules=function(t){this.getTag().clearGroup(j0(t)),this.clearNames(t)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(t){for(var i=t.getTag(),r=i.length,s="",o=0;o<r;o++){var a=Eee(o);if(a!==void 0){var l=t.names.get(a),c=i.getGroup(o);if(l&&c&&l.size){var u=Al+".g"+o+'[id="'+a+'"]',f="";l!==void 0&&l.forEach(function(d){d.length>0&&(f+=d+",")}),s+=""+c+u+'{content:"'+f+`"}/*!sc*/
`}}}return s}(this)},n}(),kee=/(a)(d)/gi,SI=function(n){return String.fromCharCode(n+(n>25?39:97))};function qA(n){var e,t="";for(e=Math.abs(n);e>52;e=e/52|0)t=SI(e%52)+t;return(SI(e%52)+t).replace(kee,"$1-$2")}var Af=function(n,e){for(var t=e.length;t;)n=33*n^e.charCodeAt(--t);return n},NU=function(n){return Af(5381,n)};function zU(n){for(var e=0;e<n.length;e+=1){var t=n[e];if(ah(t)&&!F1(t))return!1}return!0}var Fee=NU("5.3.11"),Uee=function(){function n(e,t,i){this.rules=e,this.staticRulesId="",this.isStatic=(i===void 0||i.isStatic)&&zU(e),this.componentId=t,this.baseHash=Af(Fee,t),this.baseStyle=i,lh.registerId(t)}return n.prototype.generateAndInjectStyles=function(e,t,i){var r=this.componentId,s=[];if(this.baseStyle&&s.push(this.baseStyle.generateAndInjectStyles(e,t,i)),this.isStatic&&!i.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))s.push(this.staticRulesId);else{var o=Qc(this.rules,e,t,i).join(""),a=qA(Af(this.baseHash,o)>>>0);if(!t.hasNameForId(r,a)){var l=i(o,"."+a,void 0,r);t.insertRules(r,a,l)}s.push(a),this.staticRulesId=a}else{for(var c=this.rules.length,u=Af(this.baseHash,i.hash),f="",d=0;d<c;d++){var m=this.rules[d];if(typeof m=="string")f+=m;else if(m){var g=Qc(m,e,t,i),v=Array.isArray(g)?g.join(""):g;u=Af(u,v+d),f+=v}}if(f){var _=qA(u>>>0);if(!t.hasNameForId(r,_)){var x=i(f,"."+_,void 0,r);t.insertRules(r,_,x)}s.push(_)}}return s.join(" ")},n}(),Nee=/^\s*\/\/.*$/gm,zee=[":","[",".","#"];function GU(n){var e,t,i,r,s=n===void 0?dl:n,o=s.options,a=o===void 0?dl:o,l=s.plugins,c=l===void 0?Sy:l,u=new uee(a),f=[],d=function(v){function _(x){if(x)try{v(x+"}")}catch{}}return function(x,y,S,A,C,b,P,E,R,B){switch(x){case 1:if(R===0&&y.charCodeAt(0)===64)return v(y+";"),"";break;case 2:if(E===0)return y+"/*|*/";break;case 3:switch(E){case 102:case 112:return v(S[0]+y),"";default:return y+(B===0?"/*|*/":"")}case-2:y.split("/*|*/}").forEach(_)}}}(function(v){f.push(v)}),m=function(v,_,x){return _===0&&zee.indexOf(x[t.length])!==-1||x.match(r)?v:"."+e};function g(v,_,x,y){y===void 0&&(y="&");var S=v.replace(Nee,""),A=_&&x?x+" "+_+" { "+S+" }":S;return e=y,t=_,i=new RegExp("\\"+t+"\\b","g"),r=new RegExp("(\\"+t+"\\b){2,}"),u(x||!_?"":_,A)}return u.use([].concat(c,[function(v,_,x){v===2&&x.length&&x[0].lastIndexOf(t)>0&&(x[0]=x[0].replace(i,m))},d,function(v){if(v===-2){var _=f;return f=[],_}}])),g.hash=c.length?c.reduce(function(v,_){return _.name||zs(15),Af(v,_.name)},5381).toString():"",g}var U1=Bn.createContext(),Gee=U1.Consumer,qE=Bn.createContext(),HU=(qE.Consumer,new lh),$A=GU();function $E(){return L.useContext(U1)||HU}function VU(){return L.useContext(qE)||$A}function WU(n){var e=L.useState(n.stylisPlugins),t=e[0],i=e[1],r=$E(),s=L.useMemo(function(){var a=r;return n.sheet?a=n.sheet:n.target&&(a=a.reconstructWithOptions({target:n.target},!1)),n.disableCSSOMInjection&&(a=a.reconstructWithOptions({useCSSOMInjection:!1})),a},[n.disableCSSOMInjection,n.sheet,n.target]),o=L.useMemo(function(){return GU({options:{prefix:!n.disableVendorPrefixes},plugins:t})},[n.disableVendorPrefixes,t]);return L.useEffect(function(){cee(t,n.stylisPlugins)||i(n.stylisPlugins)},[n.stylisPlugins]),Bn.createElement(U1.Provider,{value:s},Bn.createElement(qE.Provider,{value:o},n.children))}var jU=function(){function n(e,t){var i=this;this.inject=function(r,s){s===void 0&&(s=$A);var o=i.name+s.hash;r.hasNameForId(i.id,o)||r.insertRules(i.id,o,s(i.rules,o,"@keyframes"))},this.toString=function(){return zs(12,String(i.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return n.prototype.getName=function(e){return e===void 0&&(e=$A),this.name+e.hash},n}(),Hee=/([A-Z])/,Vee=/([A-Z])/g,Wee=/^ms-/,jee=function(n){return"-"+n.toLowerCase()};function wI(n){return Hee.test(n)?n.replace(Vee,jee).replace(Wee,"-ms-"):n}var AI=function(n){return n==null||n===!1||n===""};function Qc(n,e,t,i){if(Array.isArray(n)){for(var r,s=[],o=0,a=n.length;o<a;o+=1)(r=Qc(n[o],e,t,i))!==""&&(Array.isArray(r)?s.push.apply(s,r):s.push(r));return s}if(AI(n))return"";if(F1(n))return"."+n.styledComponentId;if(ah(n)){if(typeof(c=n)!="function"||c.prototype&&c.prototype.isReactComponent||!e)return n;var l=n(e);return Qc(l,e,t,i)}var c;return n instanceof jU?t?(n.inject(t,i),n.getName(i)):n:KA(n)?function u(f,d){var m,g,v=[];for(var _ in f)f.hasOwnProperty(_)&&!AI(f[_])&&(Array.isArray(f[_])&&f[_].isCss||ah(f[_])?v.push(wI(_)+":",f[_],";"):KA(f[_])?v.push.apply(v,u(f[_],_)):v.push(wI(_)+": "+(m=_,(g=f[_])==null||typeof g=="boolean"||g===""?"":typeof g!="number"||g===0||m in fee||m.startsWith("--")?String(g).trim():g+"px")+";"));return d?[d+" {"].concat(v,["}"]):v}(n):n.toString()}var MI=function(n){return Array.isArray(n)&&(n.isCss=!0),n};function N1(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return ah(n)||KA(n)?MI(Qc(_I(Sy,[n].concat(t)))):t.length===0&&n.length===1&&typeof n[0]=="string"?n:MI(Qc(_I(n,t)))}var eb=function(n,e,t){return t===void 0&&(t=dl),n.theme!==t.theme&&n.theme||e||t.theme},Jee=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Xee=/(^-|-$)/g;function bS(n){return n.replace(Jee,"-").replace(Xee,"")}var tb=function(n){return qA(NU(n)>>>0)};function J0(n){return typeof n=="string"&&!0}var eM=function(n){return typeof n=="function"||typeof n=="object"&&n!==null&&!Array.isArray(n)},Yee=function(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"};function Kee(n,e,t){var i=n[t];eM(e)&&eM(i)?JU(i,e):n[t]=e}function JU(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];for(var r=0,s=t;r<s.length;r++){var o=s[r];if(eM(o))for(var a in o)Yee(a)&&Kee(n,o[a],a)}return n}var Ml=Bn.createContext(),Qee=Ml.Consumer;function Zee(n){var e=L.useContext(Ml),t=L.useMemo(function(){return function(i,r){if(!i)return zs(14);if(ah(i)){var s=i(r);return s}return Array.isArray(i)||typeof i!="object"?zs(8):r?Gr({},r,{},i):i}(n.theme,e)},[n.theme,e]);return n.children?Bn.createElement(Ml.Provider,{value:t},n.children):null}var TS={};function XU(n,e,t){var i=F1(n),r=!J0(n),s=e.attrs,o=s===void 0?Sy:s,a=e.componentId,l=a===void 0?function(y,S){var A=typeof y!="string"?"sc":bS(y);TS[A]=(TS[A]||0)+1;var C=A+"-"+tb("5.3.11"+A+TS[A]);return S?S+"-"+C:C}(e.displayName,e.parentComponentId):a,c=e.displayName,u=c===void 0?function(y){return J0(y)?"styled."+y:"Styled("+QA(y)+")"}(n):c,f=e.displayName&&e.componentId?bS(e.displayName)+"-"+e.componentId:e.componentId||l,d=i&&n.attrs?Array.prototype.concat(n.attrs,o).filter(Boolean):o,m=e.shouldForwardProp;i&&n.shouldForwardProp&&(m=e.shouldForwardProp?function(y,S,A){return n.shouldForwardProp(y,S,A)&&e.shouldForwardProp(y,S,A)}:n.shouldForwardProp);var g,v=new Uee(t,f,i?n.componentStyle:void 0),_=v.isStatic&&o.length===0,x=function(y,S){return function(A,C,b,P){var E=A.attrs,R=A.componentStyle,B=A.defaultProps,O=A.foldedComponentIds,G=A.shouldForwardProp,N=A.styledComponentId,k=A.target,X=function(ne,z,ae){ne===void 0&&(ne=dl);var ie=Gr({},z,{theme:ne}),ye={};return ae.forEach(function(re){var he,q,ce,Ce=re;for(he in ah(Ce)&&(Ce=Ce(ie)),Ce)ie[he]=ye[he]=he==="className"?(q=ye[he],ce=Ce[he],q&&ce?q+" "+ce:q||ce):Ce[he]}),[ie,ye]}(eb(C,L.useContext(Ml),B)||dl,C,E),te=X[0],oe=X[1],H=function(ne,z,ae,ie){var ye=$E(),re=VU(),he=z?ne.generateAndInjectStyles(dl,ye,re):ne.generateAndInjectStyles(ae,ye,re);return he}(R,P,te),J=b,Q=oe.$as||C.$as||oe.as||C.as||k,U=J0(Q),V=oe!==C?Gr({},C,{},oe):C,Z={};for(var K in V)K[0]!=="$"&&K!=="as"&&(K==="forwardedAs"?Z.as=V[K]:(G?G(K,mI,Q):!U||mI(K))&&(Z[K]=V[K]));return C.style&&oe.style!==C.style&&(Z.style=Gr({},C.style,{},oe.style)),Z.className=Array.prototype.concat(O,N,H!==N?H:null,C.className,oe.className).filter(Boolean).join(" "),Z.ref=J,L.createElement(Q,Z)}(g,y,S,_)};return x.displayName=u,(g=Bn.forwardRef(x)).attrs=d,g.componentStyle=v,g.displayName=u,g.shouldForwardProp=m,g.foldedComponentIds=i?Array.prototype.concat(n.foldedComponentIds,n.styledComponentId):Sy,g.styledComponentId=f,g.target=i?n.target:n,g.withComponent=function(y){var S=e.componentId,A=function(b,P){if(b==null)return{};var E,R,B={},O=Object.keys(b);for(R=0;R<O.length;R++)E=O[R],P.indexOf(E)>=0||(B[E]=b[E]);return B}(e,["componentId"]),C=S&&S+"-"+(J0(y)?y:bS(QA(y)));return XU(y,Gr({},A,{attrs:d,componentId:C}),t)},Object.defineProperty(g,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(y){this._foldedDefaultProps=i?JU({},n.defaultProps,y):y}}),Object.defineProperty(g,"toString",{value:function(){return"."+g.styledComponentId}}),r&&FU(g,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),g}var tM=function(n){return function e(t,i,r){if(r===void 0&&(r=dl),!YE.isValidElementType(i))return zs(1,String(i));var s=function(){return t(i,r,N1.apply(void 0,arguments))};return s.withConfig=function(o){return e(t,i,Gr({},r,{},o))},s.attrs=function(o){return e(t,i,Gr({},r,{attrs:Array.prototype.concat(r.attrs,o).filter(Boolean)}))},s}(XU,n)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(n){tM[n]=tM(n)});var qee=function(){function n(t,i){this.rules=t,this.componentId=i,this.isStatic=zU(t),lh.registerId(this.componentId+1)}var e=n.prototype;return e.createStyles=function(t,i,r,s){var o=s(Qc(this.rules,i,r,s).join(""),""),a=this.componentId+t;r.insertRules(a,a,o)},e.removeStyles=function(t,i){i.clearRules(this.componentId+t)},e.renderStyles=function(t,i,r,s){t>2&&lh.registerId(this.componentId+t),this.removeStyles(t,r),this.createStyles(t,i,r,s)},n}();function $ee(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=N1.apply(void 0,[n].concat(t)),s="sc-global-"+tb(JSON.stringify(r)),o=new qee(r,s);function a(c){var u=$E(),f=VU(),d=L.useContext(Ml),m=L.useRef(u.allocateGSInstance(s)).current;return u.server&&l(m,c,u,d,f),L.useLayoutEffect(function(){if(!u.server)return l(m,c,u,d,f),function(){return o.removeStyles(m,u)}},[m,c,u,d,f]),null}function l(c,u,f,d,m){if(o.isStatic)o.renderStyles(c,Mee,f,m);else{var g=Gr({},u,{theme:eb(u,d,a.defaultProps)});o.renderStyles(c,g,f,m)}}return Bn.memo(a)}function ete(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=N1.apply(void 0,[n].concat(t)).join(""),s=tb(r);return new jU(s,r)}var tte=function(){function n(){var t=this;this._emitSheetCSS=function(){var i=t.instance.toString();if(!i)return"";var r=ZA();return"<style "+[r&&'nonce="'+r+'"',Al+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+i+"</style>"},this.getStyleTags=function(){return t.sealed?zs(2):t._emitSheetCSS()},this.getStyleElement=function(){var i;if(t.sealed)return zs(2);var r=((i={})[Al]="",i["data-styled-version"]="5.3.11",i.dangerouslySetInnerHTML={__html:t.instance.toString()},i),s=ZA();return s&&(r.nonce=s),[Bn.createElement("style",Gr({},r,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new lh({isServer:!0}),this.sealed=!1}var e=n.prototype;return e.collectStyles=function(t){return this.sealed?zs(2):Bn.createElement(WU,{sheet:this.instance},t)},e.interleaveWithNodeStream=function(t){return zs(3)},n}(),nte=function(n){var e=Bn.forwardRef(function(t,i){var r=L.useContext(Ml),s=n.defaultProps,o=eb(t,r,s);return Bn.createElement(n,Gr({},t,{theme:o,ref:i}))});return FU(e,n),e.displayName="WithTheme("+QA(n)+")",e},ite=function(){return L.useContext(Ml)},rte={StyleSheet:lh,masterSheet:HU};const ste=Object.freeze(Object.defineProperty({__proto__:null,ServerStyleSheet:tte,StyleSheetConsumer:Gee,StyleSheetContext:U1,StyleSheetManager:WU,ThemeConsumer:Qee,ThemeContext:Ml,ThemeProvider:Zee,__PRIVATE__:rte,createGlobalStyle:$ee,css:N1,default:tM,isStyledComponent:F1,keyframes:ete,useTheme:ite,version:wee,withTheme:nte},Symbol.toStringTag,{value:"Module"})),Om=dM(ste);var ch={};Object.defineProperty(ch,"__esModule",{value:!0});ch.defaultFuseOptions=ch.defaultTheme=void 0;var ote={height:"44px",border:"1px solid #dfe1e5",borderRadius:"24px",backgroundColor:"white",boxShadow:"rgba(32, 33, 36, 0.28) 0px 1px 6px 0px",hoverBackgroundColor:"#eee",color:"#212121",fontSize:"16px",fontFamily:"Arial",iconColor:"grey",lineColor:"rgb(232, 234, 237)",placeholderColor:"grey",zIndex:0,clearIconMargin:"3px 14px 0 0",searchIconMargin:"0 0 0 16px"};ch.defaultTheme=ote;var ate={shouldSort:!0,threshold:.6,location:0,distance:100,minMatchCharLength:1,keys:["name"]};ch.defaultFuseOptions=ate;var z1={};Object.defineProperty(z1,"__esModule",{value:!0});z1.debounce=void 0;function lte(n,e,t){var i;return function(){var r=this,s=arguments,o=function(){i=null,t||n.apply(r,s)};t&&!i&&n.apply(r,s),i&&clearTimeout(i),i=setTimeout(o,e)}}z1.debounce=lte;var nb={},km={},cte=Ot&&Ot.__makeTemplateObject||function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},nM=Ot&&Ot.__assign||function(){return nM=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},nM.apply(this,arguments)},ute=Ot&&Ot.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(km,"__esModule",{value:!0});km.SearchIcon=void 0;var CI=Lm,fte=ute(Om),hte=function(n){var e=n.showIcon;return e?(0,CI.jsx)(dte,nM({className:"search-icon",width:20,height:20,focusable:"false",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},{children:(0,CI.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})})):null};km.SearchIcon=hte;var dte=fte.default.svg(EI||(EI=cte([`
  flex-shrink: 0;
  margin: `,`;
  fill: `,`;
`],[`
  flex-shrink: 0;
  margin: `,`;
  fill: `,`;
`])),function(n){return n.theme.searchIconMargin},function(n){return n.theme.iconColor}),EI,pte=Ot&&Ot.__makeTemplateObject||function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},Mf=Ot&&Ot.__assign||function(){return Mf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Mf.apply(this,arguments)},mte=Ot&&Ot.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(nb,"__esModule",{value:!0});var Is=Lm,gte=mte(Om),bI=km;function vte(n){var e=n.results,t=e===void 0?[]:e,i=n.onClick,r=n.setSearchString,s=n.showIcon,o=n.maxResults,a=n.resultStringKeyName,l=a===void 0?"name":a,c=n.highlightedItem,u=n.setHighlightedItem,f=n.formatResult,d=n.showNoResultsFlag,m=d===void 0?!0:d,g=n.showNoResultsText,v=g===void 0?"No results":g,_=f||function(S){return S[l]},x=function(S){i(S),r(S[l])},y=function(S){var A=S.event,C=S.result;A.button===0&&(A.preventDefault(),x(C))};return m?(0,Is.jsx)(TI,{children:(0,Is.jsxs)("li",Mf({"data-test":"no-results-message"},{children:[(0,Is.jsx)(bI.SearchIcon,{showIcon:s}),(0,Is.jsx)("div",Mf({className:"ellipsis"},{children:v}))]}))}):(t==null?void 0:t.length)<=0&&!m?null:(0,Is.jsx)(TI,{children:t.slice(0,o).map(function(S,A){return(0,Is.jsxs)("li",Mf({className:c===A?"selected":"",onMouseEnter:function(){return u({index:A})},"data-test":"result",onMouseDown:function(C){return y({event:C,result:S})},onClick:function(){return x(S)}},{children:[(0,Is.jsx)(bI.SearchIcon,{showIcon:s}),(0,Is.jsx)("div",Mf({className:"ellipsis",title:S[l]},{children:_(S)}))]}),"rsa-result-".concat(S.id))})})}nb.default=vte;var TI=function(n){var e=n.children;return(0,Is.jsxs)(yte,{children:[(0,Is.jsx)("div",{className:"line"}),(0,Is.jsx)("ul",{children:e})]})},yte=gte.default.div(PI||(PI=pte([`
  > div.line {
    border-top-color: `,`;
    border-top-style: solid;
    border-top-width: 1px;

    margin-bottom: 0px;
    margin-left: 14px;
    margin-right: 20px;
    margin-top: 0px;

    padding-bottom: 4px;
  }

  > ul {
    list-style-type: none;
    margin: 0;
    padding: 0px 0 16px 0;
    max-height: `,`;

    > li {
      display: flex;
      align-items: center;
      padding: 4px 0 4px 0;

      > div {
        margin-left: 13px;
      }
    }
  }

  .ellipsis {
    text-align: left;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .selected {
    background-color: `,`;
  }
`],[`
  > div.line {
    border-top-color: `,`;
    border-top-style: solid;
    border-top-width: 1px;

    margin-bottom: 0px;
    margin-left: 14px;
    margin-right: 20px;
    margin-top: 0px;

    padding-bottom: 4px;
  }

  > ul {
    list-style-type: none;
    margin: 0;
    padding: 0px 0 16px 0;
    max-height: `,`;

    > li {
      display: flex;
      align-items: center;
      padding: 4px 0 4px 0;

      > div {
        margin-left: 13px;
      }
    }
  }

  .ellipsis {
    text-align: left;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .selected {
    background-color: `,`;
  }
`])),function(n){return n.theme.lineColor},function(n){return n.theme.maxHeight},function(n){return n.theme.hoverBackgroundColor}),PI,ib={},G1={},_te=Ot&&Ot.__makeTemplateObject||function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},Ay=Ot&&Ot.__assign||function(){return Ay=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Ay.apply(this,arguments)},xte=Ot&&Ot.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(G1,"__esModule",{value:!0});G1.ClearIcon=void 0;var PS=Lm,Ste=xte(Om),wte=function(n){var e=n.showClear,t=n.setSearchString,i=n.searchString,r=n.setFocus,s=n.onClear,o=function(){t({target:{value:""}}),r(),s()};return!e||!i||(i==null?void 0:i.length)<=0?null:(0,PS.jsx)(Ate,Ay({className:"clear-icon",onClick:o},{children:(0,PS.jsx)("svg",Ay({width:20,height:20,focusable:"false",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},{children:(0,PS.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.58 12 5 17.58 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})}))}))};G1.ClearIcon=wte;var Ate=Ste.default.div(RI||(RI=_te([`
  margin: `,`;

  &:hover {
    cursor: pointer;
  }

  > svg {
    fill: `,`;
  }
`],[`
  margin: `,`;

  &:hover {
    cursor: pointer;
  }

  > svg {
    fill: `,`;
  }
`])),function(n){return n.theme.clearIconMargin},function(n){return n.theme.iconColor}),RI,Mte=Ot&&Ot.__makeTemplateObject||function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},iM=Ot&&Ot.__assign||function(){return iM=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},iM.apply(this,arguments)},Cte=Ot&&Ot.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ib,"__esModule",{value:!0});var X0=Lm,Ete=L,bte=Cte(Om),Tte=G1,Pte=km;function Rte(n){var e=n.searchString,t=n.setSearchString,i=n.setHighlightedItem,r=n.eraseResults,s=n.autoFocus,o=n.onFocus,a=n.onClear,l=n.placeholder,c=n.showIcon,u=c===void 0?!0:c,f=n.showClear,d=f===void 0?!0:f,m=n.maxLength,g=(0,Ete.useRef)(null),v=!0,_=function(){v=!1,g!=null&&g.current&&g.current.focus(),v=!0},x=function(S){v&&o(S)},y=m?{maxLength:m}:{};return(0,X0.jsxs)(Ite,{children:[(0,X0.jsx)(Pte.SearchIcon,{showIcon:u}),(0,X0.jsx)("input",iM({type:"text",ref:g,spellCheck:!1,value:e,onChange:t,onFocus:x,placeholder:l,autoFocus:s,onBlur:function(){return r()},onKeyDown:function(S){return i({event:S})},"data-test":"search-input"},y)),(0,X0.jsx)(Tte.ClearIcon,{showClear:d,setSearchString:t,searchString:e,onClear:a,setFocus:_})]})}ib.default=Rte;var Ite=bte.default.div(II||(II=Mte([`
  min-height: `,`;
  width: 100%;

  display: flex;
  align-items: center;

  > input {
    width: 100%;

    padding: 0 0 0 13px;

    border: none;
    outline: none;

    background-color: rgba(0, 0, 0, 0);
    font-size: inherit;
    font-family: inherit;

    color: `,`;

    ::placeholder {
      color: `,`;
      opacity: 1;

      :-ms-input-placeholder {
        color: `,`;
      }

      ::-ms-input-placeholder {
        color: `,`;
      }
    }
  }
`],[`
  min-height: `,`;
  width: 100%;

  display: flex;
  align-items: center;

  > input {
    width: 100%;

    padding: 0 0 0 13px;

    border: none;
    outline: none;

    background-color: rgba(0, 0, 0, 0);
    font-size: inherit;
    font-family: inherit;

    color: `,`;

    ::placeholder {
      color: `,`;
      opacity: 1;

      :-ms-input-placeholder {
        color: `,`;
      }

      ::-ms-input-placeholder {
        color: `,`;
      }
    }
  }
`])),function(n){return n.theme.height},function(n){return n.theme.color},function(n){return n.theme.placeholderColor},function(n){return n.theme.placeholderColor},function(n){return n.theme.placeholderColor}),II;(function(n){var e=Ot&&Ot.__makeTemplateObject||function(y,S){return Object.defineProperty?Object.defineProperty(y,"raw",{value:S}):y.raw=S,y},t=Ot&&Ot.__assign||function(){return t=Object.assign||function(y){for(var S,A=1,C=arguments.length;A<C;A++){S=arguments[A];for(var b in S)Object.prototype.hasOwnProperty.call(S,b)&&(y[b]=S[b])}return y},t.apply(this,arguments)},i=Ot&&Ot.__createBinding||(Object.create?function(y,S,A,C){C===void 0&&(C=A);var b=Object.getOwnPropertyDescriptor(S,A);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[A]}}),Object.defineProperty(y,C,b)}:function(y,S,A,C){C===void 0&&(C=A),y[C]=S[A]}),r=Ot&&Ot.__setModuleDefault||(Object.create?function(y,S){Object.defineProperty(y,"default",{enumerable:!0,value:S})}:function(y,S){y.default=S}),s=Ot&&Ot.__importStar||function(y){if(y&&y.__esModule)return y;var S={};if(y!=null)for(var A in y)A!=="default"&&Object.prototype.hasOwnProperty.call(y,A)&&i(S,y,A);return r(S,y),S},o=Ot&&Ot.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(n,"__esModule",{value:!0}),n.MAX_RESULTS=n.DEFAULT_INPUT_DEBOUNCE=void 0;var a=Lm,l=o(nee),c=s(L),u=s(Om),f=ch,d=z1,m=o(nb),g=o(ib);n.DEFAULT_INPUT_DEBOUNCE=200,n.MAX_RESULTS=10;function v(y){var S=y.items,A=S===void 0?[]:S,C=y.fuseOptions,b=C===void 0?f.defaultFuseOptions:C,P=y.inputDebounce,E=P===void 0?n.DEFAULT_INPUT_DEBOUNCE:P,R=y.onSearch,B=R===void 0?function(){}:R,O=y.onHover,G=O===void 0?function(){}:O,N=y.onSelect,k=N===void 0?function(){}:N,X=y.onFocus,te=X===void 0?function(){}:X,oe=y.onClear,H=oe===void 0?function(){}:oe,J=y.showIcon,Q=J===void 0?!0:J,U=y.showClear,V=U===void 0?!0:U,Z=y.maxResults,K=Z===void 0?n.MAX_RESULTS:Z,ne=y.placeholder,z=ne===void 0?"":ne,ae=y.autoFocus,ie=ae===void 0?!1:ae,ye=y.styling,re=ye===void 0?{}:ye,he=y.resultStringKeyName,q=he===void 0?"name":he,ce=y.inputSearchString,Ce=ce===void 0?"":ce,ge=y.formatResult,Ae=y.showNoResults,ke=Ae===void 0?!0:Ae,ve=y.showNoResultsText,De=ve===void 0?"No results":ve,Le=y.showItemsOnFocus,we=Le===void 0?!1:Le,F=y.maxLength,D=F===void 0?0:F,$=y.className,le=t(t({},f.defaultTheme),re),Se=t(t({},f.defaultFuseOptions),b),Te=new l.default(A,Se);Te.setCollection(A);var Oe=(0,c.useState)(Ce),Be=Oe[0],Me=Oe[1],Xe=(0,c.useState)([]),Ie=Xe[0],Ve=Xe[1],He=(0,c.useState)(-1),Fe=He[0],Ze=He[1],lt=(0,c.useState)(!1),yt=lt[0],se=lt[1],xe=(0,c.useState)(!1),ze=xe[0],Ye=xe[1],nt=(0,c.useState)(!1),xt=nt[0],Nt=nt[1],jt=(0,c.useState)(!1),zt=jt[0],Gt=jt[1];(0,c.useEffect)(function(){Me(Ce);var me=setTimeout(function(){return Ve(Vt(Ce))},0);return function(){return clearTimeout(me)}},[Ce]),(0,c.useEffect)(function(){(Be==null?void 0:Be.length)>0&&Ie&&(Ie==null?void 0:Ie.length)>0&&Ve(Vt(Be))},[A]),(0,c.useEffect)(function(){ke&&Be.length>0&&!ze&&Ie.length===0&&!yt?Nt(!0):Nt(!1)},[ze,ke,yt,Be,Ie]),(0,c.useEffect)(function(){we&&Ie.length===0&&Be.length===0&&zt&&Ve(A.slice(0,K))},[we,Ie,Be,zt]),(0,c.useEffect)(function(){var me=function(){Y(),Gt(!1)};return document.addEventListener("click",me),function(){return document.removeEventListener("click",me)}},[]);var Ht=function(me){te(me),Gt(!0)},Pt=function(me){var ue=[];(me==null?void 0:me.length)>0&&(ue=Vt(me)),Ve(ue),B(me,ue),Ye(!1)},vi=c.default.useCallback(E>0?(0,d.debounce)(function(me){return Pt(me)},E):function(me){return Pt(me)},[A]),oi=function(me){Y(),k(me),Me(me[q]),Ze(0)},Vt=function(me){return Te.search(me,{limit:K}).map(function(ue){return t({},ue.item)}).slice(0,K)},yn=function(me){var ue=me.target,be=ue.value;Me(be),vi(be),Ye(!0),yt&&se(!1)},Y=function(){Ve([]),se(!0)},pe=function(me){var ue=me.index,be=me.event,tt=-1,ut=function(gt){Ze(gt),Ie!=null&&Ie[gt]&&G(Ie[gt])};if(ue!==void 0)Ze(ue),Ie!=null&&Ie[ue]&&G(Ie[ue]);else if(be)switch(be.key){case"Enter":Ie.length>0&&Ie[Fe]?(be.preventDefault(),k(Ie[Fe]),Me(Ie[Fe][q]),B(Ie[Fe][q],Ie)):B(Be,Ie),Ze(-1),Y();break;case"ArrowUp":be.preventDefault(),tt=Fe>-1?Fe-1:Ie.length-1,ut(tt);break;case"ArrowDown":be.preventDefault(),tt=Fe<Ie.length-1?Fe+1:-1,ut(tt);break}};return(0,a.jsx)(u.ThemeProvider,t({theme:le},{children:(0,a.jsx)(_,t({className:$},{children:(0,a.jsxs)("div",t({className:"wrapper"},{children:[(0,a.jsx)(g.default,{searchString:Be,setSearchString:yn,eraseResults:Y,autoFocus:ie,onFocus:Ht,onClear:H,placeholder:z,showIcon:Q,showClear:V,setHighlightedItem:pe,maxLength:D}),(0,a.jsx)(m.default,{results:Ie,onClick:oi,setSearchString:Me,showIcon:Q,maxResults:K,resultStringKeyName:q,formatResult:ge,highlightedItem:Fe,setHighlightedItem:pe,showNoResultsFlag:xt,showNoResultsText:De})]}))}))}))}n.default=v;var _=u.default.div(x||(x=e([`
  position: relative;

  height: `,`;

  .wrapper {
    position: absolute;
    display: flex;
    flex-direction: column;
    width: 100%;

    border: `,`;
    border-radius: `,`;

    background-color: `,`;
    color: `,`;

    font-size: `,`;
    font-family: `,`;

    z-index: `,`;

    &:hover {
      box-shadow: `,`;
    }
    &:active {
      box-shadow: `,`;
    }
    &:focus-within {
      box-shadow: `,`;
    }
  }
`],[`
  position: relative;

  height: `,`;

  .wrapper {
    position: absolute;
    display: flex;
    flex-direction: column;
    width: 100%;

    border: `,`;
    border-radius: `,`;

    background-color: `,`;
    color: `,`;

    font-size: `,`;
    font-family: `,`;

    z-index: `,`;

    &:hover {
      box-shadow: `,`;
    }
    &:active {
      box-shadow: `,`;
    }
    &:focus-within {
      box-shadow: `,`;
    }
  }
`])),function(y){return parseInt(y.theme.height)+2+"px"},function(y){return y.theme.border},function(y){return y.theme.borderRadius},function(y){return y.theme.backgroundColor},function(y){return y.theme.color},function(y){return y.theme.fontSize},function(y){return y.theme.fontFamily},function(y){return y.theme.zIndex},function(y){return y.theme.boxShadow},function(y){return y.theme.boxShadow},function(y){return y.theme.boxShadow}),x})(AU);var Bte=Ot&&Ot.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(VE,"__esModule",{value:!0});var YU=VE.ReactSearchAutocomplete=void 0,Dte=Bte(AU);YU=VE.ReactSearchAutocomplete=Dte.default;function Lte({optionsArray:n,callBack:e}){L.useEffect(()=>{},[]);let t=[];if(n[0]&&typeof n[0]!="object"){t=[];let l=0;for(let c of n)t.push({id:l,name:c}),l++}return W("div",{className:"search-box-wrap",children:W(YU,{items:t,onSearch:(l,c)=>{Pn({Searching:l})},onHover:l=>{},onSelect:l=>{Pn({SearchResultClicked:l}),e(l)},onFocus:()=>{Pn({SearchBox:"focussed"})},inputProps:{defaultValue:""},autoFocus:!0,formatResult:l=>W(wn,{children:W("span",{className:"search-option",children:l.name})})})})}const Ote={hashtags:[],creators:[]},kte={square:0,rectangle:0,single:0,outside:0},Fs={w:10.41,h:21.72};function Fte(n,e){const t=e!="off";for(let i of n.current)if(i&&typeof i=="object"&&i.hasOwnProperty("isObject3D")){const r=i.getObjectByName("edit_btns");r.visible=t}}const RS=[];function Ute({editorCallBack:n,visualData:e,numOptions:t,colorOptions:i}){const[r,s]=L.useState(e),[o,a]=L.useState(e.displayColor);if(L.useEffect(()=>{s(e),a(e.displayColor)},[e]),t||(t=8),!i){i=[];for(let _=0;_<t;_++)i.push(HA())}const[l,c]=L.useState(i),u=_=>{a(_),r.displayColor=_,Pn({ColorSwatchClick:_}),n(r,{type:"display:ColorOptions"})},f=_=>{let x=t,y=[];if(!!!_){y=[...l];let A=y.length;x=t-A}if(x>0)for(let A=0;A<x;A++){let C=HA();y.push(C)}RS.length=0;for(let A of y){let C=A.r+","+A.g+","+A.b;RS.push(C)}return y};let d=[];const m=()=>{if(d=[],o){let x=o.r+","+o.g+","+o.b;RS.indexOf(x)==-1&&(l[0]=o)}let _=0;for(let x of l){const y={backgroundColor:"#"+x.getHexString()};let S="change-color";o==x&&(S+=" active");const A=W("li",{children:W("a",{onClick:C=>{u(x)},className:S,children:W("i",{style:y})})},`color-op-${_}`);d.push(A),_++}return d};L.useEffect(()=>{g()},[e.displayColor]);function g(){let _=f(!1);c(_)}return Ge(wn,{children:[W("a",{id:"get-new-color-ops",onClick:_=>{Pn({ColorOptions:"generated_new_options"});let x=f(!0);c(x)},children:"genereer nieuwe opties"}),W("ul",{children:W(m,{})})]})}const Y0={creator:!1,hashtag:!1};function rM({dataType:n,visualData:e,callBack:t}){let i=n+"s";const[r,s]=L.useState(Ote[i]),[o,a]=L.useState(e&&e.hasOwnProperty("dataTag")?e.dataTag:""),[l,c]=L.useState([]),u=async x=>{const S=await(await fetch(`data/${x}.json`)).json();f(S)},f=x=>{Y0[n]=x,c(x)};L.useEffect(()=>{Y0[n]==!1?(Y0[n]="loading",console.log("loadSearchOptions",n),u(i)):c(Y0[n])},[]),L.useEffect(()=>{e&&e.hasOwnProperty("dataTag")&&a(e.dataTag)},[e]);const d=x=>{Pn({TagOptionsTab:"getRandOption"});let y=l[Math.floor(Math.random()*l.length)];m({name:y})},m=x=>{const y=[...r];y.indexOf(x.name)==-1&&(y.push(x.name),s(y),g(x.name))},g=x=>{a(x),Pn({TagOptionsTab:"setSelectedTag:"+x}),t({dataType:n,dataTag:x})},v=[];let _="random "+n;v.push(W("a",{className:`rand-btn set-${n}`,onClick:d,children:_},"tag-random")),e&&e.dataTag&&e.dataType==n&&e.dataTag!="*"&&r.indexOf(e.dataTag)==-1&&r.push(e.dataTag);for(let x of r){let y=`set-${n}`;x==o&&(y+=" active"),v.push(W("a",{className:y,"data-tag":x,onClick:()=>g(x),children:x},`tag-${x}`))}return W(wn,{children:l.length&&Ge("div",{className:"tag-ops-wrap",children:[W(Lte,{optionsArray:l,callBack:m}),W("div",{className:"ops-wrap",children:v})]})})}function Nte({dataType:n,visualData:e,callBack:t}){const[i,r]=L.useState([]);L.useEffect(()=>{let a=kc;e.hasOwnProperty("activeCats")&&e.activeCats!="*"&&(a=e.activeCats.split(",")),r(a)},[e]);const s=a=>{const l=[...i],c=a.target.checked,u=a.target.value;if(c)l.push(u);else{const d=l.indexOf(u);l.splice(d,1)}r(l);const f=l.length==kc.length?"*":l.join(",");Pn({updateActiveCats:f}),t({dataType:n,dataTag:"*",activeCats:f})},o=[];return kc.map(function(a,l){const c=i.indexOf(a)!=-1;o.push(W("li",{children:Ge("label",{children:[W("input",{onChange:s,type:"checkbox",name:"active-categories",value:a,checked:c}),a]})},`cat-op-${a}`))}),W("section",{className:"categories-select-wrap",children:W("ul",{children:o})})}function zte({editorCallBack:n,visualData:e}){const[t,i]=L.useState(e.dataType),[r,s]=L.useState(e);L.useEffect(()=>{i(e.dataType),s(e)},[e]);const o=u=>{let f=u.target.dataset.mode;Pn({SwappedTab:f});let d=!1;f=="categories"&&r.dataType!="categories"?(r.dataTag="*",d=!0,r.visType="DiamondsGrid",r.shapeType="DiamondsGridMini",delete r.displayColor):r.hasOwnProperty("dataType")&&f!=r.dataType&&(delete r.dataTag,delete r.visType,delete r.displayColor,d=!0),d&&(r.dataType=f,a(r)),i(f)},a=u=>{const f={...r,...u};n(f,{type:"data:EditorDataTabs"})},l=()=>{let u=[];for(let f in Ko){let d=Ko[f],m=d.variations.indexOf(t)!=-1?"active":"";const g=W("li",{children:W("a",{onClick:o,className:m,rel:`tab-${f}`,"data-mode":f,children:d.name})},`tab-${f}`);u.push(g)}return W("header",{children:W("ul",{children:u})})},c="tab";return Ge("div",{className:"tab-group",children:[W(l,{}),W("div",{className:c+(Ko.hashtag.variations.indexOf(t)!=-1?" active":""),id:"tab-hashtag",children:W(rM,{dataType:"hashtag",visualData:r,callBack:a})}),W("div",{className:c+(Ko.creator.variations.indexOf(t)!=-1?" active":""),id:"tab-creator",children:W(rM,{dataType:"creator",visualData:r,callBack:a})}),W("div",{className:c+(Ko.categories.variations.indexOf(t)!=-1?" active":""),id:"tab-categorie",children:W("div",{className:"categories-ops-wrap ops-wrap",children:W(Nte,{dataType:"categories",visualData:r,callBack:a})})})]})}function Gte({editorCallBack:n,visualData:e}){const[t,i]=L.useState(e),[r,s]=L.useState(e.visType),[o,a]=L.useState(e.shapeType);L.useEffect(()=>{i(e),s(e.visType),a(e.shapeType)},[e]);const l=Ko[e.dataType].visual_options,c=m=>{const g=m.target.dataset.vis;t.visType!=g&&(s(g),t.visType=g,Pn({setVisOption:g}),n(t,{type:"display:setVisOption"}))},u=m=>{const g=m.target.dataset.shape;t.shapeType!=g&&(a(g),t.shapeType=g,Pn({setShapeOption:g}),n(t,{type:"display:setShapeOption"}))};return Ge("div",{id:"visual-types-wrap",children:[W("h3",{children:"Soort visual"}),W(()=>{let m=[];for(let g of l){let v=r==g?"active":"",_=!0;if(v==""&&Sr[g].hasOwnProperty("max")){const x=Sr[g].max,y=Sr[g].shape;kte[y]>=x&&(_=!1)}if(_){const x=W("li",{children:W("a",{onClick:c,className:v,"data-vis":g})},`visual-option-${g}`);m.push(x)}}return W("ul",{className:`visual-options num-${l.length}`,children:m})},{}),W(()=>{if(NE(r)){let m=[];for(let g of _y[r]){let v=o==g?"active":"";const _=W("li",{children:W("a",{onClick:u,className:v,"data-shape":g})},`visual-option-${g}`);m.push(_)}return Ge("div",{id:"visual-shape-ops-wrap",children:[W("h3",{children:"Kies een vorm"}),W("ul",{className:`shape-options num-${l.length}`,children:m})]})}},{})]})}function Hte({editorCallBack:n,visualData:e}){const[t,i]=L.useState(e),[r,s]=L.useState(e.shapeType);L.useEffect(()=>{i(e),s(e.shapeType)},[e]);const o=Ko[e.dataType].grid_options,a=Object.keys(o).length,l=u=>{t.visType="DiamondsGrid";const f=u.target.dataset.grid;t.shapeType!=f&&(s(f),t.shapeType=f,Pn({GridSizeSelect:f}),n(t,{type:"display:GridSizeSelect"}))};return Ge("div",{id:"grid-types-wrap",children:[W("h3",{children:"Grid Grootte"}),W(()=>{let u=[];for(let f in o){let d=o[f],m=r==d?"active":"";const g=W("li",{children:W("a",{onClick:l,className:m,"data-grid":d,children:f})},`grid-option-${d}`);u.push(g)}return W("ul",{className:`grid-options num-${a}`,children:u})},{})]})}function Vte(n){let e=!1;return n.hasOwnProperty("visType")&&NE(n.visType)?zE(n.visType,n.shapeType)&&n.displayColor&&(e=!0):n.displayColor&&(e=!0),e}function BI(n,e){let t=!1;switch(n){case"color":e.dataType=="categories"&&e.visType?t=!0:e.visType&&(e.shapeType||!NE(e.visType))&&(t=!0,zE(e.visType,e.shapeType)||(t=!1));break;case"speed":e.hasOwnProperty("displayColor")&&(t=!0);break}return t}const Wte=({label:n,value:e,options:t,onChange:i})=>Ge("label",{children:[n,W("select",{value:e,onChange:i,children:t.map(r=>W("option",{value:r.value,children:r.label},`select-op-${r.value}`))})]}),jte=({name:n,value:e,options:t,onChange:i})=>{const r=[];return t.map(function(s,o){let a=e==s.value?"checked":"";r.push(Ge("label",{children:[W("input",{name:n,checked:a,onChange:i,type:"radio",value:s.value})," ",s.label," "]},`cb-op-${s.value}`))}),W("div",{className:"radio-group-wrap",children:r})},DI=({label:n,value:e,onChange:t})=>Ge("label",{children:[W("input",{type:"checkbox",checked:e,onChange:t}),n]});function Jte({visualData:n,editorCallBack:e}){const[t,i]=L.useState(n),[r,s]=L.useState(0);L.useEffect(()=>{i(n)},[n]);const o={textDisplayTag:!0,textDisplayPos:"top",textDisplayStats:!0,textStatsType:"minmax"};for(let g in o)t.hasOwnProperty(g)||(t[g]=o[g]);t.dataType=="creator";const a=g=>{let v=!t[g];t[g]=v,i(t),s(r+1),console.log("handletextDisplayTagChange",v,t[g])},l=[{value:"top",label:"Boven"},{value:"bot",label:"Onder"},{value:"right",label:"Rechts"},{value:"left",label:"Links"}],c=g=>{let v=g.target.value;t.textDisplayPos=v,i(t)},u=g=>{let v=g.target.value;t.textStatsType=v,i(t),s(r+1)};let f=!1,d=t.visType?t.visType:n.visType;d&&(f=Sr[d].txtSettings.statsOptions.length>1);const m=[{value:"minmax",label:"Min & Max waardes"},{value:"day",label:"Aantal per dag"}];return Ge("div",{className:"text-inputs-wrap",children:[W(DI,{label:"Toon Tekst",value:t.textDisplayTag,onChange:g=>{a("textDisplayTag")}}),t.textDisplayTag&&Ge(wn,{children:[W("div",{className:"text-position-setter",children:W(Wte,{label:"Positie",options:l,value:t.textDisplayPos,onChange:c})}),W(DI,{label:"Toon Stats",value:t.textDisplayStats,onChange:g=>{a("textDisplayStats")}}),t.textDisplayStats&&f&&W(jte,{name:"set-stats-type",options:m,value:t.textStatsType,onChange:u})]})]})}function Xte({visualIndex:n,visualData:e,callBack:t,editorMode:i}){const[r,s]=L.useState(e),[o,a]=L.useState({...e}),[l,c]=L.useState("");L.useEffect(()=>{i=="add"&&(e={}),a({...e}),s(e)},[e,i]);const u=i=="edit"?"Aanpassen":"Toevoegen",f=i=="edit"?"aanpassen":"selecteren",d=i=="edit"?"aanpassen":"selecteren";let m="";(i=="edit"||i=="add")&&(m="shown"),L.useRef(),o&&o.hasOwnProperty("displaySpeed")&&o.displaySpeed;const g=(te,oe)=>{console.log("editType",oe),a(te),N(oe.type),c(oe.type)};let v=i$(o),_=r$(o);const x=!1;let y=BI("color",o);BI("speed",o);let S=Vte(o);const A=()=>{qq(o),Pn({CommitVisual:i}),t({editorMode:i,curVisualData:o}),a({}),i=""},C=u=="Aanpassen"?"Wijzigingen Opslaan":"VISUAL TOEVOEGEN",b=L.useRef(),P=L.useRef(),E=L.useRef(),R=[b,P,E];let B=i=="edit"?"hidden":"",O=(i=="edit",""),G=(i=="edit","");function N(te){i=="edit"&&te.indexOf("display:")!=-1&&k("data","off")}function k(te,oe){if(i=="add")return!1;let H,J;if(te=="data"?H=b:te=="visual"?H=P:te=="type"&&(H=E),J=H.current.classList.contains("hidden")?"":"hidden",oe&&(J=oe=="off"?"hidden":""),J==""){if(H.current.classList.remove("hidden"),i=="edit")for(let Q of R)Q!=H&&Q.current.classList.add("hidden")}else H.current.classList.add("hidden")}let X=!1;return o.hasOwnProperty("visType")&&i=="edit"&&Sr[o.visType].txtSettings&&(X=!0),Ge("div",{id:"editorOutput",className:m,children:[W("header",{children:Ge("h1",{children:["Visual ",u]})}),Ge("section",{ref:b,id:"data-input",className:B,children:[Ge("h2",{onClick:te=>k("data"),children:["Data input ",W("em",{children:f})," "]}),W("div",{className:"editor-section-wrap",children:W(zte,{editorCallBack:g,visualData:o})})]}),o.hasOwnProperty("dataTag")&&Ge("section",{ref:P,id:"data-display",className:O,children:[Ge("h2",{onClick:te=>k("visual"),children:["Visuele output ",W("em",{children:d})]}),Ge("div",{className:"editor-section-wrap",children:[v&&W(Gte,{editorCallBack:g,visualData:o}),_&&W(Hte,{editorCallBack:g,visualData:o}),y&&Ge("div",{id:"color-wrap",children:[Ge("h3",{children:[W("i",{})," Kleur"]}),W(Ute,{visualData:o,editorCallBack:g,numOptions:9})]}),x]})]}),X&&Ge("section",{ref:E,id:"type-display",className:G,children:[Ge("h2",{onClick:te=>k("type"),children:["Tekst ",W("em",{children:"instellingen"})]}),W("div",{className:"editor-section-wrap",children:W(Jte,{visualData:o,editorCallBack:g})})]}),S&&W("button",{id:"submit-data-visual",onClick:A,children:C})]})}const LI={DayBoxes:{name:"Dag Pieken",desc:Ge("div",{children:[W("p",{children:"Dit grid bestaat uit 10 bij 10 vormen die zijn geplaatst op de telefoonhoes. Elke dag van de 100 dagen heeft dus een vorm. "}),W("p",{children:"De hoogte van elke vorm wordt bepaalt door hoe vaak de gekozen hashtag trending was op de corresponderende dag."}),W("p",{children:"Linksboven is dag 1, rechtsonder is dag 100."})]})},DayHeightMap:{name:"Tijdstippen Terrein",desc:Ge("div",{children:[W("p",{children:"De data is 100 dagen lang 100 keer per dag binnengehaald."}),W("p",{children:"Dit terrein-grid bestaat uit 100 punten die corresponderen met een tijdstip op de dag, het grid wordt per dag aangepast."}),W("p",{children:"De hoogte van elk punt op het grid wordt bepaald door hoe vaak een hashtag trending was op dat moment van de dag."}),W("p",{children:"Linksboven is de start van de dag, 00:00, en rechtsonder het eind, ongeveer 23:57."})]})},DiamondsGrid:{name:"Diamantjes grid",desc:Ge("div",{children:[W("p",{children:"Dit grid bestaat uit 100 of 10.000 diamantjes. Ze hebben verschillende kleuren, elke kleur vertegenwoordigd een geselecteerde categorie video's."}),W("p",{children:"Hoe populairder een categorie op een dag was, hoe meer diamantjes die kleur hebben."})]})},PopSocket:{name:"PopSocket",desc:W("div",{children:W("p",{children:"De grootte van de gekozen vorm op de popsocket wordt bepaald door hoe vaak een hashtag op die dag is trending was, of hoeveel volgers een account op die dag had."})})},BigSingleShape:{name:"Bling",desc:W("div",{children:W("p",{children:"De grootte van de gekozen vorm wordt bepaald door hoe vaak een hashtag op die dag is trending was, of hoeveel volgers een account op die dag had."})})},CreatorHeightmap:{name:"TrendBerg",desc:Ge("div",{children:[W("p",{children:"Deze visual laat het aantal volgers zien die de gekozen account had op elk moment dat een video van hen op de trending pagina kwam."}),W("p",{children:"Sommige accounts zijn enorm gegroeid in de 100 dagen, sommige zijn het ongeveer hetzelfde gebleven en sommige accounts hebben volgers verloren in die periode."}),W("p",{children:"Linksboven is dag 1, rechtsonder is dag 100"})]})},DiamondsRing:{name:"Rand versieringen",desc:Ge("div",{children:[W("p",{children:"100 vormpjes zijn geplaatst langs de rand van de telefoon."}),W("p",{children:"De grootte van elk vormpje wordt bepaald door hoe vaak een hashtag op die dag trending was, of hoeveel volgers een account op die dag had."}),W("p",{children:"Dag 1 start linksboven, en de dagen erna zijn met de klok mee rondom geplaatst."})]})}};function Yte({visualData:n}){const e=n.visType;if(LI.hasOwnProperty(e)){const t=LI[e];return Ge("div",{id:"visual-desc-wrap",children:[W("i",{className:e}),W("h2",{children:t.name}),t.desc]})}}const KU={0:"14 Feb",1:"15 Feb",2:"16 Feb",3:"17 Feb",4:"18 Feb",5:"19 Feb",6:"20 Feb",7:"21 Feb",8:"22 Feb",9:"23 Feb",10:"24 Feb",11:"25 Feb",12:"26 Feb",13:"27 Feb",14:"28 Feb",15:"1 Mar",16:"2 Mar",17:"3 Mar",18:"4 Mar",19:"5 Mar",20:"6 Mar",21:"7 Mar",22:"8 Mar",23:"9 Mar",24:"10 Mar",25:"11 Mar",26:"12 Mar",27:"13 Mar",28:"14 Mar",29:"15 Mar",30:"16 Mar",31:"17 Mar",32:"18 Mar",33:"19 Mar",34:"20 Mar",35:"21 Mar",36:"22 Mar",37:"23 Mar",38:"24 Mar",39:"25 Mar",40:"26 Mar",41:"27 Mar",42:"28 Mar",43:"29 Mar",44:"30 Mar",45:"31 Mar",46:"1 Apr",47:"2 Apr",48:"3 Apr",49:"4 Apr",50:"5 Apr",51:"6 Apr",52:"7 Apr",53:"8 Apr",54:"9 Apr",55:"10 Apr",56:"11 Apr",57:"12 Apr",58:"13 Apr",59:"14 Apr",60:"15 Apr",61:"16 Apr",62:"17 Apr",63:"18 Apr",64:"19 Apr",65:"20 Apr",66:"21 Apr",67:"22 Apr",68:"23 Apr",69:"24 Apr",70:"25 Apr",71:"26 Apr",72:"27 Apr",73:"28 Apr",74:"29 Apr",75:"30 Apr",76:"1 Mei",77:"2 Mei",78:"3 Mei",79:"4 Mei",80:"5 Mei",81:"6 Mei",82:"7 Mei",83:"8 Mei",84:"9 Mei",85:"10 Mei",86:"11 Mei",87:"12 Mei",88:"13 Mei",89:"14 Mei",90:"15 Mei",91:"16 Mei",92:"17 Mei",93:"18 Mei",94:"19 Mei",95:"20 Mei",96:"21 Mei",97:"22 Mei",98:"23 Mei",99:"24 Mei"};function Kte({visualMode:n,creatorName:e}){return W("header",{className:n,children:Ge(wn,{children:[W("div",{className:"pic"}),Ge("h3",{children:["@",e]})]})})}function Qte({grid:n,playBackSpeed:e,visualID:t,phoneDaySynced:i}){const[r,s]=L.useState(0);L.useEffect(()=>{const v=ht.day;s(v)},[t]);const o=n.followers[r],a=n.hearts[r],l=n.num_vids[r];e||(e=10);let c=r,u=-1;E1(v=>{c=ht.day,u!=c&&(u=c,s(c))});let d=r+1;const g=o$(l,0,6);return Ge("div",{className:"stats-wrap",children:[W("div",{className:"day-counter",children:W("span",{children:d})}),Ge("ul",{children:[Ge("li",{children:[W("span",{children:Uf(o,1)}),W("label",{children:"Followers"})]},"stats-numFollowers"),Ge("li",{children:[W("span",{children:Uf(a,1)}),W("label",{children:"Likes"})]},"stats-numHearts"),Ge("li",{children:[W("span",{children:l}),W("label",{children:"Videos"})]},"stats-numVideos")]}),W(Zte,{numVids:g})]})}function Zte({numVids:n}){const[e,t]=L.useState(n);L.useEffect(()=>{t(n)},[n]);const i=[];for(let r=0;r<e;r++){const s=W("div",{className:"vid-ph",children:W("div",{children:W("i",{})})},`vid-${r}`);i.push(s)}return W("div",{className:"vids-display",children:i})}function qte(){return Ge("div",{className:"btns-wrap",children:[W("button",{children:"Follow"}),W("button",{className:"options",children:""})]})}function $te({grid:n,tag:e,playBackSpeed:t,visualID:i,phoneDaySynced:r}){let s=ht.day;const[o,a]=L.useState(s);t||(t=20);const l=L.useRef();let c=-1;E1(y=>{const S=l.current;if(S){c!=ht.day&&(a(ht.day),c=ht.day,o==0&&(S.scrollTop=0));const A=S.offsetHeight,C=S.scrollHeight;A*2<C&&(S.scrollTop+=10),S.scrollTop+A>=C&&(S.scrollTop=0)}});let u=o+1;const f=W("div",{className:"day-counter",children:W("span",{children:u})});let d=n.hasOwnProperty("num_per_day")?n.num_per_day[o]:!1;d||(d=0);const g=`https://www.google.com/search?q=${e}+${(()=>{const y={Feb:"February",Mar:"March",Apr:"April",Mei:"May"};let S=KU[ht.day];for(let A in y)S.indexOf(A)!=-1&&(S=S.replace(A,y[A]));return S+=" 2023",S.replaceAll(" ","+")})()}`,_=Ge("h1",{children:[Ge("strong",{children:["#",e]})," - ",d,"  trending ",W("a",{target:"_blank",title:"Zoek op Google",href:g,id:"google-btn",children:"google"})]}),x=n.hasOwnProperty("day_videos")?n.day_videos[o]:[];return Ge("div",{className:"hashtag-page",children:[f,_,W("div",{ref:l,className:"vids-display",children:W(ene,{videoIDs:x,videoData:n.videos,tag:e})})]})}function ene({videoIDs:n,videoData:e,tag:t}){const i=[];return n&&n.length>0&&n.map(function(s,o){if(o<20){const a=e[s],l=Ge("div",{className:"vid-ph",children:[W("div",{children:W("i",{})}),Ge("div",{className:"desc-wrap",children:["#",t," ",a.d]}),Ge("div",{className:"author-wrap",children:[W("i",{})," ",a.a]}),Ge("div",{className:"likes-wrap",children:[W("i",{})," ",Uf(a.l)]})]},`vid-display-${s}-${o}`);i.push(l)}}),i}function tne({grid:n,visualID:e,phoneDaySynced:t,playBackSpeed:i,activeCats:r}){let s=ht.day;const[o,a]=L.useState(s);r!="*"&&(r=r.split(",")),(r=="*"||r.length==kc.length)&&(r=kc),i||(i=20);const c=L.useRef([]);L.useEffect(()=>{a(s)},[e]);const{CategoryBoxes:u,CatBoxIndexes:f}=L.useMemo(()=>{const _=[],x={};for(let y in ea){const S=ea[y].name;if(r.indexOf(S)!=-1){let A="efefef";ea[S].hasOwnProperty("material")&&(A=ea[S].material.color.getHexString());const C={backgroundColor:"#"+A},b=Ge("li",{className:"catButton",ref:P=>c.current[y]=P,children:[W("i",{style:C}),S,Ge("div",{className:"stat-no",children:[W("span",{})," ",W("small",{})]})]},`catbtn-${S}`);_.push(b),x[S]=y}}return{CategoryBoxes:_,CatBoxIndexes:x}},[e,r]);let d=o,m=-1;E1(_=>{d=ht.day,m!=d&&(a(d),m=d)}),(()=>{const _=n[o];let x={};for(let y in _)x[_[y].name]=y;for(let y of kc){let S=f[y],A=x[y];if(_[A]&&c.current[S]){let C=_[A],b=c.current[S].children[1],P=b.children[0],E=b.children[1];P.innerHTML=C.amount,E.innerHTML="("+C.percentage.toFixed(2)+"%)"}}})();const v=o+1;return Ge("div",{className:"categories-wrap",children:[W("div",{className:"day-counter",children:W("span",{children:v})}),W("h2",{children:"Trending videos per categorie"}),W("ul",{children:u})]})}function nne({visualMode:n,visualData:e,playBackSpeed:t,phoneDaySynced:i}){const r=[];return Pn({InfoPageDisplay:n}),n=="creator"?(r.push(W(Kte,{visualMode:n,creatorName:e.dataTag},"phone-header")),r.push(W(Qte,{playBackSpeed:t,grid:e.grid,visualID:e.visualID,phoneDaySynced:i},"creator-stats")),r.push(W(qte,{},"creator-btns"))):n=="hashtag"?r.push(W($te,{grid:e.grid,visualID:e.visualID,phoneDaySynced:i,tag:e.dataTag,playBackSpeed:t},"hashtag-page")):n=="categories"&&r.push(W(tne,{activeCats:e.activeCats,grid:e.grid,visualID:e.visualID,phoneDaySynced:i,playBackSpeed:t},"categories-page")),r}function ine({visualIndex:n,visualData:e,callBack:t}){let i="";n>=0&&(i="shown");const[r,s]=L.useState(n),o=Object.keys(e).length>0;L.useEffect(()=>{s(n)},[r]);const a={data:"Data input",visual:"Over de visual"},[l,c]=L.useState("data"),u=y=>{let S=y.target.dataset.mode;c(S)},f=()=>{let y=[];for(let S in a){let A=a[S],C=l==S?"active":"";const b=W("li",{children:W("a",{onClick:u,className:C,rel:`tab-${S}`,"data-mode":S,children:A})},`info-tab-${S}`);y.push(b)}return W("div",{id:"info-page-tabs-wrap",children:W("ul",{children:y})})};let d=o?e.grid:null;const[m,g]=L.useState(d);let v="none";if(o){let y=e.dataType;v=y.indexOf("creator")!=-1?"creator":"hashtag",(y.indexOf("categories")!=-1||y=="reset4Cats")&&(v="categories")}const _=o?e.displaySpeed:1,x=o?Ff.hasOwnProperty(e.visualID):!1;return W(wn,{children:W("div",{className:`phoneFrontInfo ${i} mode-${v}`,children:W("div",{className:"shapeSetter",children:Ge("div",{className:"inner",children:[W(f,{}),l=="data"&&W(nne,{visualMode:v,grid:m,phoneDaySynced:x,visualData:e,playBackSpeed:_}),l=="visual"&&W(Yte,{visualData:e})]})})})})}function rne({callBack:n}){Ff.hasOwnProperty(bv);const e=L.useRef({}),t=W("p",{children:"Sinds je bent begonnen is elke actie van je bijgehouden. Dit is jouw profiel data:"}),i={0:{id:"uac-box-01",keys:{adds:"Toegevoegd",edits:"Aangepast",deletes:"Verwijderd",info:"Info geklikt",drags:"Hoesje gedraaid"}},1:{id:"uac-box-02",keys:{hashtags:"Hashtags gekozen",searches:"Gezocht",creators:"Accounts gekozen",randomTags:"Random Items",categories:"Categorien gekozen",swatchesGenerated:"Kleuren gegenereerd"}},2:{id:"uac-box-03",keys:{visType_DayBoxes:"Visual gekozen",visType_DiamondsRing:"Visual gekozen",visType_DayHeightMap:"Visual gekozen",visType_PopSocket:"Visual gekozen",visType_CreatorHeightmap:"Visual gekozen",visType_DiamondsGrid:"Visual gekozen"}},3:{id:"uac-box-04",title:"Gekozen Vormen",keys:{shapeType_cube:"",shapeType_piramid:"",shapeType_capsule:"",shapeType_diamond:"",shapeType_emerald:"",shapeType_heart:"",shapeType_flower:"",shapeType_rose:"",shapeType_skull:""}}},r=L.useMemo(()=>{let l=[];for(let c in i){const u=i[c];let f=u.hasOwnProperty("title")?W("h3",{children:u.title}):"",d=[],m=u.keys;for(let v in m){let _=m[v],x=_==""?"":W("label",{children:_});const y=Ge("li",{children:[W("i",{className:v}),x,W("kbd",{ref:S=>e.current[v]=S,children:"0"})]},`box-icon-${v}`);d.push(y)}const g=Ge("div",{id:u.id,children:[f,W("ul",{children:d})]},u.id);l.push(g)}return l},[]);let s=-1;E1(l=>{if(Ff.hasOwnProperty(bv)){let c=Ff[bv];if(c!=s){s=c;const u=e.current,f=Oc.frames.length>0?Oc.frames[c]:[];for(let d in u){const m=u[d];m.innerHTML=f.hasOwnProperty(d)?f[d]:0}}}});const o=L.useRef();return Ge("div",{id:"user-profile-wrap",children:[W("header",{children:W("h1",{children:"Jouw Profiel"})}),t,r,W("button",{id:"clearUserData",onClick:()=>{if(confirm("Are you sure?")){Oc.frames=[];for(let l in Kc)delete Kc[l]}o.current.classList.add("unavailable")},ref:o,children:"Verwijder mijn profiel data"})]})}let sM=!1;function sne({callBack:n,label:e}){L.useState(0);const t=L.useRef(),i=10;return L.useEffect(()=>{let r=Object.keys(Kc).length;!sM&&r>=i&&(sM=!0,t.current.classList.add("available"))},[Object.keys(Kc).length]),W("button",{id:"profileShow",ref:t,onClick:n,children:e})}function one(){return Ge("div",{className:"start-screen",children:[W("i",{id:"daysofdatalogo"}),Ge("div",{className:"intro-text",children:[Ge("p",{children:["100 dagen lang werd 100 keer per dag",W("br",{}),"de data van alle trending videos op TikTok in Nederland opgeslagen. "]}),W("p",{children:"De data van alle gebruikte hashtags, de makers die de videos hebben gemaakt en de categorien van de videos werd opgeslagen in een grote database."}),W("p",{children:"Gebruik deze tool om diverse visualisaties te maken van deze data op het telefoonhoesje aan de rechterkant."}),W("p",{children:"Klik op + Data Visual om te beginnen :)"})]})]})}function ane({displayMode:n,visualIndex:e,visualData:t,callBack:i,controlI:r}){const[s,o]=L.useState(n),[a,l]=L.useState(e),[c,u]=L.useState(!1),f=b=>{u(!c)};let d=c?"collapsed":"open";L.useEffect(()=>{o(n),l(e)},[r,n]);const m=()=>{i("start",-1,{})};let g="shown";const v=()=>{sM&&(Pn({clicked:"showProfile"}),i("profile",-1,{}))},_=()=>{s!="add"&&(Object.keys(en).length,Pn({clicked:"addVisual"}),i("set2add",e,{}))},x=n=="profile"?"Terug":"Profiel",y=b=>{i(b.editorMode,e,b.curVisualData)},S=b=>{setvisual2Info(-1)},C=["edit","add","set2add"].indexOf(s)!=-1;return W(wn,{children:Ge("div",{className:`phoneFront ${g} mode-${s}`,children:[W("a",{id:"closer",onClick:m,children:""}),W("div",{className:"shapeSetter",children:Ge("div",{className:"inner",children:[s=="info"&&W(ine,{visualIndex:e,visualData:t,callBack:S}),s=="start"&&W(one,{}),C&&W(Xte,{editorMode:s,visualIndex:e,visualData:t,callBack:y}),s=="profile"&&W(rne,{callBack:y}),Ge("div",{id:"bottom-buttons",className:d,children:[W(sne,{callBack:v,label:x}),W("button",{id:"visualAdd",onClick:_,children:Ge("span",{children:[W("i",{children:"+"})," Datavisual"]})}),W("button",{id:"toggleButtonRow",onClick:f})]})]})})]})})}const Eo="/models/phone/phoneBack.gltf";zn.legacyMode=!1;function lne({setRef:n}){const{nodes:e}=Ki(Eo);let t=e.phoneBack.geometry,i=[Math.PI*-.5,0,0];return W("group",{name:"PhoneBackBase",position:[0,0,-1.05],ref:n,rotation:i,scale:[1,1,1],children:W("mesh",{receiveShadow:!0,name:"phoneBackMesh",geometry:t,material:l$})})}const cne=new nn({color:0}),une=new nn({color:16711759}),fne=new nn({color:63214});function hne(){const{nodes:n}=Ki(Eo);let e=n.TT_BLACK.geometry,t=n.TT_RED.geometry,i=n.TT_BLUE.geometry;const r=L.useRef();L.useState(()=>(Math.random()+.2)*(Math.random()<.5?-1:1)),Yr(o=>{const a=o.clock.getElapsedTime();let l=Math.sin(a*4);r.current.rotation.y=l/10});const s=.7;return Ge("group",{ref:r,castShadow:!0,name:"tiktokLogo",scale:[s,s,s],"rotation-z":Math.PI*-1,position:[0,1.1,2],children:[W("mesh",{name:"ttblack",geometry:e,material:cne,position:[0,0,1]}),W("mesh",{name:"ttred",geometry:t,material:une,position:[0,.2,1]}),W("mesh",{name:"ttblue",geometry:i,material:fne,position:[0,.2,1]})]})}function dne(){const{nodes:n}=Ki(Eo);return n.ICON_edit.geometry}function pne(){const{nodes:n}=Ki(Eo);return n.ICON_info.geometry}function mne(){const{nodes:n}=Ki(Eo);return n.ICON_delete.geometry}function gne(){const{nodes:n}=Ki(Eo);return n.ICON_move.geometry}function vne(){const{nodes:n}=Ki(Eo);return n.ICON_scale_up.geometry}function yne(){const{nodes:n}=Ki(Eo);return n.ICON_scale_down.geometry}function oM(n){console.log("shape to get: ",n);const{nodes:e}=Ki(Eo);return e.hasOwnProperty(n)||(n="flower"),e[n].geometry}Ki.preload(Eo);const _ne=new Pl({color:16777215,wireframe:!0,transparent:!0,opacity:.1}),OI=10,xne=10,Cf={cube:{relYVertices:[4,10,16,22,25,28,31,34]},piramid:{relYVertices:[25,28,31,34]},capsule:{relYVertices:[1,4,7,10,13,16,19,22,25,28,34,37,40,43,46,49,52,55,58,64,67,70,73,76,79,82,88,91,94,97,100,103,106,109,112,115,118,124,127,130,133,136,142,145,148,151,154,157,160,163,166,169,172,175,178,184,187,190,196,199,202,205,208,211,214,217,220,223,226,229,232,235,238,244,250,253,256,259,262,265,268,271,274,277,280,283,286,289,292,295,298,304,307,310,313,316,319,322,325,328,334,337,340,343,346,349,352,358,361,364,367,370,373,376,379,382,385,388,394,397,400,403,406,412,415,418,421,424,427,430,433,436,439,442,445,448,454,457,460,466,469,472,475,478,481]},diamond:{relYVertices:[1,4,7,10,13,16,19,22,25,28,34,37,40,43,46,49,52,55,58,64,67,76,79,82,85,88,97,100,103,106,109,115,118,121,124,127,130,133,136,139,142,145,151,154]},brilliant:{relYVertices:[1,4,7,10,13,16,19,22,25,52,55,58,61,64,67,70,73,100,103,106,109,112,115,118,121,148,151,154,157,160,163,166,169,172,175,178,181,184,187,190,193,196,199,202,205,208,211,214,217]},emerald:{relYVertices:[52,70,13,67,64,19,10,43,40,16,37,22,73,145,61,58,76,34,31,142,139,55,49,127,130,28,25,133,136,46,4,7,1]},heart:{relYVertices:[1,4,7,31,34,37,40,43,46,49,52,55,58,61,64,67,79,82,88,91,94,97,100,103,106,109,112,115,118,121,124,127,130,133,151,154]}};function IS({lerpIncr:n,ref2Set:e,grid:t,dayFrame:i,reset:r,shapeType:s,scaleMultiplier:o}){let a=e.current[i],l=Cf[s].relYVertices,c=Cf[s].initYs;if(a){let d=a.children,m=t.hasOwnProperty(i)?t[i]:0;r&&(m=0);for(let g of d){const v=g.geometry.getAttribute("position");for(let _ of l){let x=m;x=x*o,x+=c[_];let y=_+0;var u=new j(v.array[y-1],v.array[y],v.array[y+1]),f=new j(v.array[y-1],x,v.array[y+1]);u.lerp(f,n),v.array[y]=u.y}v.needsUpdate=!0}}}function Sne(n,e){if(Cf.hasOwnProperty(n)&&!Cf[n].hasOwnProperty("initYs")){let t=[],i=e.getAttribute("position"),r=Cf[n].relYVertices;for(let s of r)t[s]=i.array[s];Cf[n].initYs=t}}const kI=0;function wne({index:n=0,dayData:e={},meshGeom:t,ref2Set:i,boxMat:r,shapeType:s}){let o=n%OI,a=Math.floor(n/OI);o+=o*kI,a+=a*kI,a=9-a,Math.floor(n/10)%2===0&&(o=9-o);const f=t.clone().geometry.clone();return W("group",{name:"dayCubeWrap",ref:d=>i.current[n]=d,position:[o,0,a],children:W("mesh",{name:"dayCubeBase",receiveShadow:!0,castShadow:!0,geometry:f,material:r,position:[0,0,0]})})}function Ane({grid:n,meshGeom:e,boxMat:t,shapeType:i,playBackSpeed:r,visualID:s}){let o=[];const a=L.useRef([]),l=n.num_per_day,c=new Ln(e,_ne);for(let b in l){let P=parseInt(b),E=l[b]/xne;o.push(W(wne,{dayData:E,index:P,boxMat:t,meshGeom:c,ref2Set:a,shapeType:i},P))}const u=99;let f=0,d=-1,m=ht.day;const g=au(l,!0);n=g.gridArray;const x=7/g.max;Yr(b=>{b.clock.getElapsedTime(),f++;let E=f%r/r;E==0&&(E=1),IS({lerpIncr:E,ref2Set:a,grid:l,dayFrame:m,reset:!1,shapeType:i,scaleMultiplier:x}),d!=ht.day&&(ht.day-d!=1&&y(ht.day),d=ht.day,m=ht.day,m==0&&S())});function y(b){for(let P=0;P<=u;P++)if(P!=b){let E=P>b;IS({lerpIncr:1,ref2Set:a,grid:l,dayFrame:P,reset:E,shapeType:i,scaleMultiplier:x})}}function S(){let b=u-0;for(let P=b;P>=0;P--)IS({lerpIncr:1,ref2Set:a,grid:l,dayFrame:P,reset:!0,shapeType:i,scaleMultiplier:x})}const A=new Vn(10,.001,10),C=new nn({color:16711935,transparent:!0,opacity:0});return Ge("group",{name:"vis_type_wrapper",position:[-9.5,0,-9.5],children:[o,W("mesh",{geometry:A,position:[4.5,0,4.5],material:C})]})}const qp={minColor:"#00ffff",maxColor:"#ff00ff",edgeColor:"#0000ff",bgColor:"#000000",DaysColor:"#ffffff",speed:10},Mne=new nn({color:16711680,wireframe:!0,transparent:!0,opacity:.2}),aM=100,Cne=100,Ene=Math.sqrt(Cne),QU=1,bne=QU*2,My=100,ZU=Math.sqrt(My),Tne=ZU*Ene,$u=Tne+bne;let lM=My/(10+QU/ZU),jd=lM;const FI=.05;new Vn(FI,jd,FI);let Jd={};function Pne(n){let e=Math.floor(n/(aM*10)),t=n.toString();t=t.substring(t.length-2);let i=Math.floor(t/10);e%2===1&&(i=Math.abs(i-9));let r=e.toString()+i.toString();Jd.hasOwnProperty(r)?Jd[r]++:Jd[r]=0;let s=Jd[r];return s=s<10?"0"+s:s,r+"."+s}let UI={};const Rv=new Cr({uniforms:{color1:{value:new Je(qp.minColor)},bboxMin:{value:new j(0,0,0)},bboxMax:{value:new j(0,0,0)}},vertexShader:`
	    uniform vec3 bboxMin;
	    uniform vec3 bboxMax;
	  
	    varying vec2 vUv;

	    void main() {
			vUv.y = (bboxMax.z == bboxMin.z) ? 0.0 : (position.z - bboxMin.z) / (bboxMax.z - bboxMin.z);
			gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
	    }
	  `,fragmentShader:`
	    uniform vec3 color1;
	  
	    varying vec2 vUv;
	    
	    void main() {	      
			vec3 colorInv = color1;
			colorInv.xyz = vec3(1, 1, 1) - colorInv.xyz;

	      gl_FragColor = vec4(mix(color1, colorInv, vUv.y), 1.0);
	    }
	  `});let Iv=[],ho,pc={},cM,pl,qU,$U;function Rne({grid:n,playBackSpeed:e,visualID:t}){cM=n,Iv=[],Jd={},UI={};const{amount_min:i,amount_max:r}=Lne(n),o=100/r;qU=i,$U=o;const a=$u-1;pl=new Js(My,My,a,a),ho=pl.getAttribute("position"),ho.count/10;let l=0;jd=lM;let c=0;for(let _=0;_<ho.count;_++)if(_>=$u){let x=_>0&&_%$u===0,y=_>0&&(_+1)%$u===0;if(x||y)continue;{let S=Pne(c),A=uM(S),C=S.split(".")[0];pc.hasOwnProperty(C)||(pc[C]=[]),A>0&&(Iv[_]=S,pc[C].push(_)),A>l&&(l=A),c++;let b=Math.floor(_/$u),P=_-b*$u-aM/2,E=b-aM/2;UI[P+"."+E]={gridPoint:S,poleX:P,poleY:A,poleZ:E}}}l>jd?jd=l:jd=lM;let u=-1,f=ht.day,d=0,m=!1;const g=99;Yr(_=>{_.clock.getElapsedTime(),d++;let y=d%e/e;y==0&&(y=1),Ine(f,y,m),u!=ht.day&&(ht.day-u!=1&&v(ht.day),u=ht.day,f=ht.day,f==0&&v())});function v(_=0){let x=g;for(let y=x;y>=0;y--){let S=y<10?"0"+y:y;if(pc.hasOwnProperty(S)){let A=pc[S],C=y<_;for(let b of A){let P=0;if(C){let R=Iv[b];P=uM(R)}let E=b*3;ho.array[E+2]=P}}}}return W("group",{position:0,children:W("mesh",{receiveShadow:!0,castShadow:!0,geometry:pl,material:Rv,"rotation-x":Math.PI*-.5})})}function uM(n){let e=cM.hasOwnProperty(n)?cM[n]:0;return e-=qU,e=e*$U,e<0&&(e=0),e}function Ine(n,e,t){let i=n<10?"0"+n:n;if(pc.hasOwnProperty(i)){let o=pc[i];for(let a of o){let l=Iv[a],c=t?0:uM(l),u=a*3;var r=new j(ho.array[u],ho.array[u+1],ho.array[u+2]),s=new j(ho.array[u],ho.array[u+1],c);r.lerp(s,e),ho.array[u+2]=r.z}Bne()}}function Bne(){pl.attributes.position.needsUpdate=!0,pl.computeVertexNormals(),pl.computeBoundingBox(),Dne()}function Dne(){Rv.uniforms.bboxMin.value=pl.boundingBox.min,Rv.uniforms.bboxMax.value=pl.boundingBox.max,Rv.uniforms.color1.value=new Je(qp.minColor),Mne.color.set(qp.edgeColor)}function Lne(n){let e=n["00.00"],t=n["99.99"];for(let i in n){let r=n[i];r<e&&(e=r),r>t&&(t=r)}return{amount_min:e,amount_max:t}}function One({grid:n,playBackSpeed:e,displayColor:t,visualID:i}){const[r,s]=L.useState(n.gridindex);return qp.minColor=t,qp.edgeColor=wU(t.getHexString()),W("group",{position:[-5.25,.1,-5.25],scale:[.104,.055,.104],"rotation-y":Math.PI,name:"vis_type_wrapper",children:W(Rne,{grid:r,visualID:i,playBackSpeed:e})})}const NI=["diamond","flower","heart"];function kne(){const n=[{x:-5.20099,y:10.49558,z:-7.84441},{x:-5.12045,y:10.78522,z:-7.84441},{x:-4.98784,y:10.98522,z:-7.84441},{x:-4.66315,y:11.21487,z:-7.84441},{x:-4.3376,y:11.27776,z:-7.84441},{x:4.42294,y:11.27363,z:-7.84441},{x:4.71258,y:11.19309,z:-7.84441},{x:4.9699,y:11.00489,z:-7.84441},{x:5.16917,y:10.65874,z:-7.84441},{x:5.20512,y:10.41024,z:-7.84441},{x:5.19379,y:-10.55117,z:-7.84441},{x:5.12045,y:-10.78522,z:-7.84441},{x:4.87161,y:-11.09455,z:-7.84441},{x:4.5861,y:-11.24181,z:-7.84441},{x:4.3376,y:-11.27776,z:-7.84441},{x:-4.42294,y:-11.27363,z:-7.84441},{x:-4.71258,y:-11.19309,z:-7.84441},{x:-4.91258,y:-11.06048,z:-7.84441},{x:-5.14223,y:-10.73579,z:-7.84441},{x:-5.20512,y:-10.41024,z:-7.84441}],e=[];for(let s of n)e.push(new j(s.x,s.y,s.z));const t=new DC(e);t.curveType="centripetal",t.closed=!0;const i=t.getSpacedPoints(100);return new Mt().setFromPoints(i)}function Fne(){const t={};let i=15;for(let r=0;r<100;r++)i<0&&(i=100-1),t[i]=r,i--;return t}function Une({geom:n,shapeType:e,grid:t,displayColor:i}){const r=oM("side_"+e),s=[0,99,98,97,96,95,93,94,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68],o=[49,48,47,46,45,44,43,42,41,40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,23,24,22,21,20,19,18,50],a=[51,52,53,54,55,56,57,58,59,60,61,62,63,64,65],l=[1],c=[16,17],u=[51],f=[66,67],d=N=>{let k=0,X=0,te=0;return s.indexOf(N)!=-1&&(te=Math.PI*.5),o.indexOf(N)!=-1&&(te=-1*Math.PI*.5),a.indexOf(N)!=-1&&(te=Math.PI),l.indexOf(N)!=-1&&(te=Math.PI*.25),c.indexOf(N)!=-1&&(te=-1*Math.PI*.25),u.indexOf(N)!=-1&&(te=-1*Math.PI*.75),f.indexOf(N)!=-1&&(te=Math.PI*.75),[k,X,te]},m=GE.clone();m.color=i;const g=L.useRef([]),v=t.hasOwnProperty("num_per_day")?t.num_per_day:t.followers,_=au(v,!0);t=_.gridArray;const S=2/_.max;let A=0,C=[];var b=n.attributes.position.array;const P=.1,E=[P,P,P],R=100,O={diamond:-.035,flower:-.025,heart:-.075}[e],G=Fne();for(let N=0;N<b.length;N+=3){const k=A;if(k<R){let X="diamond-"+N;const te=d(k),oe=G[k],H=t[oe]*S,J=Ge("group",{ref:Q=>g.current[k]=Q,name:X,rotation:te,position:[b[N],b[N+1],b[N+2]],scale:[H,H,H],children:[W("mesh",{geometry:r,material:m,position:[0,O,0],scale:E}),W("mesh",{geometry:r,material:a$,position:[0,O,0],scale:E})]},X);C.push(J)}A++}return C}function Nne({grid:n,displayColor:e,shapeType:t,visualID:i}){(!t||t&&NI.indexOf(t)==-1)&&(t=NI[0]);let r=L.useMemo(()=>kne(),[]);return W("group",{"rotation-x":Math.PI*.5,name:"vis_type_wrapper",children:W(Une,{geom:r,shapeType:t,grid:n,displayColor:e})})}const zne=new Xr({color:65280,flatShading:!0,transparent:!0,opacity:.95,metalness:.4,roughness:.9});function zI(n,e,t){for(let i of e)n.array[i+1]+=t}const K0={top:{0:3,897:-3,1794:-6,1797:-6},bot:{300:3,1197:-3,1800:6,1803:6}},Q0={0:{top:[2400,2403],bot:[2406,2409]},99:{top:[2412,2415],bot:[2418,2421]}},e4=.5;function Gne({geom:n,mat:e,grid:t,lineIndex:i}){const r=n.getAttribute("position"),s=au(t,!0);t=s.gridArray;const o=s.max,a=s.min,u=10/(o-a),f=t.length;for(let m=0;m<f;m++){let g=(t[m]-a)*u,v=[];for(let y in K0.top){let S=parseInt(K0.top[y]),A=parseInt(y)+m*S;v.push(A)}Q0.hasOwnProperty(m)&&(v=v.concat(Q0[m].top)),zI(r,v,g);let x=[];for(let y in K0.bot){let S=parseInt(K0.bot[y]),A=parseInt(y)+m*S;x.push(A)}Q0.hasOwnProperty(m)&&(x=x.concat(Q0[m].bot)),zI(r,x,g)}let d=-1*(i*e4);return W(wn,{children:W("mesh",{position:[d,0,0],name:"LineGraph",geometry:n,material:e})})}function Hne({grid:n,playBackSpeed:e,displayColor:t}){const i=new Vn(e4,1,30,1,1,99);let s=Object.keys(n)[0],o=!isNaN(s),a=t.getHexString();if(o)var c=[];else{var l=new SU;l.from_hex(a);var c=l.scheme("triade").distance(.1).colors()}c.unshift(a);let u=[];if(o)u=[n];else for(let m in n)u.push(n[m]);const f=[];let d=0;for(let m in u){let g=u[m],v=i.clone();const _=zne.clone();let x=d*4;_.color=new Je("#"+c[x]);const y=W(Gne,{grid:g,geom:v,mat:_,lineIndex:d},`lineGrid-${m}`);f.push(y),d++}return W(wn,{children:f})}const t4={minColor:"#00ffff",maxColor:"#ff00ff",edgeColor:"#ffffff",speed:20};new Pl({color:255,wireframe:!0});const n4=new Pl({color:t4.edgeColor,wireframe:!0,transparent:!0,opacity:.2});new Pl({color:16777215});new Ks({color:16777215,side:va});const Vne=new Cr({uniforms:{color1:{value:new Je(t4.minColor)},bboxMin:{value:new j(0,0,0)},bboxMax:{value:new j(0,0,0)}},vertexShader:`
    uniform vec3 bboxMin;
    uniform vec3 bboxMax;
  
    varying vec2 vUv;

    void main() {
		vUv.y = (position.z - bboxMin.z) / (bboxMax.z - bboxMin.z);
		vUv.y = (bboxMax.z == bboxMin.z) ? 0.0 : vUv.y;
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
	}
  `,fragmentShader:`
    uniform vec3 color1;
  
    varying vec2 vUv;
    
    void main() {
		vec3 colorInv = color1;
		colorInv.xyz = vec3(1, 1, 1) - colorInv.xyz;
		gl_FragColor = vec4(mix(color1, colorInv, vUv.y), 1.0);
    }
  `}),Wne=10,i4=1,jne=i4*2,mo=Wne+jne;function Jne(){const n=new Js(mo,mo,mo-1,mo-1),e=n.getAttribute("position"),t=[1,1,1],i=Vne.clone();return{group:Ge(wn,{children:[W("mesh",{scale:t,geometry:n,material:n4,"position-y":.01,"rotation-x":Math.PI*-.5}),W("mesh",{scale:t,receiveShadow:!0,castShadow:!0,geometry:n,material:i,"rotation-x":Math.PI*-.5})]}),geometry:n,geomPosAttr:e,baseShader:i}}const GI=.05,Xne=mo;new Vn(GI,Xne,GI);function Yne({grid:n,visualID:e,playBackSpeed:t,geometry:i,geomPosAttr:r,baseShader:s,colorSettings:o}){let a=-1,l=ht.day,c=0;Yr(v=>{const _=v.clock.getElapsedTime();if(n){c++;let y=c%t/t;y==0&&(y=1),g(_,y),a!=ht.day&&(l=ht.day,a=ht.day)}});const u=n.hasOwnProperty("gridindex")?n.gridindex:n.num_per_index,f=au(u,!1),d=7,m=f.max>d?d/f.max:1,g=(v,_)=>{let x=l<10?"0"+l:l,y=0,S=0,A=r.count;for(let P=0;P<A;P++){P>0&&P%mo===0&&y++;let E=P%mo===0,R=(P+1)%mo===0;if(!(E||R)&&P>i4*mo){S=P-mo-(y+y-1);let B=S<10?"0"+S:S,O=x+"."+B,G=u.hasOwnProperty(O)?u[O]*m:0,N=P*3;var C=new j(r.array[N],r.array[N+1],r.array[N+2]),b=new j(r.array[N],r.array[N+1],G);C.lerp(b,_),r.array[N+2]=C.z}}i.attributes.position.needsUpdate=!0,i.computeVertexNormals(),i.computeBoundingBox(),s.uniforms.bboxMin.value=i.boundingBox.min,s.uniforms.bboxMax.value=i.boundingBox.max,s.uniforms.color1.value=new Je(o.minColor),n4.color.set(o.edgeColor)}}function Kne({grid:n,playBackSpeed:e,displayColor:t,visualID:i}){const[r,s]=L.useState(n);let o;t&&(o={minColor:t,edgeColor:wU(t.getHexString())});const{group:a,geometry:l,geomPosAttr:c,baseShader:u}=Jne();return Ge("group",{position:[-6,.1,-6],"rotation-y":Math.PI,name:"vis_type_wrapper",children:[W(Yne,{geometry:l,colorSettings:o,baseShader:u,geomPosAttr:c,grid:r,visualID:i,playBackSpeed:e}),a]})}const Qne=new Xr({color:65280,flatShading:!0,opacity:.9,metalness:.4,roughness:.9});function Zne({grid:n,displayColor:e,shapeType:t,playBackSpeed:i,visualID:r,PopSocket:s}){(!t||["flower","diamond","heart","rose","skull"].indexOf(t)==-1)&&(t="flower");const a=oM(t),l=L.useRef(),c=Qne.clone();c.color=e,c.opacity=1;const f=[0,0,s?-2.8:0];t=="skull"&&(f[1]=-.3);const m=[Math.PI*-.5,0,0],g=n.hasOwnProperty("num_per_day")?n.num_per_day:n.followers,v=au(g,!0);n=v.gridArray;const _=v.max,x=1.02,y=x/_,S=[x,x,x];let A=0,C=-1,b=ht.day;Yr(()=>{A++;const R=l.current.scale,O=A%i/i,G=n[b]*y;var N=new j(R.x,R.y,R.z),k=new j(G,G,G);C!=ht.day&&(b=ht.day,C=ht.day),N.lerp(k,O),l.current.scale.set(N.x,N.y,N.z)},[]);const P=s?oM("popsocket"):null;return Ge("group",{rotation:[Math.PI*.5,0,0],name:"vis_type_wrapper",children:[W("group",{name:"PopSocket",ref:l,position:f,rotation:m,scale:S,children:W("mesh",{receiveShadow:!0,castShadow:!0,geometry:a,material:c})}),s&&W("mesh",{name:"popsocket",receiveShadow:!0,castShadow:!0,"rotation-x":-Math.PI*.5,position:[0,0,0],geometry:P,material:c$})]})}function qne(n){return W(hne,{})}function $ne({tagIcon:n,visualData:e,index:t}){const[i,r]=L.useState(null);if(L.useEffect(()=>{r(e$(e.visualID))},[yy]),i){let s=e.hasOwnProperty("textDisplayTag")?e.textDisplayTag:!0;rb(e);let o=e.hasOwnProperty("textDisplayStats")?e.textDisplayStats:!0,a=r4(e);if(!s)return;let l=e.dataTag,c=l.length,u=.2,f=c>12?.9:1;f=.5;let d=n=="hashtag"?"#":"",m;switch(n=="creator"&&(d="@"),n=="categories"&&(l="categories"),e.visType){}let g;e.grid&&(g=e.grid.hasOwnProperty("num_per_day")?e.grid.num_per_day:e.grid.followers),e.visualID,g||(o=!1);const v=eie(e,i,t);return Ge(wn,{children:[m,W(Sf,{material:xU,font:"./../fonts/TASA_Orbiter_Display_Black.json",size:f,height:u,position:v.position,rotation:v.rotation,children:`${d}${l}`}),o&&W(tie,{tagIcon:n,statsMode:a,placement:v,visualData:e,grid:g})]})}}function rb(n){return n.hasOwnProperty("textDisplayPos")?n.textDisplayPos:"top"}function r4(n){return n.hasOwnProperty("textDisplayStats")&&n.textDisplayStats==!1?"none":n.hasOwnProperty("textStatsType")?n.textStatsType:"minmax"}function eie(n,e,t){const i=n.visType,r=rb(n),s=r4(n),o=e?$p(i,t,!0,!0):null,a=o.y;console.log(i,"getTextPlacement:height",a);let l=[0,0,.4];switch(r=="bot"&&(l[2]=-1*(a+.65)),i){case"PopSocket":case"BigSingleShape":l[0]=3,l[1]=i=="PopSocket"?2.7:0,l[2]=r=="bot"?-3.1:3.7;break;case"CreatorHeightmap":l[1]=.1,r=="bot"&&(l[2]=-11.2);break}let c=[Math.PI*.5,Math.PI,0];return(r=="right"||r=="left")&&(c[0]=Math.PI*.5,c[2]=-Math.PI*1.5,c[1]=-Math.PI,l[0]=s=="minmax"&&r=="left"?1.3:.7,r=="right"&&(l[0]-=o.x+1.5),l[2]=-6),ml(i)&&(r=="left"?l[0]=o.x/2+1.4:r=="right"&&(l[0]=-o.x/2-.5),fM(r)?l[0]-=1:l[2]=-1.5),i=="DiamondsRing"&&(l=[5.7,-.4,11.8],l[2]=r=="bot"?-12:11.8,fM(r)||(l[2]=-3,l[0]=r=="left"?7:-6.4)),s=="none"&&(l[0]-=.4),{position:l,rotation:c}}function fM(n){return n=="top"||n=="bot"}function ml(n){return n=="PopSocket"||n=="BigSingleShape"}function tie({placement:n,visualData:e,grid:t,tagIcon:i,statsMode:r}){let s=au(t,!0),o=s.gridArray;const[a,l]=L.useState(0),c=e.visType,u=rb(e);let f=o.hasOwnProperty(a)?o[a]:0;f=Uf(f,1);let d=a+1,m=i=="hashtag"?"vids":"",g=`Dag ${d} - ${f} ${m}`,v=.3,_=.1,x=[...n.position];switch(u){case"left":case"right":x[0]-=.5;break;default:x[0]-=7;break}if(e.visualID,r=="minmax"){console.log(s);let A=s.min,C=o.indexOf(A)+1,b=s.max,P=o.indexOf(b)+1;g=`Min: Dag ${C} - ${Uf(A,1)} 
Max: Dag ${P} - ${Uf(b,1)}`,x[2]+=ml(c)?0:.3}ml(c)&&fM(u)&&(x[0]+=7,u=="bot"?x[2]-=r=="minmax"?.2:.55:x[2]-=.6),u=="bot"&&(x[2]-=r=="day"?0:.3);let y=-1;return Yr(A=>{if(r=="day"){let C=ht.day;C!=y&&(l(ht.day),y=C)}}),W(wn,{children:W(Sf,{material:xU,font:"./../fonts/TASA_Orbiter_Text_Regular.json",size:v,height:_,position:x,rotation:n.rotation,children:g})})}let BS={},Z0=!1,hM;const Ur={up:!1,down:!1,visIndex:-1};function Xd(){Ur.up=!1,Ur.down=!1,Ur.visIndex=-1}function HI(n){hM=n.size.width/n.viewport.width}function $p(n,e,t,i=!1){if(en[e]){if(!en[e].hasOwnProperty("cur_boundbox")||t){let s=(en[e].hasOwnProperty("scale_percentage")?en[e].scale_percentage:100)/100;i&&(s=1);let o=Sr[n].dimensions,a={x:o[0]*s,y:o[1]*s};if(i)return a;Sr[n].hasOwnProperty("scaleInit")&&(a.x*=Sr[n].scaleInit[0],a.y*=Sr[n].scaleInit[1]),en[e].cur_boundbox=a}return en[e].cur_boundbox}}function nie(n,e){if(n){let t=n.position,i=s4(t.x,t.z,e);n.position.set(i[0],t.y,i[1])}}function iie(n,e){let t=n.index;return en[t]?$p(e,t):$p(e,t,!0)}function s4(n,e,t){t.index;const i=UE(t.visualData);let r=iie(t,i),s=ml(i)?Fs.w/2:0,o=ml(i)?-1*(Fs.w/2):-1*(Fs.w-r.x),a=Fs.h/2,l=-1*(a-r.y);return ml(i)&&(s-=1,o+=1,a-=1,l=-1*(Fs.h/2)+1),n<o&&(n=o),n>s&&(n=s),e>a&&(e=a),e<l&&(e=l),[n,e]}function rie(n,e,t){const i=t.index;if(Z0||$p(UE(t.visualData),i,!1),e.active){if(BS.hasOwnProperty("x")){const r=n.position;r.x,r.z;let s=0,o=0,a=-1*(e.x/hM),l=-1*(e.y/hM);Math.abs(r.x-a),Math.abs(r.z-l),Z0||(a=r.x,l=r.z),a+=o,l+=s;let c=s4(a,l,t);n.position.set(c[0],r.y,c[1]),Z0=!0}BS={x:e.x,y:e.y}}else{BS={},Z0=!1;let r=en[i];r.position=[...n.position]}}function sie(n,e,t){let i=n.getObjectByName("vis_scaler");if(i&&(Ur.up||Ur.down)){const s=t.index,o=UE(t.visualData);i=i.children[0],en[s].hasOwnProperty("scale_percentage")||(en[s].scale_percentage=100);const a=Sr[o].scaleInit,l=en[s].scale_percentage,c=Sr[o].scaleSettings;let u=100;switch(e){case"scale_down":u=l-5,u<c.min&&(u=c.min);break;case"scale_up":u=l+5,u>c.max&&(u=c.max);break}if(l!=u){let f=u/100;if(i.scale.set(a[0]*f,a[1]*f,a[2]*f),en[s].scale_percentage=u,ml(o)){let d=o4(o,s);n.getObjectByName("edit_btns").position.set(d[0],d[1],d[2])}$p(o,s,!0),nie(n,t)}else Xd()}}function o4(n,e){let t=[5.7,-.4,.07];if(ml(n)){let i=n=="PopSocket"?2.6:0,r=3.15;if(en[e].scale_percentage!=100){let s=en[e].scale_percentage/100;i*=s,r*=s}t=[r,i,1.55]}else n=="DiamondsRing"&&(t=[6.2,-.4,10.4]);return t}zn.legacyMode=!1;const oie=new Xr({color:65280,flatShading:!0,metalness:.4,roughness:.9});let VI=100;function aie(n,e,t){VI++;let i=e.current[n];i.renderOrder=VI;let r=e.current;for(let[s,o]of r.entries())if(o){let a=o.getObjectByName("edit_btns");s==n?a.visible=!a.visible:(a.visible=!1,o.renderOrder=0)}}function lie({controller:n,visualData:e,index:t,ref2Set:i}){const[r,s]=L.useState(e);L.useState(e.dataType),L.useState(e.dataTag),L.useState("*");const[o,a]=L.useState(0);L.useEffect(()=>{console.log("DataVisualInstance:useEffect - visualData has changed"),s(e)},[e]);const[l,c]=L.useState(!1),[u,f]=L.useState(!0),d=re=>{f(!1);let he={...r};he.grid=re,s(he),c(re)};r.shapeType&&r.shapeType;let m="/models/dayshapes/shapes-bottomed-20231211.gltf";Ki.preload(m);const g=oie.clone();g.color=r.displayColor;const[v,_]=L.useState(r.hasOwnProperty("displaySpeed")?r.displaySpeed:15);function x(re){let q=re%20,ce=20-q;ce=q==0?1:ce+1,_(ce)}const y=()=>{const re={...r};return l&&!re.hasOwnProperty("grid")&&(re.grid=l),{index:t,visualData:re}},S=()=>{n({},y(),C,"info")},A=["dataType","dataTag","displayColor","displaySpeed","visualID","visType","shapeType","textDisplayTag","textDisplayPos","textDisplayStats","textStatsType"],C=re=>{if(re.hasOwnProperty("edit")){let he=re.edit;console.log("editedData",he),he.hasOwnProperty("displaySpeed")&&x(parseInt(he.displaySpeed)),he.visType.indexOf("DiamondsGrid")!=-1&&he.hasOwnProperty("activeCats")&&s(he),he.shapeType&&he.shapeType.indexOf("DiamondsGrid")!=-1&&(r.shapeType.indexOf("DiamondsGrid")==-1||r.grid.hasOwnProperty("followers")||r.grid.hasOwnProperty("videos"))&&(r.dataType="reset4Cats");for(let q of A)if(he.hasOwnProperty(q),r.hasOwnProperty(q),he.hasOwnProperty(q)&&(r.hasOwnProperty(q)&&r[q]!=he[q]||!r.hasOwnProperty(q)))switch(q){case"dataType":case"dataTag":c(!1),delete r.grid,s(he);break;default:s(he);break}Pn({visualEdited:he}),a(o+1)}},b=()=>{let re=[0,0,0];if(en[t]){const he=en[t].hasOwnProperty("position")?en[t].position:re;return en[t].position=he,he}return re},P=()=>{let re=Sr[r.visType].scaleInit;if(en[t]){en[t].scale_init=re;let he=en[t].hasOwnProperty("scale_percentage")?en[t].scale_percentage:100;if(he>100&&(he=100),he!=100){let q=he/100;re=[re[0]*q,re[1]*q,re[2]*q]}en[t].scale_percentage=he}return re};r.displayColor;const E=new nn({color:7829367});E.depthTest=!1;const R=L.useRef(),B=Tv.clone();B.depthTest=!1;function O(){return!(gU.sharing||hp)}const G=O();let N={};const k=function(re){G&&(Pn({visualEditBtnClick:re}),n(event,N,C,re))};let X=0,te=7;Yr(()=>{X++,Ur.down&&Ur.visIndex==t&&X%te==0&&k("scale_down"),Ur.up&&Ur.visIndex==t&&X%te==0&&k("scale_up")});function oe({index:re,controller:he,visualData:q}){const ce=new Vn(1.4,.1,1.4);q.grid=l,N={index:re,visualID:q.visualID,visualData:q,grid:l},q.dataType.indexOf("categories")!=-1&&(N.activeCats=q.activeCats);const Ce=({offset:[Se,Te],event:Oe,active:Be})=>{if(!G)return;he({x:Se,y:Te,event:Oe,active:Be},N,C,"drag"),Oe.stopPropagation()};S();const ge=dne(),Ae=pne(),ke=mne(),ve=gne(),De=vne(),Le=yne(),we=AF({onDrag:Ce});let F;Sr[q.visType].move&&(F=W("mesh",{...we(),position:[1.45,.5,-.8],geometry:ce,material:E,name:"visualBtnDrag",children:W("mesh",{geometry:ve,position:[0,.1,-.02],scale:[.8,.8,.8],material:B})}));let D;Sr[q.visType].scale&&(D=Ge(wn,{children:[W("mesh",{position:[1.45,.5,-2.25],geometry:ce,material:E,name:"visualBtnScaleDown",onPointerDown:Se=>{Ur.down=!0,Ur.visIndex=re,Se.stopPropagation()},onPointerUp:Se=>{Xd()},onPointerLeave:Se=>{Xd()},children:W("mesh",{geometry:Le,position:[0,.1,-.02],scale:[.8,.8,.8],material:B})}),W("mesh",{position:[1.45,.5,-3.7],geometry:ce,material:E,name:"visualBtnScaleUp",onPointerDown:Se=>{Ur.up=!0,Ur.visIndex=re,Se.stopPropagation()},onPointerUp:Se=>{Xd()},onPointerLeave:Se=>{Xd()},children:W("mesh",{geometry:De,position:[0,.1,-.02],scale:[.8,.8,.8],material:B})})]}));const $=new Vn(2.9,.001,4.4),le=.7;return Ge("group",{ref:R,name:"edit_btns",renderOrder:1/0,visible:!1,position:o4(q.visType,re),scale:[le,le,le],children:[W("mesh",{position:[.7,.5,-2.3],geometry:$,material:_U}),W("mesh",{position:[0,.5,-.8],geometry:ce,material:E,name:"visualBtnEdit",onClick:Se=>{k("edit"),Se.stopPropagation()},children:W("mesh",{geometry:ge,scale:[.8,.8,.8],renderOrder:999,material:B,position:[0,-.05,-.15]})}),W("mesh",{position:[0,.5,-2.25],geometry:ce,material:E,name:"visualBtnInfo",onClick:Se=>{k("info"),Se.stopPropagation()},children:W("mesh",{geometry:Ae,scale:[.8,.8,.8],material:B,position:[0,-.05,-.02]})}),W("mesh",{position:[0,.5,-3.7],geometry:ce,material:E,name:"visualBtnDelete",onClick:Se=>{k("delete"),Se.stopPropagation()},children:W("mesh",{geometry:ke,position:[0,.1,-.02],scale:[.8,.8,.8],material:B})}),F,D]})}let H;const{nodes:J}=Ki(m);J.hasOwnProperty(r.shapeType)&&(H=J[r.shapeType].geometry,Sne(r.shapeType,H));let Q=r.dataType.indexOf("creator")!=-1?"creator":"hashtag";r.dataType.indexOf("categories")!=-1&&(Q="categories");let U,V;r.hasOwnProperty("visType")&&r.visType.indexOf("DiamondsGrid")!=-1&&(U=J.emerald_simple.geometry,V=r.shapeType=="DiamondsGridMini"?"mini":"full",r.hasOwnProperty("activeCats")||(r.activeCats="*"));const Z=W(oe,{index:t,controller:n,visualData:r});function K(){return console.log("- - - - getTextDisplay CALLED - - - -"),W($ne,{tagIcon:Q,index:t,visualData:r})}const ne=re=>{i.current[t]=re,t$(e.visualID,re)};r.dataType=="reset4Cats"&&(r.dataType="categories");const z=r.visType!="BigSingleShape",ae=.01,ie=10;new Vn(ae,ie,ae),new nn({color:16711680}),Yn(re=>re.gl);const ye=re=>{G&&(aie(t,i),k("info")),re.stopPropagation()};return Ge(wn,{children:[W(yU,{context:"r3f",mode:r.dataType,loadVal:r.dataTag,dataLoaded:d}),Ge("group",{name:"visualWrap",rotation:[Math.PI*.5,Math.PI,0],children:[l&&!u&&Ge(wn,{children:[r.visType=="DayBoxes"&&Ge("group",{name:"vis_mover",ref:re=>ne(re),userData:{visType:"DayBoxes"},position:b(),children:[W("group",{name:"set2zero",position:[5.25,-.05,0],onClick:re=>ye(re),children:W("group",{name:"vis_scaler",children:Ge("group",{name:"normalizer",position:[0,0,0],scale:P(),children:[W(Ane,{name:"actual_visual",grid:l,boxMat:g,shapeType:r.shapeType,playBackSpeed:v,meshGeom:H,visualID:r.visualID}),K()]})})}),Z]}),r.visType=="DayHeightMap"&&Ge("group",{name:"vis_mover",ref:re=>ne(re),userData:{visType:"DayHeightMap"},position:b(),children:[W("group",{name:"set2zero",position:[5.25,-.1,0],onClick:re=>ye(re),children:W("group",{name:"vis_scaler",children:Ge("group",{name:"normalizer",position:[0,0,0],scale:P(),children:[W(Kne,{grid:l,displayColor:r.displayColor,playBackSpeed:v*4,visualID:r.visualID}),K()]})})}),Z]}),r.visType=="CreatorHeightmap"&&Ge("group",{name:"vis_mover",ref:re=>ne(re),userData:{visType:"CreatorHeightmap"},position:b(),children:[W("group",{name:"set2zero",position:[5.25,-.1,0],onClick:re=>ye(re),children:W("group",{name:"vis_scaler",children:Ge("group",{name:"normalizer",scale:P(),children:[W(One,{grid:l,displayColor:r.displayColor,playBackSpeed:v*1,visualID:r.visualID}),K()]})})}),Z]}),r.visType=="DiamondsGrid"&&Ge("group",{name:"vis_mover",ref:re=>ne(re),userData:{visType:r.shapeType},position:b(),children:[W("group",{name:"set2zero",position:[5.25,0,0],onClick:re=>ye(re),children:W("group",{name:"vis_scaler",children:W("group",{name:"normalizer",scale:P(),children:W(p$,{grid:l,cats2Show:r.activeCats,meshGeom:U,displayColor:r.displayColor,playBackSpeed:v,gridSize:V,visualID:r.visualID})})})}),Z]}),r.visType=="DiamondsRing"&&Ge("group",{name:"vis_mover",ref:re=>ne(re),userData:{visType:"DiamondsRing"},position:b(),children:[W("group",{name:"vis_scaler",position:[0,-8.4,0],scale:[1,.97,1],onClick:re=>ye(re),children:W(Nne,{grid:l,displayColor:r.displayColor,shapeType:r.shapeType,visualID:r.visualID})}),Z,K()]}),(r.visType=="PopSocket"||r.visType=="BigSingleShape")&&Ge("group",{name:"vis_mover",ref:re=>ne(re),userData:{visType:"PopSocket"},position:b(),children:[W("group",{name:"vis_scaler",onClick:re=>ye(re),children:Ge("group",{name:"normalizer",position:[0,0,0],scale:P(),children:[W(Zne,{grid:l,displayColor:r.displayColor,shapeType:r.shapeType,playBackSpeed:v,visualID:r.visualID,PopSocket:z}),K()]})}),Z]}),r.visType=="LineGraph"&&Ge(wn,{children:[W("group",{name:"LineGraphWrapper","rotation-x":Math.PI*.5,position:[7.8,7.5,2.6],scale:[6.6,1.5,.5],children:W(Hne,{grid:l,displayColor:r.displayColor,playBackSpeed:v*2,visualID:r.visualID})}),Z,K()]})]}),u&&W(qne,{})]})]})}function cie(){const[n,e]=L.useState(ht.speed);let t=n?"pause":"play";const i=L.useRef();return L.useEffect(()=>{e(ht.speed)},[ht.speed]),W("button",{id:"play-pause-btn",className:t,onClick:()=>{let s=0;n||(s=ht.speedDefault),ht.speed=s,e(!n)},ref:i,children:t})}function uie(){const[n,e]=L.useState(0);let t=0;const i=L.useRef(),r=()=>{if(t++,ht.speed>0&&t%ht.speed==0){let a=ht.day+1;a=a<ht.maxFrames?a:0,ht.day=a,e(a),i.current.value=a}requestAnimationFrame(r)};return L.useEffect(()=>{ht.started||(ht.started=!0,requestAnimationFrame(r))},[]),Ge("div",{id:"timeline-wrap",children:[W(cie,{}),W("div",{id:"frame-setter",children:W("input",{ref:i,onChange:a=>{let l=parseInt(i.current.value)-1;l<ht.maxFrames&&(ht.speed=0,ht.day=l,e(l),i.current.value=l)},type:"range",id:"set-framer",min:"1",max:"100",defaultValue:n,step:"1"})}),(()=>{let a=n+1;return Ge("div",{id:"day-info",children:[Ge("span",{id:"day-no",children:["Dag ",W("em",{children:a})]})," ",W("span",{id:"day-date",children:KU[n]})]})})()]})}function fie(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}const hie=fie();function die({callback:n}){const e=L.useRef(),t=L.useRef();return Ge("div",{id:"desktop-ux-wrap",children:[Ge("a",{ref:e,onClick:s=>{n({action:"share2mobile"})},id:"share-to-mobile",children:[W("i",{}),"share"]}),Ge("a",{ref:t,onClick:s=>{n({action:"takescreenshot"})},id:"take-screenshot",children:[W("i",{}),"save"]})]})}function pie(n,e){if(Object.keys(n).length>0){const i={};for(let s in n){const o={};let a=n[s];for(let l in a)if(l=="displayColor"){a.displayColor;let c={r:a.displayColor.r,g:a.displayColor.g,b:a.displayColor.b};o.color=c}else l!="grid"&&(o[l]=a[l]);i[s]=o}const r={visualsData:i,guid:hie};M1.post(C1+"?req=getqrcode",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(s=>{const o=s.data;e(o)})}}function mie({img:n,callback:e}){L.useRef();const t=document.getElementById("app-wrap");return t.classList.add("modal-active"),Ge("div",{id:"share-img-wrap",children:[W("a",{className:"closer",onClick:r=>{t.classList.remove("modal-active"),e()}}),W("img",{src:n,alt:"Share the visual"}),W("p",{children:"Scan this image on a mobile phone to view the visual on your phone"})]})}function gie(n){function e(r){if(r.data.length>0){let s=JSON.parse(r.data);for(let o in s){const a=s[o];if(a.hasOwnProperty("color")){let l=a.color;s[o].displayColor=new Je(l.r,l.g,l.b)}en[o]=a}n(s)}}let t=window.location.hash,i="shared:";if(t.indexOf(i)!=-1){let r=t.split(i)[1];M1.post(C1+"?req=getshareddata",{key:r},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(s=>{e(s)})}}const a4="/models/icons/UAC_icons.gltf";zn.legacyMode=!1;const Mc={0:"adds",1:"edits",2:"deletes",3:"info",4:"visType_DayBoxes",5:"visType_DayHeightMap",6:"visType_CreatorHeightmap",7:"visType_DiamondsRing",8:"visType_BigSingleShape",9:"visType_DiamondsGrid",10:"shapeType_cube",11:"shapeType_piramid",12:"",13:"shapeType_capsule",14:"shapeType_diamond",15:"shapeType_emerald",16:"shapeType_heart",17:"shapeType_flower",18:"shapeType_rose",19:"shapeType_skull",20:"drags",21:"creators",22:"hashtags",23:"searches",24:"randomTags",25:"categories",26:"swatchesGenerated"},Nf=1,l4=new Vn(Nf,Nf,Nf),vie=l4.getAttribute("position"),yie=new Xr({color:6710886,flatShading:!0,metalness:.9,roughness:.9}),_ie=new Xr({color:5008030,flatShading:!0,metalness:.9,roughness:.9});function xie({ref2set:n,pos:e,index:t}){const i=l4.clone();new Vn(Nf/10,Nf/10,Nf/10);const r=[0,0,0];[10,18,19].indexOf(t)!=-1&&(r[0]=Math.PI/1),[1,2,3,4,7].indexOf(t)!=-1&&(r[0]=-Math.PI/2),[0,6,9,12,24].indexOf(t)!=-1&&(r[0]=-Math.PI/2,r[2]=Math.PI/2),[20,21,22,25,26].indexOf(t)!=-1&&(r[0]=Math.PI*2.5,r[1]=Math.PI),[5,11,14,17,23].indexOf(t)!=-1&&(r[2]=Math.PI*1.5,r[0]=Math.PI*1.5);const u=v=>{console.log(t),v.stopPropagation()},{nodes:f}=Ki(a4),d=Mc[t],m=.2;let g;if(d!=""&&f.hasOwnProperty(d)){const v=f[d].geometry;g=W("mesh",{name:"text",position:[0,1,0],scale:[m,m,m],rotation:[Math.PI/2,Math.PI,0],geometry:v,material:_ie})}return Ge("group",{ref:v=>n.current[t]=v,position:e,rotation:r,onClick:u,children:[g,W("mesh",{name:"box",geometry:i,material:yie})]})}let WI=0;function Sie({ref2set:n}){console.log("----- UserRubicsCube ----");let a=[];for(let m=0;m<27;m++){let g=Math.floor(m/9),v=m%3,_=m%3+v*.01,x=Math.floor(m/3);x-=g*3,x+=x*.01;let y=g+g*.01;const S=[_,x,y];let A="user-box-"+m;a.push(W(xie,{ref2set:n,index:m,pos:S},A))}WI++;let l=0,c=0,u=20,f=0,d=!1;return Yr(m=>{if(d){c++;let v=c%u/u;v==0&&(v=1),wie(n,l,v),c%u===0&&(l++,l==f&&(l=0),Ff[bv]=l)}}),L.useEffect(()=>{c4()&&(f=Oc.frames.length,d=!0)},[WI]),a}function c4(){let n=[],e={};for(let t in Mc)e[Mc[t]]=0;n.push({...e});for(let t in Kc){let i=Kc[t];for(let r in Mc){let s=Mc[r];i.indexOf(s)!=-1&&e[s]++}n.push({...e})}return Oc.frames=n,!0}c4();function wie(n,e,t){const i=[0,3,12,15,24,27,30,33,48,51,60,63];for(let l in Mc)if(n.current[l]){const c=n.current[l],u=c.getObjectByName("box"),f=c.getObjectByName("text"),d=u.geometry.getAttribute("position"),m=Mc[l];if(m!=""){let g=0;Oc.frames.hasOwnProperty(e)&&(g=Oc.frames[e][m]),g.hasOwnProperty("length")&&(g=g.length);let v=0;const _=parseInt(g);if(!isNaN(_)){for(let x of i){let y=vie.array[x+1]+_;v=y;var r=new j(d.array[x-1],d.array[x],d.array[x+1]),s=new j(d.array[x-1],d.array[x],y);r.lerp(s,t),d.array[x+1]=r.z}var o=new j(f.position.x,f.position.y,f.position.z),a=new j(f.position.x,.02+v,f.position.z);o.lerp(a,t),f.position.set(o.x,o.y,o.z),u.geometry.attributes.position.needsUpdate=!0,f.geometry.attributes.position.needsUpdate=!0}}}}function Aie(){const n=L.useRef([]),e=L.useMemo(()=>W(Sie,{ref2set:n}),[]);return W(wn,{children:W("group",{position:[-1,-1,-1],children:e})})}Ki.preload(a4);const Mie=wF([xF]);zn.legacyMode=!0;let Ld=!1,DS=0,sc,jI=0;function Cie(n){const[e,t]=L.useState(!1),[i,r]=L.useState(-1),[s,o]=L.useState({}),[a,l]=L.useState(0),[c,u]=L.useState({}),[f,d]=L.useState("start"),[m,g]=L.useState(0);console.log("PhoneTotal:frontDisplayMode",f);const v=L.useRef(),_=L.useRef();L.useRef();const x=L.useRef([]),y=L.useRef(null),S=F=>{sc=F,HI(sc),F.gl.preserveDrawingBuffer=!0};L.useEffect(()=>(document.body.classList.add("phone-page"),()=>{document.body.classList.remove("phone-page")}),[]);const A=(F,D,$,le)=>{const Se=parseInt(D.index);y.current=$;let Te=!0;switch(le){case"edit":r(Se),o(D.visualData);break;case"info":r(Se),o(D.visualData),Object.keys(F).length==0&&(console.log(" info called! ("+Se+") w empty",F,Ld),hp&&(le="start"),Ld?X(Se):te());break;case"delete":Te=!1,hp||(r(Se),confirm("Are you sure?")&&(Te=!0,le="start",C(Se)));break;case"layoutReady":Te=!1;let Oe=m+1;g(Oe),console.log("layoutReady: layoutIndex",m,Oe);break;case"drag":Te=!1,rie(x.current[D.index],F,D);break;case"scale_up":case"scale_down":Te=!1,sie(x.current[D.index],le,D);break}Te&&d(le)},C=F=>{en.hasOwnProperty(F)&&(delete en[F],delete c[F],Pn({DeletedVisual:F}),l(a+1))},b=(F,D,$)=>{switch(console.log("phoneFrontTotalCaller!",F,D,$),F){case"add":let le=Object.keys(en),Se=le.length;Se>0&&(Se=Math.max(...le)+1),jI==0&&(t(!0),jI++),c[Se]=$,u(c),en[Se]=$,d("start"),r(-1),Pn({AddedVisual:$}),l(a+1);break;case"edit":console.log("====edited visualIndex",D,$,Wd),y.current({edit:Wd}),en[D]=Wd,Pn({EditedVisual:Wd});break;case"set2add":d("add");break;case"profile":let Te=F;f=="profile"&&(Te="start"),d(Te);break;case"start":d(F);break}},P=L.useMemo(()=>W(pU,{}),[DS]),E=L.useMemo(()=>W(mU,{}),[]),R=L.useMemo(()=>W(lne,{setRef:_}),[]),B=L.useMemo(()=>W(VF,{files:"/imgs/wasteland_clouds_puresky_1k-V02.hdr",background:!0}),[]),O=()=>{},G=L.useRef(null),N=(F,D)=>{sc=D,HI(sc),G.current=F,f=="screenshot"&&(D.gl.preserveDrawingBuffer=!0,setTimeout(function(){Le()},100))};L.useEffect(()=>{const F=f=="profile"?"darkside":"brightside";G.current&&G.current({moveTo:F})},[f]);const k=L.useMemo(()=>{Ld=!0,console.log("update VisualsGroup!",c);let F=[];for(let D in c){let $=c[D],le=$.dataType,Se=$.visType,Te=$.dataTag,Oe=`visual--${Se}-${le}-${Te}-${D}`;$.visualID=Oe;const Be=[0,0,0];F.push(W("group",{name:Oe,position:Be,children:W(lie,{controller:A,visualData:$,index:D,ref2Set:x})},Oe))}return W(wn,{children:F})},[a]);function X(F){if(Ld){const D=Math.max(...Object.keys(en));F==D&&(Ld=!1,te())}}function te(){console.log("- - - - - - TriggerLayout!"),DS++}L.useEffect(()=>{},[DS]);const oe={position:[-1.5,12,12.5],rotation:[0,0,0]},H={phoneCover:[5,11.5,-5],userVisual:[-7,11,36.5]},[J,Q]=L.useState(!0),U=[-Math.PI/3,Math.PI/2],V=[-Math.PI/1.8,Math.PI/2.6],Z={zoom:.8,rotation:[0,0,0],polar:U,azimuth:V,snap:!1},K={zoom:.8,rotation:[0,0,0],polar:[-Math.PI,Math.PI],azimuth:[-Math.PI,Math.PI]},ne=!1;(hp||f=="screenshot")&&(z(),f=="screenshot"&&(Z.polar=[0,0],Z.azimuth=[0,0]));function z(){oe.position[0]=0,H.phoneCover[0]=0,H.phoneCover[1]=f=="screenshot"?12:13,H.userVisual[0]=-3.4}const ae=Mie({onDragEnd:()=>{Pn({phoneCover:"dragged"})}}),ie=F=>{if(F.action)switch(F.action){case"share2mobile":console.log("share 2 mobile plzzzz"),q();break;case"takescreenshot":d("screenshot");break}},[ye,re]=L.useState(""),he=F=>{F.indexOf(".png")!=-1&&re(F)};function q(){pie(c,he)}function ce(){re("")}const[Ce,ge]=L.useState(!1);L.useEffect(()=>(Ce&&(document.body.classList.add("share-mode"),gU.sharing=!0),()=>{document.body.classList.remove("share-mode")}),[Ce]);const Ae=F=>{ge(!0),d("share"),u(F),l(a+1),setTimeout(function(){t(!0)},1e3)};L.useEffect(()=>{gie(Ae)},[]);const ke=.5;L.useRef(),new Vn(Fs.w,Fs.h,ke),new nn({color:16777215,transparent:!0,opacity:.5});function ve(){const F=new j(0-Fs.w/2,H.phoneCover[1]+Fs.h/2,ke*1.65+H.phoneCover[2]),D=new j(Fs.w/2,H.phoneCover[1]-Fs.h/2,ke*1.65+H.phoneCover[2]),$=De(F),le=De(D);return{canvas_w:$.canvas_w,canvas_h:$.canvas_h,crop_x:$.x,crop_y:$.y,crop_w:le.x-$.x,crop_h:le.y-$.y}}function De(F){const D=sc.gl.domElement;F.project(sc.camera);let $=D.width,le=D.height;return F.x=Math.round((.5+F.x/2)*($/window.devicePixelRatio)),F.y=Math.round((.5-F.y/2)*(le/window.devicePixelRatio)),F.canvas_w=$,F.canvas_h=le,F}function Le(){Fte(x,"off"),setTimeout(function(){const F=ve();let D=sc.gl.domElement;D.getContext("webgl",{preserveDrawingBuffer:!0});const $=D.toDataURL("image/png"),le={coords:F,imgdata:$};M1.post(C1+"?req=getscreenshot",le,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(Se=>{const Te=Se.data;Te.indexOf("&url")!=-1&&(window.location=Te,setTimeout(function(){d("start")},100))})},100)}L.useRef(),L.useRef();const we=10;return new Vn(we,we,we),new nn({color:16711680,wireframe:!0}),Ge(wn,{children:[Ge(kk,{shadows:!0,ref:v,gl:{preserveDrawingBuffer:!0},onDoubleClick:O,onCreated:S,camera:oe,children:[W(n$,{callback:N}),Ge("group",{name:"phoneCoverPositioner",position:H.phoneCover,...ae(),children:[Ge(hR,{global:ne,zoom:Z.zoom,rotation:Z.rotation,polar:Z.polar,azimuth:Z.azimuth,snap:Z.snap,enabled:J,children:[k,R]}),P]}),f=="profile"&&W("group",{name:"phoneCoverPositioner",position:H.userVisual,...ae(),children:W(hR,{global:ne,zoom:K.zoom,rotation:K.rotation,polar:K.polar,azimuth:K.azimuth,children:W(Aie,{})})}),E,B,W("color",{args:["#cccccc"],attach:"background"})]}),W(ane,{displayMode:f,visualIndex:i,visualData:s,callBack:b,controlI:a}),f!="profile"&&Ge(wn,{children:[W(die,{callback:ie}),e&&W(uie,{})]}),ye!=""&&W(mie,{img:ye,callback:ce})]})}zn.legacyMode=!0;const JI={Februari:{1:-1,2:-1,3:-1,4:-1,5:-1,6:-1,7:-1,8:-1,9:-1,10:-1,11:-1,12:-1,13:-1,14:0,15:1,16:2,17:3,18:4,19:5,20:6,21:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14},Maart:{1:15,2:16,3:17,4:18,5:19,6:20,7:21,8:22,9:23,10:24,11:25,12:26,13:27,14:28,15:29,16:30,17:31,18:32,19:33,20:34,21:35,22:36,23:37,24:38,25:39,26:40,27:41,28:42,29:43,30:44,31:45},April:{1:46,2:47,3:48,4:49,5:50,6:51,7:52,8:53,9:54,10:55,11:56,12:57,13:58,14:59,15:60,16:61,17:62,18:63,19:64,20:65,21:66,22:67,23:68,24:69,25:70,26:71,27:72,28:73,29:74,30:75},Mei:{1:76,2:77,3:78,4:79,5:80,6:81,7:82,8:83,9:84,10:85,11:86,12:87,13:88,14:89,15:90,16:91,17:92,18:93,19:94,20:95,21:96,22:97,23:98,24:99,25:-1,26:-1,27:-1,28:-1,29:-1,30:-1,31:-1}},XI=7,gl=.3,YI=.05,Eie=new Vn(gl,gl,gl/4),u4=new nn({color:16722029}),bie=new nn({color:0}),Tie=new nn({color:14737632}),Pie=new nn({color:11635});function Rie({grid:n,ref2Set:e}){const t=au(n,!0),r=1/t.max,s=[];var o=new j;for(let a in e.current){const l=e.current[a],c=t.gridArray[a]*r;l.position.z=c;const u=new Vn(gl,gl,c-gl/4);l.getWorldPosition(o);const f=[o.x,o.y,o.z/2];s.push(Ge("group",{position:f,children:[W("mesh",{geometry:u,material:u4}),W("mesh",{geometry:u,material:bie})]},`extender-${a}`))}return s}function Iie(){L.useEffect(()=>(document.body.classList.add("calendar-page"),()=>{document.body.classList.remove("calendar-page")}),[]);const n=L.useRef(),e=L.useRef([]),t=L.useMemo(()=>W(pU,{}),[]);L.useMemo(()=>W(mU,{}),[]);const i=L.useMemo(()=>W(VF,{files:"/imgs/wasteland_clouds_puresky_1k.hdr",background:!0}),[]),r=L.useMemo(()=>{const v=[];let x=0;for(let y in JI){const S=JI[y],A=[],P=W(Sf,{material:Tv,font:"./../fonts/TASA_Orbiter_Display_Black.json",size:.25,height:.02,position:[-.15,.3,0],rotation:[0,0,0],children:y});let E=0;for(let k in S){const X=S[k],te=X==-1?Tie:u4,oe=E%XI,H=oe*gl+oe*YI,J=0-Math.floor(E/XI)*(gl+YI),Q=[H,J,0],V=W(Sf,{material:Pie,font:"./../fonts/TASA_Orbiter_Display_Regular.json",size:.07,height:.01,position:[-.12,.05,.04],children:k}),Z=`dayBox-${y}-${k}`;let K=null;if(X!=-1){const ae=[0,-.1,.04];let ie=X+1;K=W(Sf,{material:Tv,font:"./../fonts/TASA_Orbiter_Display_Black.json",size:.07,height:.001,position:ae,children:ie})}const ne=Ge("mesh",{castShadow:!0,receiveShadow:!0,geometry:Eie,material:te,children:[V,K]});let z;X==-1?z=W("group",{position:Q,children:ne},Z):z=W("group",{name:`day-box-${X}`,ref:ae=>e.current[X]=ae,position:Q,children:ne},Z),A.push(z),E++}const B=x%2*2.6,O=x<2?0:-2.4,N=Ge("group",{position:[B,O,0],children:[P,A]},`month-group-${y}`);v.push(N),x++}return W("group",{ref:n,position:[0,2.4,0],children:v})},[]),s={minDistance:4},[o,a]=L.useState(!1),l=v=>{a(v)},u=o?W("button",{onClick:v=>{a(null);for(let _ of e.current)_.position.z=0},id:"resetGridBtn",children:"Reset"}):null,[f,d]=L.useState(),m=v=>{d(v.dataTag)};let g;return f&&(g=Ge(Sf,{material:Tv,font:"./../fonts/TASA_Orbiter_Display_Black.json",size:.25,height:.02,position:[4.4,-1.6,0],children:["#",f]})),Ge(wn,{children:[Ge("div",{className:"calendar-ui",children:[u,W(yU,{context:"r3f",mode:"hashtag",loadVal:f,dataLoaded:l}),W(rM,{dataType:"hashtag",callBack:m})]}),Ge(kk,{children:[W(Zq,{focusObject:n,customSettings:s}),t,r,o&&Ge(wn,{children:[W(Rie,{grid:o.num_per_day,ref2Set:e}),g]}),i,W("color",{args:[15724527],attach:"background"})]})]})}function Bie(){return Pn({started:"app"}),W(cG,{children:Ge("div",{id:"app-wrap",children:[W("aside",{children:Ge("nav",{children:[W(XT,{to:"/calendar",children:"Kalender"}),W(XT,{to:"/phone",children:"Telefoon"})]})}),W("main",{children:Ge(iG,{children:[W(uv,{path:"/",element:W(dG,{})}),W(uv,{path:"/phone",element:W(Cie,{})}),W(uv,{path:"/calendar",element:W(Iie,{})})]})})]})})}const Die=LS.createRoot(document.querySelector("#root"));Die.render(W(Bn.StrictMode,{children:W(Bie,{})}));
//# sourceMappingURL=index-940fe6eb.js.map
